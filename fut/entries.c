// Generated by Futhark 0.22.0
// git: 5b2a4d5 (Fri Mar 25 09:00:58 2022 +0100) [modified]

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s);
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path);
void
futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                         const char *path);
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path);
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path);
void
futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                              int size);
void
futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                              int num);
void
futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                             int num);
void
futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                 int num);
void
futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                             int num);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t new_value);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
CUdeviceptr futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                      struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_randomField(struct futhark_context *ctx,
                              struct futhark_f32_2d **out0, const int64_t in0,
                              const int64_t in1, const int64_t in2);
int futhark_entry_sortBag(struct futhark_context *ctx,
                          struct futhark_f32_2d **out0,
                          struct futhark_f32_2d **out1, const
                          struct futhark_f32_2d *in0, const
                          struct futhark_f32_2d *in1);
int futhark_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                    struct futhark_f32_2d **out0,
                                    struct futhark_f32_2d **out1,
                                    struct futhark_f32_1d **out2,
                                    struct futhark_f32_1d **out3, const
                                    struct futhark_f32_2d *in0, const
                                    struct futhark_f32_2d *in1);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_cuda
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

static int lexical_realloc(char **error, unsigned char **ptr, size_t *old_size, size_t new_size) {
  unsigned char *new = realloc(*ptr, new_size);
  if (new == NULL) {
    *error = msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                       (long long) new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>


#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>


// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

static inline int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

static inline uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f32_bool(float x) {
  return x != 0;
}

static inline float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

static inline bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

static inline f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
static int32_t sortBagziid_counter_mem_realtype_20318[1];
static int32_t sortBagAndDoStuffziid_counter_mem_realtype_20444[1];
static int32_t sortBagAndDoStuffzicounter_mem_realtype_20489[10240];
static int32_t sortBagAndDoStuffzicounter_mem_realtype_20522[10240];
struct memblock_device {
    int *references;
    CUdeviceptr mem;
    int64_t size;
    const char *desc;
};
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
#include <cuda.h>
#include <nvrtc.h>
typedef CUdeviceptr fl_mem_t;
// Start of free_list.h.

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem_t mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries;        // Pointer to entries.
  int capacity;                           // Number of entries.
  int used;                               // Number of valid entries.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
}

static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem_t mem, const char *tag) {
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size,
                          size_t *size_out, fl_mem_t *mem_out) {
  int size_match = -1;
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid &&
        size <= l->entries[i].size &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    return 0;
  } else {
    return 1;
  }
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem_t *mem_out) {
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

// End of free_list.h.

// Start of cuda.h.

#define CUDA_SUCCEED_FATAL(x) cuda_api_succeed_fatal(x, #x, __FILE__, __LINE__)
#define CUDA_SUCCEED_NONFATAL(x) cuda_api_succeed_nonfatal(x, #x, __FILE__, __LINE__)
#define NVRTC_SUCCEED_FATAL(x) nvrtc_api_succeed_fatal(x, #x, __FILE__, __LINE__)
#define NVRTC_SUCCEED_NONFATAL(x) nvrtc_api_succeed_nonfatal(x, #x, __FILE__, __LINE__)
// Take care not to override an existing error.
#define CUDA_SUCCEED_OR_RETURN(e) {               \
    char *serror = CUDA_SUCCEED_NONFATAL(e);      \
    if (serror) {                                 \
      if (!ctx->error) {                          \
        ctx->error = serror;                      \
        return bad;                               \
      } else {                                    \
        free(serror);                             \
      }                                           \
    }                                             \
  }

// CUDA_SUCCEED_OR_RETURN returns the value of the variable 'bad' in
// scope.  By default, it will be this one.  Create a local variable
// of some other type if needed.  This is a bit of a hack, but it
// saves effort in the code generator.
static const int bad = 1;

static inline void cuda_api_succeed_fatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    futhark_panic(-1, "%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

static char* cuda_api_succeed_nonfatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    return msgprintf("%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  } else {
    return NULL;
  }
}

static inline void nvrtc_api_succeed_fatal(nvrtcResult res, const char *call,
                                           const char *file, int line) {
  if (res != NVRTC_SUCCESS) {
    const char *err_str = nvrtcGetErrorString(res);
    futhark_panic(-1, "%s:%d: NVRTC call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

static char* nvrtc_api_succeed_nonfatal(nvrtcResult res, const char *call,
                                        const char *file, int line) {
  if (res != NVRTC_SUCCESS) {
    const char *err_str = nvrtcGetErrorString(res);
    return msgprintf("%s:%d: NVRTC call\n  %s\nfailed with error code %d (%s)\n",
                     file, line, call, res, err_str);
  } else {
    return NULL;
  }
}

struct cuda_config {
  int debugging;
  int logging;
  const char *preferred_device;
  int preferred_device_num;

  const char *dump_program_to;
  const char *load_program_from;

  const char *dump_ptx_to;
  const char *load_ptx_from;

  size_t default_block_size;
  size_t default_grid_size;
  size_t default_tile_size;
  size_t default_reg_tile_size;
  size_t default_threshold;

  int default_block_size_changed;
  int default_grid_size_changed;
  int default_tile_size_changed;

  int num_sizes;
  const char **size_names;
  const char **size_vars;
  int64_t *size_values;
  const char **size_classes;
};

static void cuda_config_init(struct cuda_config *cfg,
                             int num_sizes,
                             const char *size_names[],
                             const char *size_vars[],
                             int64_t *size_values,
                             const char *size_classes[]) {
  cfg->debugging = 0;
  cfg->logging = 0;
  cfg->preferred_device_num = 0;
  cfg->preferred_device = "";
  cfg->dump_program_to = NULL;
  cfg->load_program_from = NULL;

  cfg->dump_ptx_to = NULL;
  cfg->load_ptx_from = NULL;

  cfg->default_block_size = 256;
  cfg->default_grid_size = 0; // Set properly later.
  cfg->default_tile_size = 32;
  cfg->default_reg_tile_size = 2;
  cfg->default_threshold = 32*1024;

  cfg->default_block_size_changed = 0;
  cfg->default_grid_size_changed = 0;
  cfg->default_tile_size_changed = 0;

  cfg->num_sizes = num_sizes;
  cfg->size_names = size_names;
  cfg->size_vars = size_vars;
  cfg->size_values = size_values;
  cfg->size_classes = size_classes;
}

// A record of something that happened.
struct profiling_record {
  cudaEvent_t *events; // Points to two events.
  int *runs;
  int64_t *runtime;
};

struct cuda_context {
  CUdevice dev;
  CUcontext cu_ctx;
  CUmodule module;

  struct cuda_config cfg;

  struct free_list free_list;

  size_t max_block_size;
  size_t max_grid_size;
  size_t max_tile_size;
  size_t max_threshold;
  size_t max_shared_memory;
  size_t max_bespoke;

  size_t lockstep_width;

  struct profiling_record *profiling_records;
  int profiling_records_capacity;
  int profiling_records_used;
};

#define CU_DEV_ATTR(x) (CU_DEVICE_ATTRIBUTE_##x)
#define device_query(dev,attrib) _device_query(dev, CU_DEV_ATTR(attrib))
static int _device_query(CUdevice dev, CUdevice_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuDeviceGetAttribute(&val, attrib, dev));
  return val;
}

#define CU_FUN_ATTR(x) (CU_FUNC_ATTRIBUTE_##x)
#define function_query(fn,attrib) _function_query(dev, CU_FUN_ATTR(attrib))
static int _function_query(CUfunction dev, CUfunction_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuFuncGetAttribute(&val, attrib, dev));
  return val;
}

static void set_preferred_device(struct cuda_config *cfg, const char *s) {
  int x = 0;
  if (*s == '#') {
    s++;
    while (isdigit(*s)) {
      x = x * 10 + (*s++)-'0';
    }
    // Skip trailing spaces.
    while (isspace(*s)) {
      s++;
    }
  }
  cfg->preferred_device = s;
  cfg->preferred_device_num = x;
}

static int cuda_device_setup(struct cuda_context *ctx) {
  char name[256];
  int count, chosen = -1, best_cc = -1;
  int cc_major_best, cc_minor_best;
  int cc_major, cc_minor;
  CUdevice dev;

  CUDA_SUCCEED_FATAL(cuDeviceGetCount(&count));
  if (count == 0) { return 1; }

  int num_device_matches = 0;

  // XXX: Current device selection policy is to choose the device with the
  // highest compute capability (if no preferred device is set).
  // This should maybe be changed, since greater compute capability is not
  // necessarily an indicator of better performance.
  for (int i = 0; i < count; i++) {
    CUDA_SUCCEED_FATAL(cuDeviceGet(&dev, i));

    cc_major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
    cc_minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

    CUDA_SUCCEED_FATAL(cuDeviceGetName(name, sizeof(name) - 1, dev));
    name[sizeof(name) - 1] = 0;

    if (ctx->cfg.debugging) {
      fprintf(stderr, "Device #%d: name=\"%s\", compute capability=%d.%d\n",
          i, name, cc_major, cc_minor);
    }

    if (device_query(dev, COMPUTE_MODE) == CU_COMPUTEMODE_PROHIBITED) {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "Device #%d is compute-prohibited, ignoring\n", i);
      }
      continue;
    }

    if (best_cc == -1 || cc_major > cc_major_best ||
        (cc_major == cc_major_best && cc_minor > cc_minor_best)) {
      best_cc = i;
      cc_major_best = cc_major;
      cc_minor_best = cc_minor;
    }

    if (strstr(name, ctx->cfg.preferred_device) != NULL &&
        num_device_matches++ == ctx->cfg.preferred_device_num) {
      chosen = i;
      break;
    }
  }

  if (chosen == -1) { chosen = best_cc; }
  if (chosen == -1) { return 1; }

  if (ctx->cfg.debugging) {
    fprintf(stderr, "Using device #%d\n", chosen);
  }

  CUDA_SUCCEED_FATAL(cuDeviceGet(&ctx->dev, chosen));
  return 0;
}

static char *concat_fragments(const char *src_fragments[]) {
  size_t src_len = 0;
  const char **p;

  for (p = src_fragments; *p; p++) {
    src_len += strlen(*p);
  }

  char *src = (char*) malloc(src_len + 1);
  size_t n = 0;
  for (p = src_fragments; *p; p++) {
    strcpy(src + n, *p);
    n += strlen(*p);
  }

  return src;
}

static const char *cuda_nvrtc_get_arch(CUdevice dev) {
  struct {
    int major;
    int minor;
    const char *arch_str;
  } static const x[] = {
    { 3, 0, "compute_30" },
    { 3, 2, "compute_32" },
    { 3, 5, "compute_35" },
    { 3, 7, "compute_37" },
    { 5, 0, "compute_50" },
    { 5, 2, "compute_52" },
    { 5, 3, "compute_53" },
    { 6, 0, "compute_60" },
    { 6, 1, "compute_61" },
    { 6, 2, "compute_62" },
    { 7, 0, "compute_70" },
    { 7, 2, "compute_72" },
    { 7, 5, "compute_75" },
    { 8, 0, "compute_80" }
  };

  int major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
  int minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

  int chosen = -1;
  for (int i = 0; i < sizeof(x)/sizeof(x[0]); i++) {
    if (x[i].major < major || (x[i].major == major && x[i].minor <= minor)) {
      chosen = i;
    } else {
      break;
    }
  }

  if (chosen == -1) {
    futhark_panic(-1, "Unsupported compute capability %d.%d\n", major, minor);
  }

  if (x[chosen].major != major || x[chosen].minor != minor) {
    fprintf(stderr,
            "Warning: device compute capability is %d.%d, but newest supported by Futhark is %d.%d.\n",
            major, minor, x[chosen].major, x[chosen].minor);
  }

  return x[chosen].arch_str;
}

static char* cuda_nvrtc_build(struct cuda_context *ctx, const char *src,
                              const char *extra_opts[], char **ptx) {
  nvrtcProgram prog;
  char *problem = NULL;

  problem = NVRTC_SUCCEED_NONFATAL(nvrtcCreateProgram(&prog, src, "futhark-cuda", 0, NULL, NULL));

  if (problem) {
    return problem;
  }

  int arch_set = 0, num_extra_opts;

  // nvrtc cannot handle multiple -arch options.  Hence, if one of the
  // extra_opts is -arch, we have to be careful not to do our usual
  // automatic generation.
  for (num_extra_opts = 0; extra_opts[num_extra_opts] != NULL; num_extra_opts++) {
    if (strstr(extra_opts[num_extra_opts], "-arch")
        == extra_opts[num_extra_opts] ||
        strstr(extra_opts[num_extra_opts], "--gpu-architecture")
        == extra_opts[num_extra_opts]) {
      arch_set = 1;
    }
  }

  size_t n_opts, i = 0, i_dyn, n_opts_alloc = 20 + num_extra_opts + ctx->cfg.num_sizes;
  const char **opts = (const char**) malloc(n_opts_alloc * sizeof(const char *));
  if (!arch_set) {
    opts[i++] = "-arch";
    opts[i++] = cuda_nvrtc_get_arch(ctx->dev);
  }
  opts[i++] = "-default-device";
  if (ctx->cfg.debugging) {
    opts[i++] = "-G";
    opts[i++] = "-lineinfo";
  } else {
    opts[i++] = "--disable-warnings";
  }
  i_dyn = i;
  for (size_t j = 0; j < ctx->cfg.num_sizes; j++) {
    opts[i++] = msgprintf("-D%s=%zu", ctx->cfg.size_vars[j],
        ctx->cfg.size_values[j]);
  }
  opts[i++] = msgprintf("-DLOCKSTEP_WIDTH=%zu", ctx->lockstep_width);
  opts[i++] = msgprintf("-DMAX_THREADS_PER_BLOCK=%zu", ctx->max_block_size);

  // Time for the best lines of the code in the entire compiler.
  if (getenv("CUDA_HOME") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_HOME"));
  }
  if (getenv("CUDA_ROOT") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_ROOT"));
  }
  if (getenv("CUDA_PATH") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_PATH"));
  }
  opts[i++] = msgprintf("-I/usr/local/cuda/include");
  opts[i++] = msgprintf("-I/usr/include");

  // It is crucial that the extra_opts are last, so that the free()
  // logic below does not cause problems.
  for (int j = 0; extra_opts[j] != NULL; j++) {
    opts[i++] = extra_opts[j];
  }

  n_opts = i;

  if (ctx->cfg.debugging) {
    fprintf(stderr, "NVRTC compile options:\n");
    for (size_t j = 0; j < n_opts; j++) {
      fprintf(stderr, "\t%s\n", opts[j]);
    }
    fprintf(stderr, "\n");
  }

  nvrtcResult res = nvrtcCompileProgram(prog, n_opts, opts);
  if (res != NVRTC_SUCCESS) {
    size_t log_size;
    if (nvrtcGetProgramLogSize(prog, &log_size) == NVRTC_SUCCESS) {
      char *log = (char*) malloc(log_size);
      if (nvrtcGetProgramLog(prog, log) == NVRTC_SUCCESS) {
        problem = msgprintf("NVRTC compilation failed.\n\n%s\n", log);
      } else {
        problem = msgprintf("Could not retrieve compilation log\n");
      }
      free(log);
    }
    return problem;
  }

  for (i = i_dyn; i < n_opts-num_extra_opts; i++) { free((char *)opts[i]); }
  free(opts);

  size_t ptx_size;
  NVRTC_SUCCEED_FATAL(nvrtcGetPTXSize(prog, &ptx_size));
  *ptx = (char*) malloc(ptx_size);
  NVRTC_SUCCEED_FATAL(nvrtcGetPTX(prog, *ptx));

  NVRTC_SUCCEED_FATAL(nvrtcDestroyProgram(&prog));

  return NULL;
}

static void cuda_size_setup(struct cuda_context *ctx)
{
  if (ctx->cfg.default_block_size > ctx->max_block_size) {
    if (ctx->cfg.default_block_size_changed) {
      fprintf(stderr,
          "Note: Device limits default block size to %zu (down from %zu).\n",
          ctx->max_block_size, ctx->cfg.default_block_size);
    }
    ctx->cfg.default_block_size = ctx->max_block_size;
  }
  if (ctx->cfg.default_grid_size > ctx->max_grid_size) {
    if (ctx->cfg.default_grid_size_changed) {
      fprintf(stderr,
          "Note: Device limits default grid size to %zu (down from %zu).\n",
          ctx->max_grid_size, ctx->cfg.default_grid_size);
    }
    ctx->cfg.default_grid_size = ctx->max_grid_size;
  }
  if (ctx->cfg.default_tile_size > ctx->max_tile_size) {
    if (ctx->cfg.default_tile_size_changed) {
      fprintf(stderr,
          "Note: Device limits default tile size to %zu (down from %zu).\n",
          ctx->max_tile_size, ctx->cfg.default_tile_size);
    }
    ctx->cfg.default_tile_size = ctx->max_tile_size;
  }

  if (!ctx->cfg.default_grid_size_changed) {
    ctx->cfg.default_grid_size =
      (device_query(ctx->dev, MULTIPROCESSOR_COUNT) *
       device_query(ctx->dev, MAX_THREADS_PER_MULTIPROCESSOR))
      / ctx->cfg.default_block_size;
  }

  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    const char *size_class = ctx->cfg.size_classes[i];
    int64_t *size_value = &ctx->cfg.size_values[i];
    const char* size_name = ctx->cfg.size_names[i];
    int64_t max_value = 0, default_value = 0;

    if (strstr(size_class, "group_size") == size_class) {
      max_value = ctx->max_block_size;
      default_value = ctx->cfg.default_block_size;
    } else if (strstr(size_class, "num_groups") == size_class) {
      max_value = ctx->max_grid_size;
      default_value = ctx->cfg.default_grid_size;
      // XXX: as a quick and dirty hack, use twice as many threads for
      // histograms by default.  We really should just be smarter
      // about sizes somehow.
      if (strstr(size_name, ".seghist_") != NULL) {
        default_value *= 2;
      }
    } else if (strstr(size_class, "tile_size") == size_class) {
      max_value = ctx->max_tile_size;
      default_value = ctx->cfg.default_tile_size;
    } else if (strstr(size_class, "reg_tile_size") == size_class) {
      max_value = 0; // No limit.
      default_value = ctx->cfg.default_reg_tile_size;
    } else if (strstr(size_class, "threshold") == size_class) {
      // Threshold can be as large as it takes.
      default_value = ctx->cfg.default_threshold;
    } else {
      // Bespoke sizes have no limit or default.
    }

    if (*size_value == 0) {
      *size_value = default_value;
    } else if (max_value > 0 && *size_value > max_value) {
      fprintf(stderr, "Note: Device limits %s to %zu (down from %zu)\n",
              size_name, max_value, *size_value);
      *size_value = max_value;
    }
  }
}

static char* cuda_module_setup(struct cuda_context *ctx,
                               const char *src_fragments[],
                               const char *extra_opts[]) {
  char *ptx = NULL, *src = NULL;

  if (ctx->cfg.load_program_from == NULL) {
    src = concat_fragments(src_fragments);
  } else {
    src = slurp_file(ctx->cfg.load_program_from, NULL);
  }

  if (ctx->cfg.load_ptx_from) {
    if (ctx->cfg.load_program_from != NULL) {
      fprintf(stderr,
              "WARNING: Using PTX from %s instead of C code from %s\n",
              ctx->cfg.load_ptx_from, ctx->cfg.load_program_from);
    }
    ptx = slurp_file(ctx->cfg.load_ptx_from, NULL);
  }

  if (ctx->cfg.dump_program_to != NULL) {
    dump_file(ctx->cfg.dump_program_to, src, strlen(src));
  }

  if (ptx == NULL) {
    char* problem = cuda_nvrtc_build(ctx, src, extra_opts, &ptx);
    if (problem != NULL) {
      free(src);
      return problem;
    }
  }

  if (ctx->cfg.dump_ptx_to != NULL) {
    dump_file(ctx->cfg.dump_ptx_to, ptx, strlen(ptx));
  }

  CUDA_SUCCEED_FATAL(cuModuleLoadData(&ctx->module, ptx));

  free(ptx);
  if (src != NULL) {
    free(src);
  }

  return NULL;
}

static char* cuda_setup(struct cuda_context *ctx, const char *src_fragments[], const char *extra_opts[]) {
  CUDA_SUCCEED_FATAL(cuInit(0));

  if (cuda_device_setup(ctx) != 0) {
    futhark_panic(-1, "No suitable CUDA device found.\n");
  }
  CUDA_SUCCEED_FATAL(cuCtxCreate(&ctx->cu_ctx, 0, ctx->dev));

  free_list_init(&ctx->free_list);

  ctx->max_shared_memory = device_query(ctx->dev, MAX_SHARED_MEMORY_PER_BLOCK);
  ctx->max_block_size = device_query(ctx->dev, MAX_THREADS_PER_BLOCK);
  ctx->max_grid_size = device_query(ctx->dev, MAX_GRID_DIM_X);
  ctx->max_tile_size = sqrt(ctx->max_block_size);
  ctx->max_threshold = 0;
  ctx->max_bespoke = 0;
  ctx->lockstep_width = device_query(ctx->dev, WARP_SIZE);

  cuda_size_setup(ctx);
  return cuda_module_setup(ctx, src_fragments, extra_opts);
}

// Count up the runtime all the profiling_records that occured during execution.
// Also clears the buffer of profiling_records.
static cudaError_t cuda_tally_profiling_records(struct cuda_context *ctx) {
  cudaError_t err;
  for (int i = 0; i < ctx->profiling_records_used; i++) {
    struct profiling_record record = ctx->profiling_records[i];

    float ms;
    if ((err = cudaEventElapsedTime(&ms, record.events[0], record.events[1])) != cudaSuccess) {
      return err;
    }

    // CUDA provides milisecond resolution, but we want microseconds.
    *record.runs += 1;
    *record.runtime += ms*1000;

    if ((err = cudaEventDestroy(record.events[0])) != cudaSuccess) {
      return err;
    }
    if ((err = cudaEventDestroy(record.events[1])) != cudaSuccess) {
      return err;
    }

    free(record.events);
  }

  ctx->profiling_records_used = 0;

  return cudaSuccess;
}

// Returns pointer to two events.
static cudaEvent_t* cuda_get_events(struct cuda_context *ctx, int *runs, int64_t *runtime) {
    if (ctx->profiling_records_used == ctx->profiling_records_capacity) {
      ctx->profiling_records_capacity *= 2;
      ctx->profiling_records =
        realloc(ctx->profiling_records,
                ctx->profiling_records_capacity *
                sizeof(struct profiling_record));
    }
    cudaEvent_t *events = calloc(2, sizeof(cudaEvent_t));
    cudaEventCreate(&events[0]);
    cudaEventCreate(&events[1]);
    ctx->profiling_records[ctx->profiling_records_used].events = events;
    ctx->profiling_records[ctx->profiling_records_used].runs = runs;
    ctx->profiling_records[ctx->profiling_records_used].runtime = runtime;
    ctx->profiling_records_used++;
    return events;
}

static CUresult cuda_free_all(struct cuda_context *ctx);

static void cuda_cleanup(struct cuda_context *ctx) {
  CUDA_SUCCEED_FATAL(cuda_free_all(ctx));
  (void)cuda_tally_profiling_records(ctx);
  free(ctx->profiling_records);
  CUDA_SUCCEED_FATAL(cuModuleUnload(ctx->module));
  CUDA_SUCCEED_FATAL(cuCtxDestroy(ctx->cu_ctx));
}

static CUresult cuda_alloc(struct cuda_context *ctx, FILE *log,
                           size_t min_size, const char *tag, CUdeviceptr *mem_out) {
  if (min_size < sizeof(int)) {
    min_size = sizeof(int);
  }

  size_t size;
  if (free_list_find(&ctx->free_list, min_size, &size, mem_out) == 0) {
    if (size >= min_size) {
      if (ctx->cfg.debugging) {
        fprintf(log, "No need to allocate: Found a block in the free list.\n");
      }
      return CUDA_SUCCESS;
    } else {
      if (ctx->cfg.debugging) {
        fprintf(log, "Found a free block, but it was too small.\n");
      }

      CUresult res = cuMemFree(*mem_out);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    }
  }

  if (ctx->cfg.debugging) {
    fprintf(log, "Actually allocating the desired block.\n");
  }

  CUresult res = cuMemAlloc(mem_out, min_size);
  while (res == CUDA_ERROR_OUT_OF_MEMORY) {
    CUdeviceptr mem;
    if (free_list_first(&ctx->free_list, &mem) == 0) {
      res = cuMemFree(mem);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    } else {
      break;
    }
    res = cuMemAlloc(mem_out, min_size);
  }

  return res;
}

static CUresult cuda_free(struct cuda_context *ctx, CUdeviceptr mem,
                          const char *tag) {
  size_t size;
  CUdeviceptr existing_mem;

  // If there is already a block with this tag, then remove it.
  if (free_list_find(&ctx->free_list, -1, &size, &existing_mem) == 0) {
    CUresult res = cuMemFree(existing_mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  CUresult res = cuMemGetAddressRange(NULL, &size, mem);
  if (res == CUDA_SUCCESS) {
    free_list_insert(&ctx->free_list, size, mem, tag);
  }

  return res;
}

static CUresult cuda_free_all(struct cuda_context *ctx) {
  CUdeviceptr mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, &mem) == 0) {
    CUresult res = cuMemFree(mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  return CUDA_SUCCESS;
}

// End of cuda.h.

const char *cuda_program[] =
           {"\n#define FUTHARK_CUDA\n#define FUTHARK_F64_ENABLED\n\ntypedef char int8_t;\ntypedef short int16_t;\ntypedef int int32_t;\ntypedef long long int64_t;\ntypedef unsigned char uint8_t;\ntypedef unsigned short uint16_t;\ntypedef unsigned int uint32_t;\ntypedef unsigned long long uint64_t;\ntypedef uint8_t uchar;\ntypedef uint16_t ushort;\ntypedef uint32_t uint;\ntypedef uint64_t ulong;\n#define __kernel extern \"C\" __global__ __launch_bounds__(MAX_THREADS_PER_BLOCK)\n#define __global\n#define __local\n#define __private\n#define __constant\n#define __write_only\n#define __read_only\n\nstatic inline int get_group_id_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  switch (d) {\n    case 0: d = block_dim0; break;\n    case 1: d = block_dim1; break;\n    case 2: d = block_dim2; break;\n  }\n  switch (d) {\n    case 0: return blockIdx.x;\n    case 1: return blockIdx.y;\n    case 2: return blockIdx.z;\n    default: return 0;\n  }\n}\n#define get_group_id(d) get_group_id_fn(block_dim0, block_dim1, block_dim2, d)\n\nstatic inline int get_num_groups_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  switch (d) {\n    case 0: d = block_dim0; break;\n    case 1: d = block_dim1; break;\n    case 2: d = block_dim2; break;\n  }\n  switch(d) {\n    case 0: return gridDim.x;\n    case 1: return gridDim.y;\n    case 2: return gridDim.z;\n    default: return 0;\n  }\n}\n#define get_num_groups(d) get_num_groups_fn(block_dim0, block_dim1, block_dim2, d)\n\nstatic inline int get_local_id(int d) {\n  switch (d) {\n    case 0: return threadIdx.x;\n    case 1: return threadIdx.y;\n    case 2: return threadIdx.z;\n    default: return 0;\n  }\n}\n\nstatic inline int get_local_size(int d) {\n  switch (d) {\n    case 0: return blockDim.x;\n    case 1: return blockDim.y;\n    case 2: return blockDim.z;\n    default: return 0;\n  }\n}\n\nstatic inline int get_global_id_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  return get_group_id(d) * get_local_size(d) + get_local_id(d);\n}\n#define get_global_id(d) get_global_id_fn(block_dim0,",
            " block_dim1, block_dim2, d)\n\nstatic inline int get_global_size(int block_dim0, int block_dim1, int block_dim2, int d) {\n  return get_num_groups(d) * get_local_size(d);\n}\n\n#define CLK_LOCAL_MEM_FENCE 1\n#define CLK_GLOBAL_MEM_FENCE 2\nstatic inline void barrier(int x) {\n  __syncthreads();\n}\nstatic inline void mem_fence_local() {\n  __threadfence_block();\n}\nstatic inline void mem_fence_global() {\n  __threadfence();\n}\n\n#define NAN (0.0/0.0)\n#define INFINITY (1.0/0.0)\nextern volatile __shared__ unsigned char shared_mem[];\n// Start of half.h.\n\n// Conversion functions are from http://half.sourceforge.net/, but\n// translated to C.\n//\n// Copyright (c) 2012-2021 Christian Rau\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#ifndef __OPENCL_VERSION__\n#define __constant\n#endif\n\n__constant static const uint16_t base_table[512] = {\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x00",
            "00, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,\n  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,\n  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000",
            ", 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,\n  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,\n  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, ",
            "0xFC00, 0xFC00 };\n\n__constant static const unsigned char shift_table[512] = {\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\n  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\n  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, ",
            "24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };\n\n__constant static const uint32_t mantissa_table[2048] = {\n  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,\n  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,\n  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,\n  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,\n  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,\n  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,\n  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,\n  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,\n  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,\n  0x37100000, 0x37110000, 0x3712000",
            "0, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,\n  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,\n  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,\n  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,\n  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,\n  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,\n  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,\n  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,\n  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,\n  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,\n  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B800",
            "0, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,\n  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,\n  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,\n  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,\n  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,\n  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,\n  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,\n  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,\n  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,\n  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,\n  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE000",
            "0, 0x37EE8000, 0x37EF0000, 0x37EF8000,\n  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,\n  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,\n  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,\n  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,\n  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,\n  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,\n  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,\n  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,\n  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,\n  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,\n  0x38200000, 0x38204",
            "000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,\n  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,\n  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,\n  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,\n  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,\n  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,\n  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,\n  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,\n  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,\n  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,\n  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498",
            "000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,\n  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,\n  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,\n  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,\n  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,\n  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,\n  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,\n  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,\n  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,\n  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,\n  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C",
            "000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,\n  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,\n  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,\n  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,\n  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,\n  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,\n  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,\n  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,\n  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,\n  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,\n  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,\n  0x380",
            "E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,\n  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,\n  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,\n  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,\n  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,\n  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,\n  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,\n  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,\n  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,\n  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,\n  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x382",
            "2A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,\n  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,\n  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,\n  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,\n  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,\n  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,\n  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,\n  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,\n  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,\n  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,\n  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x383",
            "74000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,\n  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,\n  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,\n  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,\n  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,\n  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,\n  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,\n  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,\n  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,\n  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,\n  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384",
            "BE000,\n  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,\n  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,\n  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,\n  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,\n  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,\n  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,\n  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,\n  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,\n  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,\n  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,\n  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x3",
            "8608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,\n  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,\n  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,\n  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,\n  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,\n  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,\n  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,\n  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,\n  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,\n  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,\n  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x3",
            "8752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,\n  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,\n  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,\n  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,\n  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,\n  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };\n__constant static const uint32_t exponent_table[64] = {\n  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,\n  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,\n  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,\n  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };\n__constant static const unsigned short offset_table[64] = {\n  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, ",
            "1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,\n  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };\n\nstatic uint16_t float2halfbits(float value) {\n  union { float x; uint32_t y; } u;\n  u.x = value;\n  uint32_t bits = u.y;\n\n  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;\n\n  return hbits;\n}\n\nstatic float halfbits2float(uint16_t value) {\n  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];\n\n  union { uint32_t x; float y; } u;\n  u.x = bits;\n  return u.y;\n}\n\n// End of half.h.\n// Start of scalar.h.\n\n// Implementation of the primitive scalar operations.  Very\n// repetitive.  This code is inserted directly into both CUDA and\n// OpenCL programs, as well as the CPU code, so it has some #ifdefs to\n// work everywhere.  Some operations are defined as macros because\n// this allows us to use them as constant expressions in things like\n// array sizes and static initialisers.\n\n// Some of the #ifdefs are because OpenCL uses type-generic functions\n// for some operations (e.g. sqrt), while C and CUDA sensibly use\n// distinct functions for different precisions (e.g. sqrtf() and\n// sqrt()).  This is quite annoying.  Due to C's unfortunate casting\n// rules, it is also really easy to accidentally implement\n// floating-point functions in the wrong precision, so be careful.\n\n// Double-precision definitions are only included if the preprocessor\n// macro FUTHARK_F64_ENABLED is set.\n\nstatic inline uint8_t add8(uint8_t x, uint8_t y) {\n  return x + y;\n}\n\nstatic inline uint16_t add16(uint16_t x, uint16_t y) {\n  return x + y;\n}\n\nstatic inline uint32_t add32(uint32_t x, uint32_t y) {\n  return x + y;\n}\n\nstatic inline uint64_t add64(uint64_t x, uint64_t y) {\n  return x + y;\n}\n\nstati",
            "c inline uint8_t sub8(uint8_t x, uint8_t y) {\n  return x - y;\n}\n\nstatic inline uint16_t sub16(uint16_t x, uint16_t y) {\n  return x - y;\n}\n\nstatic inline uint32_t sub32(uint32_t x, uint32_t y) {\n  return x - y;\n}\n\nstatic inline uint64_t sub64(uint64_t x, uint64_t y) {\n  return x - y;\n}\n\nstatic inline uint8_t mul8(uint8_t x, uint8_t y) {\n  return x * y;\n}\n\nstatic inline uint16_t mul16(uint16_t x, uint16_t y) {\n  return x * y;\n}\n\nstatic inline uint32_t mul32(uint32_t x, uint32_t y) {\n  return x * y;\n}\n\nstatic inline uint64_t mul64(uint64_t x, uint64_t y) {\n  return x * y;\n}\n\nstatic inline uint8_t udiv8(uint8_t x, uint8_t y) {\n  return x / y;\n}\n\nstatic inline uint16_t udiv16(uint16_t x, uint16_t y) {\n  return x / y;\n}\n\nstatic inline uint32_t udiv32(uint32_t x, uint32_t y) {\n  return x / y;\n}\n\nstatic inline uint64_t udiv64(uint64_t x, uint64_t y) {\n  return x / y;\n}\n\nstatic inline uint8_t udiv_up8(uint8_t x, uint8_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint16_t udiv_up16(uint16_t x, uint16_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint32_t udiv_up32(uint32_t x, uint32_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint64_t udiv_up64(uint64_t x, uint64_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint8_t umod8(uint8_t x, uint8_t y) {\n  return x % y;\n}\n\nstatic inline uint16_t umod16(uint16_t x, uint16_t y) {\n  return x % y;\n}\n\nstatic inline uint32_t umod32(uint32_t x, uint32_t y) {\n  return x % y;\n}\n\nstatic inline uint64_t umod64(uint64_t x, uint64_t y) {\n  return x % y;\n}\n\nstatic inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inli",
            "ne uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint8_t umod_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint16_t umod_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint32_t umod_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint64_t umod_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int8_t sdiv8(int8_t x, int8_t y) {\n  int8_t q = x / y;\n  int8_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int16_t sdiv16(int16_t x, int16_t y) {\n  int16_t q = x / y;\n  int16_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int32_t sdiv32(int32_t x, int32_t y) {\n  int32_t q = x / y;\n  int32_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int64_t sdiv64(int64_t x, int64_t y) {\n  int64_t q = x / y;\n  int64_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int8_t sdiv_up8(int8_t x, int8_t y) {\n  return sdiv8(x + y - 1, y);\n}\n\nstatic inline int16_t sdiv_up16(int16_t x, int16_t y) {\n  return sdiv16(x + y - 1, y);\n}\n\nstatic inline int32_t sdiv_up32(int32_t x, int32_t y) {\n  return sdiv32(x + y - 1, y);\n}\n\nstatic inline int64_t sdiv_up64(int64_t x, int64_t y) {\n  return sdiv64(x + y - 1, y);\n}\n\nstatic inline int8_t smod8(int8_t x, int8_t y) {\n  int8_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int16_t smod16(int16_t x, int16_t y) {\n  int16_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int32_t smod32(int32_t x, int32_t y) {\n  int32_t r = x % y;\n\n  return",
            " r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int64_t smod64(int64_t x, int64_t y) {\n  int64_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int8_t sdiv_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : sdiv8(x, y);\n}\n\nstatic inline int16_t sdiv_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : sdiv16(x, y);\n}\n\nstatic inline int32_t sdiv_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : sdiv32(x, y);\n}\n\nstatic inline int64_t sdiv_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : sdiv64(x, y);\n}\n\nstatic inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {\n  return sdiv_safe8(x + y - 1, y);\n}\n\nstatic inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {\n  return sdiv_safe16(x + y - 1, y);\n}\n\nstatic inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {\n  return sdiv_safe32(x + y - 1, y);\n}\n\nstatic inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {\n  return sdiv_safe64(x + y - 1, y);\n}\n\nstatic inline int8_t smod_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : smod8(x, y);\n}\n\nstatic inline int16_t smod_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : smod16(x, y);\n}\n\nstatic inline int32_t smod_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : smod32(x, y);\n}\n\nstatic inline int64_t smod_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : smod64(x, y);\n}\n\nstatic inline int8_t squot8(int8_t x, int8_t y) {\n  return x / y;\n}\n\nstatic inline int16_t squot16(int16_t x, int16_t y) {\n  return x / y;\n}\n\nstatic inline int32_t squot32(int32_t x, int32_t y) {\n  return x / y;\n}\n\nstatic inline int64_t squot64(int64_t x, int64_t y) {\n  return x / y;\n}\n\nstatic inline int8_t srem8(int8_t x, int8_t y) {\n  return x % y;\n}\n\nstatic inline int16_t srem16(int16_t x, int16_t y) {\n  return x % y;\n}\n\nstatic inline int32_t srem32(int32_t x, int32_t y) {\n  return x % y;\n}\n\nstatic inline int64_t srem64(int64_t x, int64_t y) {\n  return x % y;\n}\n\nstatic inline int8_t squot_safe8(int8_t x, int8_t y)",
            " {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int16_t squot_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int32_t squot_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int64_t squot_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int8_t srem_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int16_t srem_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int32_t srem_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int64_t srem_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int8_t smin8(int8_t x, int8_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int16_t smin16(int16_t x, int16_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int32_t smin32(int32_t x, int32_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int64_t smin64(int64_t x, int64_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint8_t umin8(uint8_t x, uint8_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint16_t umin16(uint16_t x, uint16_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint32_t umin32(uint32_t x, uint32_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint64_t umin64(uint64_t x, uint64_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int8_t smax8(int8_t x, int8_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int16_t smax16(int16_t x, int16_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int32_t smax32(int32_t x, int32_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int64_t smax64(int64_t x, int64_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint8_t umax8(uint8_t x, uint8_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint16_t umax16(uint16_t x, uint16_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint32_t umax32(uint32_t x, uint32_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint64_t umax64(uint64_t x, uint64_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint8_t shl8(uint8_t x, uint8_t y)",
            " {\n  return (uint8_t)(x << y);\n}\n\nstatic inline uint16_t shl16(uint16_t x, uint16_t y) {\n  return (uint16_t)(x << y);\n}\n\nstatic inline uint32_t shl32(uint32_t x, uint32_t y) {\n  return x << y;\n}\n\nstatic inline uint64_t shl64(uint64_t x, uint64_t y) {\n  return x << y;\n}\n\nstatic inline uint8_t lshr8(uint8_t x, uint8_t y) {\n  return x >> y;\n}\n\nstatic inline uint16_t lshr16(uint16_t x, uint16_t y) {\n  return x >> y;\n}\n\nstatic inline uint32_t lshr32(uint32_t x, uint32_t y) {\n  return x >> y;\n}\n\nstatic inline uint64_t lshr64(uint64_t x, uint64_t y) {\n  return x >> y;\n}\n\nstatic inline int8_t ashr8(int8_t x, int8_t y) {\n  return x >> y;\n}\n\nstatic inline int16_t ashr16(int16_t x, int16_t y) {\n  return x >> y;\n}\n\nstatic inline int32_t ashr32(int32_t x, int32_t y) {\n  return x >> y;\n}\n\nstatic inline int64_t ashr64(int64_t x, int64_t y) {\n  return x >> y;\n}\n\nstatic inline uint8_t and8(uint8_t x, uint8_t y) {\n  return x & y;\n}\n\nstatic inline uint16_t and16(uint16_t x, uint16_t y) {\n  return x & y;\n}\n\nstatic inline uint32_t and32(uint32_t x, uint32_t y) {\n  return x & y;\n}\n\nstatic inline uint64_t and64(uint64_t x, uint64_t y) {\n  return x & y;\n}\n\nstatic inline uint8_t or8(uint8_t x, uint8_t y) {\n  return x | y;\n}\n\nstatic inline uint16_t or16(uint16_t x, uint16_t y) {\n  return x | y;\n}\n\nstatic inline uint32_t or32(uint32_t x, uint32_t y) {\n  return x | y;\n}\n\nstatic inline uint64_t or64(uint64_t x, uint64_t y) {\n  return x | y;\n}\n\nstatic inline uint8_t xor8(uint8_t x, uint8_t y) {\n  return x ^ y;\n}\n\nstatic inline uint16_t xor16(uint16_t x, uint16_t y) {\n  return x ^ y;\n}\n\nstatic inline uint32_t xor32(uint32_t x, uint32_t y) {\n  return x ^ y;\n}\n\nstatic inline uint64_t xor64(uint64_t x, uint64_t y) {\n  return x ^ y;\n}\n\nstatic inline bool ult8(uint8_t x, uint8_t y) {\n  return x < y;\n}\n\nstatic inline bool ult16(uint16_t x, uint16_t y) {\n  return x < y;\n}\n\nstatic inline bool ult32(uint32_t x, uint32_t y) {\n  return x < y;\n}\n\nstatic inline bool ult64(uint64_t x, uint64_t y) {\n  return x ",
            "< y;\n}\n\nstatic inline bool ule8(uint8_t x, uint8_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule16(uint16_t x, uint16_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule32(uint32_t x, uint32_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule64(uint64_t x, uint64_t y) {\n  return x <= y;\n}\n\nstatic inline bool slt8(int8_t x, int8_t y) {\n  return x < y;\n}\n\nstatic inline bool slt16(int16_t x, int16_t y) {\n  return x < y;\n}\n\nstatic inline bool slt32(int32_t x, int32_t y) {\n  return x < y;\n}\n\nstatic inline bool slt64(int64_t x, int64_t y) {\n  return x < y;\n}\n\nstatic inline bool sle8(int8_t x, int8_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle16(int16_t x, int16_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle32(int32_t x, int32_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle64(int64_t x, int64_t y) {\n  return x <= y;\n}\n\nstatic inline uint8_t pow8(uint8_t x, uint8_t y) {\n  uint8_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint16_t pow16(uint16_t x, uint16_t y) {\n  uint16_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint32_t pow32(uint32_t x, uint32_t y) {\n  uint32_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint64_t pow64(uint64_t x, uint64_t y) {\n  uint64_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline bool itob_i8_bool(int8_t x) {\n  return x;\n}\n\nstatic inline bool itob_i16_bool(int16_t x) {\n  return x;\n}\n\nstatic inline bool itob_i32_bool(int32_t x) {\n  return x;\n}\n\nstatic inline bool itob_i64_bool(int64_t x) {\n  return x;\n}\n\nstatic inline int8_t btoi_bool_i8(bool x) {\n  return x;\n}\n\nstatic inline int16_t btoi_bool_i16(bool x) {\n  return x;\n}\n\nstatic inline int32_t btoi_bool_i32(bool x) {\n  return x;\n}\n\nsta",
            "tic inline int64_t btoi_bool_i64(bool x) {\n  return x;\n}\n\n#define sext_i8_i8(x) ((int8_t) (int8_t) (x))\n#define sext_i8_i16(x) ((int16_t) (int8_t) (x))\n#define sext_i8_i32(x) ((int32_t) (int8_t) (x))\n#define sext_i8_i64(x) ((int64_t) (int8_t) (x))\n#define sext_i16_i8(x) ((int8_t) (int16_t) (x))\n#define sext_i16_i16(x) ((int16_t) (int16_t) (x))\n#define sext_i16_i32(x) ((int32_t) (int16_t) (x))\n#define sext_i16_i64(x) ((int64_t) (int16_t) (x))\n#define sext_i32_i8(x) ((int8_t) (int32_t) (x))\n#define sext_i32_i16(x) ((int16_t) (int32_t) (x))\n#define sext_i32_i32(x) ((int32_t) (int32_t) (x))\n#define sext_i32_i64(x) ((int64_t) (int32_t) (x))\n#define sext_i64_i8(x) ((int8_t) (int64_t) (x))\n#define sext_i64_i16(x) ((int16_t) (int64_t) (x))\n#define sext_i64_i32(x) ((int32_t) (int64_t) (x))\n#define sext_i64_i64(x) ((int64_t) (int64_t) (x))\n#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))\n#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))\n#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))\n#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))\n#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))\n#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))\n#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))\n#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))\n#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))\n#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))\n#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))\n#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))\n#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))\n#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))\n#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))\n#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))\n\nstatic int8_t abs8(int8_t x) {\n  return (int8_t)abs(x);\n}\n\nstatic int16_t abs16(int16_t x) {\n  return (int16_t)abs(x);\n}\n\nstatic int32_t abs32(int32_t x) {\n  return abs(x);\n}\n\nstatic int64_t abs64(int64_t x) {\n#if defined(__OPENCL_VERSION__)\n  return abs(x);\n#else\n  return llabs(x);\n#endif\n}\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_popc8(int",
            "8_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc16(int16_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc32(int32_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc64(int64_t x) {\n  return popcount(x);\n}\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_popc8(int8_t x) {\n  return __popc(zext_i8_i32(x));\n}\n\nstatic int32_t futrts_popc16(int16_t x) {\n  return __popc(zext_i16_i32(x));\n}\n\nstatic int32_t futrts_popc32(int32_t x) {\n  return __popc(x);\n}\n\nstatic int32_t futrts_popc64(int64_t x) {\n  return __popcll(x);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_popc8(uint8_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc16(uint16_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc32(uint32_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc64(uint64_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  return mul_hi(a, b);\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  uint16_t aa = a;\n  uint16_t bb = b;\n\n  return aa * bb >> 8;\n}\n\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {\n  uint32_t aa = a;\n  uint32_t bb = b;\n\n  return aa * bb >> 16;\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  return mulhi(a, b);\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  return mul64hi(a, b);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  uint16_t aa = a;\n  uint16_t bb = b;\n\n  return aa * bb >> 8;\n}\n\nstatic uint16_t fu",
            "trts_mul_hi16(uint16_t a, uint16_t b) {\n  uint32_t aa = a;\n  uint32_t bb = b;\n\n  return aa * bb >> 16;\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  uint64_t aa = a;\n  uint64_t bb = b;\n\n  return aa * bb >> 32;\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  __uint128_t aa = a;\n  __uint128_t bb = b;\n\n  return aa * bb >> 64;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {\n  return mad_hi(a, b, c);\n}\n\n#else // Not OpenCL\n\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {\n  return futrts_mul_hi8(a, b) + c;\n}\n\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {\n  return futrts_mul_hi16(a, b) + c;\n}\n\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {\n  return futrts_mul_hi32(a, b) + c;\n}\n\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {\n  return futrts_mul_hi64(a, b) + c;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_clzz8(int8_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return clz(x);\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_clzz8(int8_t x) {\n  return __clz(zext_i8_i32(x)) - 24;\n}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return __clz(zext_i16_i32(x)) - 16;\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return __clz(x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return __clzll(x);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_clzz8(int8_t x) {\n  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;\n",
            "}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return x == 0 ? 32 : __builtin_clz((uint32_t)x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_ctzz8(int8_t x) {\n  int i = 0;\n  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  int i = 0;\n  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  int i = 0;\n  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  int i = 0;\n  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_ctzz8(int8_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 8 : y - 1;\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 16 : y - 1;\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 32 : y - 1;\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  int y = __ffsll(x);\n  return y == 0 ? 64 : y - 1;\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_ctzz8(int8_t x) {\n  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);\n}\n#endif\n\nstatic inline float fdiv32(float x, float y) {\n  return x / y;\n}\n\nstatic inline float fadd32(float x, float y) {\n  return x + y;\n}\n\nstatic inline float fsub32(float x, float y) {\n  return x - y;\n}\n\nstatic inline float fmul32(float x, float y) {\n  return x * y;\n}\n\nstatic inline bool cmplt32(float x, float y) {\n  retur",
            "n x < y;\n}\n\nstatic inline bool cmple32(float x, float y) {\n  return x <= y;\n}\n\nstatic inline float sitofp_i8_f32(int8_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i16_f32(int16_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i32_f32(int32_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i64_f32(int64_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i8_f32(uint8_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i16_f32(uint16_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i32_f32(uint32_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i64_f32(uint64_t x) {\n  return (float) x;\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline float fabs32(float x) {\n  return fabs(x);\n}\n\nstatic inline float fmax32(float x, float y) {\n  return fmax(x, y);\n}\n\nstatic inline float fmin32(float x, float y) {\n  return fmin(x, y);\n}\n\nstatic inline float fpow32(float x, float y) {\n  return pow(x, y);\n}\n\n#else // Not OpenCL, but CUDA or plain C.\n\nstatic inline float fabs32(float x) {\n  return fabsf(x);\n}\n\nstatic inline float fmax32(float x, float y) {\n  return fmaxf(x, y);\n}\n\nstatic inline float fmin32(float x, float y) {\n  return fminf(x, y);\n}\n\nstatic inline float fpow32(float x, float y) {\n  return powf(x, y);\n}\n#endif\n\nstatic inline bool futrts_isnan32(float x) {\n  return isnan(x);\n}\n\nstatic inline bool futrts_isinf32(float x) {\n  return isinf(x);\n}\n\nstatic inline int8_t fptosi_f32_i8(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int8_t) x;\n  }\n}\n\nstatic inline int16_t fptosi_f32_i16(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int16_t) x;\n  }\n}\n\nstatic inline int32_t fptosi_f32_i32(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int32_t) x;\n  }\n}\n\nstatic inline int64_t fptosi_f32_i64(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int64_t) x;",
            "\n  };\n}\n\nstatic inline uint8_t fptoui_f32_i8(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint8_t) (int8_t) x;\n  }\n}\n\nstatic inline uint16_t fptoui_f32_i16(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint16_t) (int16_t) x;\n  }\n}\n\nstatic inline uint32_t fptoui_f32_i32(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint32_t) (int32_t) x;\n  }\n}\n\nstatic inline uint64_t fptoui_f32_i64(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint64_t) (int64_t) x;\n  }\n}\n\nstatic inline bool ftob_f32_bool(float x) {\n  return x != 0;\n}\n\nstatic inline float btof_bool_f32(bool x) {\n  return x ? 1 : 0;\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline float futrts_log32(float x) {\n  return log(x);\n}\n\nstatic inline float futrts_log2_32(float x) {\n  return log2(x);\n}\n\nstatic inline float futrts_log10_32(float x) {\n  return log10(x);\n}\n\nstatic inline float futrts_sqrt32(float x) {\n  return sqrt(x);\n}\n\nstatic inline float futrts_exp32(float x) {\n  return exp(x);\n}\n\nstatic inline float futrts_cos32(float x) {\n  return cos(x);\n}\n\nstatic inline float futrts_sin32(float x) {\n  return sin(x);\n}\n\nstatic inline float futrts_tan32(float x) {\n  return tan(x);\n}\n\nstatic inline float futrts_acos32(float x) {\n  return acos(x);\n}\n\nstatic inline float futrts_asin32(float x) {\n  return asin(x);\n}\n\nstatic inline float futrts_atan32(float x) {\n  return atan(x);\n}\n\nstatic inline float futrts_cosh32(float x) {\n  return cosh(x);\n}\n\nstatic inline float futrts_sinh32(float x) {\n  return sinh(x);\n}\n\nstatic inline float futrts_tanh32(float x) {\n  return tanh(x);\n}\n\nstatic inline float futrts_acosh32(float x) {\n  return acosh(x);\n}\n\nstatic inline float futrts_asinh32(float x) {\n  return asinh(x);\n}\n\nstatic inline float futrts_atanh32(float x) {\n  return atanh(x);\n}\n\nstatic inline float futrts_atan2_32(float x, float y) {\n  re",
            "turn atan2(x, y);\n}\n\nstatic inline float futrts_hypot32(float x, float y) {\n  return hypot(x, y);\n}\n\nstatic inline float futrts_gamma32(float x) {\n  return tgamma(x);\n}\n\nstatic inline float futrts_lgamma32(float x) {\n  return lgamma(x);\n}\n\nstatic inline float fmod32(float x, float y) {\n  return fmod(x, y);\n}\n\nstatic inline float futrts_round32(float x) {\n  return rint(x);\n}\n\nstatic inline float futrts_floor32(float x) {\n  return floor(x);\n}\n\nstatic inline float futrts_ceil32(float x) {\n  return ceil(x);\n}\n\nstatic inline float futrts_lerp32(float v0, float v1, float t) {\n  return mix(v0, v1, t);\n}\n\nstatic inline float futrts_mad32(float a, float b, float c) {\n  return mad(a, b, c);\n}\n\nstatic inline float futrts_fma32(float a, float b, float c) {\n  return fma(a, b, c);\n}\n\n#else // Not OpenCL, but CUDA or plain C.\n\nstatic inline float futrts_log32(float x) {\n  return logf(x);\n}\n\nstatic inline float futrts_log2_32(float x) {\n  return log2f(x);\n}\n\nstatic inline float futrts_log10_32(float x) {\n  return log10f(x);\n}\n\nstatic inline float futrts_sqrt32(float x) {\n  return sqrtf(x);\n}\n\nstatic inline float futrts_exp32(float x) {\n  return expf(x);\n}\n\nstatic inline float futrts_cos32(float x) {\n  return cosf(x);\n}\n\nstatic inline float futrts_sin32(float x) {\n  return sinf(x);\n}\n\nstatic inline float futrts_tan32(float x) {\n  return tanf(x);\n}\n\nstatic inline float futrts_acos32(float x) {\n  return acosf(x);\n}\n\nstatic inline float futrts_asin32(float x) {\n  return asinf(x);\n}\n\nstatic inline float futrts_atan32(float x) {\n  return atanf(x);\n}\n\nstatic inline float futrts_cosh32(float x) {\n  return coshf(x);\n}\n\nstatic inline float futrts_sinh32(float x) {\n  return sinhf(x);\n}\n\nstatic inline float futrts_tanh32(float x) {\n  return tanhf(x);\n}\n\nstatic inline float futrts_acosh32(float x) {\n  return acoshf(x);\n}\n\nstatic inline float futrts_asinh32(float x) {\n  return asinhf(x);\n}\n\nstatic inline float futrts_atanh32(float x) {\n  return atanhf(x);\n}\n\nstatic inline float futrts_atan2_32(f",
            "loat x, float y) {\n  return atan2f(x, y);\n}\n\nstatic inline float futrts_hypot32(float x, float y) {\n  return hypotf(x, y);\n}\n\nstatic inline float futrts_gamma32(float x) {\n  return tgammaf(x);\n}\n\nstatic inline float futrts_lgamma32(float x) {\n  return lgammaf(x);\n}\n\nstatic inline float fmod32(float x, float y) {\n  return fmodf(x, y);\n}\n\nstatic inline float futrts_round32(float x) {\n  return rintf(x);\n}\n\nstatic inline float futrts_floor32(float x) {\n  return floorf(x);\n}\n\nstatic inline float futrts_ceil32(float x) {\n  return ceilf(x);\n}\n\nstatic inline float futrts_lerp32(float v0, float v1, float t) {\n  return v0 + (v1 - v0) * t;\n}\n\nstatic inline float futrts_mad32(float a, float b, float c) {\n  return a * b + c;\n}\n\nstatic inline float futrts_fma32(float a, float b, float c) {\n  return fmaf(a, b, c);\n}\n#endif\n\nstatic inline int32_t futrts_to_bits32(float x) {\n  union {\n    float f;\n    int32_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline float futrts_from_bits32(int32_t x) {\n  union {\n    int32_t f;\n    float t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline float fsignum32(float x) {\n  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\nstatic inline double fdiv64(double x, double y) {\n  return x / y;\n}\n\nstatic inline double fadd64(double x, double y) {\n  return x + y;\n}\n\nstatic inline double fsub64(double x, double y) {\n  return x - y;\n}\n\nstatic inline double fmul64(double x, double y) {\n  return x * y;\n}\n\nstatic inline bool cmplt64(double x, double y) {\n  return x < y;\n}\n\nstatic inline bool cmple64(double x, double y) {\n  return x <= y;\n}\n\nstatic inline double sitofp_i8_f64(int8_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i16_f64(int16_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i32_f64(int32_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i64_f64(int64_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i8_f64(uint8_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i1",
            "6_f64(uint16_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i32_f64(uint32_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i64_f64(uint64_t x) {\n  return (double) x;\n}\n\nstatic inline double fabs64(double x) {\n  return fabs(x);\n}\n\nstatic inline double fmax64(double x, double y) {\n  return fmax(x, y);\n}\n\nstatic inline double fmin64(double x, double y) {\n  return fmin(x, y);\n}\n\nstatic inline double fpow64(double x, double y) {\n  return pow(x, y);\n}\n\nstatic inline double futrts_log64(double x) {\n  return log(x);\n}\n\nstatic inline double futrts_log2_64(double x) {\n  return log2(x);\n}\n\nstatic inline double futrts_log10_64(double x) {\n  return log10(x);\n}\n\nstatic inline double futrts_sqrt64(double x) {\n  return sqrt(x);\n}\n\nstatic inline double futrts_exp64(double x) {\n  return exp(x);\n}\n\nstatic inline double futrts_cos64(double x) {\n  return cos(x);\n}\n\nstatic inline double futrts_sin64(double x) {\n  return sin(x);\n}\n\nstatic inline double futrts_tan64(double x) {\n  return tan(x);\n}\n\nstatic inline double futrts_acos64(double x) {\n  return acos(x);\n}\n\nstatic inline double futrts_asin64(double x) {\n  return asin(x);\n}\n\nstatic inline double futrts_atan64(double x) {\n  return atan(x);\n}\n\nstatic inline double futrts_cosh64(double x) {\n  return cosh(x);\n}\n\nstatic inline double futrts_sinh64(double x) {\n  return sinh(x);\n}\n\nstatic inline double futrts_tanh64(double x) {\n  return tanh(x);\n}\n\nstatic inline double futrts_acosh64(double x) {\n  return acosh(x);\n}\n\nstatic inline double futrts_asinh64(double x) {\n  return asinh(x);\n}\n\nstatic inline double futrts_atanh64(double x) {\n  return atanh(x);\n}\n\nstatic inline double futrts_atan2_64(double x, double y) {\n  return atan2(x, y);\n}\n\nstatic inline double futrts_hypot64(double x, double y) {\n  return hypot(x, y);\n}\n\nstatic inline double futrts_gamma64(double x) {\n  return tgamma(x);\n}\n\nstatic inline double futrts_lgamma64(double x) {\n  return lgamma(x);\n}\n\nstatic inline double futrts_fma64(double a, double b, double",
            " c) {\n  return fma(a, b, c);\n}\n\nstatic inline double futrts_round64(double x) {\n  return rint(x);\n}\n\nstatic inline double futrts_ceil64(double x) {\n  return ceil(x);\n}\n\nstatic inline double futrts_floor64(double x) {\n  return floor(x);\n}\n\nstatic inline bool futrts_isnan64(double x) {\n  return isnan(x);\n}\n\nstatic inline bool futrts_isinf64(double x) {\n  return isinf(x);\n}\n\nstatic inline int8_t fptosi_f64_i8(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int8_t) x;\n  }\n}\n\nstatic inline int16_t fptosi_f64_i16(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int16_t) x;\n  }\n}\n\nstatic inline int32_t fptosi_f64_i32(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int32_t) x;\n  }\n}\n\nstatic inline int64_t fptosi_f64_i64(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int64_t) x;\n  }\n}\n\nstatic inline uint8_t fptoui_f64_i8(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint8_t) (int8_t) x;\n  }\n}\n\nstatic inline uint16_t fptoui_f64_i16(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint16_t) (int16_t) x;\n  }\n}\n\nstatic inline uint32_t fptoui_f64_i32(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint32_t) (int32_t) x;\n  }\n}\n\nstatic inline uint64_t fptoui_f64_i64(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint64_t) (int64_t) x;\n  }\n}\n\nstatic inline bool ftob_f64_bool(double x) {\n  return x != 0;\n}\n\nstatic inline double btof_bool_f64(bool x) {\n  return x ? 1 : 0;\n}\n\nstatic inline int64_t futrts_to_bits64(double x) {\n  union {\n    double f;\n    int64_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline double futrts_from_bits64(int64_t x) {\n  union {\n    int64_t f;\n    double t;\n  } p;\n\n ",
            " p.f = x;\n  return p.t;\n}\n\nstatic inline double fmod64(double x, double y) {\n  return fmod(x, y);\n}\n\nstatic inline double fsignum64(double x) {\n  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);\n}\n\nstatic inline double futrts_lerp64(double v0, double v1, double t) {\n#ifdef __OPENCL_VERSION__\n  return mix(v0, v1, t);\n#else\n  return v0 + (v1 - v0) * t;\n#endif\n}\n\nstatic inline double futrts_mad64(double a, double b, double c) {\n#ifdef __OPENCL_VERSION__\n  return mad(a, b, c);\n#else\n  return a * b + c;\n#endif\n}\n\nstatic inline float fpconv_f32_f32(float x) {\n  return (float) x;\n}\n\nstatic inline double fpconv_f32_f64(float x) {\n  return (double) x;\n}\n\nstatic inline float fpconv_f64_f32(double x) {\n  return (float) x;\n}\n\nstatic inline double fpconv_f64_f64(double x) {\n  return (double) x;\n}\n\n#endif\n\n// End of scalar.h.\n// Start of scalar_f16.h.\n\n// Half-precision is emulated if needed (e.g. in straight C) with the\n// native type used if possible.  The emulation works by typedef'ing\n// 'float' to 'f16', and then implementing all operations on single\n// precision.  To cut down on duplication, we use the same code for\n// those Futhark functions that require just operators or casts.  The\n// in-memory representation for arrays will still be 16 bits even\n// under emulation, so the compiler will have to be careful when\n// generating reads or writes.\n\n#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)\n#define EMULATE_F16\n#endif\n\n#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)\n#pragma OPENCL EXTENSION cl_khr_fp16 : enable\n#endif\n\n#ifdef EMULATE_F16\n\n// Note that the half-precision storage format is still 16 bits - the\n// compiler will have to be real careful!\ntypedef float f16;\n\n#else\n\n#ifdef __CUDA_ARCH__\n#include <cuda_fp16.h>\n#endif\n\ntypedef half f16;\n\n#endif\n\n// Some of these functions convert to single precision because half\n// precision versions are not available.\n\nstatic inline f16 fadd16(f16 x, f16 y) {\n  return x + y;\n}\n\nstatic inline ",
            "f16 fsub16(f16 x, f16 y) {\n  return x - y;\n}\n\nstatic inline f16 fmul16(f16 x, f16 y) {\n  return x * y;\n}\n\nstatic inline bool cmplt16(f16 x, f16 y) {\n  return x < y;\n}\n\nstatic inline bool cmple16(f16 x, f16 y) {\n  return x <= y;\n}\n\nstatic inline f16 sitofp_i8_f16(int8_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i16_f16(int16_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i32_f16(int32_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i64_f16(int64_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i8_f16(uint8_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i16_f16(uint16_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i32_f16(uint32_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i64_f16(uint64_t x) {\n  return (f16) x;\n}\n\nstatic inline int8_t fptosi_f16_i8(f16 x) {\n  return (int8_t) (float) x;\n}\n\nstatic inline int16_t fptosi_f16_i16(f16 x) {\n  return (int16_t) x;\n}\n\nstatic inline int32_t fptosi_f16_i32(f16 x) {\n  return (int32_t) x;\n}\n\nstatic inline int64_t fptosi_f16_i64(f16 x) {\n  return (int64_t) x;\n}\n\nstatic inline uint8_t fptoui_f16_i8(f16 x) {\n  return (uint8_t) (float) x;\n}\n\nstatic inline uint16_t fptoui_f16_i16(f16 x) {\n  return (uint16_t) x;\n}\n\nstatic inline uint32_t fptoui_f16_i32(f16 x) {\n  return (uint32_t) x;\n}\n\nstatic inline uint64_t fptoui_f16_i64(f16 x) {\n  return (uint64_t) x;\n}\n\nstatic inline bool ftob_f16_bool(f16 x) {\n  return x != (f16)0;\n}\n\nstatic inline f16 btof_bool_f16(bool x) {\n  return x ? 1 : 0;\n}\n\n#ifndef EMULATE_F16\n\n#ifdef __OPENCL_VERSION__\nstatic inline f16 fabs16(f16 x) {\n  return fabs(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmax(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fmin(x, y);\n}\n\nstatic inline f16 fpow16(f16 x, f16 y) {\n  return pow(x, y);\n}\n\n#else // Assuming CUDA.\n\nstatic inline f16 fabs16(f16 x) {\n  return fabsf(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmaxf(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fminf(x, y);\n}\n\nstatic",
            " inline f16 fpow16(f16 x, f16 y) {\n  return powf(x, y);\n}\n#endif\n\nstatic inline bool futrts_isnan16(f16 x) {\n  return isnan((float)x);\n}\n\nstatic inline bool futrts_isinf16(f16 x) {\n  return isinf((float)x);\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline f16 futrts_log16(f16 x) {\n  return log(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return log2(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return log10(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return sqrt(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return exp(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return cos(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return sin(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return tan(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return acos(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return asin(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return atan(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return cosh(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return sinh(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return tanh(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return acosh(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return asinh(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return atanh(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return atan2(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return hypot(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return tgamma(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return lgamma(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmod(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return rint(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return floor(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return ceil(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return mix(v0, v1, t);\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return mad(a, b, c);\n}\n\nstatic inli",
            "ne f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return fma(a, b, c);\n}\n\n#else // Assume CUDA.\n\nstatic inline f16 futrts_log16(f16 x) {\n  return hlog(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return hlog2(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return hlog10(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return hsqrt(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return hexp(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return hcos(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return hsin(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return tanf(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return acosf(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return asinf(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return atanf(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return coshf(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return sinhf(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return tanhf(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return acoshf(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return asinhf(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return atanhf(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return atan2f(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return hypotf(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return tgammaf(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return lgammaf(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmodf(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return rintf(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return hfloor(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return hceil(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return v0 + (v1 - v0) * t;\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return a * b + c;\n}\n\nstatic inline f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return fmaf(a, b, c);\n}\n\n#endif\n\n// The CUDA __half type cannot be put in",
            " unions for some reason, so we\n// use bespoke conversion functions instead.\n#ifdef __CUDA_ARCH__\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  return __half_as_ushort(x);\n}\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return __ushort_as_half(x);\n}\n#else\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  union {\n    f16 f;\n    int16_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  union {\n    int16_t f;\n    f16 t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n#endif\n\n#else // No native f16 - emulate.\n\nstatic inline f16 fabs16(f16 x) {\n  return fabs32(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmax32(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fmin32(x, y);\n}\n\nstatic inline f16 fpow16(f16 x, f16 y) {\n  return fpow32(x, y);\n}\n\nstatic inline bool futrts_isnan16(f16 x) {\n  return futrts_isnan32(x);\n}\n\nstatic inline bool futrts_isinf16(f16 x) {\n  return futrts_isinf32(x);\n}\n\nstatic inline f16 futrts_log16(f16 x) {\n  return futrts_log32(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return futrts_log2_32(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return futrts_log10_32(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return futrts_sqrt32(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return futrts_exp32(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return futrts_cos32(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return futrts_sin32(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return futrts_tan32(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return futrts_acos32(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return futrts_asin32(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return futrts_atan32(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return futrts_cosh32(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return futrts_sinh32(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return futrts_tanh32(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return futr",
            "ts_acosh32(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return futrts_asinh32(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return futrts_atanh32(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return futrts_atan2_32(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return futrts_hypot32(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return futrts_gamma32(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return futrts_lgamma32(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmod32(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return futrts_round32(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return futrts_floor32(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return futrts_ceil32(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return futrts_lerp32(v0, v1, t);\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return futrts_mad32(a, b, c);\n}\n\nstatic inline f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return futrts_fma32(a, b, c);\n}\n\n// Even when we are using an OpenCL that does not support cl_khr_fp16,\n// it must still support vload_half for actually creating a\n// half-precision number, which can then be efficiently converted to a\n// float.  Similarly for vstore_half.\n#ifdef __OPENCL_VERSION__\n\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  int16_t y;\n  // Violating strict aliasing here.\n  vstore_half((float)x, 0, (half*)&y);\n  return y;\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return (f16)vload_half(0, (half*)&x);\n}\n\n#else\n\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  return (int16_t)float2halfbits(x);\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return halfbits2float((uint16_t)x);\n}\n\nstatic inline f16 fsignum16(f16 x) {\n  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);\n}\n\n#endif\n\n#endif\n\nstatic inline float fpconv_f16_f16(f16 x) {\n  return x;\n}\n\nstatic inline float fpconv_f16_f32(f16 x) {\n  return x;\n}\n\nstatic inline f16 fpconv_f32_f16(float ",
            "x) {\n  return x;\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\nstatic inline double fpconv_f16_f64(f16 x) {\n  return (double) x;\n}\n\nstatic inline f16 fpconv_f64_f16(double x) {\n  return (f16) x;\n}\n\n#endif\n\n\n// End of scalar_f16.h.\n// Start of atomics.h\n\ninline int32_t atomic_xchg_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xchg_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_global(volatile __global int32_t *p,\n                                         int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_local(volatile __local int32_t *p,\n                                        int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_add_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline int32_t atomic_add_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline float atomic_fadd_f32_global(volatile __global float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_global((volatile __global int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline float atomic_fadd_f32_local(volatile __local float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomic",
            "Add((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_local((volatile __local int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline int32_t atomic_smax_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smax_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_local(volatile __local int32_",
            "t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\n// Start of 64 bit atomics\n\ninline int64_t atomic_xchg_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xchg_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_global(volatile __global int64_t *p,\n                                         int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_local(volatile __local int64_t *p,\n                                        int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_add_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\ninline int64_t atomic_add_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  ret",
            "urn atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\ninline double atomic_fadd_f64_global(volatile __global double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_global((volatile __global int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline double atomic_fadd_f64_local(volatile __local double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_local((volatile __local int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\n#endif\n\ninline int64_t atomic_smax_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline int64_t atomic_smax_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline int64_t atomic_smin_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_smin_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_local(volatile __local uint64_t *p, uint64_t x) {",
            "\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_local(volatile __local uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\n// End of atomics.h\n\n\n\n__kernel void builtinzhiota_i64ziiota_i64_19558(int32_t n_19554,\n                                                int64_t x_19555,\n                                                int64_t s_19556, __global\n                                                unsigned char *mem_19553)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_19558;\n    int32_t iota_ltid_19559;\n    int32_t iota_gid_19560;\n    \n    i",
            "ota_gtid_19558 = get_global_id(0);\n    iota_ltid_19559 = get_local_id(0);\n    iota_gid_19560 = get_group_id(0);\n    if (slt64(iota_gtid_19558, n_19554)) {\n        ((__global int64_t *) mem_19553)[sext_i32_i64(iota_gtid_19558)] =\n            add64(mul64(sext_i32_i64(iota_gtid_19558), s_19556), x_19555);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void builtinzhreplicate_i8zireplicate_19770(int32_t num_elems_19767,\n                                                     int8_t val_19768, __global\n                                                     unsigned char *mem_19766)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19770;\n    int32_t replicate_ltid_19771;\n    int32_t replicate_gid_19772;\n    \n    replicate_gtid_19770 = get_global_id(0);\n    replicate_ltid_19771 = get_local_id(0);\n    replicate_gid_19772 = get_group_id(0);\n    \n    int64_t slice_19776 = num_elems_19767;\n    int64_t rep_i_19775 = sext_i32_i64(replicate_gtid_19770);\n    int64_t remnant_19777 = sext_i32_i64(replicate_gtid_19770) - rep_i_19775;\n    \n    if (slt64(replicate_gtid_19770, num_elems_19767)) {\n        ((__global int8_t *) mem_19766)[rep_i_19775] = val_19768;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32(const int block_dim0, const int block_dim1,\n                                    const int block_dim2,\n                                    uint block_9_backing_offset_0,\n                                    int32_t destoffset_1, int32_t srcoffset_3,\n                                    int32_t num_arrays_4, int32_t x_elems_5,\n                                    int32_t y_elems_6, int32_t mulx_7,\n                                    int32_t muly_8, __global\n                                    unsigned char *destmem_0, __global\n                                    unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n ",
            "   __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_global_id_0_37;\n    int32_t y_index_32 = get_group_id_1_41 * 32 + get_local_id_1_39;\n    float val_44;\n    \n    if (slt32(x_index_31, x_elems_5)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_in_35 = (y_index_32 + j_43 * 8) * x_elems_5 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, y_elems_6)) {\n                val_44 = ((__global\n                           float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                              index_in_35)];\n                ((__local float *) block_9)[sext_i32_i64((get_local_id_1_39 +\n                                                          j_43 * 8) * 33 +\n                                            get_local_id_0_38)] = val_44;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 32 + get_local_id_0_38;\n    y_index_32 = get_group_id_0_40 * 32 + get_local_id_1_39;\n    if (slt32(x_index_31, y_elems_6)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_out_36 = (y_index_32 + j_43 * 8) * y_elems_6 +\n              ",
            "      x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, x_elems_5)) {\n                val_44 = ((__local\n                           float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             33 + get_local_id_1_39 + j_43 *\n                                             8)];\n                ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                               index_out_36)] = val_44;\n            }\n        }\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_height(const int block_dim0, const\n                                               int block_dim1, const\n                                               int block_dim2,\n                                               uint block_9_backing_offset_0,\n                                               int32_t destoffset_1,\n                                               int32_t srcoffset_3,\n                                               int32_t num_arrays_4,\n                                               int32_t x_elems_5,\n                                               int32_t y_elems_6,\n                                               int32_t mulx_7, int32_t muly_8,\n                                               __global\n                                               unsigned char *destmem_0,\n                                               __global unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n ",
            "   \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_0_38 +\n            srem32(get_local_id_1_39, mulx_7) * 16;\n    int32_t y_index_32 = get_group_id_1_41 * 16 + squot32(get_local_id_1_39,\n                                                          mulx_7);\n    float val_44;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = val_44;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 + squot32(get_local_id_0_38, mulx_7);\n    y_index_32 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_1_39 +\n        srem32(get_local_id_0_38, mulx_7) * 16;\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        val_44 = ((__local float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             17 + get_local_id_1_39)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_width(const int block_dim0, const\n                                              int block_dim1, const\n                                           ",
            "   int block_dim2,\n                                              uint block_9_backing_offset_0,\n                                              int32_t destoffset_1,\n                                              int32_t srcoffset_3,\n                                              int32_t num_arrays_4,\n                                              int32_t x_elems_5,\n                                              int32_t y_elems_6, int32_t mulx_7,\n                                              int32_t muly_8, __global\n                                              unsigned char *destmem_0, __global\n                                              unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 + squot32(get_local_id_0_38,\n                                                          muly_8);\n    int32_t y_index_32 = get_group_id_1_41 * 16 * muly_8 + get_local_id_1_39 +\n            srem32(get_local_id_0_38, muly_8) * 16;\n    float val_44;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_3",
            "1, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = val_44;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 * muly_8 + get_local_id_0_38 +\n        srem32(get_local_id_1_39, muly_8) * 16;\n    y_index_32 = get_group_id_0_40 * 16 + squot32(get_local_id_1_39, muly_8);\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        val_44 = ((__local float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             17 + get_local_id_1_39)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_small(uint block_9_backing_offset_0,\n                                          int32_t destoffset_1,\n                                          int32_t srcoffset_3,\n                                          int32_t num_arrays_4,\n                                          int32_t x_elems_5, int32_t y_elems_6,\n                                          int32_t mulx_7, int32_t muly_8,\n                                          __global unsigned char *destmem_0,\n                                          __global unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n  ",
            "  int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = squot32(get_global_id_0_37, y_elems_6 *\n                                          x_elems_5) * (y_elems_6 * x_elems_5);\n    int32_t x_index_31 = squot32(srem32(get_global_id_0_37, y_elems_6 *\n                                        x_elems_5), y_elems_6);\n    int32_t y_index_32 = srem32(get_global_id_0_37, y_elems_6);\n    float val_44;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    int32_t index_out_36 = x_index_31 * y_elems_6 + y_index_32;\n    \n    if (slt32(get_global_id_0_37, x_elems_5 * y_elems_6 * num_arrays_4)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void randomFieldzisegmap_16688(__global int *global_failure,\n                                        int64_t randomField_1d_arg_16327,\n                                        int32_t unsign_arg_16329, __global\n                                        unsigned char *mem_19008)\n{\n    #define segmap_group_sizze_16684 (randomFieldzisegmap_group_sizze_16663)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19551;\n   ",
            " int32_t local_tid_19552;\n    int64_t group_sizze_19555;\n    int32_t wave_sizze_19554;\n    int32_t group_tid_19553;\n    \n    global_tid_19551 = get_global_id(0);\n    local_tid_19552 = get_local_id(0);\n    group_sizze_19555 = get_local_size(0);\n    wave_sizze_19554 = LOCKSTEP_WIDTH;\n    group_tid_19553 = get_group_id(0);\n    \n    int32_t phys_tid_16688 = global_tid_19551;\n    int64_t global_tid_19556 = sext_i32_i64(group_tid_19553) *\n            segmap_group_sizze_16684 + sext_i32_i64(local_tid_19552);\n    int64_t slice_19557 = randomField_1d_arg_16327;\n    int64_t gtid_16687 = global_tid_19556;\n    int64_t remnant_19558 = global_tid_19556 - gtid_16687;\n    \n    if (slt64(gtid_16687, randomField_1d_arg_16327)) {\n        int32_t i64_res_16690 = sext_i64_i32(gtid_16687);\n        int32_t x_16691 = lshr32(i64_res_16690, 16);\n        int32_t x_16692 = i64_res_16690 ^ x_16691;\n        int32_t x_16693 = mul32(73244475, x_16692);\n        int32_t x_16694 = lshr32(x_16693, 16);\n        int32_t x_16695 = x_16693 ^ x_16694;\n        int32_t x_16696 = mul32(73244475, x_16695);\n        int32_t x_16697 = lshr32(x_16696, 16);\n        int32_t x_16698 = x_16696 ^ x_16697;\n        int32_t unsign_arg_16699 = unsign_arg_16329 ^ x_16698;\n        int32_t unsign_arg_16700 = mul32(48271, unsign_arg_16699);\n        int32_t unsign_arg_16701 = umod32(unsign_arg_16700, 2147483647);\n        float u64_res_16702 = uitofp_i32_f32(unsign_arg_16701);\n        float zs_res_16703 = u64_res_16702 / 2.1474836e9F;\n        \n        ((__global float *) mem_19008)[gtid_16687] = zs_res_16703;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_16684\n}\n__kernel void sortBagzireplicate_19678(int64_t b_16351, int64_t g_16352,\n                                       __global unsigned char *mem_19009,\n                                       __global unsigned char *mem_19278)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19678;\n    int3",
            "2_t replicate_ltid_19679;\n    int32_t replicate_gid_19680;\n    \n    replicate_gtid_19678 = get_global_id(0);\n    replicate_ltid_19679 = get_local_id(0);\n    replicate_gid_19680 = get_group_id(0);\n    \n    int64_t slice_19685 = g_16352;\n    int64_t slice_19686 = b_16351 * slice_19685;\n    int64_t rep_i_19683 = squot64(sext_i32_i64(replicate_gtid_19678),\n                                  slice_19685);\n    int64_t remnant_19687 = sext_i32_i64(replicate_gtid_19678) - rep_i_19683 *\n            slice_19685;\n    int64_t rep_i_19684 = remnant_19687;\n    int64_t remnant_19688 = remnant_19687 - rep_i_19684;\n    \n    if (slt64(replicate_gtid_19678, b_16351 * g_16352)) {\n        int64_t tmp_19689;\n        \n        tmp_19689 = ((__global int64_t *) mem_19009)[rep_i_19684];\n        ((__global int64_t *) mem_19278)[rep_i_19683 * g_16352 + rep_i_19684] =\n            tmp_19689;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void sortBagzisegmap_16853(__global int *global_failure,\n                                    int failure_is_an_option, __global\n                                    int64_t *global_failure_args,\n                                    int64_t b_16351, int64_t g_16352,\n                                    int32_t iters_16356, int64_t i_16359,\n                                    int64_t num_groups_16848,\n                                    int64_t num_threads_19505,\n                                    int32_t virt_num_groups_19563, __global\n                                    unsigned char *mem_19012, __global\n                                    unsigned char *mem_19015, __global\n                                    unsigned char *mem_19191, __global\n                                    unsigned char *mem_19194, __global\n                                    unsigned char *color_19474, __global\n                                    unsigned char *color_19475, __global\n                                    unsigned char *color_19476, __global\n                                    uns",
            "igned char *color_19477, __global\n                                    unsigned char *color_19478, __global\n                                    unsigned char *color_19479, __global\n                                    unsigned char *color_19480, __global\n                                    unsigned char *color_19481, __global\n                                    unsigned char *color_19482, __global\n                                    unsigned char *color_19483, __global\n                                    unsigned char *color_19484)\n{\n    #define segmap_group_sizze_16847 (sortBagzisegmap_group_sizze_16736)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19564;\n    int32_t local_tid_19565;\n    int64_t group_sizze_19568;\n    int32_t wave_sizze_19567;\n    int32_t group_tid_19566;\n    \n    global_tid_19564 = get_global_id(0);\n    local_tid_19565 = get_local_id(0);\n    group_sizze_19568 = get_local_size(0);\n    wave_sizze_19567 = LOCKSTEP_WIDTH;\n    group_tid_19566 = get_group_id(0);\n    \n    int32_t phys_tid_16853 = global_tid_19564;\n    int32_t phys_group_id_19569;\n    \n    phys_group_id_19569 = get_group_id(0);\n    \n    int32_t iterations_19570 = sdiv_up32(virt_num_groups_19563 -\n                                         phys_group_id_19569,\n                                         sext_i64_i32(num_groups_16848));\n    \n    for (int32_t i_19571 = 0; i_19571 < iterations_19570; i_19571++) {\n        int32_t virt_group_id_19572 = phys_group_id_19569 + i_19571 *\n                sext_i64_i32(num_groups_16848);\n        int64_t global_tid_19573 = sext_i32_i64(virt_group_id_19572) *\n                segmap_group_sizze_16847 + sext_i32_i64(local_tid_19565);\n        int64_t sli",
            "ce_19574 = b_16351;\n        int64_t gtid_16852 = global_tid_19573;\n        int64_t remnant_19575 = global_tid_19573 - gtid_16852;\n        \n        if (slt64(gtid_16852, b_16351)) {\n            for (int64_t i_18953 = 0; i_18953 < g_16352; i_18953++) {\n                float x_16857;\n                \n                x_16857 = ((__global float *) mem_19012)[i_18953 * b_16351 +\n                                                         gtid_16852];\n                \n                float defunc_0_f_res_16858 = fmax32(0.0F, x_16857);\n                \n                ((__global float *) color_19484)[phys_tid_16853 + i_18953 *\n                                                 num_threads_19505] =\n                    defunc_0_f_res_16858;\n            }\n            for (int64_t i_19577 = 0; i_19577 < g_16352; i_19577++) {\n                float tmp_19578;\n                \n                tmp_19578 = ((__global float *) color_19484)[phys_tid_16853 +\n                                                             i_19577 *\n                                                             num_threads_19505];\n                ((__global float *) color_19475)[phys_tid_16853 + i_19577 *\n                                                 num_threads_19505] = tmp_19578;\n            }\n            for (int64_t i_19579 = 0; i_19579 < g_16352; i_19579++) {\n                int64_t x_19580 = (int64_t) 0 + i_19579 * (int64_t) 1;\n                \n                ((__global int64_t *) color_19474)[phys_tid_16853 + i_19579 *\n                                                   num_threads_19505] = x_19580;\n            }\n            \n            __global unsigned char *ext_mem_19150;\n            __global unsigned char *ext_mem_unused_19456;\n            __global unsigned char *ext_mem_19149;\n            __global unsigned char *ext_mem_unused_19460;\n            __global unsigned char *mem_param_19036;\n            __global unsigned char *mem_param_19041;\n            __global unsigned char *mem_param_out_19457;\n    ",
            "        __global unsigned char *mem_param_out_19461;\n            \n            mem_param_19036 = color_19475;\n            mem_param_out_19457 = color_19479;\n            mem_param_19041 = color_19474;\n            mem_param_out_19461 = color_19478;\n            for (int32_t i_16861 = 0; i_16861 < iters_16356; i_16861++) {\n                int32_t defunc_2_radix_sort_step_arg_16864 = mul32(2, i_16861);\n                int32_t defunc_0_get_bit_arg_16865 = add32(1,\n                                                           defunc_2_radix_sort_step_arg_16864);\n                bool cond_f_res_16866 = defunc_0_get_bit_arg_16865 == 31;\n                bool cond_f_res_16867 = defunc_2_radix_sort_step_arg_16864 ==\n                     31;\n                int64_t discard_18975;\n                int64_t discard_18976;\n                int64_t discard_18977;\n                int64_t discard_18978;\n                int64_t scanacc_18960;\n                int64_t scanacc_18961;\n                int64_t scanacc_18962;\n                int64_t scanacc_18963;\n                \n                scanacc_18960 = (int64_t) 0;\n                scanacc_18961 = (int64_t) 0;\n                scanacc_18962 = (int64_t) 0;\n                scanacc_18963 = (int64_t) 0;\n                for (int64_t i_18969 = 0; i_18969 < g_16352; i_18969++) {\n                    float x_16885;\n                    \n                    x_16885 = ((__global\n                                float *) mem_param_19036)[phys_tid_16853 +\n                                                          i_18969 *\n                                                          num_threads_19505];\n                    \n                    int32_t i32_arg_16886;\n                    \n                    i32_arg_16886 = futrts_to_bits32(x_16885);\n                    \n                    int32_t unsign_arg_16887 = ashr32(i32_arg_16886,\n                                                      defunc_0_get_bit_arg_16865);\n                    int32_t unsign_arg_1688",
            "8 = 1 & unsign_arg_16887;\n                    int32_t unsign_arg_16889 = ashr32(i32_arg_16886, 31);\n                    int32_t unsign_arg_16890 = 1 & unsign_arg_16889;\n                    bool cond_16891 = unsign_arg_16890 == 1;\n                    bool x_16892 = !cond_16891;\n                    bool y_16893 = cond_f_res_16866 && x_16892;\n                    bool cond_16894 = cond_16891 || y_16893;\n                    int32_t defunc_1_get_bit_res_16895;\n                    \n                    if (cond_16894) {\n                        int32_t defunc_1_get_bit_res_t_res_16896 = 1 ^\n                                unsign_arg_16888;\n                        \n                        defunc_1_get_bit_res_16895 =\n                            defunc_1_get_bit_res_t_res_16896;\n                    } else {\n                        defunc_1_get_bit_res_16895 = unsign_arg_16888;\n                    }\n                    \n                    int32_t x_16897 = mul32(2, defunc_1_get_bit_res_16895);\n                    int32_t unsign_arg_16898 = ashr32(i32_arg_16886,\n                                                      defunc_2_radix_sort_step_arg_16864);\n                    int32_t unsign_arg_16899 = 1 & unsign_arg_16898;\n                    bool y_16900 = cond_f_res_16867 && x_16892;\n                    bool cond_16901 = cond_16891 || y_16900;\n                    int32_t defunc_1_get_bit_res_16902;\n                    \n                    if (cond_16901) {\n                        int32_t defunc_1_get_bit_res_t_res_16903 = 1 ^\n                                unsign_arg_16899;\n                        \n                        defunc_1_get_bit_res_16902 =\n                            defunc_1_get_bit_res_t_res_16903;\n                    } else {\n                        defunc_1_get_bit_res_16902 = unsign_arg_16899;\n                    }\n                    \n                    int32_t defunc_0_f_res_16904 = add32(x_16897,\n                                                         defunc",
            "_1_get_bit_res_16902);\n                    bool cond_16905 = defunc_0_f_res_16904 == 0;\n                    int64_t defunc_0_f_res_16906 = btoi_bool_i64(cond_16905);\n                    int64_t defunc_0_f_res_16907;\n                    int64_t defunc_0_f_res_16908;\n                    int64_t defunc_0_f_res_16909;\n                    \n                    if (cond_16905) {\n                        defunc_0_f_res_16907 = (int64_t) 0;\n                        defunc_0_f_res_16908 = (int64_t) 0;\n                        defunc_0_f_res_16909 = (int64_t) 0;\n                    } else {\n                        bool cond_16910 = defunc_0_f_res_16904 == 1;\n                        int64_t defunc_0_f_res_f_res_16911 =\n                                btoi_bool_i64(cond_16910);\n                        int64_t defunc_0_f_res_f_res_16912;\n                        int64_t defunc_0_f_res_f_res_16913;\n                        \n                        if (cond_16910) {\n                            defunc_0_f_res_f_res_16912 = (int64_t) 0;\n                            defunc_0_f_res_f_res_16913 = (int64_t) 0;\n                        } else {\n                            bool cond_16914 = defunc_0_f_res_16904 == 2;\n                            int64_t defunc_0_f_res_f_res_f_res_16915 =\n                                    btoi_bool_i64(cond_16914);\n                            bool cond_neg_16916 = !cond_16914;\n                            int64_t defunc_0_f_res_f_res_f_res_16917 =\n                                    btoi_bool_i64(cond_neg_16916);\n                            \n                            defunc_0_f_res_f_res_16912 =\n                                defunc_0_f_res_f_res_f_res_16915;\n                            defunc_0_f_res_f_res_16913 =\n                                defunc_0_f_res_f_res_f_res_16917;\n                        }\n                        defunc_0_f_res_16907 = defunc_0_f_res_f_res_16911;\n                        defunc_0_f_res_16908 = defunc_0_f_res_f_res_16912;\n        ",
            "                defunc_0_f_res_16909 = defunc_0_f_res_f_res_16913;\n                    }\n                    \n                    int64_t defunc_1_op_res_16881 = add64(defunc_0_f_res_16906,\n                                                          scanacc_18960);\n                    int64_t defunc_1_op_res_16882 = add64(defunc_0_f_res_16907,\n                                                          scanacc_18961);\n                    int64_t defunc_1_op_res_16883 = add64(defunc_0_f_res_16908,\n                                                          scanacc_18962);\n                    int64_t defunc_1_op_res_16884 = add64(defunc_0_f_res_16909,\n                                                          scanacc_18963);\n                    \n                    ((__global int64_t *) color_19483)[phys_tid_16853 +\n                                                       i_18969 *\n                                                       num_threads_19505] =\n                        defunc_1_op_res_16881;\n                    ((__global int64_t *) color_19482)[phys_tid_16853 +\n                                                       i_18969 *\n                                                       num_threads_19505] =\n                        defunc_1_op_res_16882;\n                    ((__global int64_t *) color_19481)[phys_tid_16853 +\n                                                       i_18969 *\n                                                       num_threads_19505] =\n                        defunc_1_op_res_16883;\n                    ((__global int64_t *) color_19480)[phys_tid_16853 +\n                                                       i_18969 *\n                                                       num_threads_19505] =\n                        defunc_1_op_res_16884;\n                    ((__global int32_t *) color_19476)[phys_tid_16853 +\n                                                       i_18969 *\n                                                       num_threads_19505] =\n",
            "                        defunc_0_f_res_16904;\n                    \n                    int64_t scanacc_tmp_19587 = defunc_1_op_res_16881;\n                    int64_t scanacc_tmp_19588 = defunc_1_op_res_16882;\n                    int64_t scanacc_tmp_19589 = defunc_1_op_res_16883;\n                    int64_t scanacc_tmp_19590 = defunc_1_op_res_16884;\n                    \n                    scanacc_18960 = scanacc_tmp_19587;\n                    scanacc_18961 = scanacc_tmp_19588;\n                    scanacc_18962 = scanacc_tmp_19589;\n                    scanacc_18963 = scanacc_tmp_19590;\n                }\n                discard_18975 = scanacc_18960;\n                discard_18976 = scanacc_18961;\n                discard_18977 = scanacc_18962;\n                discard_18978 = scanacc_18963;\n                \n                int64_t last_res_16918;\n                \n                last_res_16918 = ((__global\n                                   int64_t *) color_19483)[phys_tid_16853 +\n                                                           i_16359 *\n                                                           num_threads_19505];\n                \n                int64_t last_res_16919;\n                \n                last_res_16919 = ((__global\n                                   int64_t *) color_19482)[phys_tid_16853 +\n                                                           i_16359 *\n                                                           num_threads_19505];\n                \n                int64_t last_res_16920;\n                \n                last_res_16920 = ((__global\n                                   int64_t *) color_19481)[phys_tid_16853 +\n                                                           i_16359 *\n                                                           num_threads_19505];\n                for (int64_t i_19596 = 0; i_19596 < g_16352; i_19596++) {\n                    float tmp_19597;\n                    \n                    tmp_19597 = ((__global\n ",
            "                                 float *) mem_param_19036)[phys_tid_16853 +\n                                                            i_19596 *\n                                                            num_threads_19505];\n                    ((__global float *) mem_param_out_19457)[phys_tid_16853 +\n                                                             i_19596 *\n                                                             num_threads_19505] =\n                        tmp_19597;\n                }\n                for (int64_t i_19598 = 0; i_19598 < g_16352; i_19598++) {\n                    int64_t tmp_19599;\n                    \n                    tmp_19599 = ((__global\n                                  int64_t *) mem_param_19041)[phys_tid_16853 +\n                                                              i_19598 *\n                                                              num_threads_19505];\n                    ((__global int64_t *) mem_param_out_19461)[phys_tid_16853 +\n                                                               i_19598 *\n                                                               num_threads_19505] =\n                        tmp_19599;\n                }\n                for (int64_t write_iter_18979 = 0; write_iter_18979 < g_16352;\n                     write_iter_18979++) {\n                    int32_t write_iv_18982;\n                    \n                    write_iv_18982 = ((__global\n                                       int32_t *) color_19476)[phys_tid_16853 +\n                                                               write_iter_18979 *\n                                                               num_threads_19505];\n                    \n                    bool match_lit_16932 = 0 == write_iv_18982;\n                    int64_t defunc_1_f_res_16933;\n                    \n                    if (match_lit_16932) {\n                        int64_t write_iv_18983;\n                        \n                        write_iv_18983",
            " = ((__global\n                                           int64_t *) color_19483)[phys_tid_16853 +\n                                                                   write_iter_18979 *\n                                                                   num_threads_19505];\n                        \n                        int64_t case_res_16934 = sub64(write_iv_18983,\n                                                       (int64_t) 1);\n                        \n                        defunc_1_f_res_16933 = case_res_16934;\n                    } else {\n                        bool match_lit_16935 = 1 == write_iv_18982;\n                        int64_t x_16936;\n                        \n                        if (match_lit_16935) {\n                            int64_t write_iv_18984;\n                            \n                            write_iv_18984 = ((__global\n                                               int64_t *) color_19482)[phys_tid_16853 +\n                                                                       write_iter_18979 *\n                                                                       num_threads_19505];\n                            \n                            int64_t x_16937 = add64(last_res_16918,\n                                                    write_iv_18984);\n                            int64_t case_res_16938 = sub64(x_16937,\n                                                           (int64_t) 1);\n                            \n                            x_16936 = case_res_16938;\n                        } else {\n                            bool match_lit_16939 = 2 == write_iv_18982;\n                            int64_t x_16940;\n                            \n                            if (match_lit_16939) {\n                                int64_t write_iv_18985;\n                                \n                                write_iv_18985 = ((__global\n                                                   int64_t *) color_19481)[phys_tid_16853 +",
            "\n                                                                           write_iter_18979 *\n                                                                           num_threads_19505];\n                                \n                                int64_t x_16941 = add64(last_res_16918,\n                                                        last_res_16919);\n                                int64_t x_16942 = add64(x_16941,\n                                                        write_iv_18985);\n                                int64_t case_res_16943 = sub64(x_16942,\n                                                               (int64_t) 1);\n                                \n                                x_16940 = case_res_16943;\n                            } else {\n                                int64_t write_iv_18986;\n                                \n                                write_iv_18986 = ((__global\n                                                   int64_t *) color_19480)[phys_tid_16853 +\n                                                                           write_iter_18979 *\n                                                                           num_threads_19505];\n                                \n                                int64_t x_16944 = add64(last_res_16918,\n                                                        last_res_16919);\n                                int64_t x_16945 = add64(last_res_16920,\n                                                        x_16944);\n                                int64_t x_16946 = add64(x_16945,\n                                                        write_iv_18986);\n                                int64_t defunc_1_f_res_res_16947 =\n                                        sub64(x_16946, (int64_t) 1);\n                                \n                                x_16940 = defunc_1_f_res_res_16947;\n                            }\n                            x_16936 = x_16940;\n                   ",
            "     }\n                        defunc_1_f_res_16933 = x_16936;\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_16933) &&\n                        slt64(defunc_1_f_res_16933, g_16352)) {\n                        for (int64_t i_19602 = 0; i_19602 < (int64_t) 1;\n                             i_19602++) {\n                            float tmp_19603;\n                            \n                            tmp_19603 = ((__global\n                                          float *) mem_param_19036)[phys_tid_16853 +\n                                                                    num_threads_19505 *\n                                                                    write_iter_18979 +\n                                                                    i_19602 *\n                                                                    num_threads_19505];\n                            ((__global\n                              float *) mem_param_out_19457)[phys_tid_16853 +\n                                                            num_threads_19505 *\n                                                            defunc_1_f_res_16933 +\n                                                            i_19602 *\n                                                            num_threads_19505] =\n                                tmp_19603;\n                        }\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_16933) &&\n                        slt64(defunc_1_f_res_16933, g_16352)) {\n                        for (int64_t i_19604 = 0; i_19604 < (int64_t) 1;\n                             i_19604++) {\n                            int64_t tmp_19605;\n                            \n                            tmp_19605 = ((__global\n                                          int64_t *) mem_param_19041)[phys_tid_16853 +\n                                                                      num_threads_19505 *\n                                             ",
            "                         write_iter_18979 +\n                                                                      i_19604 *\n                                                                      num_threads_19505];\n                            ((__global\n                              int64_t *) mem_param_out_19461)[phys_tid_16853 +\n                                                              num_threads_19505 *\n                                                              defunc_1_f_res_16933 +\n                                                              i_19604 *\n                                                              num_threads_19505] =\n                                tmp_19605;\n                        }\n                    }\n                }\n                \n                __global unsigned char *mem_param_tmp_19581;\n                \n                mem_param_tmp_19581 = mem_param_out_19457;\n                \n                __global unsigned char *mem_param_out_tmp_19582;\n                \n                mem_param_out_tmp_19582 = mem_param_19036;\n                \n                __global unsigned char *mem_param_tmp_19583;\n                \n                mem_param_tmp_19583 = mem_param_out_19461;\n                \n                __global unsigned char *mem_param_out_tmp_19584;\n                \n                mem_param_out_tmp_19584 = mem_param_19041;\n                mem_param_19036 = mem_param_tmp_19581;\n                mem_param_out_19457 = mem_param_out_tmp_19582;\n                mem_param_19041 = mem_param_tmp_19583;\n                mem_param_out_19461 = mem_param_out_tmp_19584;\n            }\n            ext_mem_19150 = mem_param_19036;\n            ext_mem_unused_19456 = mem_param_out_19457;\n            ext_mem_19149 = mem_param_19041;\n            ext_mem_unused_19460 = mem_param_out_19461;\n            for (int64_t i_18995 = 0; i_18995 < g_16352; i_18995++) {\n                int64_t x_16950;\n                \n                x_16950 = ((__global int6",
            "4_t *) ext_mem_19149)[phys_tid_16853 +\n                                                               i_18995 *\n                                                               num_threads_19505];\n                \n                bool x_16951 = sle64((int64_t) 0, x_16950);\n                bool y_16952 = slt64(x_16950, g_16352);\n                bool bounds_check_16953 = x_16951 && y_16952;\n                bool index_certs_16954;\n                \n                if (!bounds_check_16953) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 0) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_16950;\n                            global_failure_args[1] = (int64_t) g_16352;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                for (int64_t i_19608 = 0; i_19608 < (int64_t) 1; i_19608++) {\n                    float tmp_19609;\n                    \n                    tmp_19609 = ((__global float *) mem_19015)[b_16351 *\n                                                               x_16950 +\n                                                               gtid_16852 +\n                                                               i_19608 *\n                                                               b_16351];\n                    ((__global float *) color_19477)[phys_tid_16853 +\n                                                     num_threads_19505 *\n                                                     i_18995 + i_19608 *\n                                                     num_threads_19505] =\n                        tmp_19609;\n                }\n                for (int64_t i_19610 = 0; i_19610 < (int64_t) 1; i_19610++) {\n                    float tmp_19611;\n                    \n                    tmp_19611 = ((__global\n                        ",
            "          float *) color_19484)[phys_tid_16853 +\n                                                        num_threads_19505 *\n                                                        x_16950 + i_19610 *\n                                                        num_threads_19505];\n                    ((__global float *) color_19476)[phys_tid_16853 +\n                                                     num_threads_19505 *\n                                                     i_18995 + i_19610 *\n                                                     num_threads_19505] =\n                        tmp_19611;\n                }\n            }\n            for (int64_t i_19612 = 0; i_19612 < g_16352; i_19612++) {\n                float tmp_19613;\n                \n                tmp_19613 = ((__global float *) color_19477)[phys_tid_16853 +\n                                                             i_19612 *\n                                                             num_threads_19505];\n                ((__global float *) mem_19191)[gtid_16852 + i_19612 * b_16351] =\n                    tmp_19613;\n            }\n            for (int64_t i_19614 = 0; i_19614 < g_16352; i_19614++) {\n                float tmp_19615;\n                \n                tmp_19615 = ((__global float *) color_19476)[phys_tid_16853 +\n                                                             i_19614 *\n                                                             num_threads_19505];\n                ((__global float *) mem_19194)[gtid_16852 + i_19614 * b_16351] =\n                    tmp_19615;\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_16847\n}\n__kernel void sortBagzisegmap_17517(__global int *global_failure,\n                                    int64_t b_16351, int64_t g_16352, __global\n                                    unsigned char *keys_mem_19005, __global\n                                    unsigned char ",
            "*mem_19274)\n{\n    #define segmap_group_sizze_17512 (sortBagzisegmap_group_sizze_17488)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19668;\n    int32_t local_tid_19669;\n    int64_t group_sizze_19672;\n    int32_t wave_sizze_19671;\n    int32_t group_tid_19670;\n    \n    global_tid_19668 = get_global_id(0);\n    local_tid_19669 = get_local_id(0);\n    group_sizze_19672 = get_local_size(0);\n    wave_sizze_19671 = LOCKSTEP_WIDTH;\n    group_tid_19670 = get_group_id(0);\n    \n    int32_t phys_tid_17517 = global_tid_19668;\n    int64_t global_tid_19673 = sext_i32_i64(group_tid_19670) *\n            segmap_group_sizze_17512 + sext_i32_i64(local_tid_19669);\n    int64_t slice_19674 = g_16352;\n    int64_t slice_19675 = b_16351 * slice_19674;\n    int64_t gtid_17515 = squot64(global_tid_19673, slice_19674);\n    int64_t remnant_19676 = global_tid_19673 - gtid_17515 * slice_19674;\n    int64_t gtid_17516 = remnant_19676;\n    int64_t remnant_19677 = remnant_19676 - gtid_17516;\n    \n    if (slt64(gtid_17515, b_16351) && slt64(gtid_17516, g_16352)) {\n        float x_17518;\n        \n        x_17518 = ((__global float *) keys_mem_19005)[gtid_17515 * g_16352 +\n                                                      gtid_17516];\n        \n        float defunc_0_f_res_17519 = fmax32(0.0F, x_17518);\n        \n        ((__global float *) mem_19274)[gtid_17515 * g_16352 + gtid_17516] =\n            defunc_0_f_res_17519;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17512\n}\n__kernel void sortBagzisegmap_17718(__global int *global_failure,\n                                    int64_t b_16351, int64_t g_16352,\n                                    int64_t i_16359, __global\n                                    unsigned char *mem_param_19290, __global\n                                    unsigned char *mem_param_19298, __global\n                                    unsigne",
            "d char *mem_19306, __global\n                                    unsigned char *mem_19310, __global\n                                    unsigned char *mem_19347, __global\n                                    unsigned char *mem_19351, __global\n                                    unsigned char *mem_19355, __global\n                                    unsigned char *mem_19359, __global\n                                    unsigned char *mem_19363)\n{\n    #define segmap_group_sizze_17712 (sortBagzisegmap_group_sizze_17260)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20008;\n    int32_t local_tid_20009;\n    int64_t group_sizze_20012;\n    int32_t wave_sizze_20011;\n    int32_t group_tid_20010;\n    \n    global_tid_20008 = get_global_id(0);\n    local_tid_20009 = get_local_id(0);\n    group_sizze_20012 = get_local_size(0);\n    wave_sizze_20011 = LOCKSTEP_WIDTH;\n    group_tid_20010 = get_group_id(0);\n    \n    int32_t phys_tid_17718 = global_tid_20008;\n    int64_t global_tid_20013 = sext_i32_i64(group_tid_20010) *\n            segmap_group_sizze_17712 + sext_i32_i64(local_tid_20009);\n    int64_t slice_20014 = g_16352;\n    int64_t slice_20015 = b_16351 * slice_20014;\n    int64_t gtid_17716 = squot64(global_tid_20013, slice_20014);\n    int64_t remnant_20016 = global_tid_20013 - gtid_17716 * slice_20014;\n    int64_t gtid_17717 = remnant_20016;\n    int64_t remnant_20017 = remnant_20016 - gtid_17717;\n    \n    if (slt64(gtid_17716, b_16351) && slt64(gtid_17717, g_16352)) {\n        int32_t x_17722;\n        \n        x_17722 = ((__global int32_t *) mem_19363)[gtid_17716 * g_16352 +\n                                                   gtid_17717];\n        \n        float write_value_17727;\n        \n        write_value_17727 = ((__global float *) mem_param_19290)[gtid_17716 *\n                                                                 g_16352 +\n                      ",
            "                                           gtid_17717];\n        \n        int64_t write_value_17728;\n        \n        write_value_17728 = ((__global int64_t *) mem_param_19298)[gtid_17716 *\n                                                                   g_16352 +\n                                                                   gtid_17717];\n        \n        bool match_lit_17729 = 0 == x_17722;\n        int64_t defunc_1_f_res_17730;\n        \n        if (match_lit_17729) {\n            int64_t x_17723;\n            \n            x_17723 = ((__global int64_t *) mem_19347)[gtid_17716 * g_16352 +\n                                                       gtid_17717];\n            \n            int64_t case_res_17731 = sub64(x_17723, (int64_t) 1);\n            \n            defunc_1_f_res_17730 = case_res_17731;\n        } else {\n            int64_t last_res_17719;\n            \n            last_res_17719 = ((__global int64_t *) mem_19347)[gtid_17716 *\n                                                              g_16352 +\n                                                              i_16359];\n            \n            bool match_lit_17732 = 1 == x_17722;\n            int64_t x_17733;\n            \n            if (match_lit_17732) {\n                int64_t x_17724;\n                \n                x_17724 = ((__global int64_t *) mem_19351)[gtid_17716 *\n                                                           g_16352 +\n                                                           gtid_17717];\n                \n                int64_t x_17734 = add64(last_res_17719, x_17724);\n                int64_t case_res_17735 = sub64(x_17734, (int64_t) 1);\n                \n                x_17733 = case_res_17735;\n            } else {\n                int64_t last_res_17720;\n                \n                last_res_17720 = ((__global int64_t *) mem_19351)[gtid_17716 *\n                                                                  g_16352 +\n                                                           ",
            "       i_16359];\n                \n                bool match_lit_17736 = 2 == x_17722;\n                int64_t x_17737;\n                \n                if (match_lit_17736) {\n                    int64_t x_17725;\n                    \n                    x_17725 = ((__global int64_t *) mem_19355)[gtid_17716 *\n                                                               g_16352 +\n                                                               gtid_17717];\n                    \n                    int64_t x_17738 = add64(last_res_17719, last_res_17720);\n                    int64_t x_17739 = add64(x_17725, x_17738);\n                    int64_t case_res_17740 = sub64(x_17739, (int64_t) 1);\n                    \n                    x_17737 = case_res_17740;\n                } else {\n                    int64_t last_res_17721;\n                    \n                    last_res_17721 = ((__global\n                                       int64_t *) mem_19355)[gtid_17716 *\n                                                             g_16352 + i_16359];\n                    \n                    int64_t x_17726;\n                    \n                    x_17726 = ((__global int64_t *) mem_19359)[gtid_17716 *\n                                                               g_16352 +\n                                                               gtid_17717];\n                    \n                    int64_t x_17741 = add64(last_res_17719, last_res_17720);\n                    int64_t x_17742 = add64(last_res_17721, x_17741);\n                    int64_t x_17743 = add64(x_17726, x_17742);\n                    int64_t defunc_1_f_res_res_17744 = sub64(x_17743,\n                                                             (int64_t) 1);\n                    \n                    x_17737 = defunc_1_f_res_res_17744;\n                }\n                x_17733 = x_17737;\n            }\n            defunc_1_f_res_17730 = x_17733;\n        }\n        if ((sle64((int64_t) 0, gtid_17716) && slt64(gtid_17716, b_1",
            "6351)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_17730) &&\n             slt64(defunc_1_f_res_17730, g_16352))) {\n            ((__global float *) mem_19306)[gtid_17716 * g_16352 +\n                                           defunc_1_f_res_17730] =\n                write_value_17727;\n        }\n        if ((sle64((int64_t) 0, gtid_17716) && slt64(gtid_17716, b_16351)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_17730) &&\n             slt64(defunc_1_f_res_17730, g_16352))) {\n            ((__global int64_t *) mem_19310)[gtid_17716 * g_16352 +\n                                             defunc_1_f_res_17730] =\n                write_value_17728;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17712\n}\n__kernel void sortBagzisegmap_17759(__global int *global_failure,\n                                    int failure_is_an_option, __global\n                                    int64_t *global_failure_args,\n                                    int64_t b_16351, int64_t g_16352, __global\n                                    unsigned char *values_mem_19006, __global\n                                    unsigned char *mem_19274, __global\n                                    unsigned char *ext_mem_19371, __global\n                                    unsigned char *mem_19391, __global\n                                    unsigned char *mem_19395)\n{\n    #define segmap_group_sizze_17753 (sortBagzisegmap_group_sizze_17094)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20020;\n    int32_t local_tid_20021;\n    int64_t group_sizze_20024;\n    int32_t wave_sizze_20023;\n    int32_t group_tid_20022;\n    \n    global_tid_20020 = get_global_id(0);\n    local_tid_20021 = get_local_id(0);\n    group_sizze_20024 = get_local_size(0);\n    wave_sizze_20023 = LOCKSTEP_WIDTH;\n    group_tid_20022 = get_group_id(0);\n    \n    int32_t phys_tid_17759 = glob",
            "al_tid_20020;\n    int64_t global_tid_20025 = sext_i32_i64(group_tid_20022) *\n            segmap_group_sizze_17753 + sext_i32_i64(local_tid_20021);\n    int64_t slice_20026 = g_16352;\n    int64_t slice_20027 = b_16351 * slice_20026;\n    int64_t gtid_17757 = squot64(global_tid_20025, slice_20026);\n    int64_t remnant_20028 = global_tid_20025 - gtid_17757 * slice_20026;\n    int64_t gtid_17758 = remnant_20028;\n    int64_t remnant_20029 = remnant_20028 - gtid_17758;\n    \n    if (slt64(gtid_17757, b_16351) && slt64(gtid_17758, g_16352)) {\n        int64_t x_17762;\n        \n        x_17762 = ((__global int64_t *) ext_mem_19371)[gtid_17757 * g_16352 +\n                                                       gtid_17758];\n        \n        bool x_17763 = sle64((int64_t) 0, x_17762);\n        bool y_17764 = slt64(x_17762, g_16352);\n        bool bounds_check_17765 = x_17763 && y_17764;\n        bool index_certs_17766;\n        \n        if (!bounds_check_17765) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 2) == -1) {\n                    global_failure_args[0] = (int64_t) x_17762;\n                    global_failure_args[1] = (int64_t) g_16352;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float defunc_0_f_res_17767;\n        \n        defunc_0_f_res_17767 = ((__global\n                                 float *) values_mem_19006)[gtid_17757 *\n                                                            g_16352 + x_17762];\n        \n        float defunc_0_f_res_17768;\n        \n        defunc_0_f_res_17768 = ((__global float *) mem_19274)[gtid_17757 *\n                                                              g_16352 +\n                                                              x_17762];\n        ((__global float *) mem_19391)[gtid_17757 * g_16352 + gtid_17758] =\n            defunc_0_f_res_17767;\n        ((__global float *) mem_19395)[gtid_17757 * g_16352 + gtid_17758] =\n            defunc_0_f_res_",
            "17768;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17753\n}\n__kernel void sortBagzisegmap_intragroup_16965(__global int *global_failure,\n                                               int failure_is_an_option,\n                                               __global\n                                               int64_t *global_failure_args,\n                                               uint color_19496_backing_offset_0,\n                                               uint color_19495_backing_offset_1,\n                                               uint color_19494_backing_offset_2,\n                                               uint color_19493_backing_offset_3,\n                                               uint color_19492_backing_offset_4,\n                                               uint color_19491_backing_offset_5,\n                                               uint color_19489_backing_offset_6,\n                                               uint color_19488_backing_offset_7,\n                                               uint color_19487_backing_offset_8,\n                                               int64_t b_16351, int64_t g_16352,\n                                               int32_t iters_16356,\n                                               int64_t i_16359, __global\n                                               unsigned char *keys_mem_19005,\n                                               __global\n                                               unsigned char *values_mem_19006,\n                                               __global\n                                               unsigned char *mem_19265,\n                                               __global\n                                               unsigned char *mem_19269,\n                                               __global\n                                               unsigned char *color_19486,\n                                               __global\n                   ",
            "                            unsigned char *color_19490)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19496_backing_8 =\n                           &shared_mem[color_19496_backing_offset_0];\n    volatile unsigned char *color_19495_backing_7 =\n                           &shared_mem[color_19495_backing_offset_1];\n    volatile unsigned char *color_19494_backing_6 =\n                           &shared_mem[color_19494_backing_offset_2];\n    volatile unsigned char *color_19493_backing_5 =\n                           &shared_mem[color_19493_backing_offset_3];\n    volatile unsigned char *color_19492_backing_4 =\n                           &shared_mem[color_19492_backing_offset_4];\n    volatile unsigned char *color_19491_backing_3 =\n                           &shared_mem[color_19491_backing_offset_5];\n    volatile unsigned char *color_19489_backing_2 =\n                           &shared_mem[color_19489_backing_offset_6];\n    volatile unsigned char *color_19488_backing_1 =\n                           &shared_mem[color_19488_backing_offset_7];\n    volatile unsigned char *color_19487_backing_0 =\n                           &shared_mem[color_19487_backing_offset_8];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19618;\n    int32_t local_tid_19619;\n    int64_t group_sizze_19622;\n    int32_t wave_sizze_19621;\n    int32_t group_tid_19620;\n    \n    global_tid_19618 = get_global_id(0);\n    local_tid_19619 = get_local_id(0);\n    group_sizze_19622 = get_local_size(0);\n    wave_sizze_19621 = LOCKSTEP_WIDTH;\n    group_tid_19620 = get_group_id(0);\n    \n    int32_t phys_tid_16965 = group_tid_19620;\n    int64_t slice_19624 = g_16352;\n    int64_t ltid_pre_19623 = sext_i32_i64(local_tid_19619);\n    int64_t",
            " remnant_19625 = sext_i32_i64(local_tid_19619) - ltid_pre_19623;\n    int64_t slice_19626 = b_16351;\n    int64_t gtid_16964 = sext_i32_i64(group_tid_19620);\n    int64_t remnant_19627 = sext_i32_i64(group_tid_19620) - gtid_16964;\n    __local unsigned char *color_19487;\n    \n    color_19487 = (__local unsigned char *) color_19487_backing_0;\n    \n    __local unsigned char *color_19488;\n    \n    color_19488 = (__local unsigned char *) color_19488_backing_1;\n    \n    __local unsigned char *color_19489;\n    \n    color_19489 = (__local unsigned char *) color_19489_backing_2;\n    \n    __local unsigned char *color_19491;\n    \n    color_19491 = (__local unsigned char *) color_19491_backing_3;\n    \n    __local unsigned char *color_19492;\n    \n    color_19492 = (__local unsigned char *) color_19492_backing_4;\n    \n    __local unsigned char *color_19493;\n    \n    color_19493 = (__local unsigned char *) color_19493_backing_5;\n    \n    __local unsigned char *color_19494;\n    \n    color_19494 = (__local unsigned char *) color_19494_backing_6;\n    \n    __local unsigned char *color_19495;\n    \n    color_19495 = (__local unsigned char *) color_19495_backing_7;\n    \n    __local unsigned char *color_19496;\n    \n    color_19496 = (__local unsigned char *) color_19496_backing_8;\n    \n    int32_t phys_tid_16972 = local_tid_19619;\n    int64_t gtid_16971 = sext_i32_i64(sext_i64_i32(ltid_pre_19623));\n    float x_16973;\n    \n    x_16973 = ((__global float *) keys_mem_19005)[gtid_16964 * g_16352 +\n                                                  gtid_16971];\n    \n    float defunc_0_f_res_16974 = fmax32(0.0F, x_16973);\n    \n    ((__local float *) color_19496)[gtid_16971] = defunc_0_f_res_16974;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19628;\n    \n    tmp_19628 = ((__local float *) color_19496)[sext_i32_i64(local_tid_19619)];\n    ((__local float *) color_19487)[sext_i32_i64(local_tid_19619)] = tmp_19628;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t x_19629 = (int64_t) 0 + sext_i",
            "32_i64(local_tid_19619) * (int64_t) 1;\n    \n    ((__global int64_t *) color_19486)[phys_tid_16965 * g_16352 +\n                                       sext_i32_i64(local_tid_19619)] = x_19629;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local unsigned char *ext_mem_19246;\n    __local unsigned char *ext_mem_unused_19466;\n    __global unsigned char *ext_mem_19245;\n    __global unsigned char *ext_mem_unused_19470;\n    __local unsigned char *mem_param_19204;\n    __global unsigned char *mem_param_19209;\n    __local unsigned char *mem_param_out_19467;\n    __global unsigned char *mem_param_out_19471;\n    \n    mem_param_19204 = color_19487;\n    mem_param_out_19467 = color_19491;\n    mem_param_19209 = color_19486;\n    mem_param_out_19471 = color_19490;\n    for (int32_t i_16977 = 0; i_16977 < iters_16356; i_16977++) {\n        int32_t defunc_2_radix_sort_step_arg_16980 = mul32(2, i_16977);\n        int32_t defunc_0_get_bit_arg_16981 = add32(1,\n                                                   defunc_2_radix_sort_step_arg_16980);\n        bool cond_f_res_16982 = defunc_0_get_bit_arg_16981 == 31;\n        bool cond_f_res_16983 = defunc_2_radix_sort_step_arg_16980 == 31;\n        int32_t phys_tid_16990 = local_tid_19619;\n        int64_t gtid_16989 = sext_i32_i64(sext_i64_i32(ltid_pre_19623));\n        float x_17003;\n        \n        x_17003 = ((__local float *) mem_param_19204)[gtid_16989];\n        \n        int32_t i32_arg_17004;\n        \n        i32_arg_17004 = futrts_to_bits32(x_17003);\n        \n        int32_t unsign_arg_17005 = ashr32(i32_arg_17004,\n                                          defunc_0_get_bit_arg_16981);\n        int32_t unsign_arg_17006 = 1 & unsign_arg_17005;\n        int32_t unsign_arg_17007 = ashr32(i32_arg_17004, 31);\n        int32_t unsign_arg_17008 = 1 & unsign_arg_17007;\n        bool cond_17009 = unsign_arg_17008 == 1;\n        bool x_17010 = !cond_17009;\n        bool y_17011 = cond_f_res_16982 && x_17010;\n        bool cond_17012 = cond_17009 || y_17011;\n      ",
            "  int32_t defunc_1_get_bit_res_17013;\n        \n        if (cond_17012) {\n            int32_t defunc_1_get_bit_res_t_res_17014 = 1 ^ unsign_arg_17006;\n            \n            defunc_1_get_bit_res_17013 = defunc_1_get_bit_res_t_res_17014;\n        } else {\n            defunc_1_get_bit_res_17013 = unsign_arg_17006;\n        }\n        \n        int32_t x_17015 = mul32(2, defunc_1_get_bit_res_17013);\n        int32_t unsign_arg_17016 = ashr32(i32_arg_17004,\n                                          defunc_2_radix_sort_step_arg_16980);\n        int32_t unsign_arg_17017 = 1 & unsign_arg_17016;\n        bool y_17018 = cond_f_res_16983 && x_17010;\n        bool cond_17019 = cond_17009 || y_17018;\n        int32_t defunc_1_get_bit_res_17020;\n        \n        if (cond_17019) {\n            int32_t defunc_1_get_bit_res_t_res_17021 = 1 ^ unsign_arg_17017;\n            \n            defunc_1_get_bit_res_17020 = defunc_1_get_bit_res_t_res_17021;\n        } else {\n            defunc_1_get_bit_res_17020 = unsign_arg_17017;\n        }\n        \n        int32_t defunc_0_f_res_17022 = add32(x_17015,\n                                             defunc_1_get_bit_res_17020);\n        bool cond_17023 = defunc_0_f_res_17022 == 0;\n        int64_t defunc_0_f_res_17024 = btoi_bool_i64(cond_17023);\n        int64_t defunc_0_f_res_17025;\n        int64_t defunc_0_f_res_17026;\n        int64_t defunc_0_f_res_17027;\n        \n        if (cond_17023) {\n            defunc_0_f_res_17025 = (int64_t) 0;\n            defunc_0_f_res_17026 = (int64_t) 0;\n            defunc_0_f_res_17027 = (int64_t) 0;\n        } else {\n            bool cond_17028 = defunc_0_f_res_17022 == 1;\n            int64_t defunc_0_f_res_f_res_17029 = btoi_bool_i64(cond_17028);\n            int64_t defunc_0_f_res_f_res_17030;\n            int64_t defunc_0_f_res_f_res_17031;\n            \n            if (cond_17028) {\n                defunc_0_f_res_f_res_17030 = (int64_t) 0;\n                defunc_0_f_res_f_res_17031 = (int64_t) 0;\n            } else {\n    ",
            "            bool cond_17032 = defunc_0_f_res_17022 == 2;\n                int64_t defunc_0_f_res_f_res_f_res_17033 =\n                        btoi_bool_i64(cond_17032);\n                bool cond_neg_17034 = !cond_17032;\n                int64_t defunc_0_f_res_f_res_f_res_17035 =\n                        btoi_bool_i64(cond_neg_17034);\n                \n                defunc_0_f_res_f_res_17030 = defunc_0_f_res_f_res_f_res_17033;\n                defunc_0_f_res_f_res_17031 = defunc_0_f_res_f_res_f_res_17035;\n            }\n            defunc_0_f_res_17025 = defunc_0_f_res_f_res_17029;\n            defunc_0_f_res_17026 = defunc_0_f_res_f_res_17030;\n            defunc_0_f_res_17027 = defunc_0_f_res_f_res_17031;\n        }\n        ((__local int64_t *) color_19495)[gtid_16989] = defunc_0_f_res_17024;\n        ((__local int64_t *) color_19494)[gtid_16989] = defunc_0_f_res_17025;\n        ((__local int64_t *) color_19493)[gtid_16989] = defunc_0_f_res_17026;\n        ((__local int64_t *) color_19492)[gtid_16989] = defunc_0_f_res_17027;\n        ((__local int32_t *) color_19489)[gtid_16989] = defunc_0_f_res_17022;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t dims_flat_19636 = g_16352;\n        int64_t x_16991;\n        int64_t x_16992;\n        int64_t x_16993;\n        int64_t x_16994;\n        int64_t x_16995;\n        int64_t x_16996;\n        int64_t x_16997;\n        int64_t x_16998;\n        int64_t x_19641;\n        int64_t x_19642;\n        int64_t x_19643;\n        int64_t x_19644;\n        int64_t x_19645;\n        int64_t x_19646;\n        int64_t x_19647;\n        int64_t x_19648;\n        bool ltid_in_bounds_19653 = slt64(sext_i32_i64(local_tid_19619),\n                                          g_16352);\n        int32_t skip_threads_19654;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19653) {\n                x_16995 = ((volatile __local\n                            int64_t *) color_19495)[sext_i32_i64(local_tid_19619)];\n           ",
            "     x_16996 = ((volatile __local\n                            int64_t *) color_19494)[sext_i32_i64(local_tid_19619)];\n                x_16997 = ((volatile __local\n                            int64_t *) color_19493)[sext_i32_i64(local_tid_19619)];\n                x_16998 = ((volatile __local\n                            int64_t *) color_19492)[sext_i32_i64(local_tid_19619)];\n                if ((local_tid_19619 - squot32(local_tid_19619, 32) * 32) ==\n                    0) {\n                    x_16991 = x_16995;\n                    x_16992 = x_16996;\n                    x_16993 = x_16997;\n                    x_16994 = x_16998;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19654 = 1;\n            while (slt32(skip_threads_19654, 32)) {\n                bool thread_active_19655 = sle32(skip_threads_19654,\n                                                 local_tid_19619 -\n                                                 squot32(local_tid_19619, 32) *\n                                                 32) && ltid_in_bounds_19653;\n                \n                if (thread_active_19655) {\n                    // read operands\n                    {\n                        x_16991 = ((volatile __local\n                                    int64_t *) color_19495)[sext_i32_i64(local_tid_19619) -\n                                                            sext_i32_i64(skip_threads_19654)];\n                        x_16992 = ((volatile __local\n                                    int64_t *) color_19494)[sext_i32_i64(local_tid_19619) -\n                                                            sext_i32_i64(skip_threads_19654)];\n                        x_16993 = ((volatile __local\n                                    int64_t *) color_19493)[sext_i32_i64(local_tid_19619) -\n                                                            sext_i32_i64(skip_threads_19654)];\n                        x_16994 = ((v",
            "olatile __local\n                                    int64_t *) color_19492)[sext_i32_i64(local_tid_19619) -\n                                                            sext_i32_i64(skip_threads_19654)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19656 =\n                         slt64(srem64(sext_i32_i64(local_tid_19619), g_16352),\n                               sext_i32_i64(local_tid_19619) -\n                               sext_i32_i64(local_tid_19619 -\n                               skip_threads_19654));\n                    \n                    if (thread_active_19655 && inactive_19656) {\n                        x_16991 = x_16995;\n                        x_16992 = x_16996;\n                        x_16993 = x_16997;\n                        x_16994 = x_16998;\n                    }\n                    if (thread_active_19655) {\n                        if (!inactive_19656) {\n                            int64_t defunc_1_op_res_16999 = add64(x_16991,\n                                                                  x_16995);\n                            int64_t defunc_1_op_res_17000 = add64(x_16992,\n                                                                  x_16996);\n                            int64_t defunc_1_op_res_17001 = add64(x_16993,\n                                                                  x_16997);\n                            int64_t defunc_1_op_res_17002 = add64(x_16994,\n                                                                  x_16998);\n                            \n                            x_16991 = defunc_1_op_res_16999;\n                            x_16992 = defunc_1_op_res_17000;\n                            x_16993 = defunc_1_op_res_17001;\n                            x_16994 = defunc_1_op_res_17002;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19621, skip_threads_19654)) {\n                   ",
            " barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19655) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19495)[sext_i32_i64(local_tid_19619)] =\n                            x_16991;\n                        x_16995 = x_16991;\n                        ((volatile __local\n                          int64_t *) color_19494)[sext_i32_i64(local_tid_19619)] =\n                            x_16992;\n                        x_16996 = x_16992;\n                        ((volatile __local\n                          int64_t *) color_19493)[sext_i32_i64(local_tid_19619)] =\n                            x_16993;\n                        x_16997 = x_16993;\n                        ((volatile __local\n                          int64_t *) color_19492)[sext_i32_i64(local_tid_19619)] =\n                            x_16994;\n                        x_16998 = x_16994;\n                    }\n                }\n                if (sle32(wave_sizze_19621, skip_threads_19654)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19654 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19619 - squot32(local_tid_19619, 32) * 32) == 31 &&\n                ltid_in_bounds_19653) {\n                ((volatile __local\n                  int64_t *) color_19495)[sext_i32_i64(squot32(local_tid_19619,\n                                                               32))] = x_16991;\n                ((volatile __local\n                  int64_t *) color_19494)[sext_i32_i64(squot32(local_tid_19619,\n                                                               32))] = x_16992;\n                ((volatile __local\n                  int64_t *) color_19493)[sext_i32_i64(squot32(local_tid_19619,\n                                              ",
            "                 32))] = x_16993;\n                ((volatile __local\n                  int64_t *) color_19492)[sext_i32_i64(squot32(local_tid_19619,\n                                                               32))] = x_16994;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19657;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19619, 32) == 0 && ltid_in_bounds_19653) {\n                    x_19645 = ((volatile __local\n                                int64_t *) color_19495)[sext_i32_i64(local_tid_19619)];\n                    x_19646 = ((volatile __local\n                                int64_t *) color_19494)[sext_i32_i64(local_tid_19619)];\n                    x_19647 = ((volatile __local\n                                int64_t *) color_19493)[sext_i32_i64(local_tid_19619)];\n                    x_19648 = ((volatile __local\n                                int64_t *) color_19492)[sext_i32_i64(local_tid_19619)];\n                    if ((local_tid_19619 - squot32(local_tid_19619, 32) * 32) ==\n                        0) {\n                        x_19641 = x_19645;\n                        x_19642 = x_19646;\n                        x_19643 = x_19647;\n                        x_19644 = x_19648;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19657 = 1;\n                while (slt32(skip_threads_19657, 32)) {\n                    bool thread_active_19658 = sle32(skip_threads_19657,\n                                                     local_tid_19619 -\n                                                     squot32(local_tid_19619,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19619, 32) == 0 &&\n    ",
            "                      ltid_in_bounds_19653);\n                    \n                    if (thread_active_19658) {\n                        // read operands\n                        {\n                            x_19641 = ((volatile __local\n                                        int64_t *) color_19495)[sext_i32_i64(local_tid_19619) -\n                                                                sext_i32_i64(skip_threads_19657)];\n                            x_19642 = ((volatile __local\n                                        int64_t *) color_19494)[sext_i32_i64(local_tid_19619) -\n                                                                sext_i32_i64(skip_threads_19657)];\n                            x_19643 = ((volatile __local\n                                        int64_t *) color_19493)[sext_i32_i64(local_tid_19619) -\n                                                                sext_i32_i64(skip_threads_19657)];\n                            x_19644 = ((volatile __local\n                                        int64_t *) color_19492)[sext_i32_i64(local_tid_19619) -\n                                                                sext_i32_i64(skip_threads_19657)];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19659 =\n                             slt64(srem64(sext_i32_i64(local_tid_19619 * 32 +\n                                          32 - 1), g_16352),\n                                   sext_i32_i64(local_tid_19619 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_19619 -\n                                                 skip_threads_19657) * 32 + 32 -\n                                   1));\n                        \n                        if (thread_active_19658 && inactive_19659) {\n                            x_19641 = x_19645;\n                            x_19642 = x_19646;\n                            x_19643 = x_19647;\n            ",
            "                x_19644 = x_19648;\n                        }\n                        if (thread_active_19658) {\n                            if (!inactive_19659) {\n                                int64_t defunc_1_op_res_19649 = add64(x_19641,\n                                                                      x_19645);\n                                int64_t defunc_1_op_res_19650 = add64(x_19642,\n                                                                      x_19646);\n                                int64_t defunc_1_op_res_19651 = add64(x_19643,\n                                                                      x_19647);\n                                int64_t defunc_1_op_res_19652 = add64(x_19644,\n                                                                      x_19648);\n                                \n                                x_19641 = defunc_1_op_res_19649;\n                                x_19642 = defunc_1_op_res_19650;\n                                x_19643 = defunc_1_op_res_19651;\n                                x_19644 = defunc_1_op_res_19652;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19621, skip_threads_19657)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19658) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) color_19495)[sext_i32_i64(local_tid_19619)] =\n                                x_19641;\n                            x_19645 = x_19641;\n                            ((volatile __local\n                              int64_t *) color_19494)[sext_i32_i64(local_tid_19619)] =\n                                x_19642;\n                            x_19646 = x_19642;\n                            ((volatile __local\n                              int64_t *) color_19493)[sext_i32_i64(local_tid_19",
            "619)] =\n                                x_19643;\n                            x_19647 = x_19643;\n                            ((volatile __local\n                              int64_t *) color_19492)[sext_i32_i64(local_tid_19619)] =\n                                x_19644;\n                            x_19648 = x_19644;\n                        }\n                    }\n                    if (sle32(wave_sizze_19621, skip_threads_19657)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19657 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19660 = squot32(local_tid_19619, 32) == 0 ||\n             !ltid_in_bounds_19653;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19660) {\n                    x_16995 = x_16991;\n                    x_16996 = x_16992;\n                    x_16997 = x_16993;\n                    x_16998 = x_16994;\n                    x_16991 = ((__local\n                                int64_t *) color_19495)[sext_i32_i64(squot32(local_tid_19619,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_16992 = ((__local\n                                int64_t *) color_19494)[sext_i32_i64(squot32(local_tid_19619,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_16993 = ((__local\n                                int64_t *) color_19493)[sext_i32_i64(squot32(local_tid_19619,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_16994 = ((__local\n                              ",
            "  int64_t *) color_19492)[sext_i32_i64(squot32(local_tid_19619,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19661 =\n                     slt64(srem64(sext_i32_i64(local_tid_19619), g_16352),\n                           sext_i32_i64(local_tid_19619) -\n                           sext_i32_i64(squot32(local_tid_19619, 32) * 32 - 1));\n                \n                if (!no_carry_in_19660) {\n                    if (inactive_19661) {\n                        x_16991 = x_16995;\n                        x_16992 = x_16996;\n                        x_16993 = x_16997;\n                        x_16994 = x_16998;\n                    }\n                }\n                if (!no_carry_in_19660) {\n                    if (!inactive_19661) {\n                        int64_t defunc_1_op_res_16999 = add64(x_16991, x_16995);\n                        int64_t defunc_1_op_res_17000 = add64(x_16992, x_16996);\n                        int64_t defunc_1_op_res_17001 = add64(x_16993, x_16997);\n                        int64_t defunc_1_op_res_17002 = add64(x_16994, x_16998);\n                        \n                        x_16991 = defunc_1_op_res_16999;\n                        x_16992 = defunc_1_op_res_17000;\n                        x_16993 = defunc_1_op_res_17001;\n                        x_16994 = defunc_1_op_res_17002;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19660) {\n                    ((__local\n                      int64_t *) color_19495)[sext_i32_i64(local_tid_19619)] =\n                        x_16991;\n                    ((__local\n                      int64_t *) color_19494)[sext_i32_i64(local_tid_19619)] =\n                        x_16992;\n                    ((__local\n                 ",
            "     int64_t *) color_19493)[sext_i32_i64(local_tid_19619)] =\n                        x_16993;\n                    ((__local\n                      int64_t *) color_19492)[sext_i32_i64(local_tid_19619)] =\n                        x_16994;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19619, 32) == 0 && ltid_in_bounds_19653) {\n                ((__local\n                  int64_t *) color_19495)[sext_i32_i64(local_tid_19619)] =\n                    x_16995;\n                ((__local\n                  int64_t *) color_19494)[sext_i32_i64(local_tid_19619)] =\n                    x_16996;\n                ((__local\n                  int64_t *) color_19493)[sext_i32_i64(local_tid_19619)] =\n                    x_16997;\n                ((__local\n                  int64_t *) color_19492)[sext_i32_i64(local_tid_19619)] =\n                    x_16998;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t last_res_17036;\n        \n        last_res_17036 = ((__local int64_t *) color_19495)[i_16359];\n        \n        int64_t last_res_17037;\n        \n        last_res_17037 = ((__local int64_t *) color_19494)[i_16359];\n        \n        int64_t last_res_17038;\n        \n        last_res_17038 = ((__local int64_t *) color_19493)[i_16359];\n        \n        float tmp_19662;\n        \n        tmp_19662 = ((__local\n                      float *) mem_param_19204)[sext_i32_i64(local_tid_19619)];\n        ((__local float *) mem_param_out_19467)[sext_i32_i64(local_tid_19619)] =\n            tmp_19662;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19663;\n        \n        tmp_19663 = ((__global int64_t *) mem_param_19209)[phys_tid_16965 *\n                                                           g_16352 +\n                                                           sext_i32_i64(local_tid_19619)];\n        ((__local int64_t *) co",
            "lor_19488)[sext_i32_i64(local_tid_19619)] =\n            tmp_19663;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t phys_tid_17044 = local_tid_19619;\n        int64_t write_i_17043 = sext_i32_i64(sext_i64_i32(ltid_pre_19623));\n        int32_t x_17045;\n        \n        x_17045 = ((__local int32_t *) color_19489)[write_i_17043];\n        \n        float write_value_17050;\n        \n        write_value_17050 = ((__local float *) mem_param_19204)[write_i_17043];\n        \n        int64_t write_value_17051;\n        \n        write_value_17051 = ((__global\n                              int64_t *) mem_param_19209)[phys_tid_16965 *\n                                                          g_16352 +\n                                                          write_i_17043];\n        \n        bool match_lit_17052 = 0 == x_17045;\n        int64_t defunc_1_f_res_17053;\n        \n        if (match_lit_17052) {\n            int64_t x_17046;\n            \n            x_17046 = ((__local int64_t *) color_19495)[write_i_17043];\n            \n            int64_t case_res_17054 = sub64(x_17046, (int64_t) 1);\n            \n            defunc_1_f_res_17053 = case_res_17054;\n        } else {\n            bool match_lit_17055 = 1 == x_17045;\n            int64_t x_17056;\n            \n            if (match_lit_17055) {\n                int64_t x_17047;\n                \n                x_17047 = ((__local int64_t *) color_19494)[write_i_17043];\n                \n                int64_t x_17057 = add64(last_res_17036, x_17047);\n                int64_t case_res_17058 = sub64(x_17057, (int64_t) 1);\n                \n                x_17056 = case_res_17058;\n            } else {\n                bool match_lit_17059 = 2 == x_17045;\n                int64_t x_17060;\n                \n                if (match_lit_17059) {\n                    int64_t x_17048;\n                    \n                    x_17048 = ((__local int64_t *) color_19493)[write_i_17043];\n                    \n                    int64_",
            "t x_17061 = add64(last_res_17036, last_res_17037);\n                    int64_t x_17062 = add64(x_17048, x_17061);\n                    int64_t case_res_17063 = sub64(x_17062, (int64_t) 1);\n                    \n                    x_17060 = case_res_17063;\n                } else {\n                    int64_t x_17049;\n                    \n                    x_17049 = ((__local int64_t *) color_19492)[write_i_17043];\n                    \n                    int64_t x_17064 = add64(last_res_17036, last_res_17037);\n                    int64_t x_17065 = add64(last_res_17038, x_17064);\n                    int64_t x_17066 = add64(x_17049, x_17065);\n                    int64_t defunc_1_f_res_res_17067 = sub64(x_17066,\n                                                             (int64_t) 1);\n                    \n                    x_17060 = defunc_1_f_res_res_17067;\n                }\n                x_17056 = x_17060;\n            }\n            defunc_1_f_res_17053 = x_17056;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_17053) &&\n            slt64(defunc_1_f_res_17053, g_16352)) {\n            ((__local float *) mem_param_out_19467)[defunc_1_f_res_17053] =\n                write_value_17050;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_17053) &&\n            slt64(defunc_1_f_res_17053, g_16352)) {\n            ((__local int64_t *) color_19488)[defunc_1_f_res_17053] =\n                write_value_17051;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19664;\n        \n        tmp_19664 = ((__local\n                      int64_t *) color_19488)[sext_i32_i64(local_tid_19619)];\n        ((__global int64_t *) mem_param_out_19471)[phys_tid_16965 * g_16352 +\n                                                   sext_i32_i64(local_tid_19619)] =\n            tmp_19664;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        __local unsigned char *mem_param_tmp_19630;\n        \n        mem_param_tmp_19630 = mem_param_out_19467;\n        \n        __lo",
            "cal unsigned char *mem_param_out_tmp_19631;\n        \n        mem_param_out_tmp_19631 = mem_param_19204;\n        \n        __global unsigned char *mem_param_tmp_19632;\n        \n        mem_param_tmp_19632 = mem_param_out_19471;\n        \n        __global unsigned char *mem_param_out_tmp_19633;\n        \n        mem_param_out_tmp_19633 = mem_param_19209;\n        mem_param_19204 = mem_param_tmp_19630;\n        mem_param_out_19467 = mem_param_out_tmp_19631;\n        mem_param_19209 = mem_param_tmp_19632;\n        mem_param_out_19471 = mem_param_out_tmp_19633;\n    }\n    ext_mem_19246 = mem_param_19204;\n    ext_mem_unused_19466 = mem_param_out_19467;\n    ext_mem_19245 = mem_param_19209;\n    ext_mem_unused_19470 = mem_param_out_19471;\n    \n    int32_t phys_tid_17071 = local_tid_19619;\n    int64_t gtid_17070 = sext_i32_i64(sext_i64_i32(ltid_pre_19623));\n    int64_t x_17072;\n    \n    x_17072 = ((__global int64_t *) ext_mem_19245)[phys_tid_16965 * g_16352 +\n                                                   gtid_17070];\n    \n    bool x_17073 = sle64((int64_t) 0, x_17072);\n    bool y_17074 = slt64(x_17072, g_16352);\n    bool bounds_check_17075 = x_17073 && y_17074;\n    bool index_certs_17076;\n    \n    if (!bounds_check_17075) {\n        {\n            if (atomic_cmpxchg_i32_global(global_failure, -1, 1) == -1) {\n                global_failure_args[0] = (int64_t) x_17072;\n                global_failure_args[1] = (int64_t) g_16352;\n                ;\n            }\n            local_failure = true;\n            goto error_3;\n        }\n    }\n    \n    float defunc_0_f_res_17077;\n    \n    defunc_0_f_res_17077 = ((__global float *) values_mem_19006)[gtid_16964 *\n                                                                 g_16352 +\n                                                                 x_17072];\n    \n    float defunc_0_f_res_17078;\n    \n    defunc_0_f_res_17078 = ((__local float *) color_19496)[x_17072];\n    ((__local float *) color_19489)[gtid_17070] = defunc_0_f_res_17077;\n    ",
            "((__local float *) color_19488)[gtid_17070] = defunc_0_f_res_17078;\n    \n  error_3:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19665;\n    \n    tmp_19665 = ((__local float *) color_19489)[sext_i32_i64(local_tid_19619)];\n    ((__global float *) mem_19265)[gtid_16964 * g_16352 +\n                                   sext_i32_i64(local_tid_19619)] = tmp_19665;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19666;\n    \n    tmp_19666 = ((__local float *) color_19488)[sext_i32_i64(local_tid_19619)];\n    ((__global float *) mem_19269)[gtid_16964 * g_16352 +\n                                   sext_i32_i64(local_tid_19619)] = tmp_19666;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_4:\n    return;\n}\n__kernel void sortBagzisegmap_intragroup_17546(__global int *global_failure,\n                                               uint color_19503_backing_offset_0,\n                                               uint color_19502_backing_offset_1,\n                                               uint color_19501_backing_offset_2,\n                                               uint color_19500_backing_offset_3,\n                                               uint color_19499_backing_offset_4,\n                                               uint color_19498_backing_offset_5,\n                                               uint color_19497_backing_offset_6,\n                                               int64_t b_16351, int64_t g_16352,\n                                               int64_t i_16359,\n                                               int32_t defunc_2_radix_sort_step_arg_17530,\n                                               int32_t defunc_0_get_bit_arg_17531,\n                                               unsigned char cond_f_res_17532_bits,\n                                               unsigned char cond_f_res_17533_bits,\n                                               __global\n                     ",
            "                          unsigned char *mem_param_19290,\n                                               __global\n                                               unsigned char *mem_param_19298,\n                                               __global\n                                               unsigned char *mem_19338,\n                                               __global\n                                               unsigned char *mem_19342)\n{\n    bool cond_f_res_17532 = cond_f_res_17532_bits;\n    bool cond_f_res_17533 = cond_f_res_17533_bits;\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19503_backing_6 =\n                           &shared_mem[color_19503_backing_offset_0];\n    volatile unsigned char *color_19502_backing_5 =\n                           &shared_mem[color_19502_backing_offset_1];\n    volatile unsigned char *color_19501_backing_4 =\n                           &shared_mem[color_19501_backing_offset_2];\n    volatile unsigned char *color_19500_backing_3 =\n                           &shared_mem[color_19500_backing_offset_3];\n    volatile unsigned char *color_19499_backing_2 =\n                           &shared_mem[color_19499_backing_offset_4];\n    volatile unsigned char *color_19498_backing_1 =\n                           &shared_mem[color_19498_backing_offset_5];\n    volatile unsigned char *color_19497_backing_0 =\n                           &shared_mem[color_19497_backing_offset_6];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19696;\n    int32_t local_tid_19697;\n    int64_t group_sizze_19700;\n    int32_t wave_sizze_19699;\n    int32_t group_tid_19698;\n    \n    global_tid_19696 = get_global_id(0);\n    local_tid_19697 = get_local_id(0);\n    group_sizze_19700 = get_local_size(0);\n    wave_sizze_19699 = LOCKSTEP_WIDTH;\n    group_tid_19698 = get_group_id(0);\n    \n    int32_t phys_tid_17546 = group_tid_19698;\n    int64_t slice_19702 = g_16352;\n    ",
            "int64_t ltid_pre_19701 = sext_i32_i64(local_tid_19697);\n    int64_t remnant_19703 = sext_i32_i64(local_tid_19697) - ltid_pre_19701;\n    int64_t slice_19704 = b_16351;\n    int64_t gtid_17545 = sext_i32_i64(group_tid_19698);\n    int64_t remnant_19705 = sext_i32_i64(group_tid_19698) - gtid_17545;\n    __local unsigned char *color_19497;\n    \n    color_19497 = (__local unsigned char *) color_19497_backing_0;\n    \n    __local unsigned char *color_19498;\n    \n    color_19498 = (__local unsigned char *) color_19498_backing_1;\n    \n    __local unsigned char *color_19499;\n    \n    color_19499 = (__local unsigned char *) color_19499_backing_2;\n    \n    __local unsigned char *color_19500;\n    \n    color_19500 = (__local unsigned char *) color_19500_backing_3;\n    \n    __local unsigned char *color_19501;\n    \n    color_19501 = (__local unsigned char *) color_19501_backing_4;\n    \n    __local unsigned char *color_19502;\n    \n    color_19502 = (__local unsigned char *) color_19502_backing_5;\n    \n    __local unsigned char *color_19503;\n    \n    color_19503 = (__local unsigned char *) color_19503_backing_6;\n    \n    float tmp_19706;\n    \n    tmp_19706 = ((__global float *) mem_param_19290)[gtid_17545 * g_16352 +\n                                                     sext_i32_i64(local_tid_19697)];\n    ((__local float *) color_19503)[sext_i32_i64(local_tid_19697)] = tmp_19706;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19707;\n    \n    tmp_19707 = ((__global int64_t *) mem_param_19298)[gtid_17545 * g_16352 +\n                                                       sext_i32_i64(local_tid_19697)];\n    ((__local int64_t *) color_19502)[sext_i32_i64(local_tid_19697)] =\n        tmp_19707;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t phys_tid_17561 = local_tid_19697;\n    int64_t gtid_17560 = sext_i32_i64(sext_i64_i32(ltid_pre_19701));\n    float x_17574;\n    \n    x_17574 = ((__global float *) mem_param_19290)[gtid_17545 * g_16352 +\n                                             ",
            "      gtid_17560];\n    \n    int32_t i32_arg_17575;\n    \n    i32_arg_17575 = futrts_to_bits32(x_17574);\n    \n    int32_t unsign_arg_17576 = ashr32(i32_arg_17575,\n                                      defunc_0_get_bit_arg_17531);\n    int32_t unsign_arg_17577 = 1 & unsign_arg_17576;\n    int32_t unsign_arg_17578 = ashr32(i32_arg_17575, 31);\n    int32_t unsign_arg_17579 = 1 & unsign_arg_17578;\n    bool cond_17580 = unsign_arg_17579 == 1;\n    bool x_17581 = !cond_17580;\n    bool y_17582 = cond_f_res_17532 && x_17581;\n    bool cond_17583 = cond_17580 || y_17582;\n    int32_t defunc_1_get_bit_res_17584;\n    \n    if (cond_17583) {\n        int32_t defunc_1_get_bit_res_t_res_17585 = 1 ^ unsign_arg_17577;\n        \n        defunc_1_get_bit_res_17584 = defunc_1_get_bit_res_t_res_17585;\n    } else {\n        defunc_1_get_bit_res_17584 = unsign_arg_17577;\n    }\n    \n    int32_t x_17586 = mul32(2, defunc_1_get_bit_res_17584);\n    int32_t unsign_arg_17587 = ashr32(i32_arg_17575,\n                                      defunc_2_radix_sort_step_arg_17530);\n    int32_t unsign_arg_17588 = 1 & unsign_arg_17587;\n    bool y_17589 = cond_f_res_17533 && x_17581;\n    bool cond_17590 = cond_17580 || y_17589;\n    int32_t defunc_1_get_bit_res_17591;\n    \n    if (cond_17590) {\n        int32_t defunc_1_get_bit_res_t_res_17592 = 1 ^ unsign_arg_17588;\n        \n        defunc_1_get_bit_res_17591 = defunc_1_get_bit_res_t_res_17592;\n    } else {\n        defunc_1_get_bit_res_17591 = unsign_arg_17588;\n    }\n    \n    int32_t defunc_0_f_res_17593 = add32(x_17586, defunc_1_get_bit_res_17591);\n    bool cond_17594 = defunc_0_f_res_17593 == 0;\n    int64_t defunc_0_f_res_17595 = btoi_bool_i64(cond_17594);\n    int64_t defunc_0_f_res_17596;\n    int64_t defunc_0_f_res_17597;\n    int64_t defunc_0_f_res_17598;\n    \n    if (cond_17594) {\n        defunc_0_f_res_17596 = (int64_t) 0;\n        defunc_0_f_res_17597 = (int64_t) 0;\n        defunc_0_f_res_17598 = (int64_t) 0;\n    } else {\n        bool cond_17599 = defunc_0_f_res_1",
            "7593 == 1;\n        int64_t defunc_0_f_res_f_res_17600 = btoi_bool_i64(cond_17599);\n        int64_t defunc_0_f_res_f_res_17601;\n        int64_t defunc_0_f_res_f_res_17602;\n        \n        if (cond_17599) {\n            defunc_0_f_res_f_res_17601 = (int64_t) 0;\n            defunc_0_f_res_f_res_17602 = (int64_t) 0;\n        } else {\n            bool cond_17603 = defunc_0_f_res_17593 == 2;\n            int64_t defunc_0_f_res_f_res_f_res_17604 =\n                    btoi_bool_i64(cond_17603);\n            bool cond_neg_17605 = !cond_17603;\n            int64_t defunc_0_f_res_f_res_f_res_17606 =\n                    btoi_bool_i64(cond_neg_17605);\n            \n            defunc_0_f_res_f_res_17601 = defunc_0_f_res_f_res_f_res_17604;\n            defunc_0_f_res_f_res_17602 = defunc_0_f_res_f_res_f_res_17606;\n        }\n        defunc_0_f_res_17596 = defunc_0_f_res_f_res_17600;\n        defunc_0_f_res_17597 = defunc_0_f_res_f_res_17601;\n        defunc_0_f_res_17598 = defunc_0_f_res_f_res_17602;\n    }\n    ((__local int64_t *) color_19501)[gtid_17560] = defunc_0_f_res_17595;\n    ((__local int64_t *) color_19500)[gtid_17560] = defunc_0_f_res_17596;\n    ((__local int64_t *) color_19499)[gtid_17560] = defunc_0_f_res_17597;\n    ((__local int64_t *) color_19498)[gtid_17560] = defunc_0_f_res_17598;\n    ((__local int32_t *) color_19497)[gtid_17560] = defunc_0_f_res_17593;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_19708 = g_16352;\n    int64_t x_17562;\n    int64_t x_17563;\n    int64_t x_17564;\n    int64_t x_17565;\n    int64_t x_17566;\n    int64_t x_17567;\n    int64_t x_17568;\n    int64_t x_17569;\n    int64_t x_19713;\n    int64_t x_19714;\n    int64_t x_19715;\n    int64_t x_19716;\n    int64_t x_19717;\n    int64_t x_19718;\n    int64_t x_19719;\n    int64_t x_19720;\n    bool ltid_in_bounds_19725 = slt64(sext_i32_i64(local_tid_19697), g_16352);\n    int32_t skip_threads_19726;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_19725) {\n            x_17566 = (",
            "(volatile __local\n                        int64_t *) color_19501)[sext_i32_i64(local_tid_19697)];\n            x_17567 = ((volatile __local\n                        int64_t *) color_19500)[sext_i32_i64(local_tid_19697)];\n            x_17568 = ((volatile __local\n                        int64_t *) color_19499)[sext_i32_i64(local_tid_19697)];\n            x_17569 = ((volatile __local\n                        int64_t *) color_19498)[sext_i32_i64(local_tid_19697)];\n            if ((local_tid_19697 - squot32(local_tid_19697, 32) * 32) == 0) {\n                x_17562 = x_17566;\n                x_17563 = x_17567;\n                x_17564 = x_17568;\n                x_17565 = x_17569;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_19726 = 1;\n        while (slt32(skip_threads_19726, 32)) {\n            bool thread_active_19727 = sle32(skip_threads_19726,\n                                             local_tid_19697 -\n                                             squot32(local_tid_19697, 32) *\n                                             32) && ltid_in_bounds_19725;\n            \n            if (thread_active_19727) {\n                // read operands\n                {\n                    x_17562 = ((volatile __local\n                                int64_t *) color_19501)[sext_i32_i64(local_tid_19697) -\n                                                        sext_i32_i64(skip_threads_19726)];\n                    x_17563 = ((volatile __local\n                                int64_t *) color_19500)[sext_i32_i64(local_tid_19697) -\n                                                        sext_i32_i64(skip_threads_19726)];\n                    x_17564 = ((volatile __local\n                                int64_t *) color_19499)[sext_i32_i64(local_tid_19697) -\n                                                        sext_i32_i64(skip_threads_19726)];\n                    x_17565 = ((volatile __local\n                                int64_t",
            " *) color_19498)[sext_i32_i64(local_tid_19697) -\n                                                        sext_i32_i64(skip_threads_19726)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19728 =\n                     slt64(srem64(sext_i32_i64(local_tid_19697), g_16352),\n                           sext_i32_i64(local_tid_19697) -\n                           sext_i32_i64(local_tid_19697 - skip_threads_19726));\n                \n                if (thread_active_19727 && inactive_19728) {\n                    x_17562 = x_17566;\n                    x_17563 = x_17567;\n                    x_17564 = x_17568;\n                    x_17565 = x_17569;\n                }\n                if (thread_active_19727) {\n                    if (!inactive_19728) {\n                        int64_t defunc_1_op_res_17570 = add64(x_17562, x_17566);\n                        int64_t defunc_1_op_res_17571 = add64(x_17563, x_17567);\n                        int64_t defunc_1_op_res_17572 = add64(x_17564, x_17568);\n                        int64_t defunc_1_op_res_17573 = add64(x_17565, x_17569);\n                        \n                        x_17562 = defunc_1_op_res_17570;\n                        x_17563 = defunc_1_op_res_17571;\n                        x_17564 = defunc_1_op_res_17572;\n                        x_17565 = defunc_1_op_res_17573;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_19699, skip_threads_19726)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (thread_active_19727) {\n                // write result\n                {\n                    ((volatile __local\n                      int64_t *) color_19501)[sext_i32_i64(local_tid_19697)] =\n                        x_17562;\n                    x_17566 = x_17562;\n                    ((volatile __local\n                      int64_t *) color_19500)[sext_i32_i64(local_tid_19697)] =\n                        x_17563;\n       ",
            "             x_17567 = x_17563;\n                    ((volatile __local\n                      int64_t *) color_19499)[sext_i32_i64(local_tid_19697)] =\n                        x_17564;\n                    x_17568 = x_17564;\n                    ((volatile __local\n                      int64_t *) color_19498)[sext_i32_i64(local_tid_19697)] =\n                        x_17565;\n                    x_17569 = x_17565;\n                }\n            }\n            if (sle32(wave_sizze_19699, skip_threads_19726)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_19726 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_19697 - squot32(local_tid_19697, 32) * 32) == 31 &&\n            ltid_in_bounds_19725) {\n            ((volatile __local\n              int64_t *) color_19501)[sext_i32_i64(squot32(local_tid_19697,\n                                                           32))] = x_17562;\n            ((volatile __local\n              int64_t *) color_19500)[sext_i32_i64(squot32(local_tid_19697,\n                                                           32))] = x_17563;\n            ((volatile __local\n              int64_t *) color_19499)[sext_i32_i64(squot32(local_tid_19697,\n                                                           32))] = x_17564;\n            ((volatile __local\n              int64_t *) color_19498)[sext_i32_i64(squot32(local_tid_19697,\n                                                           32))] = x_17565;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_19729;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_19697, 32) == 0 && ltid_in_bounds_19725) {\n                x_19717 = ((volatile __local\n                            int64_t *) color_19501)[sext_i32_i64(local_tid",
            "_19697)];\n                x_19718 = ((volatile __local\n                            int64_t *) color_19500)[sext_i32_i64(local_tid_19697)];\n                x_19719 = ((volatile __local\n                            int64_t *) color_19499)[sext_i32_i64(local_tid_19697)];\n                x_19720 = ((volatile __local\n                            int64_t *) color_19498)[sext_i32_i64(local_tid_19697)];\n                if ((local_tid_19697 - squot32(local_tid_19697, 32) * 32) ==\n                    0) {\n                    x_19713 = x_19717;\n                    x_19714 = x_19718;\n                    x_19715 = x_19719;\n                    x_19716 = x_19720;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19729 = 1;\n            while (slt32(skip_threads_19729, 32)) {\n                bool thread_active_19730 = sle32(skip_threads_19729,\n                                                 local_tid_19697 -\n                                                 squot32(local_tid_19697, 32) *\n                                                 32) &&\n                     (squot32(local_tid_19697, 32) == 0 &&\n                      ltid_in_bounds_19725);\n                \n                if (thread_active_19730) {\n                    // read operands\n                    {\n                        x_19713 = ((volatile __local\n                                    int64_t *) color_19501)[sext_i32_i64(local_tid_19697) -\n                                                            sext_i32_i64(skip_threads_19729)];\n                        x_19714 = ((volatile __local\n                                    int64_t *) color_19500)[sext_i32_i64(local_tid_19697) -\n                                                            sext_i32_i64(skip_threads_19729)];\n                        x_19715 = ((volatile __local\n                                    int64_t *) color_19499)[sext_i32_i64(local_tid_19697) -\n                             ",
            "                               sext_i32_i64(skip_threads_19729)];\n                        x_19716 = ((volatile __local\n                                    int64_t *) color_19498)[sext_i32_i64(local_tid_19697) -\n                                                            sext_i32_i64(skip_threads_19729)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19731 =\n                         slt64(srem64(sext_i32_i64(local_tid_19697 * 32 + 32 -\n                                      1), g_16352),\n                               sext_i32_i64(local_tid_19697 * 32 + 32 - 1) -\n                               sext_i32_i64((local_tid_19697 -\n                                             skip_threads_19729) * 32 + 32 -\n                               1));\n                    \n                    if (thread_active_19730 && inactive_19731) {\n                        x_19713 = x_19717;\n                        x_19714 = x_19718;\n                        x_19715 = x_19719;\n                        x_19716 = x_19720;\n                    }\n                    if (thread_active_19730) {\n                        if (!inactive_19731) {\n                            int64_t defunc_1_op_res_19721 = add64(x_19713,\n                                                                  x_19717);\n                            int64_t defunc_1_op_res_19722 = add64(x_19714,\n                                                                  x_19718);\n                            int64_t defunc_1_op_res_19723 = add64(x_19715,\n                                                                  x_19719);\n                            int64_t defunc_1_op_res_19724 = add64(x_19716,\n                                                                  x_19720);\n                            \n                            x_19713 = defunc_1_op_res_19721;\n                            x_19714 = defunc_1_op_res_19722;\n                            x_19715 = defunc",
            "_1_op_res_19723;\n                            x_19716 = defunc_1_op_res_19724;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19699, skip_threads_19729)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19730) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19501)[sext_i32_i64(local_tid_19697)] =\n                            x_19713;\n                        x_19717 = x_19713;\n                        ((volatile __local\n                          int64_t *) color_19500)[sext_i32_i64(local_tid_19697)] =\n                            x_19714;\n                        x_19718 = x_19714;\n                        ((volatile __local\n                          int64_t *) color_19499)[sext_i32_i64(local_tid_19697)] =\n                            x_19715;\n                        x_19719 = x_19715;\n                        ((volatile __local\n                          int64_t *) color_19498)[sext_i32_i64(local_tid_19697)] =\n                            x_19716;\n                        x_19720 = x_19716;\n                    }\n                }\n                if (sle32(wave_sizze_19699, skip_threads_19729)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19729 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    bool no_carry_in_19732 = squot32(local_tid_19697, 32) == 0 ||\n         !ltid_in_bounds_19725;\n    \n    // carry-in for every block except the first\n    {\n        // read operands\n        {\n            if (!no_carry_in_19732) {\n                x_17566 = x_17562;\n                x_17567 = x_17563;\n                x_17568 = x_17564;\n                x_17569 = x_17565;\n                x_17562 = ((__local\n                            int64_t *) color_19501)[sext_i32_i64(squot32(local_tid_19697,\n              ",
            "                                                           32)) -\n                                                    (int64_t) 1];\n                x_17563 = ((__local\n                            int64_t *) color_19500)[sext_i32_i64(squot32(local_tid_19697,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_17564 = ((__local\n                            int64_t *) color_19499)[sext_i32_i64(squot32(local_tid_19697,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_17565 = ((__local\n                            int64_t *) color_19498)[sext_i32_i64(squot32(local_tid_19697,\n                                                                         32)) -\n                                                    (int64_t) 1];\n            }\n        }\n        // perform operation\n        {\n            bool inactive_19733 = slt64(srem64(sext_i32_i64(local_tid_19697),\n                                               g_16352),\n                                        sext_i32_i64(local_tid_19697) -\n                                        sext_i32_i64(squot32(local_tid_19697,\n                                                             32) * 32 - 1));\n            \n            if (!no_carry_in_19732) {\n                if (inactive_19733) {\n                    x_17562 = x_17566;\n                    x_17563 = x_17567;\n                    x_17564 = x_17568;\n                    x_17565 = x_17569;\n                }\n            }\n            if (!no_carry_in_19732) {\n                if (!inactive_19733) {\n                    int64_t defunc_1_op_res_17570 = add64(x_17562, x_17566);\n                    int64_t defunc_1_op_res_17571 = add64(x_17563, x_17567);\n                    int64_t defunc_1_op_res_17572 = add64(x_17564, x_17568);\n                    int64_t defunc_1_op_re",
            "s_17573 = add64(x_17565, x_17569);\n                    \n                    x_17562 = defunc_1_op_res_17570;\n                    x_17563 = defunc_1_op_res_17571;\n                    x_17564 = defunc_1_op_res_17572;\n                    x_17565 = defunc_1_op_res_17573;\n                }\n            }\n        }\n        // write final result\n        {\n            if (!no_carry_in_19732) {\n                ((__local\n                  int64_t *) color_19501)[sext_i32_i64(local_tid_19697)] =\n                    x_17562;\n                ((__local\n                  int64_t *) color_19500)[sext_i32_i64(local_tid_19697)] =\n                    x_17563;\n                ((__local\n                  int64_t *) color_19499)[sext_i32_i64(local_tid_19697)] =\n                    x_17564;\n                ((__local\n                  int64_t *) color_19498)[sext_i32_i64(local_tid_19697)] =\n                    x_17565;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_19697, 32) == 0 && ltid_in_bounds_19725) {\n            ((__local int64_t *) color_19501)[sext_i32_i64(local_tid_19697)] =\n                x_17566;\n            ((__local int64_t *) color_19500)[sext_i32_i64(local_tid_19697)] =\n                x_17567;\n            ((__local int64_t *) color_19499)[sext_i32_i64(local_tid_19697)] =\n                x_17568;\n            ((__local int64_t *) color_19498)[sext_i32_i64(local_tid_19697)] =\n                x_17569;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t last_res_17607;\n    \n    last_res_17607 = ((__local int64_t *) color_19501)[i_16359];\n    \n    int64_t last_res_17608;\n    \n    last_res_17608 = ((__local int64_t *) color_19500)[i_16359];\n    \n    int64_t last_res_17609;\n    \n    last_res_17609 = ((__local int64_t *) color_19499)[i_16359];\n    \n    int32_t phys_tid_17613 = local_tid_19697;\n    int64_t write_i_17612 = sext_i32_i64(sext_i64_i32(ltid_pre_19701));\n    i",
            "nt32_t x_17614;\n    \n    x_17614 = ((__local int32_t *) color_19497)[write_i_17612];\n    \n    float write_value_17619;\n    \n    write_value_17619 = ((__global float *) mem_param_19290)[gtid_17545 *\n                                                             g_16352 +\n                                                             write_i_17612];\n    \n    int64_t write_value_17620;\n    \n    write_value_17620 = ((__global int64_t *) mem_param_19298)[gtid_17545 *\n                                                               g_16352 +\n                                                               write_i_17612];\n    \n    bool match_lit_17621 = 0 == x_17614;\n    int64_t defunc_1_f_res_17622;\n    \n    if (match_lit_17621) {\n        int64_t x_17615;\n        \n        x_17615 = ((__local int64_t *) color_19501)[write_i_17612];\n        \n        int64_t case_res_17623 = sub64(x_17615, (int64_t) 1);\n        \n        defunc_1_f_res_17622 = case_res_17623;\n    } else {\n        bool match_lit_17624 = 1 == x_17614;\n        int64_t x_17625;\n        \n        if (match_lit_17624) {\n            int64_t x_17616;\n            \n            x_17616 = ((__local int64_t *) color_19500)[write_i_17612];\n            \n            int64_t x_17626 = add64(last_res_17607, x_17616);\n            int64_t case_res_17627 = sub64(x_17626, (int64_t) 1);\n            \n            x_17625 = case_res_17627;\n        } else {\n            bool match_lit_17628 = 2 == x_17614;\n            int64_t x_17629;\n            \n            if (match_lit_17628) {\n                int64_t x_17617;\n                \n                x_17617 = ((__local int64_t *) color_19499)[write_i_17612];\n                \n                int64_t x_17630 = add64(last_res_17607, last_res_17608);\n                int64_t x_17631 = add64(x_17617, x_17630);\n                int64_t case_res_17632 = sub64(x_17631, (int64_t) 1);\n                \n                x_17629 = case_res_17632;\n            } else {\n                int64_t x_17618;\n              ",
            "  \n                x_17618 = ((__local int64_t *) color_19498)[write_i_17612];\n                \n                int64_t x_17633 = add64(last_res_17607, last_res_17608);\n                int64_t x_17634 = add64(last_res_17609, x_17633);\n                int64_t x_17635 = add64(x_17618, x_17634);\n                int64_t defunc_1_f_res_res_17636 = sub64(x_17635, (int64_t) 1);\n                \n                x_17629 = defunc_1_f_res_res_17636;\n            }\n            x_17625 = x_17629;\n        }\n        defunc_1_f_res_17622 = x_17625;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_17622) && slt64(defunc_1_f_res_17622,\n                                                          g_16352)) {\n        ((__local float *) color_19503)[defunc_1_f_res_17622] =\n            write_value_17619;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_17622) && slt64(defunc_1_f_res_17622,\n                                                          g_16352)) {\n        ((__local int64_t *) color_19502)[defunc_1_f_res_17622] =\n            write_value_17620;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19734;\n    \n    tmp_19734 = ((__local float *) color_19503)[sext_i32_i64(local_tid_19697)];\n    ((__global float *) mem_19338)[gtid_17545 * g_16352 +\n                                   sext_i32_i64(local_tid_19697)] = tmp_19734;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19735;\n    \n    tmp_19735 = ((__local\n                  int64_t *) color_19502)[sext_i32_i64(local_tid_19697)];\n    ((__global int64_t *) mem_19342)[gtid_17545 * g_16352 +\n                                     sext_i32_i64(local_tid_19697)] = tmp_19735;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_2:\n    return;\n}\n__kernel void sortBagzisegscan_17649(__global int *global_failure,\n                                     uint local_mem_19785_backing_offset_0,\n                                     int64_t b_16351, int64_t g_16352,\n                                     int32_t defunc_2_radix_sort_step_arg_17530,\n   ",
            "                                  int32_t defunc_0_get_bit_arg_17531,\n                                     unsigned char cond_f_res_17532_bits,\n                                     unsigned char cond_f_res_17533_bits,\n                                     __global unsigned char *mem_param_19290,\n                                     __global unsigned char *mem_19347, __global\n                                     unsigned char *mem_19351, __global\n                                     unsigned char *mem_19355, __global\n                                     unsigned char *mem_19359, __global\n                                     unsigned char *mem_19363, __global\n                                     unsigned char *sortBagziid_counter_mem_19738,\n                                     __global\n                                     unsigned char *status_flags_mem_19740,\n                                     __global\n                                     unsigned char *aggregates_mem_19742,\n                                     __global\n                                     unsigned char *incprefixes_mem_19744,\n                                     __global\n                                     unsigned char *aggregates_mem_19746,\n                                     __global\n                                     unsigned char *incprefixes_mem_19748,\n                                     __global\n                                     unsigned char *aggregates_mem_19750,\n                                     __global\n                                     unsigned char *incprefixes_mem_19752,\n                                     __global\n                                     unsigned char *aggregates_mem_19754,\n                                     __global\n                                     unsigned char *incprefixes_mem_19756)\n{\n    bool cond_f_res_17532 = cond_f_res_17532_bits;\n    bool cond_f_res_17533 = cond_f_res_17533_bits;\n    \n    #define segscan_group_sizze_17639 (sortBagzisegscan_g",
            "roup_sizze_17309)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *local_mem_19785_backing_0 =\n                           &shared_mem[local_mem_19785_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19770;\n    int32_t local_tid_19771;\n    int64_t group_sizze_19774;\n    int32_t wave_sizze_19773;\n    int32_t group_tid_19772;\n    \n    global_tid_19770 = get_global_id(0);\n    local_tid_19771 = get_local_id(0);\n    group_sizze_19774 = get_local_size(0);\n    wave_sizze_19773 = LOCKSTEP_WIDTH;\n    group_tid_19772 = get_group_id(0);\n    \n    int32_t phys_tid_17649 = global_tid_19770;\n    int64_t byte_offsets_19775 = (int64_t) 0;\n    int64_t byte_offsets_19776 = segscan_group_sizze_17639 * (int64_t) 8;\n    int64_t byte_offsets_19777 = sdiv_up64(segscan_group_sizze_17639 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17639 * (int64_t) 8;\n    int64_t byte_offsets_19778 = sdiv_up64(sdiv_up64(segscan_group_sizze_17639 *\n                                                     (int64_t) 8, (int64_t) 8) *\n                                           (int64_t) 8 +\n                                           segscan_group_sizze_17639 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17639 * (int64_t) 8;\n    int64_t byte_offsets_19779 =\n            sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_17639 *\n                                          (int64_t) 8, (int64_t) 8) *\n                                (int64_t) 8 + segscan_group_sizze_17639 *\n                                (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n                      segscan_group_sizze_17639 * (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17639 * (int64_t) 8;\n    int64_t warp_byte_offset_19780 = (int64_t) 32;\n    int64_t warp_byt",
            "e_offset_19781 = (int64_t) 288;\n    int64_t warp_byte_offset_19782 = (int64_t) 544;\n    int64_t warp_byte_offset_19783 = (int64_t) 800;\n    int64_t warp_byte_offset_19784 = (int64_t) 1056;\n    \n    // Allocate reused shared memeory\n    { }\n    \n    __local unsigned char *local_mem_19785;\n    \n    local_mem_19785 = (__local unsigned char *) local_mem_19785_backing_0;\n    \n    int64_t trans_arr_len_19786 = (int64_t) 3 * segscan_group_sizze_17639;\n    int32_t dynamic_id_19801;\n    \n    if (local_tid_19771 == 0) {\n        dynamic_id_19801 = atomic_add_i32_global(&((volatile __global\n                                                    int *) sortBagziid_counter_mem_19738)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_19785)[(int64_t) 0] = dynamic_id_19801;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_19801 = ((__local int32_t *) local_mem_19785)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_19802 = sext_i32_i64(dynamic_id_19801) * (int64_t) 3 *\n            segscan_group_sizze_17639;\n    int64_t sgm_idx_19803 = smod64(blockOff_19802, g_16352);\n    int32_t boundary_19804 = sext_i64_i32(smin64((int64_t) 3 *\n                                                 segscan_group_sizze_17639,\n                                                 g_16352 - sgm_idx_19803));\n    int32_t segsizze_compact_19805 = sext_i64_i32(smin64((int64_t) 3 *\n                                                         segscan_group_sizze_17639,\n                                                         g_16352));\n    int64_t private_mem_19806[(int64_t) 3];\n    int64_t private_mem_19808[(int64_t) 3];\n    int64_t private_mem_19810[(int64_t) 3];\n    int64_t private_mem_19812[(int64_t) 3];\n    \n    // Load and map\n    {\n        for (int64_t i_19814 = 0; i_19814 < (int64_t) 3; i_19814++) {\n            int64_t phys_tid_19815 = blockOff_19802 +\n                    sext_i32_i64(local_tid_19771) + i_19814 *\n           ",
            "         segscan_group_sizze_17639;\n            int64_t slice_19816 = g_16352;\n            int64_t slice_19817 = b_16351 * slice_19816;\n            int64_t gtid_17647 = squot64(phys_tid_19815, slice_19816);\n            int64_t remnant_19818 = phys_tid_19815 - gtid_17647 * slice_19816;\n            int64_t gtid_17648 = remnant_19818;\n            int64_t remnant_19819 = remnant_19818 - gtid_17648;\n            \n            if (slt64(phys_tid_19815, b_16351 * g_16352)) {\n                float x_17663;\n                \n                x_17663 = ((__global float *) mem_param_19290)[gtid_17647 *\n                                                               g_16352 +\n                                                               gtid_17648];\n                \n                int32_t i32_arg_17664;\n                \n                i32_arg_17664 = futrts_to_bits32(x_17663);\n                \n                int32_t unsign_arg_17665 = ashr32(i32_arg_17664,\n                                                  defunc_0_get_bit_arg_17531);\n                int32_t unsign_arg_17666 = 1 & unsign_arg_17665;\n                int32_t unsign_arg_17667 = ashr32(i32_arg_17664, 31);\n                int32_t unsign_arg_17668 = 1 & unsign_arg_17667;\n                bool cond_17669 = unsign_arg_17668 == 1;\n                bool x_17670 = !cond_17669;\n                bool y_17671 = cond_f_res_17532 && x_17670;\n                bool cond_17672 = cond_17669 || y_17671;\n                int32_t defunc_1_get_bit_res_17673;\n                \n                if (cond_17672) {\n                    int32_t defunc_1_get_bit_res_t_res_17674 = 1 ^\n                            unsign_arg_17666;\n                    \n                    defunc_1_get_bit_res_17673 =\n                        defunc_1_get_bit_res_t_res_17674;\n                } else {\n                    defunc_1_get_bit_res_17673 = unsign_arg_17666;\n                }\n                \n                int32_t x_17675 = mul32(2, defunc_1_get_bit_res_17673);\n  ",
            "              int32_t unsign_arg_17676 = ashr32(i32_arg_17664,\n                                                  defunc_2_radix_sort_step_arg_17530);\n                int32_t unsign_arg_17677 = 1 & unsign_arg_17676;\n                bool y_17678 = cond_f_res_17533 && x_17670;\n                bool cond_17679 = cond_17669 || y_17678;\n                int32_t defunc_1_get_bit_res_17680;\n                \n                if (cond_17679) {\n                    int32_t defunc_1_get_bit_res_t_res_17681 = 1 ^\n                            unsign_arg_17677;\n                    \n                    defunc_1_get_bit_res_17680 =\n                        defunc_1_get_bit_res_t_res_17681;\n                } else {\n                    defunc_1_get_bit_res_17680 = unsign_arg_17677;\n                }\n                \n                int32_t defunc_0_f_res_17682 = add32(x_17675,\n                                                     defunc_1_get_bit_res_17680);\n                bool cond_17683 = defunc_0_f_res_17682 == 0;\n                int64_t defunc_0_f_res_17684 = btoi_bool_i64(cond_17683);\n                int64_t defunc_0_f_res_17685;\n                int64_t defunc_0_f_res_17686;\n                int64_t defunc_0_f_res_17687;\n                \n                if (cond_17683) {\n                    defunc_0_f_res_17685 = (int64_t) 0;\n                    defunc_0_f_res_17686 = (int64_t) 0;\n                    defunc_0_f_res_17687 = (int64_t) 0;\n                } else {\n                    bool cond_17688 = defunc_0_f_res_17682 == 1;\n                    int64_t defunc_0_f_res_f_res_17689 =\n                            btoi_bool_i64(cond_17688);\n                    int64_t defunc_0_f_res_f_res_17690;\n                    int64_t defunc_0_f_res_f_res_17691;\n                    \n                    if (cond_17688) {\n                        defunc_0_f_res_f_res_17690 = (int64_t) 0;\n                        defunc_0_f_res_f_res_17691 = (int64_t) 0;\n                    } else {\n                        boo",
            "l cond_17692 = defunc_0_f_res_17682 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_17693 =\n                                btoi_bool_i64(cond_17692);\n                        bool cond_neg_17694 = !cond_17692;\n                        int64_t defunc_0_f_res_f_res_f_res_17695 =\n                                btoi_bool_i64(cond_neg_17694);\n                        \n                        defunc_0_f_res_f_res_17690 =\n                            defunc_0_f_res_f_res_f_res_17693;\n                        defunc_0_f_res_f_res_17691 =\n                            defunc_0_f_res_f_res_f_res_17695;\n                    }\n                    defunc_0_f_res_17685 = defunc_0_f_res_f_res_17689;\n                    defunc_0_f_res_17686 = defunc_0_f_res_f_res_17690;\n                    defunc_0_f_res_17687 = defunc_0_f_res_f_res_17691;\n                }\n                ((__global int32_t *) mem_19363)[gtid_17647 * g_16352 +\n                                                 gtid_17648] =\n                    defunc_0_f_res_17682;\n                private_mem_19806[i_19814] = defunc_0_f_res_17684;\n                private_mem_19808[i_19814] = defunc_0_f_res_17685;\n                private_mem_19810[i_19814] = defunc_0_f_res_17686;\n                private_mem_19812[i_19814] = defunc_0_f_res_17687;\n            } else {\n                private_mem_19806[i_19814] = (int64_t) 0;\n                private_mem_19808[i_19814] = (int64_t) 0;\n                private_mem_19810[i_19814] = (int64_t) 0;\n                private_mem_19812[i_19814] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19820 = 0; i_19820 < (int64_t) 3; i_19820++) {\n            int64_t sharedIdx_19821 = sext_i32_i64(local_tid_19771) + i_19820 *\n                    segscan_group_sizze_17639;\n            int64_t tmp_19822;\n            \n            tmp_19822 = private_mem_19806[i_19820];\n            ((__local int64_t *) local_me",
            "m_19785)[sharedIdx_19821] = tmp_19822;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19823 = 0; i_19823 < 3; i_19823++) {\n            int32_t sharedIdx_19824 = local_tid_19771 * 3 + i_19823;\n            int64_t tmp_19825;\n            \n            tmp_19825 = ((__local\n                          int64_t *) local_mem_19785)[sext_i32_i64(sharedIdx_19824)];\n            private_mem_19806[sext_i32_i64(i_19823)] = tmp_19825;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19826 = 0; i_19826 < (int64_t) 3; i_19826++) {\n            int64_t sharedIdx_19827 = sext_i32_i64(local_tid_19771) + i_19826 *\n                    segscan_group_sizze_17639;\n            int64_t tmp_19828;\n            \n            tmp_19828 = private_mem_19808[i_19826];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19827] = tmp_19828;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19829 = 0; i_19829 < 3; i_19829++) {\n            int32_t sharedIdx_19830 = local_tid_19771 * 3 + i_19829;\n            int64_t tmp_19831;\n            \n            tmp_19831 = ((__local\n                          int64_t *) local_mem_19785)[sext_i32_i64(sharedIdx_19830)];\n            private_mem_19808[sext_i32_i64(i_19829)] = tmp_19831;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19832 = 0; i_19832 < (int64_t) 3; i_19832++) {\n            int64_t sharedIdx_19833 = sext_i32_i64(local_tid_19771) + i_19832 *\n                    segscan_group_sizze_17639;\n            int64_t tmp_19834;\n            \n            tmp_19834 = private_mem_19810[i_19832];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19833] = tmp_19834;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19835 = 0; i_19835 < 3; i_19835++) {\n            int32_t sharedIdx_19836 = local_tid_19771 * 3 + i_19835;\n            int64_t tmp_19837;\n            \n            tmp_19837 = ((__local\n                          int64_t *) local_mem_197",
            "85)[sext_i32_i64(sharedIdx_19836)];\n            private_mem_19810[sext_i32_i64(i_19835)] = tmp_19837;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19838 = 0; i_19838 < (int64_t) 3; i_19838++) {\n            int64_t sharedIdx_19839 = sext_i32_i64(local_tid_19771) + i_19838 *\n                    segscan_group_sizze_17639;\n            int64_t tmp_19840;\n            \n            tmp_19840 = private_mem_19812[i_19838];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19839] = tmp_19840;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19841 = 0; i_19841 < 3; i_19841++) {\n            int32_t sharedIdx_19842 = local_tid_19771 * 3 + i_19841;\n            int64_t tmp_19843;\n            \n            tmp_19843 = ((__local\n                          int64_t *) local_mem_19785)[sext_i32_i64(sharedIdx_19842)];\n            private_mem_19812[sext_i32_i64(i_19841)] = tmp_19843;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        int32_t gidx_19844 = local_tid_19771 * 3 + 1;\n        \n        for (int64_t i_19845 = 0; i_19845 < (int64_t) 2; i_19845++) {\n            bool new_sgm_19846 = smod32(gidx_19844 + sext_i64_i32(i_19845) -\n                                        boundary_19804,\n                                        segsizze_compact_19805) == 0;\n            \n            if (!new_sgm_19846) {\n                int64_t x_17650;\n                int64_t x_17654;\n                \n                x_17650 = private_mem_19806[i_19845];\n                x_17654 = private_mem_19806[i_19845 + (int64_t) 1];\n                \n                int64_t x_17651;\n                int64_t x_17655;\n                \n                x_17651 = private_mem_19808[i_19845];\n                x_17655 = private_mem_19808[i_19845 + (int64_t) 1];\n                \n                int64_t x_17652;\n                int64_t x_17656;\n                \n                x_17652 = private_mem_19810[i_19845];\n                x_17656",
            " = private_mem_19810[i_19845 + (int64_t) 1];\n                \n                int64_t x_17653;\n                int64_t x_17657;\n                \n                x_17653 = private_mem_19812[i_19845];\n                x_17657 = private_mem_19812[i_19845 + (int64_t) 1];\n                \n                int64_t defunc_1_op_res_17658 = add64(x_17650, x_17654);\n                int64_t defunc_1_op_res_17659 = add64(x_17651, x_17655);\n                int64_t defunc_1_op_res_17660 = add64(x_17652, x_17656);\n                int64_t defunc_1_op_res_17661 = add64(x_17653, x_17657);\n                \n                private_mem_19806[i_19845 + (int64_t) 1] =\n                    defunc_1_op_res_17658;\n                private_mem_19808[i_19845 + (int64_t) 1] =\n                    defunc_1_op_res_17659;\n                private_mem_19810[i_19845 + (int64_t) 1] =\n                    defunc_1_op_res_17660;\n                private_mem_19812[i_19845 + (int64_t) 1] =\n                    defunc_1_op_res_17661;\n            }\n        }\n    }\n    // Publish results in shared memory\n    {\n        int64_t tmp_19847;\n        \n        tmp_19847 = private_mem_19806[(int64_t) 2];\n        ((__local int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n            tmp_19847;\n        \n        int64_t tmp_19848;\n        \n        tmp_19848 = private_mem_19808[(int64_t) 2];\n        ((__local int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n            tmp_19848;\n        \n        int64_t tmp_19849;\n        \n        tmp_19849 = private_mem_19810[(int64_t) 2];\n        ((__local int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                      (int64_t) 8) +\n        ",
            "                                      sext_i32_i64(local_tid_19771)] =\n            tmp_19849;\n        \n        int64_t tmp_19850;\n        \n        tmp_19850 = private_mem_19812[(int64_t) 2];\n        ((__local int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n            tmp_19850;\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_19863;\n    int64_t acc_19864;\n    int64_t acc_19865;\n    int64_t acc_19866;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_19851;\n        int64_t x_19852;\n        int64_t x_19853;\n        int64_t x_19854;\n        int64_t x_19855;\n        int64_t x_19856;\n        int64_t x_19857;\n        int64_t x_19858;\n        int64_t x_19867;\n        int64_t x_19868;\n        int64_t x_19869;\n        int64_t x_19870;\n        int64_t x_19871;\n        int64_t x_19872;\n        int64_t x_19873;\n        int64_t x_19874;\n        bool ltid_in_bounds_19879 = slt64(sext_i32_i64(local_tid_19771),\n                                          segscan_group_sizze_17639);\n        int32_t skip_threads_19880;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19879) {\n                x_19855 = ((volatile __local\n                            int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19771)];\n                x_19856 = ((volatile __local\n                            int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19771)];\n                x_19857 = ((volatile __local\n                            int64_t *) local_mem_19785)[squo",
            "t64(byte_offsets_19777,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19771)];\n                x_19858 = ((volatile __local\n                            int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19771)];\n                if ((local_tid_19771 - squot32(local_tid_19771, 32) * 32) ==\n                    0) {\n                    x_19851 = x_19855;\n                    x_19852 = x_19856;\n                    x_19853 = x_19857;\n                    x_19854 = x_19858;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19880 = 1;\n            while (slt32(skip_threads_19880, 32)) {\n                bool thread_active_19881 = sle32(skip_threads_19880,\n                                                 local_tid_19771 -\n                                                 squot32(local_tid_19771, 32) *\n                                                 32) && ltid_in_bounds_19879;\n                \n                if (thread_active_19881) {\n                    // read operands\n                    {\n                        x_19851 = ((volatile __local\n                                    int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19771) -\n                                                                 sext_i32_i64(skip_threads_19880))];\n                        x_19852 = ((volatile __local\n                                    int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                                       ",
            " (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19771) -\n                                                                 sext_i32_i64(skip_threads_19880))];\n                        x_19853 = ((volatile __local\n                                    int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19771) -\n                                                                 sext_i32_i64(skip_threads_19880))];\n                        x_19854 = ((volatile __local\n                                    int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19771) -\n                                                                 sext_i32_i64(skip_threads_19880))];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19882 = slt32(smod32((local_tid_19771 + 1) *\n                                                       3 - 1 +\n                                                       segsizze_compact_19805 -\n                                                       boundary_19804,\n                                                       segsizze_compact_19805),\n                                                (local_tid_19771 + 1) * 3 - 1 -\n                                                ((local_tid_19771 -\n                                                  skip_threads_19880 + 1) * 3 -\n                                                 1));\n                    \n                    if (thread_active_19881 && inactive_19882) {\n                        x_19851 = x_19855;\n                        x_19852 = x_19856;\n    ",
            "                    x_19853 = x_19857;\n                        x_19854 = x_19858;\n                    }\n                    if (thread_active_19881) {\n                        if (!inactive_19882) {\n                            int64_t defunc_1_op_res_19859 = add64(x_19851,\n                                                                  x_19855);\n                            int64_t defunc_1_op_res_19860 = add64(x_19852,\n                                                                  x_19856);\n                            int64_t defunc_1_op_res_19861 = add64(x_19853,\n                                                                  x_19857);\n                            int64_t defunc_1_op_res_19862 = add64(x_19854,\n                                                                  x_19858);\n                            \n                            x_19851 = defunc_1_op_res_19859;\n                            x_19852 = defunc_1_op_res_19860;\n                            x_19853 = defunc_1_op_res_19861;\n                            x_19854 = defunc_1_op_res_19862;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19773, skip_threads_19880)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19881) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19771)] =\n                            x_19851;\n                        x_19855 = x_19851;\n                        ((volatile __local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                              (int64_t) 8) +\n                                                    ",
            "  sext_i32_i64(local_tid_19771)] =\n                            x_19852;\n                        x_19856 = x_19852;\n                        ((volatile __local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19771)] =\n                            x_19853;\n                        x_19857 = x_19853;\n                        ((volatile __local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19771)] =\n                            x_19854;\n                        x_19858 = x_19854;\n                    }\n                }\n                if (sle32(wave_sizze_19773, skip_threads_19880)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19880 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19771 - squot32(local_tid_19771, 32) * 32) == 31 &&\n                ltid_in_bounds_19879) {\n                ((volatile __local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19771,\n                                                                   32))] =\n                    x_19851;\n                ((volatile __local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19771,\n                                            ",
            "                       32))] =\n                    x_19852;\n                ((volatile __local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19771,\n                                                                   32))] =\n                    x_19853;\n                ((volatile __local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19771,\n                                                                   32))] =\n                    x_19854;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19883;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19771, 32) == 0 && ltid_in_bounds_19879) {\n                    x_19871 = ((volatile __local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19771)];\n                    x_19872 = ((volatile __local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19771)];\n                    x_19873 = ((volatile __local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                                    (int64_t) 8) +\n          ",
            "                                                  sext_i32_i64(local_tid_19771)];\n                    x_19874 = ((volatile __local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19771)];\n                    if ((local_tid_19771 - squot32(local_tid_19771, 32) * 32) ==\n                        0) {\n                        x_19867 = x_19871;\n                        x_19868 = x_19872;\n                        x_19869 = x_19873;\n                        x_19870 = x_19874;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19883 = 1;\n                while (slt32(skip_threads_19883, 32)) {\n                    bool thread_active_19884 = sle32(skip_threads_19883,\n                                                     local_tid_19771 -\n                                                     squot32(local_tid_19771,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19771, 32) == 0 &&\n                          ltid_in_bounds_19879);\n                    \n                    if (thread_active_19884) {\n                        // read operands\n                        {\n                            x_19867 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19771) -\n                                                                     sext_i32_i64(skip_threads_19883))];\n                            x_19868 = ((volatile __local\n                                        int64_t *)",
            " local_mem_19785)[squot64(byte_offsets_19776,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19771) -\n                                                                     sext_i32_i64(skip_threads_19883))];\n                            x_19869 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19771) -\n                                                                     sext_i32_i64(skip_threads_19883))];\n                            x_19870 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19771) -\n                                                                     sext_i32_i64(skip_threads_19883))];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19885 = slt32(smod32((local_tid_19771 *\n                                                            32 + 32 - 1 + 1) *\n                                                           3 - 1 +\n                                                           segsizze_compact_19805 -\n                                                           boundary_19804,\n                                                           segsizze_compact_19805),\n                                                    (local_tid_19771 * 32 + 32 -\n                                                     1 + 1) * 3 - 1 -\n                            ",
            "                        (((local_tid_19771 -\n                                                       skip_threads_19883) *\n                                                      32 + 32 - 1 + 1) * 3 -\n                                                     1));\n                        \n                        if (thread_active_19884 && inactive_19885) {\n                            x_19867 = x_19871;\n                            x_19868 = x_19872;\n                            x_19869 = x_19873;\n                            x_19870 = x_19874;\n                        }\n                        if (thread_active_19884) {\n                            if (!inactive_19885) {\n                                int64_t defunc_1_op_res_19875 = add64(x_19867,\n                                                                      x_19871);\n                                int64_t defunc_1_op_res_19876 = add64(x_19868,\n                                                                      x_19872);\n                                int64_t defunc_1_op_res_19877 = add64(x_19869,\n                                                                      x_19873);\n                                int64_t defunc_1_op_res_19878 = add64(x_19870,\n                                                                      x_19874);\n                                \n                                x_19867 = defunc_1_op_res_19875;\n                                x_19868 = defunc_1_op_res_19876;\n                                x_19869 = defunc_1_op_res_19877;\n                                x_19870 = defunc_1_op_res_19878;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19773, skip_threads_19883)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19884) {\n                        // write result\n                        {\n                            ((volatile __local\n                   ",
            "           int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19771)] =\n                                x_19867;\n                            x_19871 = x_19867;\n                            ((volatile __local\n                              int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19771)] =\n                                x_19868;\n                            x_19872 = x_19868;\n                            ((volatile __local\n                              int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19771)] =\n                                x_19869;\n                            x_19873 = x_19869;\n                            ((volatile __local\n                              int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19771)] =\n                                x_19870;\n                            x_19874 = x_19870;\n                        }\n                    }\n                    if (sle32(wave_sizze_19773, skip_threads_19883)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19883 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19886 = squot32(local_tid_19771, 32) == 0 ||\n             !ltid_in_bounds_19879;\n        \n        // carry-in for every block except the fir",
            "st\n        {\n            // read operands\n            {\n                if (!no_carry_in_19886) {\n                    x_19855 = x_19851;\n                    x_19856 = x_19852;\n                    x_19857 = x_19853;\n                    x_19858 = x_19854;\n                    x_19851 = ((__local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19771,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19852 = ((__local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19771,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19853 = ((__local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19771,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19854 = ((__local\n                                int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19771,\n           ",
            "                                                                       32)) -\n                                                             (int64_t) 1)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19887 = slt32(smod32((local_tid_19771 + 1) * 3 -\n                                                   1 + segsizze_compact_19805 -\n                                                   boundary_19804,\n                                                   segsizze_compact_19805),\n                                            (local_tid_19771 + 1) * 3 - 1 -\n                                            ((squot32(local_tid_19771, 32) *\n                                              32 - 1 + 1) * 3 - 1));\n                \n                if (!no_carry_in_19886) {\n                    if (inactive_19887) {\n                        x_19851 = x_19855;\n                        x_19852 = x_19856;\n                        x_19853 = x_19857;\n                        x_19854 = x_19858;\n                    }\n                }\n                if (!no_carry_in_19886) {\n                    if (!inactive_19887) {\n                        int64_t defunc_1_op_res_19859 = add64(x_19851, x_19855);\n                        int64_t defunc_1_op_res_19860 = add64(x_19852, x_19856);\n                        int64_t defunc_1_op_res_19861 = add64(x_19853, x_19857);\n                        int64_t defunc_1_op_res_19862 = add64(x_19854, x_19858);\n                        \n                        x_19851 = defunc_1_op_res_19859;\n                        x_19852 = defunc_1_op_res_19860;\n                        x_19853 = defunc_1_op_res_19861;\n                        x_19854 = defunc_1_op_res_19862;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19886) {\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                ",
            "                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        x_19851;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        x_19852;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        x_19853;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        x_19854;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19771, 32) == 0 && ltid_in_bounds_19879) {\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n                    x_19855;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n                    x_19856;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                      (int64_t) 8",
            ") +\n                                              sext_i32_i64(local_tid_19771)] =\n                    x_19857;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19771)] =\n                    x_19858;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_19771 == 0) {\n            acc_19863 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19775,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17639 -\n                                                       (int64_t) 1)];\n            acc_19864 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17639 -\n                                                       (int64_t) 1)];\n            acc_19865 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17639 -\n                                                       (int64_t) 1)];\n            acc_19866 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17639 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_19863 = ((__local\n                          int64_t *) loc",
            "al_mem_19785)[squot64(byte_offsets_19775,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19771) -\n                                                       (int64_t) 1)];\n            acc_19864 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19776,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19771) -\n                                                       (int64_t) 1)];\n            acc_19865 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19777,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19771) -\n                                                       (int64_t) 1)];\n            acc_19866 = ((__local\n                          int64_t *) local_mem_19785)[squot64(byte_offsets_19778,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19771) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_19888 = (int64_t) 0;\n    int64_t prefix_19889 = (int64_t) 0;\n    int64_t prefix_19890 = (int64_t) 0;\n    int64_t prefix_19891 = (int64_t) 0;\n    bool block_new_sgm_19892 = sgm_idx_19803 == (int64_t) 0;\n    \n    // Perform lookback\n    {\n        if (block_new_sgm_19892 && local_tid_19771 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_19744)[dynamic_id_19801] = acc_19863;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19748)[dynamic_id_19801] = acc_19864;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19752",
            ")[dynamic_id_19801] = acc_19865;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19756)[dynamic_id_19801] = acc_19866;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_19740)[dynamic_id_19801] = (int8_t) 2;\n            acc_19863 = (int64_t) 0;\n            acc_19864 = (int64_t) 0;\n            acc_19865 = (int64_t) 0;\n            acc_19866 = (int64_t) 0;\n        }\n        if (!block_new_sgm_19892 && slt32(local_tid_19771, wave_sizze_19773)) {\n            if (local_tid_19771 == 0) {\n                if (boundary_19804 == sext_i64_i32(segscan_group_sizze_17639 *\n                    (int64_t) 3)) {\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19742)[dynamic_id_19801] =\n                        acc_19863;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19746)[dynamic_id_19801] =\n                        acc_19864;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19750)[dynamic_id_19801] =\n                        acc_19865;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19754)[dynamic_id_19801] =\n                        acc_19866;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19740)[dynamic_id_19801] =\n                        (int8_t) 1;\n                } else {\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19744)[dynamic_id_19801] =\n                        acc_19863;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19748)[dynamic_id_19801] =\n                        acc_19864;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19752)[dynamic_id_19801] =\n                        acc_19865;\n                    ((volatile __global\n         ",
            "             int64_t *) incprefixes_mem_19756)[dynamic_id_19801] =\n                        acc_19866;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19740)[dynamic_id_19801] =\n                        (int8_t) 2;\n                }\n                \n                int8_t tmp_19893;\n                \n                tmp_19893 = ((volatile __global\n                              int8_t *) status_flags_mem_19740)[dynamic_id_19801 -\n                                                                (int64_t) 1];\n                ((volatile __local int8_t *) local_mem_19785)[(int64_t) 0] =\n                    tmp_19893;\n            }\n            mem_fence_local();\n            \n            int8_t status_19894;\n            \n            status_19894 = ((__local int8_t *) local_mem_19785)[(int64_t) 0];\n            if (status_19894 == (int8_t) 2) {\n                if (local_tid_19771 == 0) {\n                    prefix_19888 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19744)[dynamic_id_19801 -\n                                                                       (int64_t) 1];\n                    prefix_19889 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19748)[dynamic_id_19801 -\n                                                                       (int64_t) 1];\n                    prefix_19890 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19752)[dynamic_id_19801 -\n                                                                       (int64_t) 1];\n                    prefix_19891 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19756)[dynamic_id_19801 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_19895 = dynamic_id_19801 -\n          ",
            "              sext_i32_i64(wave_sizze_19773);\n                \n                while (slt32(wave_sizze_19773 * -1, readOffset_19895)) {\n                    int32_t read_i_19896 = readOffset_19895 + local_tid_19771;\n                    int64_t aggr_19897 = (int64_t) 0;\n                    int64_t aggr_19898 = (int64_t) 0;\n                    int64_t aggr_19899 = (int64_t) 0;\n                    int64_t aggr_19900 = (int64_t) 0;\n                    int8_t flag_19901 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_19896)) {\n                        if (sle64(blockOff_19802 - (sext_i32_i64(read_i_19896 +\n                                                    1) *\n                                                    segscan_group_sizze_17639 *\n                                                    (int64_t) 3 - (int64_t) 1),\n                                  sgm_idx_19803)) {\n                            flag_19901 = ((volatile __global\n                                           int8_t *) status_flags_mem_19740)[sext_i32_i64(read_i_19896)];\n                            if (flag_19901 == (int8_t) 2) {\n                                aggr_19897 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19744)[sext_i32_i64(read_i_19896)];\n                                aggr_19898 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19748)[sext_i32_i64(read_i_19896)];\n                                aggr_19899 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19752)[sext_i32_i64(read_i_19896)];\n                                aggr_19900 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19756)[sext_i32_i64(read_i_19896)];\n                            } else {\n                                if (flag_19901 == (int8_t) 1) {\n                                    aggr_19897 = ((volatile __global\n",
            "                                                   int64_t *) aggregates_mem_19742)[sext_i32_i64(read_i_19896)];\n                                    aggr_19898 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19746)[sext_i32_i64(read_i_19896)];\n                                    aggr_19899 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19750)[sext_i32_i64(read_i_19896)];\n                                    aggr_19900 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19754)[sext_i32_i64(read_i_19896)];\n                                }\n                            }\n                        } else {\n                            flag_19901 = (int8_t) 2;\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        aggr_19897;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        aggr_19898;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19771)] =\n                        aggr_19899;\n                    ((__local\n                      int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                          (int64_t) 8) +\n                                              ",
            "    sext_i32_i64(local_tid_19771)] =\n                        aggr_19900;\n                    ((__local\n                      int8_t *) local_mem_19785)[sext_i32_i64(local_tid_19771)] =\n                        flag_19901;\n                    flag_19901 = ((__local\n                                   int8_t *) local_mem_19785)[sext_i32_i64(wave_sizze_19773) -\n                                                              (int64_t) 1];\n                    if (slt8(flag_19901, (int8_t) 2)) {\n                        int8_t flg_x_19914;\n                        int8_t flg_y_19915;\n                        int64_t x_19902;\n                        int64_t x_19903;\n                        int64_t x_19904;\n                        int64_t x_19905;\n                        int64_t x_19906;\n                        int64_t x_19907;\n                        int64_t x_19908;\n                        int64_t x_19909;\n                        int32_t skip_threads_19916;\n                        \n                        // read input for in-block scan\n                        {\n                            flg_y_19915 = ((volatile __local\n                                            int8_t *) local_mem_19785)[sext_i32_i64(local_tid_19771)];\n                            x_19906 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19771)];\n                            x_19907 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19771)];\n                            x_19908 = ((volatile __local\n                 ",
            "                       int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19771)];\n                            x_19909 = ((volatile __local\n                                        int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19771)];\n                            if ((local_tid_19771 - squot32(local_tid_19771,\n                                                           32) * 32) == 0) {\n                                x_19902 = x_19906;\n                                x_19903 = x_19907;\n                                x_19904 = x_19908;\n                                x_19905 = x_19909;\n                                flg_x_19914 = flg_y_19915;\n                            }\n                        }\n                        // in-block scan (hopefully no barriers needed)\n                        {\n                            skip_threads_19916 = 1;\n                            while (slt32(skip_threads_19916, 32)) {\n                                if (sle32(skip_threads_19916, local_tid_19771 -\n                                          squot32(local_tid_19771, 32) * 32)) {\n                                    // read operands\n                                    {\n                                        flg_x_19914 = ((volatile __local\n                                                        int8_t *) local_mem_19785)[sext_i32_i64(local_tid_19771) -\n                                                                                   sext_i32_i64(skip_threads_19916)];\n                                        x_19902 = ((volatile __local\n                                                    int64_t *)",
            " local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19771) -\n                                                                                 sext_i32_i64(skip_threads_19916))];\n                                        x_19903 = ((volatile __local\n                                                    int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19771) -\n                                                                                 sext_i32_i64(skip_threads_19916))];\n                                        x_19904 = ((volatile __local\n                                                    int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19771) -\n                                                                                 sext_i32_i64(skip_threads_19916))];\n                                        x_19905 = ((volatile __local\n                                                    int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19771) -\n                                                                                 sext_i32_i64(skip_threads_19916))];\n                                    }\n                                    /",
            "/ perform operation\n                                    {\n                                        if (flg_y_19915 == (int8_t) 2 ||\n                                            flg_y_19915 == (int8_t) 0) {\n                                            flg_x_19914 = flg_y_19915;\n                                            x_19902 = x_19906;\n                                            x_19903 = x_19907;\n                                            x_19904 = x_19908;\n                                            x_19905 = x_19909;\n                                        } else {\n                                            int64_t defunc_1_op_res_19910 =\n                                                    add64(x_19902, x_19906);\n                                            int64_t defunc_1_op_res_19911 =\n                                                    add64(x_19903, x_19907);\n                                            int64_t defunc_1_op_res_19912 =\n                                                    add64(x_19904, x_19908);\n                                            int64_t defunc_1_op_res_19913 =\n                                                    add64(x_19905, x_19909);\n                                            \n                                            x_19902 = defunc_1_op_res_19910;\n                                            x_19903 = defunc_1_op_res_19911;\n                                            x_19904 = defunc_1_op_res_19912;\n                                            x_19905 = defunc_1_op_res_19913;\n                                        }\n                                    }\n                                    // write result\n                                    {\n                                        ((volatile __local\n                                          int8_t *) local_mem_19785)[sext_i32_i64(local_tid_19771)] =\n                                            flg_x_19914;\n                                        flg_y_19915 = flg_x_19914;\n    ",
            "                                    ((volatile __local\n                                          int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19771)] =\n                                            x_19902;\n                                        x_19906 = x_19902;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19771)] =\n                                            x_19903;\n                                        x_19907 = x_19903;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19771)] =\n                                            x_19904;\n                                        x_19908 = x_19904;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19771)] =\n                                            x_19905;\n                                        x_19909 = x_19905;\n                                    }\n                                }\n                                skip_threads_19916 *= 2;",
            "\n                            }\n                        }\n                    }\n                    flag_19901 = ((__local\n                                   int8_t *) local_mem_19785)[sext_i32_i64(wave_sizze_19773) -\n                                                              (int64_t) 1];\n                    aggr_19897 = ((__local\n                                   int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19773) -\n                                                                (int64_t) 1)];\n                    aggr_19898 = ((__local\n                                   int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19773) -\n                                                                (int64_t) 1)];\n                    aggr_19899 = ((__local\n                                   int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19773) -\n                                                                (int64_t) 1)];\n                    aggr_19900 = ((__local\n                                   int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19773) -\n                                                                (int64_t) 1)];\n                    if (flag_19901 == (int8_t) 2) {\n                        readOffset_19895 = wave_sizze_1",
            "9773 * -1;\n                    } else {\n                        if (flag_19901 == (int8_t) 1) {\n                            readOffset_19895 -= wave_sizze_19773;\n                        }\n                    }\n                    if (slt8((int8_t) 0, flag_19901)) {\n                        int64_t x_19917 = aggr_19897;\n                        int64_t x_19918 = aggr_19898;\n                        int64_t x_19919 = aggr_19899;\n                        int64_t x_19920 = aggr_19900;\n                        int64_t x_19921 = prefix_19888;\n                        int64_t x_19922 = prefix_19889;\n                        int64_t x_19923 = prefix_19890;\n                        int64_t x_19924 = prefix_19891;\n                        int64_t defunc_1_op_res_19925 = add64(x_19917, x_19921);\n                        int64_t defunc_1_op_res_19926 = add64(x_19918, x_19922);\n                        int64_t defunc_1_op_res_19927 = add64(x_19919, x_19923);\n                        int64_t defunc_1_op_res_19928 = add64(x_19920, x_19924);\n                        \n                        prefix_19888 = defunc_1_op_res_19925;\n                        prefix_19889 = defunc_1_op_res_19926;\n                        prefix_19890 = defunc_1_op_res_19927;\n                        prefix_19891 = defunc_1_op_res_19928;\n                    }\n                    mem_fence_local();\n                }\n            }\n            if (local_tid_19771 == 0) {\n                if (boundary_19804 == sext_i64_i32(segscan_group_sizze_17639 *\n                    (int64_t) 3)) {\n                    int64_t x_19929 = prefix_19888;\n                    int64_t x_19930 = prefix_19889;\n                    int64_t x_19931 = prefix_19890;\n                    int64_t x_19932 = prefix_19891;\n                    int64_t x_19933 = acc_19863;\n                    int64_t x_19934 = acc_19864;\n                    int64_t x_19935 = acc_19865;\n                    int64_t x_19936 = acc_19866;\n                    int64_t defunc_1_op_res_1",
            "9937 = add64(x_19929, x_19933);\n                    int64_t defunc_1_op_res_19938 = add64(x_19930, x_19934);\n                    int64_t defunc_1_op_res_19939 = add64(x_19931, x_19935);\n                    int64_t defunc_1_op_res_19940 = add64(x_19932, x_19936);\n                    \n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19744)[dynamic_id_19801] =\n                        defunc_1_op_res_19937;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19748)[dynamic_id_19801] =\n                        defunc_1_op_res_19938;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19752)[dynamic_id_19801] =\n                        defunc_1_op_res_19939;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19756)[dynamic_id_19801] =\n                        defunc_1_op_res_19940;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19740)[dynamic_id_19801] =\n                        (int8_t) 2;\n                }\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                      (int64_t) 8)] =\n                    prefix_19888;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                      (int64_t) 8)] =\n                    prefix_19889;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                      (int64_t) 8)] =\n                    prefix_19890;\n                ((__local\n                  int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                      (int64_t) 8)] =\n                    prefix_19891;\n                acc_19",
            "863 = (int64_t) 0;\n                acc_19864 = (int64_t) 0;\n                acc_19865 = (int64_t) 0;\n                acc_19866 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_19801 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_19888 = ((__local\n                             int64_t *) local_mem_19785)[squot64(warp_byte_offset_19780,\n                                                                 (int64_t) 8)];\n            prefix_19889 = ((__local\n                             int64_t *) local_mem_19785)[squot64(warp_byte_offset_19781,\n                                                                 (int64_t) 8)];\n            prefix_19890 = ((__local\n                             int64_t *) local_mem_19785)[squot64(warp_byte_offset_19782,\n                                                                 (int64_t) 8)];\n            prefix_19891 = ((__local\n                             int64_t *) local_mem_19785)[squot64(warp_byte_offset_19783,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_19941;\n        int64_t x_19945;\n        int64_t x_19953 = prefix_19888;\n        int64_t x_19957 = acc_19863;\n        int64_t x_19942;\n        int64_t x_19946;\n        int64_t x_19954 = prefix_19889;\n        int64_t x_19958 = acc_19864;\n        int64_t x_19943;\n        int64_t x_19947;\n        int64_t x_19955 = prefix_19890;\n        int64_t x_19959 = acc_19865;\n        int64_t x_19944;\n        int64_t x_19948;\n        int64_t x_19956 = prefix_19891;\n        int64_t x_19960 = acc_19866;\n        \n        if (slt32(local_tid_19771 * 3, boundary_19804) &&\n            !block_new_sgm_19892) {\n            int64_t defunc_1_op_res_19961 = add64(x_19953, x_19957);\n            int64_t defunc_1_op_res_19962 = add64(x_19954, x_19958);\n            int64_t defunc_1_op_res_19963 = add64(x_19955, x_19959);\n          ",
            "  int64_t defunc_1_op_res_19964 = add64(x_19956, x_19960);\n            \n            x_19941 = defunc_1_op_res_19961;\n            x_19942 = defunc_1_op_res_19962;\n            x_19943 = defunc_1_op_res_19963;\n            x_19944 = defunc_1_op_res_19964;\n        } else {\n            x_19941 = acc_19863;\n            x_19942 = acc_19864;\n            x_19943 = acc_19865;\n            x_19944 = acc_19866;\n        }\n        \n        int32_t stopping_point_19965 = segsizze_compact_19805 -\n                srem32(local_tid_19771 * 3 - 1 + segsizze_compact_19805 -\n                       boundary_19804, segsizze_compact_19805);\n        \n        for (int64_t i_19966 = 0; i_19966 < (int64_t) 3; i_19966++) {\n            if (slt32(sext_i64_i32(i_19966), stopping_point_19965 - 1)) {\n                x_19945 = private_mem_19806[i_19966];\n                x_19946 = private_mem_19808[i_19966];\n                x_19947 = private_mem_19810[i_19966];\n                x_19948 = private_mem_19812[i_19966];\n                \n                int64_t defunc_1_op_res_19949 = add64(x_19941, x_19945);\n                int64_t defunc_1_op_res_19950 = add64(x_19942, x_19946);\n                int64_t defunc_1_op_res_19951 = add64(x_19943, x_19947);\n                int64_t defunc_1_op_res_19952 = add64(x_19944, x_19948);\n                \n                private_mem_19806[i_19966] = defunc_1_op_res_19949;\n                private_mem_19808[i_19966] = defunc_1_op_res_19950;\n                private_mem_19810[i_19966] = defunc_1_op_res_19951;\n                private_mem_19812[i_19966] = defunc_1_op_res_19952;\n            }\n        }\n    }\n    // Transpose scan output and Write it to global memory in coalesced fashion\n    {\n        for (int64_t i_19967 = 0; i_19967 < (int64_t) 3; i_19967++) {\n            int64_t sharedIdx_19968 = sext_i32_i64(local_tid_19771 * 3) +\n                    i_19967;\n            int64_t tmp_19969;\n            \n            tmp_19969 = private_mem_19806[i_19967];\n            ((__local int6",
            "4_t *) local_mem_19785)[sharedIdx_19968] = tmp_19969;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19970 = 0; i_19970 < (int64_t) 3; i_19970++) {\n            int64_t flat_idx_19971 = blockOff_19802 +\n                    segscan_group_sizze_17639 * i_19970 +\n                    sext_i32_i64(local_tid_19771);\n            int64_t slice_19972 = g_16352;\n            int64_t slice_19973 = b_16351 * slice_19972;\n            int64_t gtid_17647 = squot64(flat_idx_19971, slice_19972);\n            int64_t remnant_19974 = flat_idx_19971 - gtid_17647 * slice_19972;\n            int64_t gtid_17648 = remnant_19974;\n            int64_t remnant_19975 = remnant_19974 - gtid_17648;\n            \n            if (slt64(flat_idx_19971, b_16351 * g_16352)) {\n                int64_t tmp_19976;\n                \n                tmp_19976 = ((__local\n                              int64_t *) local_mem_19785)[flat_idx_19971 -\n                                                          blockOff_19802];\n                ((__global int64_t *) mem_19347)[gtid_17647 * g_16352 +\n                                                 gtid_17648] = tmp_19976;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19977 = 0; i_19977 < (int64_t) 3; i_19977++) {\n            int64_t sharedIdx_19978 = sext_i32_i64(local_tid_19771 * 3) +\n                    i_19977;\n            int64_t tmp_19979;\n            \n            tmp_19979 = private_mem_19808[i_19977];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19978] = tmp_19979;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19980 = 0; i_19980 < (int64_t) 3; i_19980++) {\n            int64_t flat_idx_19981 = blockOff_19802 +\n                    segscan_group_sizze_17639 * i_19980 +\n                    sext_i32_i64(local_tid_19771);\n            int64_t slice_19982 = g_16352;\n            int64_t slice_19983 = b_16351 * slice_19982;\n            int64_t gtid_17647 = squot64(flat_idx_19",
            "981, slice_19982);\n            int64_t remnant_19984 = flat_idx_19981 - gtid_17647 * slice_19982;\n            int64_t gtid_17648 = remnant_19984;\n            int64_t remnant_19985 = remnant_19984 - gtid_17648;\n            \n            if (slt64(flat_idx_19981, b_16351 * g_16352)) {\n                int64_t tmp_19986;\n                \n                tmp_19986 = ((__local\n                              int64_t *) local_mem_19785)[flat_idx_19981 -\n                                                          blockOff_19802];\n                ((__global int64_t *) mem_19351)[gtid_17647 * g_16352 +\n                                                 gtid_17648] = tmp_19986;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19987 = 0; i_19987 < (int64_t) 3; i_19987++) {\n            int64_t sharedIdx_19988 = sext_i32_i64(local_tid_19771 * 3) +\n                    i_19987;\n            int64_t tmp_19989;\n            \n            tmp_19989 = private_mem_19810[i_19987];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19988] = tmp_19989;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19990 = 0; i_19990 < (int64_t) 3; i_19990++) {\n            int64_t flat_idx_19991 = blockOff_19802 +\n                    segscan_group_sizze_17639 * i_19990 +\n                    sext_i32_i64(local_tid_19771);\n            int64_t slice_19992 = g_16352;\n            int64_t slice_19993 = b_16351 * slice_19992;\n            int64_t gtid_17647 = squot64(flat_idx_19991, slice_19992);\n            int64_t remnant_19994 = flat_idx_19991 - gtid_17647 * slice_19992;\n            int64_t gtid_17648 = remnant_19994;\n            int64_t remnant_19995 = remnant_19994 - gtid_17648;\n            \n            if (slt64(flat_idx_19991, b_16351 * g_16352)) {\n                int64_t tmp_19996;\n                \n                tmp_19996 = ((__local\n                              int64_t *) local_mem_19785)[flat_idx_19991 -\n                                       ",
            "                   blockOff_19802];\n                ((__global int64_t *) mem_19355)[gtid_17647 * g_16352 +\n                                                 gtid_17648] = tmp_19996;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19997 = 0; i_19997 < (int64_t) 3; i_19997++) {\n            int64_t sharedIdx_19998 = sext_i32_i64(local_tid_19771 * 3) +\n                    i_19997;\n            int64_t tmp_19999;\n            \n            tmp_19999 = private_mem_19812[i_19997];\n            ((__local int64_t *) local_mem_19785)[sharedIdx_19998] = tmp_19999;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20000 = 0; i_20000 < (int64_t) 3; i_20000++) {\n            int64_t flat_idx_20001 = blockOff_19802 +\n                    segscan_group_sizze_17639 * i_20000 +\n                    sext_i32_i64(local_tid_19771);\n            int64_t slice_20002 = g_16352;\n            int64_t slice_20003 = b_16351 * slice_20002;\n            int64_t gtid_17647 = squot64(flat_idx_20001, slice_20002);\n            int64_t remnant_20004 = flat_idx_20001 - gtid_17647 * slice_20002;\n            int64_t gtid_17648 = remnant_20004;\n            int64_t remnant_20005 = remnant_20004 - gtid_17648;\n            \n            if (slt64(flat_idx_20001, b_16351 * g_16352)) {\n                int64_t tmp_20006;\n                \n                tmp_20006 = ((__local\n                              int64_t *) local_mem_19785)[flat_idx_20001 -\n                                                          blockOff_19802];\n                ((__global int64_t *) mem_19359)[gtid_17647 * g_16352 +\n                                                 gtid_17648] = tmp_20006;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_19801 == sdiv_up64(b_16351 * g_16352,\n                                          segscan_group_sizze_17639 *\n                                          (int",
            "64_t) 3) - (int64_t) 1) {\n            ((__global int32_t *) sortBagziid_counter_mem_19738)[(int64_t) 0] =\n                0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_17639\n}\n__kernel void sortBagAndDoStuffzireplicate_19686(int64_t b_16497,\n                                                 int64_t g_16498, __global\n                                                 unsigned char *mem_19009,\n                                                 __global\n                                                 unsigned char *mem_19284)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19686;\n    int32_t replicate_ltid_19687;\n    int32_t replicate_gid_19688;\n    \n    replicate_gtid_19686 = get_global_id(0);\n    replicate_ltid_19687 = get_local_id(0);\n    replicate_gid_19688 = get_group_id(0);\n    \n    int64_t slice_19693 = g_16498;\n    int64_t slice_19694 = b_16497 * slice_19693;\n    int64_t rep_i_19691 = squot64(sext_i32_i64(replicate_gtid_19686),\n                                  slice_19693);\n    int64_t remnant_19695 = sext_i32_i64(replicate_gtid_19686) - rep_i_19691 *\n            slice_19693;\n    int64_t rep_i_19692 = remnant_19695;\n    int64_t remnant_19696 = remnant_19695 - rep_i_19692;\n    \n    if (slt64(replicate_gtid_19686, b_16497 * g_16498)) {\n        int64_t tmp_19697;\n        \n        tmp_19697 = ((__global int64_t *) mem_19009)[rep_i_19692];\n        ((__global int64_t *) mem_19284)[rep_i_19691 * g_16498 + rep_i_19692] =\n            tmp_19697;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegmap_17921(__global int *global_failure,\n                                              int failure_is_an_option, __global\n                                              int64_t *global_failure_args,\n                                              int64_t b_16497, int64_t g_16498,\n                                              int32_t iters_16502,\n                   ",
            "                           int64_t i_16505,\n                                              float i64_res_16512,\n                                              int64_t num_groups_17915,\n                                              int64_t num_threads_19525,\n                                              int32_t virt_num_groups_19566,\n                                              __global unsigned char *mem_19012,\n                                              __global unsigned char *mem_19015,\n                                              __global unsigned char *mem_19191,\n                                              __global unsigned char *mem_19194,\n                                              __global unsigned char *mem_19197,\n                                              __global\n                                              unsigned char *color_19474,\n                                              __global\n                                              unsigned char *color_19475,\n                                              __global\n                                              unsigned char *color_19476,\n                                              __global\n                                              unsigned char *color_19477,\n                                              __global\n                                              unsigned char *color_19478,\n                                              __global\n                                              unsigned char *color_19479,\n                                              __global\n                                              unsigned char *color_19480,\n                                              __global\n                                              unsigned char *color_19481,\n                                              __global\n                                              unsigned char *color_19482,\n                                              __global\n                                              ",
            "unsigned char *color_19483,\n                                              __global\n                                              unsigned char *color_19484)\n{\n    #define segmap_group_sizze_17914 (sortBagAndDoStuffzisegmap_group_sizze_17798)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19567;\n    int32_t local_tid_19568;\n    int64_t group_sizze_19571;\n    int32_t wave_sizze_19570;\n    int32_t group_tid_19569;\n    \n    global_tid_19567 = get_global_id(0);\n    local_tid_19568 = get_local_id(0);\n    group_sizze_19571 = get_local_size(0);\n    wave_sizze_19570 = LOCKSTEP_WIDTH;\n    group_tid_19569 = get_group_id(0);\n    \n    int32_t phys_tid_17921 = global_tid_19567;\n    int32_t phys_group_id_19572;\n    \n    phys_group_id_19572 = get_group_id(0);\n    \n    int32_t iterations_19573 = sdiv_up32(virt_num_groups_19566 -\n                                         phys_group_id_19572,\n                                         sext_i64_i32(num_groups_17915));\n    \n    for (int32_t i_19574 = 0; i_19574 < iterations_19573; i_19574++) {\n        int32_t virt_group_id_19575 = phys_group_id_19572 + i_19574 *\n                sext_i64_i32(num_groups_17915);\n        int64_t global_tid_19576 = sext_i32_i64(virt_group_id_19575) *\n                segmap_group_sizze_17914 + sext_i32_i64(local_tid_19568);\n        int64_t slice_19577 = b_16497;\n        int64_t gtid_17920 = global_tid_19576;\n        int64_t remnant_19578 = global_tid_19576 - gtid_17920;\n        \n        if (slt64(gtid_17920, b_16497)) {\n            for (int64_t i_18953 = 0; i_18953 < g_16498; i_18953++) {\n                float x_17925;\n                \n                x_17925 = ((__global float *) mem_19012)[i_18953 * b_1",
            "6497 +\n                                                         gtid_17920];\n                \n                float defunc_0_f_res_17926 = fmax32(0.0F, x_17925);\n                \n                ((__global float *) color_19484)[phys_tid_17921 + i_18953 *\n                                                 num_threads_19525] =\n                    defunc_0_f_res_17926;\n            }\n            for (int64_t i_19580 = 0; i_19580 < g_16498; i_19580++) {\n                float tmp_19581;\n                \n                tmp_19581 = ((__global float *) color_19484)[phys_tid_17921 +\n                                                             i_19580 *\n                                                             num_threads_19525];\n                ((__global float *) color_19475)[phys_tid_17921 + i_19580 *\n                                                 num_threads_19525] = tmp_19581;\n            }\n            for (int64_t i_19582 = 0; i_19582 < g_16498; i_19582++) {\n                int64_t x_19583 = (int64_t) 0 + i_19582 * (int64_t) 1;\n                \n                ((__global int64_t *) color_19474)[phys_tid_17921 + i_19582 *\n                                                   num_threads_19525] = x_19583;\n            }\n            \n            __global unsigned char *ext_mem_19150;\n            __global unsigned char *ext_mem_unused_19456;\n            __global unsigned char *ext_mem_19149;\n            __global unsigned char *ext_mem_unused_19460;\n            __global unsigned char *mem_param_19036;\n            __global unsigned char *mem_param_19041;\n            __global unsigned char *mem_param_out_19457;\n            __global unsigned char *mem_param_out_19461;\n            \n            mem_param_19036 = color_19475;\n            mem_param_out_19457 = color_19479;\n            mem_param_19041 = color_19474;\n            mem_param_out_19461 = color_19478;\n            for (int32_t i_17929 = 0; i_17929 < iters_16502; i_17929++) {\n                int32_t defunc_2_radix_sort_step_",
            "arg_17932 = mul32(2, i_17929);\n                int32_t defunc_0_get_bit_arg_17933 = add32(1,\n                                                           defunc_2_radix_sort_step_arg_17932);\n                bool cond_f_res_17934 = defunc_0_get_bit_arg_17933 == 31;\n                bool cond_f_res_17935 = defunc_2_radix_sort_step_arg_17932 ==\n                     31;\n                int64_t discard_18975;\n                int64_t discard_18976;\n                int64_t discard_18977;\n                int64_t discard_18978;\n                int64_t scanacc_18960;\n                int64_t scanacc_18961;\n                int64_t scanacc_18962;\n                int64_t scanacc_18963;\n                \n                scanacc_18960 = (int64_t) 0;\n                scanacc_18961 = (int64_t) 0;\n                scanacc_18962 = (int64_t) 0;\n                scanacc_18963 = (int64_t) 0;\n                for (int64_t i_18969 = 0; i_18969 < g_16498; i_18969++) {\n                    float x_17953;\n                    \n                    x_17953 = ((__global\n                                float *) mem_param_19036)[phys_tid_17921 +\n                                                          i_18969 *\n                                                          num_threads_19525];\n                    \n                    int32_t i32_arg_17954;\n                    \n                    i32_arg_17954 = futrts_to_bits32(x_17953);\n                    \n                    int32_t unsign_arg_17955 = ashr32(i32_arg_17954,\n                                                      defunc_0_get_bit_arg_17933);\n                    int32_t unsign_arg_17956 = 1 & unsign_arg_17955;\n                    int32_t unsign_arg_17957 = ashr32(i32_arg_17954, 31);\n                    int32_t unsign_arg_17958 = 1 & unsign_arg_17957;\n                    bool cond_17959 = unsign_arg_17958 == 1;\n                    bool x_17960 = !cond_17959;\n                    bool y_17961 = cond_f_res_17934 && x_17960;\n                    bool co",
            "nd_17962 = cond_17959 || y_17961;\n                    int32_t defunc_1_get_bit_res_17963;\n                    \n                    if (cond_17962) {\n                        int32_t defunc_1_get_bit_res_t_res_17964 = 1 ^\n                                unsign_arg_17956;\n                        \n                        defunc_1_get_bit_res_17963 =\n                            defunc_1_get_bit_res_t_res_17964;\n                    } else {\n                        defunc_1_get_bit_res_17963 = unsign_arg_17956;\n                    }\n                    \n                    int32_t x_17965 = mul32(2, defunc_1_get_bit_res_17963);\n                    int32_t unsign_arg_17966 = ashr32(i32_arg_17954,\n                                                      defunc_2_radix_sort_step_arg_17932);\n                    int32_t unsign_arg_17967 = 1 & unsign_arg_17966;\n                    bool y_17968 = cond_f_res_17935 && x_17960;\n                    bool cond_17969 = cond_17959 || y_17968;\n                    int32_t defunc_1_get_bit_res_17970;\n                    \n                    if (cond_17969) {\n                        int32_t defunc_1_get_bit_res_t_res_17971 = 1 ^\n                                unsign_arg_17967;\n                        \n                        defunc_1_get_bit_res_17970 =\n                            defunc_1_get_bit_res_t_res_17971;\n                    } else {\n                        defunc_1_get_bit_res_17970 = unsign_arg_17967;\n                    }\n                    \n                    int32_t defunc_0_f_res_17972 = add32(x_17965,\n                                                         defunc_1_get_bit_res_17970);\n                    bool cond_17973 = defunc_0_f_res_17972 == 0;\n                    int64_t defunc_0_f_res_17974 = btoi_bool_i64(cond_17973);\n                    int64_t defunc_0_f_res_17975;\n                    int64_t defunc_0_f_res_17976;\n                    int64_t defunc_0_f_res_17977;\n                    \n                    if (cond_179",
            "73) {\n                        defunc_0_f_res_17975 = (int64_t) 0;\n                        defunc_0_f_res_17976 = (int64_t) 0;\n                        defunc_0_f_res_17977 = (int64_t) 0;\n                    } else {\n                        bool cond_17978 = defunc_0_f_res_17972 == 1;\n                        int64_t defunc_0_f_res_f_res_17979 =\n                                btoi_bool_i64(cond_17978);\n                        int64_t defunc_0_f_res_f_res_17980;\n                        int64_t defunc_0_f_res_f_res_17981;\n                        \n                        if (cond_17978) {\n                            defunc_0_f_res_f_res_17980 = (int64_t) 0;\n                            defunc_0_f_res_f_res_17981 = (int64_t) 0;\n                        } else {\n                            bool cond_17982 = defunc_0_f_res_17972 == 2;\n                            int64_t defunc_0_f_res_f_res_f_res_17983 =\n                                    btoi_bool_i64(cond_17982);\n                            bool cond_neg_17984 = !cond_17982;\n                            int64_t defunc_0_f_res_f_res_f_res_17985 =\n                                    btoi_bool_i64(cond_neg_17984);\n                            \n                            defunc_0_f_res_f_res_17980 =\n                                defunc_0_f_res_f_res_f_res_17983;\n                            defunc_0_f_res_f_res_17981 =\n                                defunc_0_f_res_f_res_f_res_17985;\n                        }\n                        defunc_0_f_res_17975 = defunc_0_f_res_f_res_17979;\n                        defunc_0_f_res_17976 = defunc_0_f_res_f_res_17980;\n                        defunc_0_f_res_17977 = defunc_0_f_res_f_res_17981;\n                    }\n                    \n                    int64_t defunc_1_op_res_17949 = add64(defunc_0_f_res_17974,\n                                                          scanacc_18960);\n                    int64_t defunc_1_op_res_17950 = add64(defunc_0_f_res_17975,\n                         ",
            "                                 scanacc_18961);\n                    int64_t defunc_1_op_res_17951 = add64(defunc_0_f_res_17976,\n                                                          scanacc_18962);\n                    int64_t defunc_1_op_res_17952 = add64(defunc_0_f_res_17977,\n                                                          scanacc_18963);\n                    \n                    ((__global int64_t *) color_19483)[phys_tid_17921 +\n                                                       i_18969 *\n                                                       num_threads_19525] =\n                        defunc_1_op_res_17949;\n                    ((__global int64_t *) color_19482)[phys_tid_17921 +\n                                                       i_18969 *\n                                                       num_threads_19525] =\n                        defunc_1_op_res_17950;\n                    ((__global int64_t *) color_19481)[phys_tid_17921 +\n                                                       i_18969 *\n                                                       num_threads_19525] =\n                        defunc_1_op_res_17951;\n                    ((__global int64_t *) color_19480)[phys_tid_17921 +\n                                                       i_18969 *\n                                                       num_threads_19525] =\n                        defunc_1_op_res_17952;\n                    ((__global int32_t *) color_19476)[phys_tid_17921 +\n                                                       i_18969 *\n                                                       num_threads_19525] =\n                        defunc_0_f_res_17972;\n                    \n                    int64_t scanacc_tmp_19590 = defunc_1_op_res_17949;\n                    int64_t scanacc_tmp_19591 = defunc_1_op_res_17950;\n                    int64_t scanacc_tmp_19592 = defunc_1_op_res_17951;\n                    int64_t scanacc_tmp_19593 = defunc_1_op_res_17952;\n                  ",
            "  \n                    scanacc_18960 = scanacc_tmp_19590;\n                    scanacc_18961 = scanacc_tmp_19591;\n                    scanacc_18962 = scanacc_tmp_19592;\n                    scanacc_18963 = scanacc_tmp_19593;\n                }\n                discard_18975 = scanacc_18960;\n                discard_18976 = scanacc_18961;\n                discard_18977 = scanacc_18962;\n                discard_18978 = scanacc_18963;\n                \n                int64_t last_res_17986;\n                \n                last_res_17986 = ((__global\n                                   int64_t *) color_19483)[phys_tid_17921 +\n                                                           i_16505 *\n                                                           num_threads_19525];\n                \n                int64_t last_res_17987;\n                \n                last_res_17987 = ((__global\n                                   int64_t *) color_19482)[phys_tid_17921 +\n                                                           i_16505 *\n                                                           num_threads_19525];\n                \n                int64_t last_res_17988;\n                \n                last_res_17988 = ((__global\n                                   int64_t *) color_19481)[phys_tid_17921 +\n                                                           i_16505 *\n                                                           num_threads_19525];\n                for (int64_t i_19599 = 0; i_19599 < g_16498; i_19599++) {\n                    float tmp_19600;\n                    \n                    tmp_19600 = ((__global\n                                  float *) mem_param_19036)[phys_tid_17921 +\n                                                            i_19599 *\n                                                            num_threads_19525];\n                    ((__global float *) mem_param_out_19457)[phys_tid_17921 +\n                                                             i_19",
            "599 *\n                                                             num_threads_19525] =\n                        tmp_19600;\n                }\n                for (int64_t i_19601 = 0; i_19601 < g_16498; i_19601++) {\n                    int64_t tmp_19602;\n                    \n                    tmp_19602 = ((__global\n                                  int64_t *) mem_param_19041)[phys_tid_17921 +\n                                                              i_19601 *\n                                                              num_threads_19525];\n                    ((__global int64_t *) mem_param_out_19461)[phys_tid_17921 +\n                                                               i_19601 *\n                                                               num_threads_19525] =\n                        tmp_19602;\n                }\n                for (int64_t write_iter_18979 = 0; write_iter_18979 < g_16498;\n                     write_iter_18979++) {\n                    int32_t write_iv_18982;\n                    \n                    write_iv_18982 = ((__global\n                                       int32_t *) color_19476)[phys_tid_17921 +\n                                                               write_iter_18979 *\n                                                               num_threads_19525];\n                    \n                    bool match_lit_18000 = 0 == write_iv_18982;\n                    int64_t defunc_1_f_res_18001;\n                    \n                    if (match_lit_18000) {\n                        int64_t write_iv_18983;\n                        \n                        write_iv_18983 = ((__global\n                                           int64_t *) color_19483)[phys_tid_17921 +\n                                                                   write_iter_18979 *\n                                                                   num_threads_19525];\n                        \n                        int64_t case_res_18002 = sub64(write_iv_18983,\n  ",
            "                                                     (int64_t) 1);\n                        \n                        defunc_1_f_res_18001 = case_res_18002;\n                    } else {\n                        bool match_lit_18003 = 1 == write_iv_18982;\n                        int64_t x_18004;\n                        \n                        if (match_lit_18003) {\n                            int64_t write_iv_18984;\n                            \n                            write_iv_18984 = ((__global\n                                               int64_t *) color_19482)[phys_tid_17921 +\n                                                                       write_iter_18979 *\n                                                                       num_threads_19525];\n                            \n                            int64_t x_18005 = add64(last_res_17986,\n                                                    write_iv_18984);\n                            int64_t case_res_18006 = sub64(x_18005,\n                                                           (int64_t) 1);\n                            \n                            x_18004 = case_res_18006;\n                        } else {\n                            bool match_lit_18007 = 2 == write_iv_18982;\n                            int64_t x_18008;\n                            \n                            if (match_lit_18007) {\n                                int64_t write_iv_18985;\n                                \n                                write_iv_18985 = ((__global\n                                                   int64_t *) color_19481)[phys_tid_17921 +\n                                                                           write_iter_18979 *\n                                                                           num_threads_19525];\n                                \n                                int64_t x_18009 = add64(last_res_17986,\n                                                        last_res_17987);\n ",
            "                               int64_t x_18010 = add64(x_18009,\n                                                        write_iv_18985);\n                                int64_t case_res_18011 = sub64(x_18010,\n                                                               (int64_t) 1);\n                                \n                                x_18008 = case_res_18011;\n                            } else {\n                                int64_t write_iv_18986;\n                                \n                                write_iv_18986 = ((__global\n                                                   int64_t *) color_19480)[phys_tid_17921 +\n                                                                           write_iter_18979 *\n                                                                           num_threads_19525];\n                                \n                                int64_t x_18012 = add64(last_res_17986,\n                                                        last_res_17987);\n                                int64_t x_18013 = add64(last_res_17988,\n                                                        x_18012);\n                                int64_t x_18014 = add64(x_18013,\n                                                        write_iv_18986);\n                                int64_t defunc_1_f_res_res_18015 =\n                                        sub64(x_18014, (int64_t) 1);\n                                \n                                x_18008 = defunc_1_f_res_res_18015;\n                            }\n                            x_18004 = x_18008;\n                        }\n                        defunc_1_f_res_18001 = x_18004;\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_18001) &&\n                        slt64(defunc_1_f_res_18001, g_16498)) {\n                        for (int64_t i_19605 = 0; i_19605 < (int64_t) 1;\n                             i_19605++) {\n                            float tmp",
            "_19606;\n                            \n                            tmp_19606 = ((__global\n                                          float *) mem_param_19036)[phys_tid_17921 +\n                                                                    num_threads_19525 *\n                                                                    write_iter_18979 +\n                                                                    i_19605 *\n                                                                    num_threads_19525];\n                            ((__global\n                              float *) mem_param_out_19457)[phys_tid_17921 +\n                                                            num_threads_19525 *\n                                                            defunc_1_f_res_18001 +\n                                                            i_19605 *\n                                                            num_threads_19525] =\n                                tmp_19606;\n                        }\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_18001) &&\n                        slt64(defunc_1_f_res_18001, g_16498)) {\n                        for (int64_t i_19607 = 0; i_19607 < (int64_t) 1;\n                             i_19607++) {\n                            int64_t tmp_19608;\n                            \n                            tmp_19608 = ((__global\n                                          int64_t *) mem_param_19041)[phys_tid_17921 +\n                                                                      num_threads_19525 *\n                                                                      write_iter_18979 +\n                                                                      i_19607 *\n                                                                      num_threads_19525];\n                            ((__global\n                              int64_t *) mem_param_out_19461)[phys_tid_17921 +\n                                     ",
            "                         num_threads_19525 *\n                                                              defunc_1_f_res_18001 +\n                                                              i_19607 *\n                                                              num_threads_19525] =\n                                tmp_19608;\n                        }\n                    }\n                }\n                \n                __global unsigned char *mem_param_tmp_19584;\n                \n                mem_param_tmp_19584 = mem_param_out_19457;\n                \n                __global unsigned char *mem_param_out_tmp_19585;\n                \n                mem_param_out_tmp_19585 = mem_param_19036;\n                \n                __global unsigned char *mem_param_tmp_19586;\n                \n                mem_param_tmp_19586 = mem_param_out_19461;\n                \n                __global unsigned char *mem_param_out_tmp_19587;\n                \n                mem_param_out_tmp_19587 = mem_param_19041;\n                mem_param_19036 = mem_param_tmp_19584;\n                mem_param_out_19457 = mem_param_out_tmp_19585;\n                mem_param_19041 = mem_param_tmp_19586;\n                mem_param_out_19461 = mem_param_out_tmp_19587;\n            }\n            ext_mem_19150 = mem_param_19036;\n            ext_mem_unused_19456 = mem_param_out_19457;\n            ext_mem_19149 = mem_param_19041;\n            ext_mem_unused_19460 = mem_param_out_19461;\n            \n            float defunc_2_reduce_res_18016;\n            float redout_18993 = 0.0F;\n            \n            for (int64_t i_18996 = 0; i_18996 < g_16498; i_18996++) {\n                int64_t x_18022;\n                \n                x_18022 = ((__global int64_t *) ext_mem_19149)[phys_tid_17921 +\n                                                               i_18996 *\n                                                               num_threads_19525];\n                \n                bool x_18023 = sle64((int64_t) ",
            "0, x_18022);\n                bool y_18024 = slt64(x_18022, g_16498);\n                bool bounds_check_18025 = x_18023 && y_18024;\n                bool index_certs_18026;\n                \n                if (!bounds_check_18025) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 3) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18022;\n                            global_failure_args[1] = (int64_t) g_16498;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18027;\n                \n                defunc_0_f_res_18027 = ((__global float *) mem_19015)[x_18022 *\n                                                                      b_16497 +\n                                                                      gtid_17920];\n                \n                float defunc_1_op_res_18021 = defunc_0_f_res_18027 +\n                      redout_18993;\n                \n                for (int64_t i_19612 = 0; i_19612 < (int64_t) 1; i_19612++) {\n                    float tmp_19613;\n                    \n                    tmp_19613 = ((__global float *) mem_19015)[b_16497 *\n                                                               x_18022 +\n                                                               gtid_17920 +\n                                                               i_19612 *\n                                                               b_16497];\n                    ((__global float *) color_19477)[phys_tid_17921 +\n                                                     num_threads_19525 *\n                                                     i_18996 + i_19612 *\n                                                     num_threads_19525] =\n                        tmp_19613;\n                }\n  ",
            "              for (int64_t i_19614 = 0; i_19614 < (int64_t) 1; i_19614++) {\n                    float tmp_19615;\n                    \n                    tmp_19615 = ((__global\n                                  float *) color_19484)[phys_tid_17921 +\n                                                        num_threads_19525 *\n                                                        x_18022 + i_19614 *\n                                                        num_threads_19525];\n                    ((__global float *) color_19476)[phys_tid_17921 +\n                                                     num_threads_19525 *\n                                                     i_18996 + i_19614 *\n                                                     num_threads_19525] =\n                        tmp_19615;\n                }\n                \n                float redout_tmp_19609 = defunc_1_op_res_18021;\n                \n                redout_18993 = redout_tmp_19609;\n            }\n            defunc_2_reduce_res_18016 = redout_18993;\n            \n            float defunc_0_g_res_18029 = defunc_2_reduce_res_18016 /\n                  i64_res_16512;\n            \n            ((__global float *) mem_19191)[gtid_17920] = defunc_0_g_res_18029;\n            for (int64_t i_19616 = 0; i_19616 < g_16498; i_19616++) {\n                float tmp_19617;\n                \n                tmp_19617 = ((__global float *) color_19477)[phys_tid_17921 +\n                                                             i_19616 *\n                                                             num_threads_19525];\n                ((__global float *) mem_19194)[gtid_17920 + i_19616 * b_16497] =\n                    tmp_19617;\n            }\n            for (int64_t i_19618 = 0; i_19618 < g_16498; i_19618++) {\n                float tmp_19619;\n                \n                tmp_19619 = ((__global float *) color_19476)[phys_tid_17921 +\n                                                             i_19618 *\n            ",
            "                                                 num_threads_19525];\n                ((__global float *) mem_19197)[gtid_17920 + i_19618 * b_16497] =\n                    tmp_19619;\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17914\n}\n__kernel void sortBagAndDoStuffzisegmap_18587(__global int *global_failure,\n                                              int64_t b_16497, int64_t g_16498,\n                                              __global\n                                              unsigned char *keys_mem_19005,\n                                              __global unsigned char *mem_19280)\n{\n    #define segmap_group_sizze_18582 (sortBagAndDoStuffzisegmap_group_sizze_18558)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19676;\n    int32_t local_tid_19677;\n    int64_t group_sizze_19680;\n    int32_t wave_sizze_19679;\n    int32_t group_tid_19678;\n    \n    global_tid_19676 = get_global_id(0);\n    local_tid_19677 = get_local_id(0);\n    group_sizze_19680 = get_local_size(0);\n    wave_sizze_19679 = LOCKSTEP_WIDTH;\n    group_tid_19678 = get_group_id(0);\n    \n    int32_t phys_tid_18587 = global_tid_19676;\n    int64_t global_tid_19681 = sext_i32_i64(group_tid_19678) *\n            segmap_group_sizze_18582 + sext_i32_i64(local_tid_19677);\n    int64_t slice_19682 = g_16498;\n    int64_t slice_19683 = b_16497 * slice_19682;\n    int64_t gtid_18585 = squot64(global_tid_19681, slice_19682);\n    int64_t remnant_19684 = global_tid_19681 - gtid_18585 * slice_19682;\n    int64_t gtid_18586 = remnant_19684;\n    int64_t remnant_19685 = remnant_19684 - gtid_18586;\n    \n    if (slt64(gtid_18585, b_16497) && slt64(gtid_18586, g_16498)) {\n        float x_18588;\n        \n        x_18588 = ((__global float *) keys_mem_19005)[gtid_18585 * g_16498 +\n                 ",
            "                                     gtid_18586];\n        \n        float defunc_0_f_res_18589 = fmax32(0.0F, x_18588);\n        \n        ((__global float *) mem_19280)[gtid_18585 * g_16498 + gtid_18586] =\n            defunc_0_f_res_18589;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18582\n}\n__kernel void sortBagAndDoStuffzisegmap_18788(__global int *global_failure,\n                                              int64_t b_16497, int64_t g_16498,\n                                              int64_t i_16505, __global\n                                              unsigned char *mem_param_19296,\n                                              __global\n                                              unsigned char *mem_param_19304,\n                                              __global unsigned char *mem_19312,\n                                              __global unsigned char *mem_19316,\n                                              __global unsigned char *mem_19353,\n                                              __global unsigned char *mem_19357,\n                                              __global unsigned char *mem_19361,\n                                              __global unsigned char *mem_19365,\n                                              __global unsigned char *mem_19369)\n{\n    #define segmap_group_sizze_18782 (sortBagAndDoStuffzisegmap_group_sizze_18330)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20016;\n    int32_t local_tid_20017;\n    int64_t group_sizze_20020;\n    int32_t wave_sizze_20019;\n    int32_t group_tid_20018;\n    \n    global_tid_20016 = get_global_id(0);\n    local_tid_20017 = get_local_id(0);\n    group_sizze_20020 = get_local_size(0);\n    wave_sizze_20019 = LOCKSTEP_WIDTH;\n    group_tid_20018 = get_group_id(0);\n    \n    int32_t phys_tid_18788 = global_tid_20016;\n    int64_t global_tid_20021 = sext_i32_i",
            "64(group_tid_20018) *\n            segmap_group_sizze_18782 + sext_i32_i64(local_tid_20017);\n    int64_t slice_20022 = g_16498;\n    int64_t slice_20023 = b_16497 * slice_20022;\n    int64_t gtid_18786 = squot64(global_tid_20021, slice_20022);\n    int64_t remnant_20024 = global_tid_20021 - gtid_18786 * slice_20022;\n    int64_t gtid_18787 = remnant_20024;\n    int64_t remnant_20025 = remnant_20024 - gtid_18787;\n    \n    if (slt64(gtid_18786, b_16497) && slt64(gtid_18787, g_16498)) {\n        int32_t x_18792;\n        \n        x_18792 = ((__global int32_t *) mem_19369)[gtid_18786 * g_16498 +\n                                                   gtid_18787];\n        \n        float write_value_18797;\n        \n        write_value_18797 = ((__global float *) mem_param_19296)[gtid_18786 *\n                                                                 g_16498 +\n                                                                 gtid_18787];\n        \n        int64_t write_value_18798;\n        \n        write_value_18798 = ((__global int64_t *) mem_param_19304)[gtid_18786 *\n                                                                   g_16498 +\n                                                                   gtid_18787];\n        \n        bool match_lit_18799 = 0 == x_18792;\n        int64_t defunc_1_f_res_18800;\n        \n        if (match_lit_18799) {\n            int64_t x_18793;\n            \n            x_18793 = ((__global int64_t *) mem_19353)[gtid_18786 * g_16498 +\n                                                       gtid_18787];\n            \n            int64_t case_res_18801 = sub64(x_18793, (int64_t) 1);\n            \n            defunc_1_f_res_18800 = case_res_18801;\n        } else {\n            int64_t last_res_18789;\n            \n            last_res_18789 = ((__global int64_t *) mem_19353)[gtid_18786 *\n                                                              g_16498 +\n                                                              i_16505];\n            \n            ",
            "bool match_lit_18802 = 1 == x_18792;\n            int64_t x_18803;\n            \n            if (match_lit_18802) {\n                int64_t x_18794;\n                \n                x_18794 = ((__global int64_t *) mem_19357)[gtid_18786 *\n                                                           g_16498 +\n                                                           gtid_18787];\n                \n                int64_t x_18804 = add64(last_res_18789, x_18794);\n                int64_t case_res_18805 = sub64(x_18804, (int64_t) 1);\n                \n                x_18803 = case_res_18805;\n            } else {\n                int64_t last_res_18790;\n                \n                last_res_18790 = ((__global int64_t *) mem_19357)[gtid_18786 *\n                                                                  g_16498 +\n                                                                  i_16505];\n                \n                bool match_lit_18806 = 2 == x_18792;\n                int64_t x_18807;\n                \n                if (match_lit_18806) {\n                    int64_t x_18795;\n                    \n                    x_18795 = ((__global int64_t *) mem_19361)[gtid_18786 *\n                                                               g_16498 +\n                                                               gtid_18787];\n                    \n                    int64_t x_18808 = add64(last_res_18789, last_res_18790);\n                    int64_t x_18809 = add64(x_18795, x_18808);\n                    int64_t case_res_18810 = sub64(x_18809, (int64_t) 1);\n                    \n                    x_18807 = case_res_18810;\n                } else {\n                    int64_t last_res_18791;\n                    \n                    last_res_18791 = ((__global\n                                       int64_t *) mem_19361)[gtid_18786 *\n                                                             g_16498 + i_16505];\n                    \n                    int64_t x_18796;\n       ",
            "             \n                    x_18796 = ((__global int64_t *) mem_19365)[gtid_18786 *\n                                                               g_16498 +\n                                                               gtid_18787];\n                    \n                    int64_t x_18811 = add64(last_res_18789, last_res_18790);\n                    int64_t x_18812 = add64(last_res_18791, x_18811);\n                    int64_t x_18813 = add64(x_18796, x_18812);\n                    int64_t defunc_1_f_res_res_18814 = sub64(x_18813,\n                                                             (int64_t) 1);\n                    \n                    x_18807 = defunc_1_f_res_res_18814;\n                }\n                x_18803 = x_18807;\n            }\n            defunc_1_f_res_18800 = x_18803;\n        }\n        if ((sle64((int64_t) 0, gtid_18786) && slt64(gtid_18786, b_16497)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_18800) &&\n             slt64(defunc_1_f_res_18800, g_16498))) {\n            ((__global float *) mem_19312)[gtid_18786 * g_16498 +\n                                           defunc_1_f_res_18800] =\n                write_value_18797;\n        }\n        if ((sle64((int64_t) 0, gtid_18786) && slt64(gtid_18786, b_16497)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_18800) &&\n             slt64(defunc_1_f_res_18800, g_16498))) {\n            ((__global int64_t *) mem_19316)[gtid_18786 * g_16498 +\n                                             defunc_1_f_res_18800] =\n                write_value_18798;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18782\n}\n__kernel void sortBagAndDoStuffzisegmap_18846(__global int *global_failure,\n                                              int64_t b_16497,\n                                              float i64_res_16512, __global\n                                              unsigned char *mem_19396, __global\n                                              unsigned char *mem_19408)\n{\n    #de",
            "fine segmap_group_sizze_18842 (sortBagAndDoStuffzisegmap_group_sizze_18162)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20098;\n    int32_t local_tid_20099;\n    int64_t group_sizze_20102;\n    int32_t wave_sizze_20101;\n    int32_t group_tid_20100;\n    \n    global_tid_20098 = get_global_id(0);\n    local_tid_20099 = get_local_id(0);\n    group_sizze_20102 = get_local_size(0);\n    wave_sizze_20101 = LOCKSTEP_WIDTH;\n    group_tid_20100 = get_group_id(0);\n    \n    int32_t phys_tid_18846 = global_tid_20098;\n    int64_t global_tid_20103 = sext_i32_i64(group_tid_20100) *\n            segmap_group_sizze_18842 + sext_i32_i64(local_tid_20099);\n    int64_t slice_20104 = b_16497;\n    int64_t gtid_18845 = global_tid_20103;\n    int64_t remnant_20105 = global_tid_20103 - gtid_18845;\n    \n    if (slt64(gtid_18845, b_16497)) {\n        float defunc_2_reduce_res_18847;\n        \n        defunc_2_reduce_res_18847 = ((__global float *) mem_19396)[gtid_18845];\n        \n        float defunc_0_g_res_18848 = defunc_2_reduce_res_18847 / i64_res_16512;\n        \n        ((__global float *) mem_19408)[gtid_18845] = defunc_0_g_res_18848;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18842\n}\n__kernel void sortBagAndDoStuffzisegmap_18877(__global int *global_failure,\n                                              int64_t b_16497, int64_t g_16498,\n                                              float i64_res_16651, __global\n                                              unsigned char *ext_mem_19423,\n                                              __global unsigned char *mem_19428)\n{\n    #define segmap_group_sizze_18873 (sortBagAndDoStuffzisegmap_group_sizze_18860)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20110;\n    int32_t local_tid_2",
            "0111;\n    int64_t group_sizze_20114;\n    int32_t wave_sizze_20113;\n    int32_t group_tid_20112;\n    \n    global_tid_20110 = get_global_id(0);\n    local_tid_20111 = get_local_id(0);\n    group_sizze_20114 = get_local_size(0);\n    wave_sizze_20113 = LOCKSTEP_WIDTH;\n    group_tid_20112 = get_group_id(0);\n    \n    int32_t phys_tid_18877 = global_tid_20110;\n    int64_t global_tid_20115 = sext_i32_i64(group_tid_20112) *\n            segmap_group_sizze_18873 + sext_i32_i64(local_tid_20111);\n    int64_t slice_20116 = g_16498;\n    int64_t gtid_18876 = global_tid_20115;\n    int64_t remnant_20117 = global_tid_20115 - gtid_18876;\n    \n    if (slt64(gtid_18876, g_16498)) {\n        float defunc_2_reduce_res_18879;\n        float redout_18999 = 0.0F;\n        \n        for (int64_t i_19000 = 0; i_19000 < b_16497; i_19000++) {\n            float x_18883;\n            \n            x_18883 = ((__global float *) ext_mem_19423)[i_19000 * g_16498 +\n                                                         gtid_18876];\n            \n            float defunc_1_op_res_18882 = x_18883 + redout_18999;\n            float redout_tmp_20118 = defunc_1_op_res_18882;\n            \n            redout_18999 = redout_tmp_20118;\n        }\n        defunc_2_reduce_res_18879 = redout_18999;\n        \n        float defunc_0_g_res_18884 = defunc_2_reduce_res_18879 / i64_res_16651;\n        \n        ((__global float *) mem_19428)[gtid_18876] = defunc_0_g_res_18884;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18873\n}\n__kernel void sortBagAndDoStuffzisegmap_18933(__global int *global_failure,\n                                              int64_t g_16498,\n                                              float i64_res_16651, __global\n                                              unsigned char *mem_19435, __global\n                                              unsigned char *mem_19439)\n{\n    #define segmap_group_sizze_18929 (sortBagAndDoStuffzisegmap_group_sizze_18889)\n    \n    const int block_dim0 = 0;\n    c",
            "onst int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20190;\n    int32_t local_tid_20191;\n    int64_t group_sizze_20194;\n    int32_t wave_sizze_20193;\n    int32_t group_tid_20192;\n    \n    global_tid_20190 = get_global_id(0);\n    local_tid_20191 = get_local_id(0);\n    group_sizze_20194 = get_local_size(0);\n    wave_sizze_20193 = LOCKSTEP_WIDTH;\n    group_tid_20192 = get_group_id(0);\n    \n    int32_t phys_tid_18933 = global_tid_20190;\n    int64_t global_tid_20195 = sext_i32_i64(group_tid_20192) *\n            segmap_group_sizze_18929 + sext_i32_i64(local_tid_20191);\n    int64_t slice_20196 = g_16498;\n    int64_t gtid_18932 = global_tid_20195;\n    int64_t remnant_20197 = global_tid_20195 - gtid_18932;\n    \n    if (slt64(gtid_18932, g_16498)) {\n        float defunc_2_reduce_res_18934;\n        \n        defunc_2_reduce_res_18934 = ((__global float *) mem_19435)[gtid_18932];\n        \n        float defunc_0_g_res_18935 = defunc_2_reduce_res_18934 / i64_res_16651;\n        \n        ((__global float *) mem_19439)[gtid_18932] = defunc_0_g_res_18935;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18929\n}\n__kernel void sortBagAndDoStuffzisegmap_intragroup_18039(__global\n                                                         int *global_failure,\n                                                         int failure_is_an_option,\n                                                         __global\n                                                         int64_t *global_failure_args,\n                                                         uint red_arr_mem_19669_backing_offset_0,\n                                                         uint color_19496_backing_offset_1,\n                                                         uint color_19495_backing_offset_2,\n                                                         uint color_19494_backing_offset_3,\n                                        ",
            "                 uint color_19493_backing_offset_4,\n                                                         uint color_19492_backing_offset_5,\n                                                         uint color_19491_backing_offset_6,\n                                                         uint color_19489_backing_offset_7,\n                                                         uint color_19488_backing_offset_8,\n                                                         uint color_19487_backing_offset_9,\n                                                         int64_t b_16497,\n                                                         int64_t g_16498,\n                                                         int32_t iters_16502,\n                                                         int64_t i_16505,\n                                                         float i64_res_16512,\n                                                         __global\n                                                         unsigned char *keys_mem_19005,\n                                                         __global\n                                                         unsigned char *values_mem_19006,\n                                                         __global\n                                                         unsigned char *mem_19267,\n                                                         __global\n                                                         unsigned char *mem_19271,\n                                                         __global\n                                                         unsigned char *mem_19275,\n                                                         __global\n                                                         unsigned char *color_19486,\n                                                         __global\n                                                         unsigned char *color_19490)\n{\n    const int block_dim0 = 0;\n    const int block",
            "_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *red_arr_mem_19669_backing_9 =\n                           &shared_mem[red_arr_mem_19669_backing_offset_0];\n    volatile unsigned char *color_19496_backing_8 =\n                           &shared_mem[color_19496_backing_offset_1];\n    volatile unsigned char *color_19495_backing_7 =\n                           &shared_mem[color_19495_backing_offset_2];\n    volatile unsigned char *color_19494_backing_6 =\n                           &shared_mem[color_19494_backing_offset_3];\n    volatile unsigned char *color_19493_backing_5 =\n                           &shared_mem[color_19493_backing_offset_4];\n    volatile unsigned char *color_19492_backing_4 =\n                           &shared_mem[color_19492_backing_offset_5];\n    volatile unsigned char *color_19491_backing_3 =\n                           &shared_mem[color_19491_backing_offset_6];\n    volatile unsigned char *color_19489_backing_2 =\n                           &shared_mem[color_19489_backing_offset_7];\n    volatile unsigned char *color_19488_backing_1 =\n                           &shared_mem[color_19488_backing_offset_8];\n    volatile unsigned char *color_19487_backing_0 =\n                           &shared_mem[color_19487_backing_offset_9];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19622;\n    int32_t local_tid_19623;\n    int64_t group_sizze_19626;\n    int32_t wave_sizze_19625;\n    int32_t group_tid_19624;\n    \n    global_tid_19622 = get_global_id(0);\n    local_tid_19623 = get_local_id(0);\n    group_sizze_19626 = get_local_size(0);\n    wave_sizze_19625 = LOCKSTEP_WIDTH;\n    group_tid_19624 = get_group_id(0);\n    \n    int32_t phys_tid_18039 = group_tid_19624;\n    int64_t slice_19628 = g_16498;\n    int64_t ltid_pre_19627 = sext_i32_i64(lo",
            "cal_tid_19623);\n    int64_t remnant_19629 = sext_i32_i64(local_tid_19623) - ltid_pre_19627;\n    int64_t slice_19630 = b_16497;\n    int64_t gtid_18038 = sext_i32_i64(group_tid_19624);\n    int64_t remnant_19631 = sext_i32_i64(group_tid_19624) - gtid_18038;\n    __local unsigned char *color_19487;\n    \n    color_19487 = (__local unsigned char *) color_19487_backing_0;\n    \n    __local unsigned char *color_19488;\n    \n    color_19488 = (__local unsigned char *) color_19488_backing_1;\n    \n    __local unsigned char *color_19489;\n    \n    color_19489 = (__local unsigned char *) color_19489_backing_2;\n    \n    __local unsigned char *color_19491;\n    \n    color_19491 = (__local unsigned char *) color_19491_backing_3;\n    \n    __local unsigned char *color_19492;\n    \n    color_19492 = (__local unsigned char *) color_19492_backing_4;\n    \n    __local unsigned char *color_19493;\n    \n    color_19493 = (__local unsigned char *) color_19493_backing_5;\n    \n    __local unsigned char *color_19494;\n    \n    color_19494 = (__local unsigned char *) color_19494_backing_6;\n    \n    __local unsigned char *color_19495;\n    \n    color_19495 = (__local unsigned char *) color_19495_backing_7;\n    \n    __local unsigned char *color_19496;\n    \n    color_19496 = (__local unsigned char *) color_19496_backing_8;\n    \n    int32_t phys_tid_18046 = local_tid_19623;\n    int64_t gtid_18045 = sext_i32_i64(sext_i64_i32(ltid_pre_19627));\n    float x_18047;\n    \n    x_18047 = ((__global float *) keys_mem_19005)[gtid_18038 * g_16498 +\n                                                  gtid_18045];\n    \n    float defunc_0_f_res_18048 = fmax32(0.0F, x_18047);\n    \n    ((__local float *) color_19496)[gtid_18045] = defunc_0_f_res_18048;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19632;\n    \n    tmp_19632 = ((__local float *) color_19496)[sext_i32_i64(local_tid_19623)];\n    ((__local float *) color_19487)[sext_i32_i64(local_tid_19623)] = tmp_19632;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t x_1",
            "9633 = (int64_t) 0 + sext_i32_i64(local_tid_19623) * (int64_t) 1;\n    \n    ((__global int64_t *) color_19486)[phys_tid_18039 * g_16498 +\n                                       sext_i32_i64(local_tid_19623)] = x_19633;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local unsigned char *ext_mem_19249;\n    __local unsigned char *ext_mem_unused_19466;\n    __global unsigned char *ext_mem_19248;\n    __global unsigned char *ext_mem_unused_19470;\n    __local unsigned char *mem_param_19207;\n    __global unsigned char *mem_param_19212;\n    __local unsigned char *mem_param_out_19467;\n    __global unsigned char *mem_param_out_19471;\n    \n    mem_param_19207 = color_19487;\n    mem_param_out_19467 = color_19489;\n    mem_param_19212 = color_19486;\n    mem_param_out_19471 = color_19490;\n    for (int32_t i_18051 = 0; i_18051 < iters_16502; i_18051++) {\n        int32_t defunc_2_radix_sort_step_arg_18054 = mul32(2, i_18051);\n        int32_t defunc_0_get_bit_arg_18055 = add32(1,\n                                                   defunc_2_radix_sort_step_arg_18054);\n        bool cond_f_res_18056 = defunc_0_get_bit_arg_18055 == 31;\n        bool cond_f_res_18057 = defunc_2_radix_sort_step_arg_18054 == 31;\n        int32_t phys_tid_18064 = local_tid_19623;\n        int64_t gtid_18063 = sext_i32_i64(sext_i64_i32(ltid_pre_19627));\n        float x_18077;\n        \n        x_18077 = ((__local float *) mem_param_19207)[gtid_18063];\n        \n        int32_t i32_arg_18078;\n        \n        i32_arg_18078 = futrts_to_bits32(x_18077);\n        \n        int32_t unsign_arg_18079 = ashr32(i32_arg_18078,\n                                          defunc_0_get_bit_arg_18055);\n        int32_t unsign_arg_18080 = 1 & unsign_arg_18079;\n        int32_t unsign_arg_18081 = ashr32(i32_arg_18078, 31);\n        int32_t unsign_arg_18082 = 1 & unsign_arg_18081;\n        bool cond_18083 = unsign_arg_18082 == 1;\n        bool x_18084 = !cond_18083;\n        bool y_18085 = cond_f_res_18056 && x_18084;\n        bool cond_18086 = co",
            "nd_18083 || y_18085;\n        int32_t defunc_1_get_bit_res_18087;\n        \n        if (cond_18086) {\n            int32_t defunc_1_get_bit_res_t_res_18088 = 1 ^ unsign_arg_18080;\n            \n            defunc_1_get_bit_res_18087 = defunc_1_get_bit_res_t_res_18088;\n        } else {\n            defunc_1_get_bit_res_18087 = unsign_arg_18080;\n        }\n        \n        int32_t x_18089 = mul32(2, defunc_1_get_bit_res_18087);\n        int32_t unsign_arg_18090 = ashr32(i32_arg_18078,\n                                          defunc_2_radix_sort_step_arg_18054);\n        int32_t unsign_arg_18091 = 1 & unsign_arg_18090;\n        bool y_18092 = cond_f_res_18057 && x_18084;\n        bool cond_18093 = cond_18083 || y_18092;\n        int32_t defunc_1_get_bit_res_18094;\n        \n        if (cond_18093) {\n            int32_t defunc_1_get_bit_res_t_res_18095 = 1 ^ unsign_arg_18091;\n            \n            defunc_1_get_bit_res_18094 = defunc_1_get_bit_res_t_res_18095;\n        } else {\n            defunc_1_get_bit_res_18094 = unsign_arg_18091;\n        }\n        \n        int32_t defunc_0_f_res_18096 = add32(x_18089,\n                                             defunc_1_get_bit_res_18094);\n        bool cond_18097 = defunc_0_f_res_18096 == 0;\n        int64_t defunc_0_f_res_18098 = btoi_bool_i64(cond_18097);\n        int64_t defunc_0_f_res_18099;\n        int64_t defunc_0_f_res_18100;\n        int64_t defunc_0_f_res_18101;\n        \n        if (cond_18097) {\n            defunc_0_f_res_18099 = (int64_t) 0;\n            defunc_0_f_res_18100 = (int64_t) 0;\n            defunc_0_f_res_18101 = (int64_t) 0;\n        } else {\n            bool cond_18102 = defunc_0_f_res_18096 == 1;\n            int64_t defunc_0_f_res_f_res_18103 = btoi_bool_i64(cond_18102);\n            int64_t defunc_0_f_res_f_res_18104;\n            int64_t defunc_0_f_res_f_res_18105;\n            \n            if (cond_18102) {\n                defunc_0_f_res_f_res_18104 = (int64_t) 0;\n                defunc_0_f_res_f_res_18105 = (int64_t) 0",
            ";\n            } else {\n                bool cond_18106 = defunc_0_f_res_18096 == 2;\n                int64_t defunc_0_f_res_f_res_f_res_18107 =\n                        btoi_bool_i64(cond_18106);\n                bool cond_neg_18108 = !cond_18106;\n                int64_t defunc_0_f_res_f_res_f_res_18109 =\n                        btoi_bool_i64(cond_neg_18108);\n                \n                defunc_0_f_res_f_res_18104 = defunc_0_f_res_f_res_f_res_18107;\n                defunc_0_f_res_f_res_18105 = defunc_0_f_res_f_res_f_res_18109;\n            }\n            defunc_0_f_res_18099 = defunc_0_f_res_f_res_18103;\n            defunc_0_f_res_18100 = defunc_0_f_res_f_res_18104;\n            defunc_0_f_res_18101 = defunc_0_f_res_f_res_18105;\n        }\n        ((__local int64_t *) color_19495)[gtid_18063] = defunc_0_f_res_18098;\n        ((__local int64_t *) color_19494)[gtid_18063] = defunc_0_f_res_18099;\n        ((__local int64_t *) color_19493)[gtid_18063] = defunc_0_f_res_18100;\n        ((__local int64_t *) color_19492)[gtid_18063] = defunc_0_f_res_18101;\n        ((__local int32_t *) color_19491)[gtid_18063] = defunc_0_f_res_18096;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t dims_flat_19640 = g_16498;\n        int64_t x_18065;\n        int64_t x_18066;\n        int64_t x_18067;\n        int64_t x_18068;\n        int64_t x_18069;\n        int64_t x_18070;\n        int64_t x_18071;\n        int64_t x_18072;\n        int64_t x_19645;\n        int64_t x_19646;\n        int64_t x_19647;\n        int64_t x_19648;\n        int64_t x_19649;\n        int64_t x_19650;\n        int64_t x_19651;\n        int64_t x_19652;\n        bool ltid_in_bounds_19657 = slt64(sext_i32_i64(local_tid_19623),\n                                          g_16498);\n        int32_t skip_threads_19658;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19657) {\n                x_18069 = ((volatile __local\n                            int64_t *) color_19495)[sext_i32_i64(loc",
            "al_tid_19623)];\n                x_18070 = ((volatile __local\n                            int64_t *) color_19494)[sext_i32_i64(local_tid_19623)];\n                x_18071 = ((volatile __local\n                            int64_t *) color_19493)[sext_i32_i64(local_tid_19623)];\n                x_18072 = ((volatile __local\n                            int64_t *) color_19492)[sext_i32_i64(local_tid_19623)];\n                if ((local_tid_19623 - squot32(local_tid_19623, 32) * 32) ==\n                    0) {\n                    x_18065 = x_18069;\n                    x_18066 = x_18070;\n                    x_18067 = x_18071;\n                    x_18068 = x_18072;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19658 = 1;\n            while (slt32(skip_threads_19658, 32)) {\n                bool thread_active_19659 = sle32(skip_threads_19658,\n                                                 local_tid_19623 -\n                                                 squot32(local_tid_19623, 32) *\n                                                 32) && ltid_in_bounds_19657;\n                \n                if (thread_active_19659) {\n                    // read operands\n                    {\n                        x_18065 = ((volatile __local\n                                    int64_t *) color_19495)[sext_i32_i64(local_tid_19623) -\n                                                            sext_i32_i64(skip_threads_19658)];\n                        x_18066 = ((volatile __local\n                                    int64_t *) color_19494)[sext_i32_i64(local_tid_19623) -\n                                                            sext_i32_i64(skip_threads_19658)];\n                        x_18067 = ((volatile __local\n                                    int64_t *) color_19493)[sext_i32_i64(local_tid_19623) -\n                                                            sext_i32_i64(skip_threads_19658)];\n          ",
            "              x_18068 = ((volatile __local\n                                    int64_t *) color_19492)[sext_i32_i64(local_tid_19623) -\n                                                            sext_i32_i64(skip_threads_19658)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19660 =\n                         slt64(srem64(sext_i32_i64(local_tid_19623), g_16498),\n                               sext_i32_i64(local_tid_19623) -\n                               sext_i32_i64(local_tid_19623 -\n                               skip_threads_19658));\n                    \n                    if (thread_active_19659 && inactive_19660) {\n                        x_18065 = x_18069;\n                        x_18066 = x_18070;\n                        x_18067 = x_18071;\n                        x_18068 = x_18072;\n                    }\n                    if (thread_active_19659) {\n                        if (!inactive_19660) {\n                            int64_t defunc_1_op_res_18073 = add64(x_18065,\n                                                                  x_18069);\n                            int64_t defunc_1_op_res_18074 = add64(x_18066,\n                                                                  x_18070);\n                            int64_t defunc_1_op_res_18075 = add64(x_18067,\n                                                                  x_18071);\n                            int64_t defunc_1_op_res_18076 = add64(x_18068,\n                                                                  x_18072);\n                            \n                            x_18065 = defunc_1_op_res_18073;\n                            x_18066 = defunc_1_op_res_18074;\n                            x_18067 = defunc_1_op_res_18075;\n                            x_18068 = defunc_1_op_res_18076;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19625, skip_threads_19",
            "658)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19659) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19495)[sext_i32_i64(local_tid_19623)] =\n                            x_18065;\n                        x_18069 = x_18065;\n                        ((volatile __local\n                          int64_t *) color_19494)[sext_i32_i64(local_tid_19623)] =\n                            x_18066;\n                        x_18070 = x_18066;\n                        ((volatile __local\n                          int64_t *) color_19493)[sext_i32_i64(local_tid_19623)] =\n                            x_18067;\n                        x_18071 = x_18067;\n                        ((volatile __local\n                          int64_t *) color_19492)[sext_i32_i64(local_tid_19623)] =\n                            x_18068;\n                        x_18072 = x_18068;\n                    }\n                }\n                if (sle32(wave_sizze_19625, skip_threads_19658)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19658 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19623 - squot32(local_tid_19623, 32) * 32) == 31 &&\n                ltid_in_bounds_19657) {\n                ((volatile __local\n                  int64_t *) color_19495)[sext_i32_i64(squot32(local_tid_19623,\n                                                               32))] = x_18065;\n                ((volatile __local\n                  int64_t *) color_19494)[sext_i32_i64(squot32(local_tid_19623,\n                                                               32))] = x_18066;\n                ((volatile __local\n                  int64_t *) color_19493)[sext_i32_i64(squot32(local_tid_19623,\n                   ",
            "                                            32))] = x_18067;\n                ((volatile __local\n                  int64_t *) color_19492)[sext_i32_i64(squot32(local_tid_19623,\n                                                               32))] = x_18068;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19661;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19623, 32) == 0 && ltid_in_bounds_19657) {\n                    x_19649 = ((volatile __local\n                                int64_t *) color_19495)[sext_i32_i64(local_tid_19623)];\n                    x_19650 = ((volatile __local\n                                int64_t *) color_19494)[sext_i32_i64(local_tid_19623)];\n                    x_19651 = ((volatile __local\n                                int64_t *) color_19493)[sext_i32_i64(local_tid_19623)];\n                    x_19652 = ((volatile __local\n                                int64_t *) color_19492)[sext_i32_i64(local_tid_19623)];\n                    if ((local_tid_19623 - squot32(local_tid_19623, 32) * 32) ==\n                        0) {\n                        x_19645 = x_19649;\n                        x_19646 = x_19650;\n                        x_19647 = x_19651;\n                        x_19648 = x_19652;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19661 = 1;\n                while (slt32(skip_threads_19661, 32)) {\n                    bool thread_active_19662 = sle32(skip_threads_19661,\n                                                     local_tid_19623 -\n                                                     squot32(local_tid_19623,\n                                                             32) * 32) &&\n                         (squot32(local_",
            "tid_19623, 32) == 0 &&\n                          ltid_in_bounds_19657);\n                    \n                    if (thread_active_19662) {\n                        // read operands\n                        {\n                            x_19645 = ((volatile __local\n                                        int64_t *) color_19495)[sext_i32_i64(local_tid_19623) -\n                                                                sext_i32_i64(skip_threads_19661)];\n                            x_19646 = ((volatile __local\n                                        int64_t *) color_19494)[sext_i32_i64(local_tid_19623) -\n                                                                sext_i32_i64(skip_threads_19661)];\n                            x_19647 = ((volatile __local\n                                        int64_t *) color_19493)[sext_i32_i64(local_tid_19623) -\n                                                                sext_i32_i64(skip_threads_19661)];\n                            x_19648 = ((volatile __local\n                                        int64_t *) color_19492)[sext_i32_i64(local_tid_19623) -\n                                                                sext_i32_i64(skip_threads_19661)];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19663 =\n                             slt64(srem64(sext_i32_i64(local_tid_19623 * 32 +\n                                          32 - 1), g_16498),\n                                   sext_i32_i64(local_tid_19623 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_19623 -\n                                                 skip_threads_19661) * 32 + 32 -\n                                   1));\n                        \n                        if (thread_active_19662 && inactive_19663) {\n                            x_19645 = x_19649;\n                            x_19646 = x_19650;\n                            x_19",
            "647 = x_19651;\n                            x_19648 = x_19652;\n                        }\n                        if (thread_active_19662) {\n                            if (!inactive_19663) {\n                                int64_t defunc_1_op_res_19653 = add64(x_19645,\n                                                                      x_19649);\n                                int64_t defunc_1_op_res_19654 = add64(x_19646,\n                                                                      x_19650);\n                                int64_t defunc_1_op_res_19655 = add64(x_19647,\n                                                                      x_19651);\n                                int64_t defunc_1_op_res_19656 = add64(x_19648,\n                                                                      x_19652);\n                                \n                                x_19645 = defunc_1_op_res_19653;\n                                x_19646 = defunc_1_op_res_19654;\n                                x_19647 = defunc_1_op_res_19655;\n                                x_19648 = defunc_1_op_res_19656;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19625, skip_threads_19661)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19662) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) color_19495)[sext_i32_i64(local_tid_19623)] =\n                                x_19645;\n                            x_19649 = x_19645;\n                            ((volatile __local\n                              int64_t *) color_19494)[sext_i32_i64(local_tid_19623)] =\n                                x_19646;\n                            x_19650 = x_19646;\n                            ((volatile __local\n                              int64_t *) color_19493",
            ")[sext_i32_i64(local_tid_19623)] =\n                                x_19647;\n                            x_19651 = x_19647;\n                            ((volatile __local\n                              int64_t *) color_19492)[sext_i32_i64(local_tid_19623)] =\n                                x_19648;\n                            x_19652 = x_19648;\n                        }\n                    }\n                    if (sle32(wave_sizze_19625, skip_threads_19661)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19661 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19664 = squot32(local_tid_19623, 32) == 0 ||\n             !ltid_in_bounds_19657;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19664) {\n                    x_18069 = x_18065;\n                    x_18070 = x_18066;\n                    x_18071 = x_18067;\n                    x_18072 = x_18068;\n                    x_18065 = ((__local\n                                int64_t *) color_19495)[sext_i32_i64(squot32(local_tid_19623,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18066 = ((__local\n                                int64_t *) color_19494)[sext_i32_i64(squot32(local_tid_19623,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18067 = ((__local\n                                int64_t *) color_19493)[sext_i32_i64(squot32(local_tid_19623,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18068 = ((__local\n   ",
            "                             int64_t *) color_19492)[sext_i32_i64(squot32(local_tid_19623,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19665 =\n                     slt64(srem64(sext_i32_i64(local_tid_19623), g_16498),\n                           sext_i32_i64(local_tid_19623) -\n                           sext_i32_i64(squot32(local_tid_19623, 32) * 32 - 1));\n                \n                if (!no_carry_in_19664) {\n                    if (inactive_19665) {\n                        x_18065 = x_18069;\n                        x_18066 = x_18070;\n                        x_18067 = x_18071;\n                        x_18068 = x_18072;\n                    }\n                }\n                if (!no_carry_in_19664) {\n                    if (!inactive_19665) {\n                        int64_t defunc_1_op_res_18073 = add64(x_18065, x_18069);\n                        int64_t defunc_1_op_res_18074 = add64(x_18066, x_18070);\n                        int64_t defunc_1_op_res_18075 = add64(x_18067, x_18071);\n                        int64_t defunc_1_op_res_18076 = add64(x_18068, x_18072);\n                        \n                        x_18065 = defunc_1_op_res_18073;\n                        x_18066 = defunc_1_op_res_18074;\n                        x_18067 = defunc_1_op_res_18075;\n                        x_18068 = defunc_1_op_res_18076;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19664) {\n                    ((__local\n                      int64_t *) color_19495)[sext_i32_i64(local_tid_19623)] =\n                        x_18065;\n                    ((__local\n                      int64_t *) color_19494)[sext_i32_i64(local_tid_19623)] =\n                        x_18066;\n                    ",
            "((__local\n                      int64_t *) color_19493)[sext_i32_i64(local_tid_19623)] =\n                        x_18067;\n                    ((__local\n                      int64_t *) color_19492)[sext_i32_i64(local_tid_19623)] =\n                        x_18068;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19623, 32) == 0 && ltid_in_bounds_19657) {\n                ((__local\n                  int64_t *) color_19495)[sext_i32_i64(local_tid_19623)] =\n                    x_18069;\n                ((__local\n                  int64_t *) color_19494)[sext_i32_i64(local_tid_19623)] =\n                    x_18070;\n                ((__local\n                  int64_t *) color_19493)[sext_i32_i64(local_tid_19623)] =\n                    x_18071;\n                ((__local\n                  int64_t *) color_19492)[sext_i32_i64(local_tid_19623)] =\n                    x_18072;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t last_res_18110;\n        \n        last_res_18110 = ((__local int64_t *) color_19495)[i_16505];\n        \n        int64_t last_res_18111;\n        \n        last_res_18111 = ((__local int64_t *) color_19494)[i_16505];\n        \n        int64_t last_res_18112;\n        \n        last_res_18112 = ((__local int64_t *) color_19493)[i_16505];\n        \n        float tmp_19666;\n        \n        tmp_19666 = ((__local\n                      float *) mem_param_19207)[sext_i32_i64(local_tid_19623)];\n        ((__local float *) mem_param_out_19467)[sext_i32_i64(local_tid_19623)] =\n            tmp_19666;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19667;\n        \n        tmp_19667 = ((__global int64_t *) mem_param_19212)[phys_tid_18039 *\n                                                           g_16498 +\n                                                           sext_i32_i64(local_tid_19623)];\n    ",
            "    ((__local int64_t *) color_19488)[sext_i32_i64(local_tid_19623)] =\n            tmp_19667;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t phys_tid_18118 = local_tid_19623;\n        int64_t write_i_18117 = sext_i32_i64(sext_i64_i32(ltid_pre_19627));\n        int32_t x_18119;\n        \n        x_18119 = ((__local int32_t *) color_19491)[write_i_18117];\n        \n        float write_value_18124;\n        \n        write_value_18124 = ((__local float *) mem_param_19207)[write_i_18117];\n        \n        int64_t write_value_18125;\n        \n        write_value_18125 = ((__global\n                              int64_t *) mem_param_19212)[phys_tid_18039 *\n                                                          g_16498 +\n                                                          write_i_18117];\n        \n        bool match_lit_18126 = 0 == x_18119;\n        int64_t defunc_1_f_res_18127;\n        \n        if (match_lit_18126) {\n            int64_t x_18120;\n            \n            x_18120 = ((__local int64_t *) color_19495)[write_i_18117];\n            \n            int64_t case_res_18128 = sub64(x_18120, (int64_t) 1);\n            \n            defunc_1_f_res_18127 = case_res_18128;\n        } else {\n            bool match_lit_18129 = 1 == x_18119;\n            int64_t x_18130;\n            \n            if (match_lit_18129) {\n                int64_t x_18121;\n                \n                x_18121 = ((__local int64_t *) color_19494)[write_i_18117];\n                \n                int64_t x_18131 = add64(last_res_18110, x_18121);\n                int64_t case_res_18132 = sub64(x_18131, (int64_t) 1);\n                \n                x_18130 = case_res_18132;\n            } else {\n                bool match_lit_18133 = 2 == x_18119;\n                int64_t x_18134;\n                \n                if (match_lit_18133) {\n                    int64_t x_18122;\n                    \n                    x_18122 = ((__local int64_t *) color_19493)[write_i_18117];\n                    ",
            "\n                    int64_t x_18135 = add64(last_res_18110, last_res_18111);\n                    int64_t x_18136 = add64(x_18122, x_18135);\n                    int64_t case_res_18137 = sub64(x_18136, (int64_t) 1);\n                    \n                    x_18134 = case_res_18137;\n                } else {\n                    int64_t x_18123;\n                    \n                    x_18123 = ((__local int64_t *) color_19492)[write_i_18117];\n                    \n                    int64_t x_18138 = add64(last_res_18110, last_res_18111);\n                    int64_t x_18139 = add64(last_res_18112, x_18138);\n                    int64_t x_18140 = add64(x_18123, x_18139);\n                    int64_t defunc_1_f_res_res_18141 = sub64(x_18140,\n                                                             (int64_t) 1);\n                    \n                    x_18134 = defunc_1_f_res_res_18141;\n                }\n                x_18130 = x_18134;\n            }\n            defunc_1_f_res_18127 = x_18130;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_18127) &&\n            slt64(defunc_1_f_res_18127, g_16498)) {\n            ((__local float *) mem_param_out_19467)[defunc_1_f_res_18127] =\n                write_value_18124;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_18127) &&\n            slt64(defunc_1_f_res_18127, g_16498)) {\n            ((__local int64_t *) color_19488)[defunc_1_f_res_18127] =\n                write_value_18125;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19668;\n        \n        tmp_19668 = ((__local\n                      int64_t *) color_19488)[sext_i32_i64(local_tid_19623)];\n        ((__global int64_t *) mem_param_out_19471)[phys_tid_18039 * g_16498 +\n                                                   sext_i32_i64(local_tid_19623)] =\n            tmp_19668;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        __local unsigned char *mem_param_tmp_19634;\n        \n        mem_param_tmp_19634 = mem_param_out_1",
            "9467;\n        \n        __local unsigned char *mem_param_out_tmp_19635;\n        \n        mem_param_out_tmp_19635 = mem_param_19207;\n        \n        __global unsigned char *mem_param_tmp_19636;\n        \n        mem_param_tmp_19636 = mem_param_out_19471;\n        \n        __global unsigned char *mem_param_out_tmp_19637;\n        \n        mem_param_out_tmp_19637 = mem_param_19212;\n        mem_param_19207 = mem_param_tmp_19634;\n        mem_param_out_19467 = mem_param_out_tmp_19635;\n        mem_param_19212 = mem_param_tmp_19636;\n        mem_param_out_19471 = mem_param_out_tmp_19637;\n    }\n    ext_mem_19249 = mem_param_19207;\n    ext_mem_unused_19466 = mem_param_out_19467;\n    ext_mem_19248 = mem_param_19212;\n    ext_mem_unused_19470 = mem_param_out_19471;\n    \n    float defunc_2_reduce_res_18142;\n    int32_t phys_tid_18146 = local_tid_19623;\n    __local unsigned char *red_arr_mem_19669;\n    \n    red_arr_mem_19669 = (__local unsigned char *) red_arr_mem_19669_backing_9;\n    \n    int64_t gtid_18145 = sext_i32_i64(sext_i64_i32(ltid_pre_19627));\n    int64_t x_18150;\n    \n    x_18150 = ((__global int64_t *) ext_mem_19248)[phys_tid_18039 * g_16498 +\n                                                   gtid_18145];\n    \n    bool x_18151 = sle64((int64_t) 0, x_18150);\n    bool y_18152 = slt64(x_18150, g_16498);\n    bool bounds_check_18153 = x_18151 && y_18152;\n    bool index_certs_18154;\n    \n    if (!bounds_check_18153) {\n        {\n            if (atomic_cmpxchg_i32_global(global_failure, -1, 4) == -1) {\n                global_failure_args[0] = (int64_t) x_18150;\n                global_failure_args[1] = (int64_t) g_16498;\n                ;\n            }\n            local_failure = true;\n            goto error_3;\n        }\n    }\n    \n    float defunc_0_f_res_18155;\n    \n    defunc_0_f_res_18155 = ((__global float *) values_mem_19006)[gtid_18038 *\n                                                                 g_16498 +\n                                                               ",
            "  x_18150];\n    \n    float defunc_0_f_res_18156;\n    \n    defunc_0_f_res_18156 = ((__local float *) color_19496)[x_18150];\n    ((__local float *) red_arr_mem_19669)[gtid_18145] = defunc_0_f_res_18155;\n    ((__local float *) color_19489)[gtid_18145] = defunc_0_f_res_18155;\n    ((__local float *) color_19488)[gtid_18145] = defunc_0_f_res_18156;\n    \n  error_3:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_19671;\n    int32_t skip_waves_19672 = 1;\n    float x_18147;\n    float x_18148;\n    \n    offset_19671 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_19623, sext_i64_i32(g_16498))) {\n            x_18147 = ((__local\n                        float *) red_arr_mem_19669)[sext_i32_i64(local_tid_19623 +\n                                                    offset_19671)];\n        }\n    }\n    offset_19671 = 1;\n    while (slt32(offset_19671, wave_sizze_19625)) {\n        if (slt32(local_tid_19623 + offset_19671, sext_i64_i32(g_16498)) &&\n            ((local_tid_19623 - squot32(local_tid_19623, wave_sizze_19625) *\n              wave_sizze_19625) & (2 * offset_19671 - 1)) == 0) {\n            // read array element\n            {\n                x_18148 = ((volatile __local\n                            float *) red_arr_mem_19669)[sext_i32_i64(local_tid_19623 +\n                                                        offset_19671)];\n            }\n            // apply reduction operation\n            {\n                float defunc_1_op_res_18149 = x_18147 + x_18148;\n                \n                x_18147 = defunc_1_op_res_18149;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_19669)[sext_i32_i64(local_tid_19623)] =\n                    x_18147;\n            }\n        }\n        offset_19671 *= 2;\n    }\n    while (slt32(skip_waves_19672, squot32(sext_i64_i32(g_16498) +\n ",
            "                                          wave_sizze_19625 - 1,\n                                           wave_sizze_19625))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_19671 = skip_waves_19672 * wave_sizze_19625;\n        if (slt32(local_tid_19623 + offset_19671, sext_i64_i32(g_16498)) &&\n            ((local_tid_19623 - squot32(local_tid_19623, wave_sizze_19625) *\n              wave_sizze_19625) == 0 && (squot32(local_tid_19623,\n                                                 wave_sizze_19625) & (2 *\n                                                                      skip_waves_19672 -\n                                                                      1)) ==\n             0)) {\n            // read array element\n            {\n                x_18148 = ((__local\n                            float *) red_arr_mem_19669)[sext_i32_i64(local_tid_19623 +\n                                                        offset_19671)];\n            }\n            // apply reduction operation\n            {\n                float defunc_1_op_res_18149 = x_18147 + x_18148;\n                \n                x_18147 = defunc_1_op_res_18149;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_19669)[sext_i32_i64(local_tid_19623)] =\n                    x_18147;\n            }\n        }\n        skip_waves_19672 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    defunc_2_reduce_res_18142 = ((__local\n                                  float *) red_arr_mem_19669)[(int64_t) 0];\n    \n    float defunc_0_g_res_18157 = defunc_2_reduce_res_18142 / i64_res_16512;\n    \n    if (local_tid_19623 == 0) {\n        ((__global float *) mem_19267)[gtid_18038] = defunc_0_g_res_18157;\n    }\n    \n    float tmp_19673;\n    \n    tmp_19673 = ((__local float *) color_19489)[sext_i32_i64(local_tid_19623)];\n    ((__global float *) mem_19271)[gtid_18038 * g_16498 +\n                                   sext_i32_i64(local_tid_19623)] = ",
            "tmp_19673;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19674;\n    \n    tmp_19674 = ((__local float *) color_19488)[sext_i32_i64(local_tid_19623)];\n    ((__global float *) mem_19275)[gtid_18038 * g_16498 +\n                                   sext_i32_i64(local_tid_19623)] = tmp_19674;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_5:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegmap_intragroup_18616(__global\n                                                         int *global_failure,\n                                                         uint color_19503_backing_offset_0,\n                                                         uint color_19502_backing_offset_1,\n                                                         uint color_19501_backing_offset_2,\n                                                         uint color_19500_backing_offset_3,\n                                                         uint color_19499_backing_offset_4,\n                                                         uint color_19498_backing_offset_5,\n                                                         uint color_19497_backing_offset_6,\n                                                         int64_t b_16497,\n                                                         int64_t g_16498,\n                                                         int64_t i_16505,\n                                                         int32_t defunc_2_radix_sort_step_arg_18600,\n                                                         int32_t defunc_0_get_bit_arg_18601,\n                                                         unsigned char cond_f_res_18602_bits,\n                                                         unsigned char cond_f_res_18603_bits,\n                                                         __global\n                                                         unsigned char *mem_param_19296,\n                                                         __global\n                              ",
            "                           unsigned char *mem_param_19304,\n                                                         __global\n                                                         unsigned char *mem_19344,\n                                                         __global\n                                                         unsigned char *mem_19348)\n{\n    bool cond_f_res_18602 = cond_f_res_18602_bits;\n    bool cond_f_res_18603 = cond_f_res_18603_bits;\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19503_backing_6 =\n                           &shared_mem[color_19503_backing_offset_0];\n    volatile unsigned char *color_19502_backing_5 =\n                           &shared_mem[color_19502_backing_offset_1];\n    volatile unsigned char *color_19501_backing_4 =\n                           &shared_mem[color_19501_backing_offset_2];\n    volatile unsigned char *color_19500_backing_3 =\n                           &shared_mem[color_19500_backing_offset_3];\n    volatile unsigned char *color_19499_backing_2 =\n                           &shared_mem[color_19499_backing_offset_4];\n    volatile unsigned char *color_19498_backing_1 =\n                           &shared_mem[color_19498_backing_offset_5];\n    volatile unsigned char *color_19497_backing_0 =\n                           &shared_mem[color_19497_backing_offset_6];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19704;\n    int32_t local_tid_19705;\n    int64_t group_sizze_19708;\n    int32_t wave_sizze_19707;\n    int32_t group_tid_19706;\n    \n    global_tid_19704 = get_global_id(0);\n    local_tid_19705 = get_local_id(0);\n    group_sizze_19708 = get_local_size(0);\n    wave_sizze_19707 = LOCKSTEP_WIDTH;\n    group_tid_19706 = get_group_id(0);\n    \n    int32_t phys_tid_18616 = group_tid_19706;\n    int64_t slice_19710 = g_16498;\n    int64_t ltid_pre_19709 = sext_i32_i64(local_tid_19705);\n    int64_t remnant_19711 = sext_i32_i",
            "64(local_tid_19705) - ltid_pre_19709;\n    int64_t slice_19712 = b_16497;\n    int64_t gtid_18615 = sext_i32_i64(group_tid_19706);\n    int64_t remnant_19713 = sext_i32_i64(group_tid_19706) - gtid_18615;\n    __local unsigned char *color_19497;\n    \n    color_19497 = (__local unsigned char *) color_19497_backing_0;\n    \n    __local unsigned char *color_19498;\n    \n    color_19498 = (__local unsigned char *) color_19498_backing_1;\n    \n    __local unsigned char *color_19499;\n    \n    color_19499 = (__local unsigned char *) color_19499_backing_2;\n    \n    __local unsigned char *color_19500;\n    \n    color_19500 = (__local unsigned char *) color_19500_backing_3;\n    \n    __local unsigned char *color_19501;\n    \n    color_19501 = (__local unsigned char *) color_19501_backing_4;\n    \n    __local unsigned char *color_19502;\n    \n    color_19502 = (__local unsigned char *) color_19502_backing_5;\n    \n    __local unsigned char *color_19503;\n    \n    color_19503 = (__local unsigned char *) color_19503_backing_6;\n    \n    float tmp_19714;\n    \n    tmp_19714 = ((__global float *) mem_param_19296)[gtid_18615 * g_16498 +\n                                                     sext_i32_i64(local_tid_19705)];\n    ((__local float *) color_19503)[sext_i32_i64(local_tid_19705)] = tmp_19714;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19715;\n    \n    tmp_19715 = ((__global int64_t *) mem_param_19304)[gtid_18615 * g_16498 +\n                                                       sext_i32_i64(local_tid_19705)];\n    ((__local int64_t *) color_19502)[sext_i32_i64(local_tid_19705)] =\n        tmp_19715;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t phys_tid_18631 = local_tid_19705;\n    int64_t gtid_18630 = sext_i32_i64(sext_i64_i32(ltid_pre_19709));\n    float x_18644;\n    \n    x_18644 = ((__global float *) mem_param_19296)[gtid_18615 * g_16498 +\n                                                   gtid_18630];\n    \n    int32_t i32_arg_18645;\n    \n    i32_arg_18645 = futrts_to_bits32(x",
            "_18644);\n    \n    int32_t unsign_arg_18646 = ashr32(i32_arg_18645,\n                                      defunc_0_get_bit_arg_18601);\n    int32_t unsign_arg_18647 = 1 & unsign_arg_18646;\n    int32_t unsign_arg_18648 = ashr32(i32_arg_18645, 31);\n    int32_t unsign_arg_18649 = 1 & unsign_arg_18648;\n    bool cond_18650 = unsign_arg_18649 == 1;\n    bool x_18651 = !cond_18650;\n    bool y_18652 = cond_f_res_18602 && x_18651;\n    bool cond_18653 = cond_18650 || y_18652;\n    int32_t defunc_1_get_bit_res_18654;\n    \n    if (cond_18653) {\n        int32_t defunc_1_get_bit_res_t_res_18655 = 1 ^ unsign_arg_18647;\n        \n        defunc_1_get_bit_res_18654 = defunc_1_get_bit_res_t_res_18655;\n    } else {\n        defunc_1_get_bit_res_18654 = unsign_arg_18647;\n    }\n    \n    int32_t x_18656 = mul32(2, defunc_1_get_bit_res_18654);\n    int32_t unsign_arg_18657 = ashr32(i32_arg_18645,\n                                      defunc_2_radix_sort_step_arg_18600);\n    int32_t unsign_arg_18658 = 1 & unsign_arg_18657;\n    bool y_18659 = cond_f_res_18603 && x_18651;\n    bool cond_18660 = cond_18650 || y_18659;\n    int32_t defunc_1_get_bit_res_18661;\n    \n    if (cond_18660) {\n        int32_t defunc_1_get_bit_res_t_res_18662 = 1 ^ unsign_arg_18658;\n        \n        defunc_1_get_bit_res_18661 = defunc_1_get_bit_res_t_res_18662;\n    } else {\n        defunc_1_get_bit_res_18661 = unsign_arg_18658;\n    }\n    \n    int32_t defunc_0_f_res_18663 = add32(x_18656, defunc_1_get_bit_res_18661);\n    bool cond_18664 = defunc_0_f_res_18663 == 0;\n    int64_t defunc_0_f_res_18665 = btoi_bool_i64(cond_18664);\n    int64_t defunc_0_f_res_18666;\n    int64_t defunc_0_f_res_18667;\n    int64_t defunc_0_f_res_18668;\n    \n    if (cond_18664) {\n        defunc_0_f_res_18666 = (int64_t) 0;\n        defunc_0_f_res_18667 = (int64_t) 0;\n        defunc_0_f_res_18668 = (int64_t) 0;\n    } else {\n        bool cond_18669 = defunc_0_f_res_18663 == 1;\n        int64_t defunc_0_f_res_f_res_18670 = btoi_bool_i64(cond_18669);\n        int",
            "64_t defunc_0_f_res_f_res_18671;\n        int64_t defunc_0_f_res_f_res_18672;\n        \n        if (cond_18669) {\n            defunc_0_f_res_f_res_18671 = (int64_t) 0;\n            defunc_0_f_res_f_res_18672 = (int64_t) 0;\n        } else {\n            bool cond_18673 = defunc_0_f_res_18663 == 2;\n            int64_t defunc_0_f_res_f_res_f_res_18674 =\n                    btoi_bool_i64(cond_18673);\n            bool cond_neg_18675 = !cond_18673;\n            int64_t defunc_0_f_res_f_res_f_res_18676 =\n                    btoi_bool_i64(cond_neg_18675);\n            \n            defunc_0_f_res_f_res_18671 = defunc_0_f_res_f_res_f_res_18674;\n            defunc_0_f_res_f_res_18672 = defunc_0_f_res_f_res_f_res_18676;\n        }\n        defunc_0_f_res_18666 = defunc_0_f_res_f_res_18670;\n        defunc_0_f_res_18667 = defunc_0_f_res_f_res_18671;\n        defunc_0_f_res_18668 = defunc_0_f_res_f_res_18672;\n    }\n    ((__local int64_t *) color_19501)[gtid_18630] = defunc_0_f_res_18665;\n    ((__local int64_t *) color_19500)[gtid_18630] = defunc_0_f_res_18666;\n    ((__local int64_t *) color_19499)[gtid_18630] = defunc_0_f_res_18667;\n    ((__local int64_t *) color_19498)[gtid_18630] = defunc_0_f_res_18668;\n    ((__local int32_t *) color_19497)[gtid_18630] = defunc_0_f_res_18663;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_19716 = g_16498;\n    int64_t x_18632;\n    int64_t x_18633;\n    int64_t x_18634;\n    int64_t x_18635;\n    int64_t x_18636;\n    int64_t x_18637;\n    int64_t x_18638;\n    int64_t x_18639;\n    int64_t x_19721;\n    int64_t x_19722;\n    int64_t x_19723;\n    int64_t x_19724;\n    int64_t x_19725;\n    int64_t x_19726;\n    int64_t x_19727;\n    int64_t x_19728;\n    bool ltid_in_bounds_19733 = slt64(sext_i32_i64(local_tid_19705), g_16498);\n    int32_t skip_threads_19734;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_19733) {\n            x_18636 = ((volatile __local\n                        int64_t *) color_19501)[sext_i32_i64(local_tid_19705",
            ")];\n            x_18637 = ((volatile __local\n                        int64_t *) color_19500)[sext_i32_i64(local_tid_19705)];\n            x_18638 = ((volatile __local\n                        int64_t *) color_19499)[sext_i32_i64(local_tid_19705)];\n            x_18639 = ((volatile __local\n                        int64_t *) color_19498)[sext_i32_i64(local_tid_19705)];\n            if ((local_tid_19705 - squot32(local_tid_19705, 32) * 32) == 0) {\n                x_18632 = x_18636;\n                x_18633 = x_18637;\n                x_18634 = x_18638;\n                x_18635 = x_18639;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_19734 = 1;\n        while (slt32(skip_threads_19734, 32)) {\n            bool thread_active_19735 = sle32(skip_threads_19734,\n                                             local_tid_19705 -\n                                             squot32(local_tid_19705, 32) *\n                                             32) && ltid_in_bounds_19733;\n            \n            if (thread_active_19735) {\n                // read operands\n                {\n                    x_18632 = ((volatile __local\n                                int64_t *) color_19501)[sext_i32_i64(local_tid_19705) -\n                                                        sext_i32_i64(skip_threads_19734)];\n                    x_18633 = ((volatile __local\n                                int64_t *) color_19500)[sext_i32_i64(local_tid_19705) -\n                                                        sext_i32_i64(skip_threads_19734)];\n                    x_18634 = ((volatile __local\n                                int64_t *) color_19499)[sext_i32_i64(local_tid_19705) -\n                                                        sext_i32_i64(skip_threads_19734)];\n                    x_18635 = ((volatile __local\n                                int64_t *) color_19498)[sext_i32_i64(local_tid_19705) -\n                                             ",
            "           sext_i32_i64(skip_threads_19734)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19736 =\n                     slt64(srem64(sext_i32_i64(local_tid_19705), g_16498),\n                           sext_i32_i64(local_tid_19705) -\n                           sext_i32_i64(local_tid_19705 - skip_threads_19734));\n                \n                if (thread_active_19735 && inactive_19736) {\n                    x_18632 = x_18636;\n                    x_18633 = x_18637;\n                    x_18634 = x_18638;\n                    x_18635 = x_18639;\n                }\n                if (thread_active_19735) {\n                    if (!inactive_19736) {\n                        int64_t defunc_1_op_res_18640 = add64(x_18632, x_18636);\n                        int64_t defunc_1_op_res_18641 = add64(x_18633, x_18637);\n                        int64_t defunc_1_op_res_18642 = add64(x_18634, x_18638);\n                        int64_t defunc_1_op_res_18643 = add64(x_18635, x_18639);\n                        \n                        x_18632 = defunc_1_op_res_18640;\n                        x_18633 = defunc_1_op_res_18641;\n                        x_18634 = defunc_1_op_res_18642;\n                        x_18635 = defunc_1_op_res_18643;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_19707, skip_threads_19734)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (thread_active_19735) {\n                // write result\n                {\n                    ((volatile __local\n                      int64_t *) color_19501)[sext_i32_i64(local_tid_19705)] =\n                        x_18632;\n                    x_18636 = x_18632;\n                    ((volatile __local\n                      int64_t *) color_19500)[sext_i32_i64(local_tid_19705)] =\n                        x_18633;\n                    x_18637 = x_18633;\n                    ((volatile __local\n                      i",
            "nt64_t *) color_19499)[sext_i32_i64(local_tid_19705)] =\n                        x_18634;\n                    x_18638 = x_18634;\n                    ((volatile __local\n                      int64_t *) color_19498)[sext_i32_i64(local_tid_19705)] =\n                        x_18635;\n                    x_18639 = x_18635;\n                }\n            }\n            if (sle32(wave_sizze_19707, skip_threads_19734)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_19734 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_19705 - squot32(local_tid_19705, 32) * 32) == 31 &&\n            ltid_in_bounds_19733) {\n            ((volatile __local\n              int64_t *) color_19501)[sext_i32_i64(squot32(local_tid_19705,\n                                                           32))] = x_18632;\n            ((volatile __local\n              int64_t *) color_19500)[sext_i32_i64(squot32(local_tid_19705,\n                                                           32))] = x_18633;\n            ((volatile __local\n              int64_t *) color_19499)[sext_i32_i64(squot32(local_tid_19705,\n                                                           32))] = x_18634;\n            ((volatile __local\n              int64_t *) color_19498)[sext_i32_i64(squot32(local_tid_19705,\n                                                           32))] = x_18635;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_19737;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_19705, 32) == 0 && ltid_in_bounds_19733) {\n                x_19725 = ((volatile __local\n                            int64_t *) color_19501)[sext_i32_i64(local_tid_19705)];\n                x_19726 = ((volatile __local\n                            int64_t *) ",
            "color_19500)[sext_i32_i64(local_tid_19705)];\n                x_19727 = ((volatile __local\n                            int64_t *) color_19499)[sext_i32_i64(local_tid_19705)];\n                x_19728 = ((volatile __local\n                            int64_t *) color_19498)[sext_i32_i64(local_tid_19705)];\n                if ((local_tid_19705 - squot32(local_tid_19705, 32) * 32) ==\n                    0) {\n                    x_19721 = x_19725;\n                    x_19722 = x_19726;\n                    x_19723 = x_19727;\n                    x_19724 = x_19728;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19737 = 1;\n            while (slt32(skip_threads_19737, 32)) {\n                bool thread_active_19738 = sle32(skip_threads_19737,\n                                                 local_tid_19705 -\n                                                 squot32(local_tid_19705, 32) *\n                                                 32) &&\n                     (squot32(local_tid_19705, 32) == 0 &&\n                      ltid_in_bounds_19733);\n                \n                if (thread_active_19738) {\n                    // read operands\n                    {\n                        x_19721 = ((volatile __local\n                                    int64_t *) color_19501)[sext_i32_i64(local_tid_19705) -\n                                                            sext_i32_i64(skip_threads_19737)];\n                        x_19722 = ((volatile __local\n                                    int64_t *) color_19500)[sext_i32_i64(local_tid_19705) -\n                                                            sext_i32_i64(skip_threads_19737)];\n                        x_19723 = ((volatile __local\n                                    int64_t *) color_19499)[sext_i32_i64(local_tid_19705) -\n                                                            sext_i32_i64(skip_threads_19737)];\n                        x_19",
            "724 = ((volatile __local\n                                    int64_t *) color_19498)[sext_i32_i64(local_tid_19705) -\n                                                            sext_i32_i64(skip_threads_19737)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19739 =\n                         slt64(srem64(sext_i32_i64(local_tid_19705 * 32 + 32 -\n                                      1), g_16498),\n                               sext_i32_i64(local_tid_19705 * 32 + 32 - 1) -\n                               sext_i32_i64((local_tid_19705 -\n                                             skip_threads_19737) * 32 + 32 -\n                               1));\n                    \n                    if (thread_active_19738 && inactive_19739) {\n                        x_19721 = x_19725;\n                        x_19722 = x_19726;\n                        x_19723 = x_19727;\n                        x_19724 = x_19728;\n                    }\n                    if (thread_active_19738) {\n                        if (!inactive_19739) {\n                            int64_t defunc_1_op_res_19729 = add64(x_19721,\n                                                                  x_19725);\n                            int64_t defunc_1_op_res_19730 = add64(x_19722,\n                                                                  x_19726);\n                            int64_t defunc_1_op_res_19731 = add64(x_19723,\n                                                                  x_19727);\n                            int64_t defunc_1_op_res_19732 = add64(x_19724,\n                                                                  x_19728);\n                            \n                            x_19721 = defunc_1_op_res_19729;\n                            x_19722 = defunc_1_op_res_19730;\n                            x_19723 = defunc_1_op_res_19731;\n                            x_19724 = defunc_1_op_res_19732;\n                ",
            "        }\n                    }\n                }\n                if (sle32(wave_sizze_19707, skip_threads_19737)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19738) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19501)[sext_i32_i64(local_tid_19705)] =\n                            x_19721;\n                        x_19725 = x_19721;\n                        ((volatile __local\n                          int64_t *) color_19500)[sext_i32_i64(local_tid_19705)] =\n                            x_19722;\n                        x_19726 = x_19722;\n                        ((volatile __local\n                          int64_t *) color_19499)[sext_i32_i64(local_tid_19705)] =\n                            x_19723;\n                        x_19727 = x_19723;\n                        ((volatile __local\n                          int64_t *) color_19498)[sext_i32_i64(local_tid_19705)] =\n                            x_19724;\n                        x_19728 = x_19724;\n                    }\n                }\n                if (sle32(wave_sizze_19707, skip_threads_19737)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19737 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    bool no_carry_in_19740 = squot32(local_tid_19705, 32) == 0 ||\n         !ltid_in_bounds_19733;\n    \n    // carry-in for every block except the first\n    {\n        // read operands\n        {\n            if (!no_carry_in_19740) {\n                x_18636 = x_18632;\n                x_18637 = x_18633;\n                x_18638 = x_18634;\n                x_18639 = x_18635;\n                x_18632 = ((__local\n                            int64_t *) color_19501)[sext_i32_i64(squot32(local_tid_19705,\n                                                                         32)) -\n                            ",
            "                        (int64_t) 1];\n                x_18633 = ((__local\n                            int64_t *) color_19500)[sext_i32_i64(squot32(local_tid_19705,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_18634 = ((__local\n                            int64_t *) color_19499)[sext_i32_i64(squot32(local_tid_19705,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_18635 = ((__local\n                            int64_t *) color_19498)[sext_i32_i64(squot32(local_tid_19705,\n                                                                         32)) -\n                                                    (int64_t) 1];\n            }\n        }\n        // perform operation\n        {\n            bool inactive_19741 = slt64(srem64(sext_i32_i64(local_tid_19705),\n                                               g_16498),\n                                        sext_i32_i64(local_tid_19705) -\n                                        sext_i32_i64(squot32(local_tid_19705,\n                                                             32) * 32 - 1));\n            \n            if (!no_carry_in_19740) {\n                if (inactive_19741) {\n                    x_18632 = x_18636;\n                    x_18633 = x_18637;\n                    x_18634 = x_18638;\n                    x_18635 = x_18639;\n                }\n            }\n            if (!no_carry_in_19740) {\n                if (!inactive_19741) {\n                    int64_t defunc_1_op_res_18640 = add64(x_18632, x_18636);\n                    int64_t defunc_1_op_res_18641 = add64(x_18633, x_18637);\n                    int64_t defunc_1_op_res_18642 = add64(x_18634, x_18638);\n                    int64_t defunc_1_op_res_18643 = add64(x_18635, x_18639);\n                    \n                    x_18632 = defunc_1",
            "_op_res_18640;\n                    x_18633 = defunc_1_op_res_18641;\n                    x_18634 = defunc_1_op_res_18642;\n                    x_18635 = defunc_1_op_res_18643;\n                }\n            }\n        }\n        // write final result\n        {\n            if (!no_carry_in_19740) {\n                ((__local\n                  int64_t *) color_19501)[sext_i32_i64(local_tid_19705)] =\n                    x_18632;\n                ((__local\n                  int64_t *) color_19500)[sext_i32_i64(local_tid_19705)] =\n                    x_18633;\n                ((__local\n                  int64_t *) color_19499)[sext_i32_i64(local_tid_19705)] =\n                    x_18634;\n                ((__local\n                  int64_t *) color_19498)[sext_i32_i64(local_tid_19705)] =\n                    x_18635;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_19705, 32) == 0 && ltid_in_bounds_19733) {\n            ((__local int64_t *) color_19501)[sext_i32_i64(local_tid_19705)] =\n                x_18636;\n            ((__local int64_t *) color_19500)[sext_i32_i64(local_tid_19705)] =\n                x_18637;\n            ((__local int64_t *) color_19499)[sext_i32_i64(local_tid_19705)] =\n                x_18638;\n            ((__local int64_t *) color_19498)[sext_i32_i64(local_tid_19705)] =\n                x_18639;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t last_res_18677;\n    \n    last_res_18677 = ((__local int64_t *) color_19501)[i_16505];\n    \n    int64_t last_res_18678;\n    \n    last_res_18678 = ((__local int64_t *) color_19500)[i_16505];\n    \n    int64_t last_res_18679;\n    \n    last_res_18679 = ((__local int64_t *) color_19499)[i_16505];\n    \n    int32_t phys_tid_18683 = local_tid_19705;\n    int64_t write_i_18682 = sext_i32_i64(sext_i64_i32(ltid_pre_19709));\n    int32_t x_18684;\n    \n    x_18684 = ((__local int32_t *) color_19497)[write_i_18682];\n    \n    ",
            "float write_value_18689;\n    \n    write_value_18689 = ((__global float *) mem_param_19296)[gtid_18615 *\n                                                             g_16498 +\n                                                             write_i_18682];\n    \n    int64_t write_value_18690;\n    \n    write_value_18690 = ((__global int64_t *) mem_param_19304)[gtid_18615 *\n                                                               g_16498 +\n                                                               write_i_18682];\n    \n    bool match_lit_18691 = 0 == x_18684;\n    int64_t defunc_1_f_res_18692;\n    \n    if (match_lit_18691) {\n        int64_t x_18685;\n        \n        x_18685 = ((__local int64_t *) color_19501)[write_i_18682];\n        \n        int64_t case_res_18693 = sub64(x_18685, (int64_t) 1);\n        \n        defunc_1_f_res_18692 = case_res_18693;\n    } else {\n        bool match_lit_18694 = 1 == x_18684;\n        int64_t x_18695;\n        \n        if (match_lit_18694) {\n            int64_t x_18686;\n            \n            x_18686 = ((__local int64_t *) color_19500)[write_i_18682];\n            \n            int64_t x_18696 = add64(last_res_18677, x_18686);\n            int64_t case_res_18697 = sub64(x_18696, (int64_t) 1);\n            \n            x_18695 = case_res_18697;\n        } else {\n            bool match_lit_18698 = 2 == x_18684;\n            int64_t x_18699;\n            \n            if (match_lit_18698) {\n                int64_t x_18687;\n                \n                x_18687 = ((__local int64_t *) color_19499)[write_i_18682];\n                \n                int64_t x_18700 = add64(last_res_18677, last_res_18678);\n                int64_t x_18701 = add64(x_18687, x_18700);\n                int64_t case_res_18702 = sub64(x_18701, (int64_t) 1);\n                \n                x_18699 = case_res_18702;\n            } else {\n                int64_t x_18688;\n                \n                x_18688 = ((__local int64_t *) color_19498)[write_i_18682];\n               ",
            " \n                int64_t x_18703 = add64(last_res_18677, last_res_18678);\n                int64_t x_18704 = add64(last_res_18679, x_18703);\n                int64_t x_18705 = add64(x_18688, x_18704);\n                int64_t defunc_1_f_res_res_18706 = sub64(x_18705, (int64_t) 1);\n                \n                x_18699 = defunc_1_f_res_res_18706;\n            }\n            x_18695 = x_18699;\n        }\n        defunc_1_f_res_18692 = x_18695;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_18692) && slt64(defunc_1_f_res_18692,\n                                                          g_16498)) {\n        ((__local float *) color_19503)[defunc_1_f_res_18692] =\n            write_value_18689;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_18692) && slt64(defunc_1_f_res_18692,\n                                                          g_16498)) {\n        ((__local int64_t *) color_19502)[defunc_1_f_res_18692] =\n            write_value_18690;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19742;\n    \n    tmp_19742 = ((__local float *) color_19503)[sext_i32_i64(local_tid_19705)];\n    ((__global float *) mem_19344)[gtid_18615 * g_16498 +\n                                   sext_i32_i64(local_tid_19705)] = tmp_19742;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19743;\n    \n    tmp_19743 = ((__local\n                  int64_t *) color_19502)[sext_i32_i64(local_tid_19705)];\n    ((__global int64_t *) mem_19348)[gtid_18615 * g_16498 +\n                                     sext_i32_i64(local_tid_19705)] = tmp_19743;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_2:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegred_large_18827(__global\n                                                    int *global_failure,\n                                                    int failure_is_an_option,\n                                                    __global\n                                                    int64_t *global_failure_args,\n                                     ",
            "               uint sync_arr_mem_20071_backing_offset_0,\n                                                    uint red_arr_mem_20069_backing_offset_1,\n                                                    int64_t b_16497,\n                                                    int64_t g_16498,\n                                                    int64_t num_groups_18820,\n                                                    int64_t groups_per_segment_20055,\n                                                    int64_t elements_per_thread_20056,\n                                                    int64_t virt_num_groups_20057,\n                                                    int64_t threads_per_segment_20059,\n                                                    __global\n                                                    unsigned char *values_mem_19006,\n                                                    __global\n                                                    unsigned char *mem_19280,\n                                                    __global\n                                                    unsigned char *ext_mem_19377,\n                                                    __global\n                                                    unsigned char *mem_19396,\n                                                    __global\n                                                    unsigned char *mem_19400,\n                                                    __global\n                                                    unsigned char *mem_19404,\n                                                    __global\n                                                    unsigned char *segred_tmp_mem_20060,\n                                                    __global\n                                                    unsigned char *sortBagAndDoStuffzicounter_mem_20062)\n{\n    #define segred_group_sizze_18819 (sortBagAndDoStuffzisegred_group_sizze_18174)\n    \n    const int block_dim0 = 0;\n    const ",
            "int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *sync_arr_mem_20071_backing_1 =\n                           &shared_mem[sync_arr_mem_20071_backing_offset_0];\n    volatile unsigned char *red_arr_mem_20069_backing_0 =\n                           &shared_mem[red_arr_mem_20069_backing_offset_1];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_20064;\n    int32_t local_tid_20065;\n    int64_t group_sizze_20068;\n    int32_t wave_sizze_20067;\n    int32_t group_tid_20066;\n    \n    global_tid_20064 = get_global_id(0);\n    local_tid_20065 = get_local_id(0);\n    group_sizze_20068 = get_local_size(0);\n    wave_sizze_20067 = LOCKSTEP_WIDTH;\n    group_tid_20066 = get_group_id(0);\n    \n    int32_t phys_tid_18827 = global_tid_20064;\n    __local unsigned char *red_arr_mem_20069;\n    \n    red_arr_mem_20069 = (__local unsigned char *) red_arr_mem_20069_backing_0;\n    \n    __local unsigned char *sync_arr_mem_20071;\n    \n    sync_arr_mem_20071 = (__local unsigned char *) sync_arr_mem_20071_backing_1;\n    \n    int32_t phys_group_id_20073;\n    \n    phys_group_id_20073 = get_group_id(0);\n    \n    int32_t iterations_20074 = sdiv_up32(sext_i64_i32(virt_num_groups_20057) -\n                                         phys_group_id_20073,\n                                         sext_i64_i32(num_groups_18820));\n    \n    for (int32_t i_20075 = 0; i_20075 < iterations_20074; i_20075++) {\n        int32_t virt_group_id_20076 = phys_group_id_20073 + i_20075 *\n                sext_i64_i32(num_groups_18820);\n        int32_t flat_segment_id_20077 = squot32(virt_group_id_20076,\n                                                sext_i64_i32(groups_per_segment_20055));\n        int64_t global_tid_20078 = srem64(sext_i32_i64(virt_group_id_20076) *\n                           ",
            "               segred_group_sizze_18819 +\n                                          sext_i32_i64(local_tid_20065),\n                                          segred_group_sizze_18819 *\n                                          groups_per_segment_20055);\n        int64_t slice_20079 = b_16497;\n        int64_t gtid_18825 = sext_i32_i64(flat_segment_id_20077);\n        int64_t remnant_20080 = sext_i32_i64(flat_segment_id_20077) -\n                gtid_18825;\n        int64_t gtid_18826;\n        float x_acc_20081;\n        int64_t chunk_sizze_20082 = smin64(elements_per_thread_20056,\n                                           sdiv_up64(g_16498 - global_tid_20078,\n                                                     threads_per_segment_20059));\n        float x_18828;\n        float x_18829;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_20081 = 0.0F;\n        }\n        for (int64_t i_20086 = 0; i_20086 < chunk_sizze_20082; i_20086++) {\n            gtid_18826 = global_tid_20078 + threads_per_segment_20059 * i_20086;\n            // apply map function\n            {\n                int64_t x_18834;\n                \n                x_18834 = ((__global int64_t *) ext_mem_19377)[gtid_18825 *\n                                                               g_16498 +\n                                                               gtid_18826];\n                \n                bool x_18835 = sle64((int64_t) 0, x_18834);\n                bool y_18836 = slt64(x_18834, g_16498);\n                bool bounds_check_18837 = x_18835 && y_18836;\n                bool index_certs_18838;\n                \n                if (!bounds_check_18837) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 6) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18834;\n                            global_failure_args[1] = (int64_t) g_16498;\n                            ;\n                 ",
            "       }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18839;\n                \n                defunc_0_f_res_18839 = ((__global\n                                         float *) values_mem_19006)[gtid_18825 *\n                                                                    g_16498 +\n                                                                    x_18834];\n                \n                float defunc_0_f_res_18840;\n                \n                defunc_0_f_res_18840 = ((__global\n                                         float *) mem_19280)[gtid_18825 *\n                                                             g_16498 + x_18834];\n                // save map-out results\n                {\n                    ((__global float *) mem_19400)[gtid_18825 * g_16498 +\n                                                   gtid_18826] =\n                        defunc_0_f_res_18839;\n                    ((__global float *) mem_19404)[gtid_18825 * g_16498 +\n                                                   gtid_18826] =\n                        defunc_0_f_res_18840;\n                }\n                // load accumulator\n                {\n                    x_18828 = x_acc_20081;\n                }\n                // load new values\n                {\n                    x_18829 = defunc_0_f_res_18839;\n                }\n                // apply reduction operator\n                {\n                    float defunc_1_op_res_18830 = x_18828 + x_18829;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_20081 = defunc_1_op_res_18830;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_18828 = x_acc_20081;\n            ((__local\n              float *) red_arr_mem_20069)[sext_i32_i64(l",
            "ocal_tid_20065)] =\n                x_18828;\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_20087;\n        int32_t skip_waves_20088 = 1;\n        float x_20083;\n        float x_20084;\n        \n        offset_20087 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_20065,\n                      sext_i64_i32(segred_group_sizze_18819))) {\n                x_20083 = ((__local\n                            float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                        offset_20087)];\n            }\n        }\n        offset_20087 = 1;\n        while (slt32(offset_20087, wave_sizze_20067)) {\n            if (slt32(local_tid_20065 + offset_20087,\n                      sext_i64_i32(segred_group_sizze_18819)) &&\n                ((local_tid_20065 - squot32(local_tid_20065, wave_sizze_20067) *\n                  wave_sizze_20067) & (2 * offset_20087 - 1)) == 0) {\n                // read array element\n                {\n                    x_20084 = ((volatile __local\n                                float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                            offset_20087)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20085 = x_20083 + x_20084;\n                    \n                    x_20083 = defunc_1_op_res_20085;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065)] =\n                        x_20083;\n                }\n            }\n            offset_20087 *= 2;\n        }\n        while (slt32(skip_waves_20088,\n                     squot32(sext_i64_i32(segred_group",
            "_sizze_18819) +\n                             wave_sizze_20067 - 1, wave_sizze_20067))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_20087 = skip_waves_20088 * wave_sizze_20067;\n            if (slt32(local_tid_20065 + offset_20087,\n                      sext_i64_i32(segred_group_sizze_18819)) &&\n                ((local_tid_20065 - squot32(local_tid_20065, wave_sizze_20067) *\n                  wave_sizze_20067) == 0 && (squot32(local_tid_20065,\n                                                     wave_sizze_20067) & (2 *\n                                                                          skip_waves_20088 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_20084 = ((__local\n                                float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                            offset_20087)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20085 = x_20083 + x_20084;\n                    \n                    x_20083 = defunc_1_op_res_20085;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065)] =\n                        x_20083;\n                }\n            }\n            skip_waves_20088 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_20065) == (int64_t) 0) {\n                x_acc_20081 = x_20083;\n            }\n        }\n        if (groups_per_segment_20055 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_20065 == 0) {\n                    ((__global float *) mem_19396)[gtid_188",
            "25] = x_acc_20081;\n                }\n            }\n        } else {\n            int32_t old_counter_20089;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_20065 == 0) {\n                    ((__global\n                      float *) segred_tmp_mem_20060)[sext_i32_i64(virt_group_id_20076)] =\n                        x_acc_20081;\n                    mem_fence_global();\n                    old_counter_20089 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20062)[sext_i32_i64(srem32(flat_segment_id_20077,\n                                                                                                                  10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_20071)[(int64_t) 0] =\n                        old_counter_20089 == groups_per_segment_20055 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_20090;\n            \n            is_last_group_20090 = ((__local\n                                    bool *) sync_arr_mem_20071)[(int64_t) 0];\n            if (is_last_group_20090) {\n                if (local_tid_20065 == 0) {\n                    old_counter_20089 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20062)[sext_i32_i64(srem32(flat_segment_id_20077,\n                                                                                                                  10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_20055));\n                }\n                // read in the per-group-resu",
            "lts\n                {\n                    int64_t read_per_thread_20091 =\n                            sdiv_up64(groups_per_segment_20055,\n                                      segred_group_sizze_18819);\n                    \n                    x_18828 = 0.0F;\n                    for (int64_t i_20092 = 0; i_20092 < read_per_thread_20091;\n                         i_20092++) {\n                        int64_t group_res_id_20093 =\n                                sext_i32_i64(local_tid_20065) *\n                                read_per_thread_20091 + i_20092;\n                        int64_t index_of_group_res_20094 =\n                                sext_i32_i64(flat_segment_id_20077) *\n                                groups_per_segment_20055 + group_res_id_20093;\n                        \n                        if (slt64(group_res_id_20093,\n                                  groups_per_segment_20055)) {\n                            x_18829 = ((__global\n                                        float *) segred_tmp_mem_20060)[index_of_group_res_20094];\n                            \n                            float defunc_1_op_res_18830 = x_18828 + x_18829;\n                            \n                            x_18828 = defunc_1_op_res_18830;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065)] =\n                    x_18828;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_20095;\n                    int32_t skip_waves_20096 = 1;\n                    float x_20083;\n                    float x_20084;\n                    \n                    offset_20095 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_20065,\n                                  sext_i64_i32(segred_group_sizze_18819)",
            ")) {\n                            x_20083 = ((__local\n                                        float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                                    offset_20095)];\n                        }\n                    }\n                    offset_20095 = 1;\n                    while (slt32(offset_20095, wave_sizze_20067)) {\n                        if (slt32(local_tid_20065 + offset_20095,\n                                  sext_i64_i32(segred_group_sizze_18819)) &&\n                            ((local_tid_20065 - squot32(local_tid_20065,\n                                                        wave_sizze_20067) *\n                              wave_sizze_20067) & (2 * offset_20095 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_20084 = ((volatile __local\n                                            float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                                        offset_20095)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20085 = x_20083 + x_20084;\n                                \n                                x_20083 = defunc_1_op_res_20085;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065)] =\n                                    x_20083;\n                            }\n                        }\n                        offset_20095 *= 2;\n                    }\n                    while (slt32(skip_waves_20096,\n                                 squot32(sext_i64_i32(segred_group_sizze_18819) +\n                  ",
            "                       wave_sizze_20067 - 1,\n                                         wave_sizze_20067))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_20095 = skip_waves_20096 * wave_sizze_20067;\n                        if (slt32(local_tid_20065 + offset_20095,\n                                  sext_i64_i32(segred_group_sizze_18819)) &&\n                            ((local_tid_20065 - squot32(local_tid_20065,\n                                                        wave_sizze_20067) *\n                              wave_sizze_20067) == 0 &&\n                             (squot32(local_tid_20065, wave_sizze_20067) & (2 *\n                                                                            skip_waves_20096 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_20084 = ((__local\n                                            float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065 +\n                                                                        offset_20095)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20085 = x_20083 + x_20084;\n                                \n                                x_20083 = defunc_1_op_res_20085;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_20069)[sext_i32_i64(local_tid_20065)] =\n                                    x_20083;\n                            }\n                        }\n                        skip_waves_20096 *= 2;\n                    }\n                    // and back to memory with the final result\n              ",
            "      {\n                        if (local_tid_20065 == 0) {\n                            ((__global float *) mem_19396)[gtid_18825] =\n                                x_20083;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18819\n}\n__kernel void sortBagAndDoStuffzisegred_large_18922(__global\n                                                    int *global_failure,\n                                                    uint sync_arr_mem_20163_backing_offset_0,\n                                                    uint red_arr_mem_20161_backing_offset_1,\n                                                    int64_t b_16497,\n                                                    int64_t g_16498,\n                                                    int64_t num_groups_18917,\n                                                    int64_t groups_per_segment_20147,\n                                                    int64_t elements_per_thread_20148,\n                                                    int64_t virt_num_groups_20149,\n                                                    int64_t threads_per_segment_20151,\n                                                    __global\n                                                    unsigned char *mem_19431,\n                                                    __global\n                                                    unsigned char *mem_19435,\n                                                    __global\n                                                    unsigned char *segred_tmp_mem_20152,\n                                                    __global\n                                                    unsigned char *sortBagAndDoStuffzicounter_mem_20154)\n{\n    #define segred_group_sizze_18916 (sortBagAndDoStuffzisegred_group_sizze_18899)\n    \n    const int block_dim0 = 0;\n    const",
            " int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *sync_arr_mem_20163_backing_1 =\n                           &shared_mem[sync_arr_mem_20163_backing_offset_0];\n    volatile unsigned char *red_arr_mem_20161_backing_0 =\n                           &shared_mem[red_arr_mem_20161_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20156;\n    int32_t local_tid_20157;\n    int64_t group_sizze_20160;\n    int32_t wave_sizze_20159;\n    int32_t group_tid_20158;\n    \n    global_tid_20156 = get_global_id(0);\n    local_tid_20157 = get_local_id(0);\n    group_sizze_20160 = get_local_size(0);\n    wave_sizze_20159 = LOCKSTEP_WIDTH;\n    group_tid_20158 = get_group_id(0);\n    \n    int32_t phys_tid_18922 = global_tid_20156;\n    __local unsigned char *red_arr_mem_20161;\n    \n    red_arr_mem_20161 = (__local unsigned char *) red_arr_mem_20161_backing_0;\n    \n    __local unsigned char *sync_arr_mem_20163;\n    \n    sync_arr_mem_20163 = (__local unsigned char *) sync_arr_mem_20163_backing_1;\n    \n    int32_t phys_group_id_20165;\n    \n    phys_group_id_20165 = get_group_id(0);\n    \n    int32_t iterations_20166 = sdiv_up32(sext_i64_i32(virt_num_groups_20149) -\n                                         phys_group_id_20165,\n                                         sext_i64_i32(num_groups_18917));\n    \n    for (int32_t i_20167 = 0; i_20167 < iterations_20166; i_20167++) {\n        int32_t virt_group_id_20168 = phys_group_id_20165 + i_20167 *\n                sext_i64_i32(num_groups_18917);\n        int32_t flat_segment_id_20169 = squot32(virt_group_id_20168,\n                                                sext_i64_i32(groups_per_segment_20147));\n        int64_t global_tid_20170 = srem64(sext_i32_i64(virt_group_id_20168) *\n                                          segred_group_sizze_18916 +\n                                          sext_i32_i64(local_tid_20157),\n                                          segred_group_sizze_18916 *\n ",
            "                                         groups_per_segment_20147);\n        int64_t slice_20171 = g_16498;\n        int64_t gtid_18920 = sext_i32_i64(flat_segment_id_20169);\n        int64_t remnant_20172 = sext_i32_i64(flat_segment_id_20169) -\n                gtid_18920;\n        int64_t gtid_18921;\n        float x_acc_20173;\n        int64_t chunk_sizze_20174 = smin64(elements_per_thread_20148,\n                                           sdiv_up64(b_16497 - global_tid_20170,\n                                                     threads_per_segment_20151));\n        float x_18923;\n        float x_18924;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_20173 = 0.0F;\n        }\n        for (int64_t i_20178 = 0; i_20178 < chunk_sizze_20174; i_20178++) {\n            gtid_18921 = global_tid_20170 + threads_per_segment_20151 * i_20178;\n            // apply map function\n            {\n                float x_18927;\n                \n                x_18927 = ((__global float *) mem_19431)[gtid_18920 * b_16497 +\n                                                         gtid_18921];\n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_18923 = x_acc_20173;\n                }\n                // load new values\n                {\n                    x_18924 = x_18927;\n                }\n                // apply reduction operator\n                {\n                    float defunc_1_op_res_18925 = x_18923 + x_18924;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_20173 = defunc_1_op_res_18925;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_18923 = x_acc_20173;\n            ((__local\n              float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                x_18923;\n        }\n        ba",
            "rrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_20179;\n        int32_t skip_waves_20180 = 1;\n        float x_20175;\n        float x_20176;\n        \n        offset_20179 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_20157,\n                      sext_i64_i32(segred_group_sizze_18916))) {\n                x_20175 = ((__local\n                            float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                                                        offset_20179)];\n            }\n        }\n        offset_20179 = 1;\n        while (slt32(offset_20179, wave_sizze_20159)) {\n            if (slt32(local_tid_20157 + offset_20179,\n                      sext_i64_i32(segred_group_sizze_18916)) &&\n                ((local_tid_20157 - squot32(local_tid_20157, wave_sizze_20159) *\n                  wave_sizze_20159) & (2 * offset_20179 - 1)) == 0) {\n                // read array element\n                {\n                    x_20176 = ((volatile __local\n                                float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                                                            offset_20179)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20177 = x_20175 + x_20176;\n                    \n                    x_20175 = defunc_1_op_res_20177;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                        x_20175;\n                }\n            }\n            offset_20179 *= 2;\n        }\n        while (slt32(skip_waves_20180,\n                     squot32(sext_i64_i32(segred_group_sizze_18916) +\n                             wave_sizze_20159 - 1, wave_sizze_20159))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_20179 = skip_waves_2018",
            "0 * wave_sizze_20159;\n            if (slt32(local_tid_20157 + offset_20179,\n                      sext_i64_i32(segred_group_sizze_18916)) &&\n                ((local_tid_20157 - squot32(local_tid_20157, wave_sizze_20159) *\n                  wave_sizze_20159) == 0 && (squot32(local_tid_20157,\n                                                     wave_sizze_20159) & (2 *\n                                                                          skip_waves_20180 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_20176 = ((__local\n                                float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                                                            offset_20179)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20177 = x_20175 + x_20176;\n                    \n                    x_20175 = defunc_1_op_res_20177;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                        x_20175;\n                }\n            }\n            skip_waves_20180 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_20157) == (int64_t) 0) {\n                x_acc_20173 = x_20175;\n            }\n        }\n        if (groups_per_segment_20147 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_20157 == 0) {\n                    ((__global float *) mem_19435)[gtid_18920] = x_acc_20173;\n                }\n            }\n        } else {\n            int32_t old_counter_20181;\n            \n            // first thread in group saves group resu",
            "lt to global memory\n            {\n                if (local_tid_20157 == 0) {\n                    ((__global\n                      float *) segred_tmp_mem_20152)[sext_i32_i64(virt_group_id_20168)] =\n                        x_acc_20173;\n                    mem_fence_global();\n                    old_counter_20181 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20154)[sext_i32_i64(srem32(flat_segment_id_20169,\n                                                                                                                  10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_20163)[(int64_t) 0] =\n                        old_counter_20181 == groups_per_segment_20147 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_20182;\n            \n            is_last_group_20182 = ((__local\n                                    bool *) sync_arr_mem_20163)[(int64_t) 0];\n            if (is_last_group_20182) {\n                if (local_tid_20157 == 0) {\n                    old_counter_20181 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20154)[sext_i32_i64(srem32(flat_segment_id_20169,\n                                                                                                                  10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_20147));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_20183 =\n                            sdiv_up64(groups_per_segment_20147,\n                                   ",
            "   segred_group_sizze_18916);\n                    \n                    x_18923 = 0.0F;\n                    for (int64_t i_20184 = 0; i_20184 < read_per_thread_20183;\n                         i_20184++) {\n                        int64_t group_res_id_20185 =\n                                sext_i32_i64(local_tid_20157) *\n                                read_per_thread_20183 + i_20184;\n                        int64_t index_of_group_res_20186 =\n                                sext_i32_i64(flat_segment_id_20169) *\n                                groups_per_segment_20147 + group_res_id_20185;\n                        \n                        if (slt64(group_res_id_20185,\n                                  groups_per_segment_20147)) {\n                            x_18924 = ((__global\n                                        float *) segred_tmp_mem_20152)[index_of_group_res_20186];\n                            \n                            float defunc_1_op_res_18925 = x_18923 + x_18924;\n                            \n                            x_18923 = defunc_1_op_res_18925;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                    x_18923;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_20187;\n                    int32_t skip_waves_20188 = 1;\n                    float x_20175;\n                    float x_20176;\n                    \n                    offset_20187 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_20157,\n                                  sext_i64_i32(segred_group_sizze_18916))) {\n                            x_20175 = ((__local\n                                        float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                     ",
            "                                               offset_20187)];\n                        }\n                    }\n                    offset_20187 = 1;\n                    while (slt32(offset_20187, wave_sizze_20159)) {\n                        if (slt32(local_tid_20157 + offset_20187,\n                                  sext_i64_i32(segred_group_sizze_18916)) &&\n                            ((local_tid_20157 - squot32(local_tid_20157,\n                                                        wave_sizze_20159) *\n                              wave_sizze_20159) & (2 * offset_20187 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_20176 = ((volatile __local\n                                            float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                                                                        offset_20187)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20177 = x_20175 + x_20176;\n                                \n                                x_20175 = defunc_1_op_res_20177;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                                    x_20175;\n                            }\n                        }\n                        offset_20187 *= 2;\n                    }\n                    while (slt32(skip_waves_20188,\n                                 squot32(sext_i64_i32(segred_group_sizze_18916) +\n                                         wave_sizze_20159 - 1,\n                                         wave_sizze_20159))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n           ",
            "             offset_20187 = skip_waves_20188 * wave_sizze_20159;\n                        if (slt32(local_tid_20157 + offset_20187,\n                                  sext_i64_i32(segred_group_sizze_18916)) &&\n                            ((local_tid_20157 - squot32(local_tid_20157,\n                                                        wave_sizze_20159) *\n                              wave_sizze_20159) == 0 &&\n                             (squot32(local_tid_20157, wave_sizze_20159) & (2 *\n                                                                            skip_waves_20188 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_20176 = ((__local\n                                            float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157 +\n                                                                        offset_20187)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20177 = x_20175 + x_20176;\n                                \n                                x_20175 = defunc_1_op_res_20177;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_20161)[sext_i32_i64(local_tid_20157)] =\n                                    x_20175;\n                            }\n                        }\n                        skip_waves_20188 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_20157 == 0) {\n                            ((__global float *) mem_19435)[gtid_18920] =\n                                x_20175;",
            "\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18916\n}\n__kernel void sortBagAndDoStuffzisegred_small_18827(__global\n                                                    int *global_failure,\n                                                    int failure_is_an_option,\n                                                    __global\n                                                    int64_t *global_failure_args,\n                                                    uint red_arr_mem_20034_backing_offset_0,\n                                                    int64_t b_16497,\n                                                    int64_t g_16498,\n                                                    int64_t num_groups_18820,\n                                                    int64_t segment_sizze_nonzzero_20027,\n                                                    __global\n                                                    unsigned char *values_mem_19006,\n                                                    __global\n                                                    unsigned char *mem_19280,\n                                                    __global\n                                                    unsigned char *ext_mem_19377,\n                                                    __global\n                                                    unsigned char *mem_19396,\n                                                    __global\n                                                    unsigned char *mem_19400,\n                                                    __global\n                                                    unsigned char *mem_19404)\n{\n    #define segred_group_sizze_18819 (sortBagAndDoStuffzisegred_group_sizze_18174)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = ",
            "2;\n    volatile unsigned char *red_arr_mem_20034_backing_0 =\n                           &shared_mem[red_arr_mem_20034_backing_offset_0];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_20029;\n    int32_t local_tid_20030;\n    int64_t group_sizze_20033;\n    int32_t wave_sizze_20032;\n    int32_t group_tid_20031;\n    \n    global_tid_20029 = get_global_id(0);\n    local_tid_20030 = get_local_id(0);\n    group_sizze_20033 = get_local_size(0);\n    wave_sizze_20032 = LOCKSTEP_WIDTH;\n    group_tid_20031 = get_group_id(0);\n    \n    int32_t phys_tid_18827 = global_tid_20029;\n    __local unsigned char *red_arr_mem_20034;\n    \n    red_arr_mem_20034 = (__local unsigned char *) red_arr_mem_20034_backing_0;\n    \n    int32_t phys_group_id_20036;\n    \n    phys_group_id_20036 = get_group_id(0);\n    \n    int32_t iterations_20037 = sdiv_up32(sext_i64_i32(sdiv_up64(b_16497,\n                                                                squot64(segred_group_sizze_18819,\n                                                                        segment_sizze_nonzzero_20027))) -\n                                         phys_group_id_20036,\n                                         sext_i64_i32(num_groups_18820));\n    \n    for (int32_t i_20038 = 0; i_20038 < iterations_20037; i_20038++) {\n        int32_t virt_group_id_20039 = phys_group_id_20036 + i_20038 *\n                sext_i64_i32(num_groups_18820);\n        int64_t slice_20040 = b_16497;\n        int64_t gtid_18825 = squot64(sext_i32_i64(local_tid_20030),\n                                     segment_sizze_nonzzero_20027) +\n                sext_i32_i64(virt_group_id_20039) *\n                squot64(segred_group_sizze_18819, segment_sizze_nonzzero_20027);\n        int64_t remnant_20041 = squot64(sext_i32_i64(local_tid_20030),\n      ",
            "                                  segment_sizze_nonzzero_20027) +\n                sext_i32_i64(virt_group_id_20039) *\n                squot64(segred_group_sizze_18819,\n                        segment_sizze_nonzzero_20027) - gtid_18825;\n        int64_t gtid_18826 = srem64(sext_i32_i64(local_tid_20030), g_16498);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, g_16498) && (slt64(gtid_18825, b_16497) &&\n                                                slt64(sext_i32_i64(local_tid_20030),\n                                                      g_16498 *\n                                                      squot64(segred_group_sizze_18819,\n                                                              segment_sizze_nonzzero_20027)))) {\n                int64_t x_18834;\n                \n                x_18834 = ((__global int64_t *) ext_mem_19377)[gtid_18825 *\n                                                               g_16498 +\n                                                               gtid_18826];\n                \n                bool x_18835 = sle64((int64_t) 0, x_18834);\n                bool y_18836 = slt64(x_18834, g_16498);\n                bool bounds_check_18837 = x_18835 && y_18836;\n                bool index_certs_18838;\n                \n                if (!bounds_check_18837) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 5) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18834;\n                            global_failure_args[1] = (int64_t) g_16498;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18839;\n                \n                defunc_0_f_res_18839 = ((__global\n                                         float *) value",
            "s_mem_19006)[gtid_18825 *\n                                                                    g_16498 +\n                                                                    x_18834];\n                \n                float defunc_0_f_res_18840;\n                \n                defunc_0_f_res_18840 = ((__global\n                                         float *) mem_19280)[gtid_18825 *\n                                                             g_16498 + x_18834];\n                // save map-out results\n                {\n                    ((__global float *) mem_19400)[gtid_18825 * g_16498 +\n                                                   gtid_18826] =\n                        defunc_0_f_res_18839;\n                    ((__global float *) mem_19404)[gtid_18825 * g_16498 +\n                                                   gtid_18826] =\n                        defunc_0_f_res_18840;\n                }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                        defunc_0_f_res_18839;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                    0.0F;\n            }\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, g_16498)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_18828;\n                float x_18829;\n                float x_20042;\n                float x_20043;\n                bool ltid_in_bounds_20045 = slt64(sext_i32_i64(local_tid_20030),\n                                                  g_16498 *\n                                                  squot64(segred_group_sizze_18819,\n                                                          se",
            "gment_sizze_nonzzero_20027));\n                int32_t skip_threads_20046;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_20045) {\n                        x_18829 = ((volatile __local\n                                    float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)];\n                        if ((local_tid_20030 - squot32(local_tid_20030, 32) *\n                             32) == 0) {\n                            x_18828 = x_18829;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_20046 = 1;\n                    while (slt32(skip_threads_20046, 32)) {\n                        bool thread_active_20047 = sle32(skip_threads_20046,\n                                                         local_tid_20030 -\n                                                         squot32(local_tid_20030,\n                                                                 32) * 32) &&\n                             ltid_in_bounds_20045;\n                        \n                        if (thread_active_20047) {\n                            // read operands\n                            {\n                                x_18828 = ((volatile __local\n                                            float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030) -\n                                                                        sext_i32_i64(skip_threads_20046)];\n                            }\n                        }\n                        // perform operation\n                        {\n                            bool inactive_20048 =\n                                 slt64(srem64(sext_i32_i64(local_tid_20030),\n                                              g_16498),\n                                       sext_i32_i64(local_tid_20030) -\n                                       sext_i32_i64(local_tid",
            "_20030 -\n                                       skip_threads_20046));\n                            \n                            if (thread_active_20047 && inactive_20048) {\n                                x_18828 = x_18829;\n                            }\n                            if (thread_active_20047) {\n                                if (!inactive_20048) {\n                                    float defunc_1_op_res_18830 = x_18828 +\n                                          x_18829;\n                                    \n                                    x_18828 = defunc_1_op_res_18830;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_20032, skip_threads_20046)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (thread_active_20047) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                                    x_18828;\n                                x_18829 = x_18828;\n                            }\n                        }\n                        if (sle32(wave_sizze_20032, skip_threads_20046)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_20046 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_20030 - squot32(local_tid_20030, 32) * 32) ==\n                        31 && ltid_in_bounds_20045) {\n                        ((volatile __local\n                          float *) red_arr_mem_20034)[sext_i32_i64(squot32(local_tid_20030,\n                                                                          ",
            " 32))] =\n                            x_18828;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_20049;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_20030, 32) == 0 &&\n                            ltid_in_bounds_20045) {\n                            x_20043 = ((volatile __local\n                                        float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)];\n                            if ((local_tid_20030 - squot32(local_tid_20030,\n                                                           32) * 32) == 0) {\n                                x_20042 = x_20043;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_20049 = 1;\n                        while (slt32(skip_threads_20049, 32)) {\n                            bool thread_active_20050 = sle32(skip_threads_20049,\n                                                             local_tid_20030 -\n                                                             squot32(local_tid_20030,\n                                                                     32) *\n                                                             32) &&\n                                 (squot32(local_tid_20030, 32) == 0 &&\n                                  ltid_in_bounds_20045);\n                            \n                            if (thread_active_20050) {\n                                // read operands\n                                {\n                                    x_20042 = ((volatile __local\n                                                float *) red_arr_mem_20034)[sext_i32_i64(local_tid_200",
            "30) -\n                                                                            sext_i32_i64(skip_threads_20049)];\n                                }\n                            }\n                            // perform operation\n                            {\n                                bool inactive_20051 =\n                                     slt64(srem64(sext_i32_i64(local_tid_20030 *\n                                                  32 + 32 - 1), g_16498),\n                                           sext_i32_i64(local_tid_20030 * 32 +\n                                           32 - 1) -\n                                           sext_i32_i64((local_tid_20030 -\n                                                         skip_threads_20049) *\n                                           32 + 32 - 1));\n                                \n                                if (thread_active_20050 && inactive_20051) {\n                                    x_20042 = x_20043;\n                                }\n                                if (thread_active_20050) {\n                                    if (!inactive_20051) {\n                                        float defunc_1_op_res_20044 = x_20042 +\n                                              x_20043;\n                                        \n                                        x_20042 = defunc_1_op_res_20044;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_20032, skip_threads_20049)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (thread_active_20050) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                                        x_20042;\n        ",
            "                            x_20043 = x_20042;\n                                }\n                            }\n                            if (sle32(wave_sizze_20032, skip_threads_20049)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_20049 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                \n                bool no_carry_in_20052 = squot32(local_tid_20030, 32) == 0 ||\n                     !ltid_in_bounds_20045;\n                \n                // carry-in for every block except the first\n                {\n                    // read operands\n                    {\n                        if (!no_carry_in_20052) {\n                            x_18829 = x_18828;\n                            x_18828 = ((__local\n                                        float *) red_arr_mem_20034)[sext_i32_i64(squot32(local_tid_20030,\n                                                                                         32)) -\n                                                                    (int64_t) 1];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_20053 =\n                             slt64(srem64(sext_i32_i64(local_tid_20030),\n                                          g_16498),\n                                   sext_i32_i64(local_tid_20030) -\n                                   sext_i32_i64(squot32(local_tid_20030, 32) *\n                                   32 - 1));\n                        \n                        if (!no_carry_in_20052) {\n                            if (inactive_20053) {\n                                x_18828 = x_18829;\n                            }\n                        }\n                        if (!no_carry_in_20052) {\n                            if (!inactive_20053) {\n                        ",
            "        float defunc_1_op_res_18830 = x_18828 + x_18829;\n                                \n                                x_18828 = defunc_1_op_res_18830;\n                            }\n                        }\n                    }\n                    // write final result\n                    {\n                        if (!no_carry_in_20052) {\n                            ((__local\n                              float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                                x_18828;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_20030, 32) == 0 &&\n                        ltid_in_bounds_20045) {\n                        ((__local\n                          float *) red_arr_mem_20034)[sext_i32_i64(local_tid_20030)] =\n                            x_18829;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_20039) *\n                      squot64(segred_group_sizze_18819,\n                              segment_sizze_nonzzero_20027) +\n                      sext_i32_i64(local_tid_20030), b_16497) &&\n                slt64(sext_i32_i64(local_tid_20030),\n                      squot64(segred_group_sizze_18819,\n                              segment_sizze_nonzzero_20027))) {\n                float tmp_20054;\n                \n                tmp_20054 = ((__local\n                              float *) red_arr_mem_20034)[(sext_i32_i64(local_tid_20030) +\n                                                           (int64_t) 1) *\n                                                          segment_sizze_nonzzero_20027 -\n                                                          (int64_t) 1];\n ",
            "               ((__global\n                  float *) mem_19396)[sext_i32_i64(virt_group_id_20039) *\n                                      squot64(segred_group_sizze_18819,\n                                              segment_sizze_nonzzero_20027) +\n                                      sext_i32_i64(local_tid_20030)] =\n                    tmp_20054;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18819\n}\n__kernel void sortBagAndDoStuffzisegred_small_18922(__global\n                                                    int *global_failure,\n                                                    uint red_arr_mem_20126_backing_offset_0,\n                                                    int64_t b_16497,\n                                                    int64_t g_16498,\n                                                    int64_t num_groups_18917,\n                                                    int64_t segment_sizze_nonzzero_20119,\n                                                    __global\n                                                    unsigned char *mem_19431,\n                                                    __global\n                                                    unsigned char *mem_19435)\n{\n    #define segred_group_sizze_18916 (sortBagAndDoStuffzisegred_group_sizze_18899)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *red_arr_mem_20126_backing_0 =\n                           &shared_mem[red_arr_mem_20126_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20121;\n    int32_t local_tid_20122;\n    int64_t group_sizze_20125;\n    int32_t wave_sizze_20124;\n    int32_t group_tid_20123;\n    \n    global_tid_20121 = get_global_id(0);\n    local_tid_20122 = get_local_id(0);\n    group_sizze_20125 = get_local_size",
            "(0);\n    wave_sizze_20124 = LOCKSTEP_WIDTH;\n    group_tid_20123 = get_group_id(0);\n    \n    int32_t phys_tid_18922 = global_tid_20121;\n    __local unsigned char *red_arr_mem_20126;\n    \n    red_arr_mem_20126 = (__local unsigned char *) red_arr_mem_20126_backing_0;\n    \n    int32_t phys_group_id_20128;\n    \n    phys_group_id_20128 = get_group_id(0);\n    \n    int32_t iterations_20129 = sdiv_up32(sext_i64_i32(sdiv_up64(g_16498,\n                                                                squot64(segred_group_sizze_18916,\n                                                                        segment_sizze_nonzzero_20119))) -\n                                         phys_group_id_20128,\n                                         sext_i64_i32(num_groups_18917));\n    \n    for (int32_t i_20130 = 0; i_20130 < iterations_20129; i_20130++) {\n        int32_t virt_group_id_20131 = phys_group_id_20128 + i_20130 *\n                sext_i64_i32(num_groups_18917);\n        int64_t slice_20132 = g_16498;\n        int64_t gtid_18920 = squot64(sext_i32_i64(local_tid_20122),\n                                     segment_sizze_nonzzero_20119) +\n                sext_i32_i64(virt_group_id_20131) *\n                squot64(segred_group_sizze_18916, segment_sizze_nonzzero_20119);\n        int64_t remnant_20133 = squot64(sext_i32_i64(local_tid_20122),\n                                        segment_sizze_nonzzero_20119) +\n                sext_i32_i64(virt_group_id_20131) *\n                squot64(segred_group_sizze_18916,\n                        segment_sizze_nonzzero_20119) - gtid_18920;\n        int64_t gtid_18921 = srem64(sext_i32_i64(local_tid_20122), b_16497);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, b_16497) && (slt64(gtid_18920, g_16498) &&\n                                                slt64(sext_i32_i64(local_tid_20122),\n                                                      b_16497 *\n                                                 ",
            "     squot64(segred_group_sizze_18916,\n                                                              segment_sizze_nonzzero_20119)))) {\n                float x_18927;\n                \n                x_18927 = ((__global float *) mem_19431)[gtid_18920 * b_16497 +\n                                                         gtid_18921];\n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                        x_18927;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                    0.0F;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, b_16497)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_18923;\n                float x_18924;\n                float x_20134;\n                float x_20135;\n                bool ltid_in_bounds_20137 = slt64(sext_i32_i64(local_tid_20122),\n                                                  b_16497 *\n                                                  squot64(segred_group_sizze_18916,\n                                                          segment_sizze_nonzzero_20119));\n                int32_t skip_threads_20138;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_20137) {\n                        x_18924 = ((volatile __local\n                                    float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)];\n                        if ((local_tid_20122 - squot32(local_tid_20122, 32) *\n                             32) == 0) {\n                            x_18923 = x_18924;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barrie",
            "rs needed)\n                {\n                    skip_threads_20138 = 1;\n                    while (slt32(skip_threads_20138, 32)) {\n                        bool thread_active_20139 = sle32(skip_threads_20138,\n                                                         local_tid_20122 -\n                                                         squot32(local_tid_20122,\n                                                                 32) * 32) &&\n                             ltid_in_bounds_20137;\n                        \n                        if (thread_active_20139) {\n                            // read operands\n                            {\n                                x_18923 = ((volatile __local\n                                            float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122) -\n                                                                        sext_i32_i64(skip_threads_20138)];\n                            }\n                        }\n                        // perform operation\n                        {\n                            bool inactive_20140 =\n                                 slt64(srem64(sext_i32_i64(local_tid_20122),\n                                              b_16497),\n                                       sext_i32_i64(local_tid_20122) -\n                                       sext_i32_i64(local_tid_20122 -\n                                       skip_threads_20138));\n                            \n                            if (thread_active_20139 && inactive_20140) {\n                                x_18923 = x_18924;\n                            }\n                            if (thread_active_20139) {\n                                if (!inactive_20140) {\n                                    float defunc_1_op_res_18925 = x_18923 +\n                                          x_18924;\n                                    \n                                    x_18923 = defunc_1_op_res_18925;\n                                }\n         ",
            "                   }\n                        }\n                        if (sle32(wave_sizze_20124, skip_threads_20138)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (thread_active_20139) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                                    x_18923;\n                                x_18924 = x_18923;\n                            }\n                        }\n                        if (sle32(wave_sizze_20124, skip_threads_20138)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_20138 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_20122 - squot32(local_tid_20122, 32) * 32) ==\n                        31 && ltid_in_bounds_20137) {\n                        ((volatile __local\n                          float *) red_arr_mem_20126)[sext_i32_i64(squot32(local_tid_20122,\n                                                                           32))] =\n                            x_18923;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_20141;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_20122, 32) == 0 &&\n                            ltid_in_bounds_20137) {\n                            x_20135 = ((volatile __local\n                                        float *) red_arr_mem_20126)[sext_i",
            "32_i64(local_tid_20122)];\n                            if ((local_tid_20122 - squot32(local_tid_20122,\n                                                           32) * 32) == 0) {\n                                x_20134 = x_20135;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_20141 = 1;\n                        while (slt32(skip_threads_20141, 32)) {\n                            bool thread_active_20142 = sle32(skip_threads_20141,\n                                                             local_tid_20122 -\n                                                             squot32(local_tid_20122,\n                                                                     32) *\n                                                             32) &&\n                                 (squot32(local_tid_20122, 32) == 0 &&\n                                  ltid_in_bounds_20137);\n                            \n                            if (thread_active_20142) {\n                                // read operands\n                                {\n                                    x_20134 = ((volatile __local\n                                                float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122) -\n                                                                            sext_i32_i64(skip_threads_20141)];\n                                }\n                            }\n                            // perform operation\n                            {\n                                bool inactive_20143 =\n                                     slt64(srem64(sext_i32_i64(local_tid_20122 *\n                                                  32 + 32 - 1), b_16497),\n                                           sext_i32_i64(local_tid_20122 * 32 +\n                                           32 - 1) -\n                                      ",
            "     sext_i32_i64((local_tid_20122 -\n                                                         skip_threads_20141) *\n                                           32 + 32 - 1));\n                                \n                                if (thread_active_20142 && inactive_20143) {\n                                    x_20134 = x_20135;\n                                }\n                                if (thread_active_20142) {\n                                    if (!inactive_20143) {\n                                        float defunc_1_op_res_20136 = x_20134 +\n                                              x_20135;\n                                        \n                                        x_20134 = defunc_1_op_res_20136;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_20124, skip_threads_20141)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (thread_active_20142) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                                        x_20134;\n                                    x_20135 = x_20134;\n                                }\n                            }\n                            if (sle32(wave_sizze_20124, skip_threads_20141)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_20141 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                \n                bool no_carry_in_20144 = squot32(local_tid_20122, 32) == 0 ||\n                     !ltid_in_bounds_20137;\n                \n                // carry-in for ever",
            "y block except the first\n                {\n                    // read operands\n                    {\n                        if (!no_carry_in_20144) {\n                            x_18924 = x_18923;\n                            x_18923 = ((__local\n                                        float *) red_arr_mem_20126)[sext_i32_i64(squot32(local_tid_20122,\n                                                                                         32)) -\n                                                                    (int64_t) 1];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_20145 =\n                             slt64(srem64(sext_i32_i64(local_tid_20122),\n                                          b_16497),\n                                   sext_i32_i64(local_tid_20122) -\n                                   sext_i32_i64(squot32(local_tid_20122, 32) *\n                                   32 - 1));\n                        \n                        if (!no_carry_in_20144) {\n                            if (inactive_20145) {\n                                x_18923 = x_18924;\n                            }\n                        }\n                        if (!no_carry_in_20144) {\n                            if (!inactive_20145) {\n                                float defunc_1_op_res_18925 = x_18923 + x_18924;\n                                \n                                x_18923 = defunc_1_op_res_18925;\n                            }\n                        }\n                    }\n                    // write final result\n                    {\n                        if (!no_carry_in_20144) {\n                            ((__local\n                              float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                                x_18923;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n          ",
            "      // restore correct values for first block\n                {\n                    if (squot32(local_tid_20122, 32) == 0 &&\n                        ltid_in_bounds_20137) {\n                        ((__local\n                          float *) red_arr_mem_20126)[sext_i32_i64(local_tid_20122)] =\n                            x_18924;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_20131) *\n                      squot64(segred_group_sizze_18916,\n                              segment_sizze_nonzzero_20119) +\n                      sext_i32_i64(local_tid_20122), g_16498) &&\n                slt64(sext_i32_i64(local_tid_20122),\n                      squot64(segred_group_sizze_18916,\n                              segment_sizze_nonzzero_20119))) {\n                float tmp_20146;\n                \n                tmp_20146 = ((__local\n                              float *) red_arr_mem_20126)[(sext_i32_i64(local_tid_20122) +\n                                                           (int64_t) 1) *\n                                                          segment_sizze_nonzzero_20119 -\n                                                          (int64_t) 1];\n                ((__global\n                  float *) mem_19435)[sext_i32_i64(virt_group_id_20131) *\n                                      squot64(segred_group_sizze_18916,\n                                              segment_sizze_nonzzero_20119) +\n                                      sext_i32_i64(local_tid_20122)] =\n                    tmp_20146;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18916\n}\n__kernel void sortBagAndDoStuffzisegscan_18719(__global int *global_failure,\n               ",
            "                                uint local_mem_19793_backing_offset_0,\n                                               int64_t b_16497, int64_t g_16498,\n                                               int32_t defunc_2_radix_sort_step_arg_18600,\n                                               int32_t defunc_0_get_bit_arg_18601,\n                                               unsigned char cond_f_res_18602_bits,\n                                               unsigned char cond_f_res_18603_bits,\n                                               __global\n                                               unsigned char *mem_param_19296,\n                                               __global\n                                               unsigned char *mem_19353,\n                                               __global\n                                               unsigned char *mem_19357,\n                                               __global\n                                               unsigned char *mem_19361,\n                                               __global\n                                               unsigned char *mem_19365,\n                                               __global\n                                               unsigned char *mem_19369,\n                                               __global\n                                               unsigned char *sortBagAndDoStuffziid_counter_mem_19746,\n                                               __global\n                                               unsigned char *status_flags_mem_19748,\n                                               __global\n                                               unsigned char *aggregates_mem_19750,\n                                               __global\n                                               unsigned char *incprefixes_mem_19752,\n                                               __global\n                                               unsigned char *aggregates_mem_19754,\n    ",
            "                                           __global\n                                               unsigned char *incprefixes_mem_19756,\n                                               __global\n                                               unsigned char *aggregates_mem_19758,\n                                               __global\n                                               unsigned char *incprefixes_mem_19760,\n                                               __global\n                                               unsigned char *aggregates_mem_19762,\n                                               __global\n                                               unsigned char *incprefixes_mem_19764)\n{\n    bool cond_f_res_18602 = cond_f_res_18602_bits;\n    bool cond_f_res_18603 = cond_f_res_18603_bits;\n    \n    #define segscan_group_sizze_18709 (sortBagAndDoStuffzisegscan_group_sizze_18379)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *local_mem_19793_backing_0 =\n                           &shared_mem[local_mem_19793_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19778;\n    int32_t local_tid_19779;\n    int64_t group_sizze_19782;\n    int32_t wave_sizze_19781;\n    int32_t group_tid_19780;\n    \n    global_tid_19778 = get_global_id(0);\n    local_tid_19779 = get_local_id(0);\n    group_sizze_19782 = get_local_size(0);\n    wave_sizze_19781 = LOCKSTEP_WIDTH;\n    group_tid_19780 = get_group_id(0);\n    \n    int32_t phys_tid_18719 = global_tid_19778;\n    int64_t byte_offsets_19783 = (int64_t) 0;\n    int64_t byte_offsets_19784 = segscan_group_sizze_18709 * (int64_t) 8;\n    int64_t byte_offsets_19785 = sdiv_up64(segscan_group_sizze_18709 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18709 * (int64_t) 8;\n    int64_t byte_offsets_19786 = sdiv_up64(sdiv_up64(segscan_group_sizze_18709 *\n         ",
            "                                            (int64_t) 8, (int64_t) 8) *\n                                           (int64_t) 8 +\n                                           segscan_group_sizze_18709 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18709 * (int64_t) 8;\n    int64_t byte_offsets_19787 =\n            sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_18709 *\n                                          (int64_t) 8, (int64_t) 8) *\n                                (int64_t) 8 + segscan_group_sizze_18709 *\n                                (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n                      segscan_group_sizze_18709 * (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18709 * (int64_t) 8;\n    int64_t warp_byte_offset_19788 = (int64_t) 32;\n    int64_t warp_byte_offset_19789 = (int64_t) 288;\n    int64_t warp_byte_offset_19790 = (int64_t) 544;\n    int64_t warp_byte_offset_19791 = (int64_t) 800;\n    int64_t warp_byte_offset_19792 = (int64_t) 1056;\n    \n    // Allocate reused shared memeory\n    { }\n    \n    __local unsigned char *local_mem_19793;\n    \n    local_mem_19793 = (__local unsigned char *) local_mem_19793_backing_0;\n    \n    int64_t trans_arr_len_19794 = (int64_t) 3 * segscan_group_sizze_18709;\n    int32_t dynamic_id_19809;\n    \n    if (local_tid_19779 == 0) {\n        dynamic_id_19809 = atomic_add_i32_global(&((volatile __global\n                                                    int *) sortBagAndDoStuffziid_counter_mem_19746)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_19793)[(int64_t) 0] = dynamic_id_19809;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_19809 = ((__local int32_t *) local_mem_19793)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_19810 = sext_i32_i64(dynamic_id_19809) * (int64_t) 3 *\n            segscan_group_sizze_18709;\n    int64_t sgm_id",
            "x_19811 = smod64(blockOff_19810, g_16498);\n    int32_t boundary_19812 = sext_i64_i32(smin64((int64_t) 3 *\n                                                 segscan_group_sizze_18709,\n                                                 g_16498 - sgm_idx_19811));\n    int32_t segsizze_compact_19813 = sext_i64_i32(smin64((int64_t) 3 *\n                                                         segscan_group_sizze_18709,\n                                                         g_16498));\n    int64_t private_mem_19814[(int64_t) 3];\n    int64_t private_mem_19816[(int64_t) 3];\n    int64_t private_mem_19818[(int64_t) 3];\n    int64_t private_mem_19820[(int64_t) 3];\n    \n    // Load and map\n    {\n        for (int64_t i_19822 = 0; i_19822 < (int64_t) 3; i_19822++) {\n            int64_t phys_tid_19823 = blockOff_19810 +\n                    sext_i32_i64(local_tid_19779) + i_19822 *\n                    segscan_group_sizze_18709;\n            int64_t slice_19824 = g_16498;\n            int64_t slice_19825 = b_16497 * slice_19824;\n            int64_t gtid_18717 = squot64(phys_tid_19823, slice_19824);\n            int64_t remnant_19826 = phys_tid_19823 - gtid_18717 * slice_19824;\n            int64_t gtid_18718 = remnant_19826;\n            int64_t remnant_19827 = remnant_19826 - gtid_18718;\n            \n            if (slt64(phys_tid_19823, b_16497 * g_16498)) {\n                float x_18733;\n                \n                x_18733 = ((__global float *) mem_param_19296)[gtid_18717 *\n                                                               g_16498 +\n                                                               gtid_18718];\n                \n                int32_t i32_arg_18734;\n                \n                i32_arg_18734 = futrts_to_bits32(x_18733);\n                \n                int32_t unsign_arg_18735 = ashr32(i32_arg_18734,\n                                                  defunc_0_get_bit_arg_18601);\n                int32_t unsign_arg_18736 = 1 & unsign_arg_18735;\n             ",
            "   int32_t unsign_arg_18737 = ashr32(i32_arg_18734, 31);\n                int32_t unsign_arg_18738 = 1 & unsign_arg_18737;\n                bool cond_18739 = unsign_arg_18738 == 1;\n                bool x_18740 = !cond_18739;\n                bool y_18741 = cond_f_res_18602 && x_18740;\n                bool cond_18742 = cond_18739 || y_18741;\n                int32_t defunc_1_get_bit_res_18743;\n                \n                if (cond_18742) {\n                    int32_t defunc_1_get_bit_res_t_res_18744 = 1 ^\n                            unsign_arg_18736;\n                    \n                    defunc_1_get_bit_res_18743 =\n                        defunc_1_get_bit_res_t_res_18744;\n                } else {\n                    defunc_1_get_bit_res_18743 = unsign_arg_18736;\n                }\n                \n                int32_t x_18745 = mul32(2, defunc_1_get_bit_res_18743);\n                int32_t unsign_arg_18746 = ashr32(i32_arg_18734,\n                                                  defunc_2_radix_sort_step_arg_18600);\n                int32_t unsign_arg_18747 = 1 & unsign_arg_18746;\n                bool y_18748 = cond_f_res_18603 && x_18740;\n                bool cond_18749 = cond_18739 || y_18748;\n                int32_t defunc_1_get_bit_res_18750;\n                \n                if (cond_18749) {\n                    int32_t defunc_1_get_bit_res_t_res_18751 = 1 ^\n                            unsign_arg_18747;\n                    \n                    defunc_1_get_bit_res_18750 =\n                        defunc_1_get_bit_res_t_res_18751;\n                } else {\n                    defunc_1_get_bit_res_18750 = unsign_arg_18747;\n                }\n                \n                int32_t defunc_0_f_res_18752 = add32(x_18745,\n                                                     defunc_1_get_bit_res_18750);\n                bool cond_18753 = defunc_0_f_res_18752 == 0;\n                int64_t defunc_0_f_res_18754 = btoi_bool_i64(cond_18753);\n                int64_t defunc_0_",
            "f_res_18755;\n                int64_t defunc_0_f_res_18756;\n                int64_t defunc_0_f_res_18757;\n                \n                if (cond_18753) {\n                    defunc_0_f_res_18755 = (int64_t) 0;\n                    defunc_0_f_res_18756 = (int64_t) 0;\n                    defunc_0_f_res_18757 = (int64_t) 0;\n                } else {\n                    bool cond_18758 = defunc_0_f_res_18752 == 1;\n                    int64_t defunc_0_f_res_f_res_18759 =\n                            btoi_bool_i64(cond_18758);\n                    int64_t defunc_0_f_res_f_res_18760;\n                    int64_t defunc_0_f_res_f_res_18761;\n                    \n                    if (cond_18758) {\n                        defunc_0_f_res_f_res_18760 = (int64_t) 0;\n                        defunc_0_f_res_f_res_18761 = (int64_t) 0;\n                    } else {\n                        bool cond_18762 = defunc_0_f_res_18752 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_18763 =\n                                btoi_bool_i64(cond_18762);\n                        bool cond_neg_18764 = !cond_18762;\n                        int64_t defunc_0_f_res_f_res_f_res_18765 =\n                                btoi_bool_i64(cond_neg_18764);\n                        \n                        defunc_0_f_res_f_res_18760 =\n                            defunc_0_f_res_f_res_f_res_18763;\n                        defunc_0_f_res_f_res_18761 =\n                            defunc_0_f_res_f_res_f_res_18765;\n                    }\n                    defunc_0_f_res_18755 = defunc_0_f_res_f_res_18759;\n                    defunc_0_f_res_18756 = defunc_0_f_res_f_res_18760;\n                    defunc_0_f_res_18757 = defunc_0_f_res_f_res_18761;\n                }\n                ((__global int32_t *) mem_19369)[gtid_18717 * g_16498 +\n                                                 gtid_18718] =\n                    defunc_0_f_res_18752;\n                private_mem_19814[i_19822] = defunc_0_f_res_18754;\n      ",
            "          private_mem_19816[i_19822] = defunc_0_f_res_18755;\n                private_mem_19818[i_19822] = defunc_0_f_res_18756;\n                private_mem_19820[i_19822] = defunc_0_f_res_18757;\n            } else {\n                private_mem_19814[i_19822] = (int64_t) 0;\n                private_mem_19816[i_19822] = (int64_t) 0;\n                private_mem_19818[i_19822] = (int64_t) 0;\n                private_mem_19820[i_19822] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19828 = 0; i_19828 < (int64_t) 3; i_19828++) {\n            int64_t sharedIdx_19829 = sext_i32_i64(local_tid_19779) + i_19828 *\n                    segscan_group_sizze_18709;\n            int64_t tmp_19830;\n            \n            tmp_19830 = private_mem_19814[i_19828];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19829] = tmp_19830;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19831 = 0; i_19831 < 3; i_19831++) {\n            int32_t sharedIdx_19832 = local_tid_19779 * 3 + i_19831;\n            int64_t tmp_19833;\n            \n            tmp_19833 = ((__local\n                          int64_t *) local_mem_19793)[sext_i32_i64(sharedIdx_19832)];\n            private_mem_19814[sext_i32_i64(i_19831)] = tmp_19833;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19834 = 0; i_19834 < (int64_t) 3; i_19834++) {\n            int64_t sharedIdx_19835 = sext_i32_i64(local_tid_19779) + i_19834 *\n                    segscan_group_sizze_18709;\n            int64_t tmp_19836;\n            \n            tmp_19836 = private_mem_19816[i_19834];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19835] = tmp_19836;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19837 = 0; i_19837 < 3; i_19837++) {\n            int32_t sharedIdx_19838 = local_tid_19779 * 3 + i_19837;\n            int64_t tmp_19839;\n            \n            tmp_19839 = ((_",
            "_local\n                          int64_t *) local_mem_19793)[sext_i32_i64(sharedIdx_19838)];\n            private_mem_19816[sext_i32_i64(i_19837)] = tmp_19839;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19840 = 0; i_19840 < (int64_t) 3; i_19840++) {\n            int64_t sharedIdx_19841 = sext_i32_i64(local_tid_19779) + i_19840 *\n                    segscan_group_sizze_18709;\n            int64_t tmp_19842;\n            \n            tmp_19842 = private_mem_19818[i_19840];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19841] = tmp_19842;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19843 = 0; i_19843 < 3; i_19843++) {\n            int32_t sharedIdx_19844 = local_tid_19779 * 3 + i_19843;\n            int64_t tmp_19845;\n            \n            tmp_19845 = ((__local\n                          int64_t *) local_mem_19793)[sext_i32_i64(sharedIdx_19844)];\n            private_mem_19818[sext_i32_i64(i_19843)] = tmp_19845;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19846 = 0; i_19846 < (int64_t) 3; i_19846++) {\n            int64_t sharedIdx_19847 = sext_i32_i64(local_tid_19779) + i_19846 *\n                    segscan_group_sizze_18709;\n            int64_t tmp_19848;\n            \n            tmp_19848 = private_mem_19820[i_19846];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19847] = tmp_19848;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19849 = 0; i_19849 < 3; i_19849++) {\n            int32_t sharedIdx_19850 = local_tid_19779 * 3 + i_19849;\n            int64_t tmp_19851;\n            \n            tmp_19851 = ((__local\n                          int64_t *) local_mem_19793)[sext_i32_i64(sharedIdx_19850)];\n            private_mem_19820[sext_i32_i64(i_19849)] = tmp_19851;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        int32_t gidx_19852 = local_tid_19779 * 3 + 1;\n        \n        for (int64_t i_19853 = 0; i_198",
            "53 < (int64_t) 2; i_19853++) {\n            bool new_sgm_19854 = smod32(gidx_19852 + sext_i64_i32(i_19853) -\n                                        boundary_19812,\n                                        segsizze_compact_19813) == 0;\n            \n            if (!new_sgm_19854) {\n                int64_t x_18720;\n                int64_t x_18724;\n                \n                x_18720 = private_mem_19814[i_19853];\n                x_18724 = private_mem_19814[i_19853 + (int64_t) 1];\n                \n                int64_t x_18721;\n                int64_t x_18725;\n                \n                x_18721 = private_mem_19816[i_19853];\n                x_18725 = private_mem_19816[i_19853 + (int64_t) 1];\n                \n                int64_t x_18722;\n                int64_t x_18726;\n                \n                x_18722 = private_mem_19818[i_19853];\n                x_18726 = private_mem_19818[i_19853 + (int64_t) 1];\n                \n                int64_t x_18723;\n                int64_t x_18727;\n                \n                x_18723 = private_mem_19820[i_19853];\n                x_18727 = private_mem_19820[i_19853 + (int64_t) 1];\n                \n                int64_t defunc_1_op_res_18728 = add64(x_18720, x_18724);\n                int64_t defunc_1_op_res_18729 = add64(x_18721, x_18725);\n                int64_t defunc_1_op_res_18730 = add64(x_18722, x_18726);\n                int64_t defunc_1_op_res_18731 = add64(x_18723, x_18727);\n                \n                private_mem_19814[i_19853 + (int64_t) 1] =\n                    defunc_1_op_res_18728;\n                private_mem_19816[i_19853 + (int64_t) 1] =\n                    defunc_1_op_res_18729;\n                private_mem_19818[i_19853 + (int64_t) 1] =\n                    defunc_1_op_res_18730;\n                private_mem_19820[i_19853 + (int64_t) 1] =\n                    defunc_1_op_res_18731;\n            }\n        }\n    }\n    // Publish results in shared memory\n    {\n        int64_t tmp_19855;\n        \n  ",
            "      tmp_19855 = private_mem_19814[(int64_t) 2];\n        ((__local int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n            tmp_19855;\n        \n        int64_t tmp_19856;\n        \n        tmp_19856 = private_mem_19816[(int64_t) 2];\n        ((__local int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n            tmp_19856;\n        \n        int64_t tmp_19857;\n        \n        tmp_19857 = private_mem_19818[(int64_t) 2];\n        ((__local int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n            tmp_19857;\n        \n        int64_t tmp_19858;\n        \n        tmp_19858 = private_mem_19820[(int64_t) 2];\n        ((__local int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n            tmp_19858;\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_19871;\n    int64_t acc_19872;\n    int64_t acc_19873;\n    int64_t acc_19874;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_19859;\n        int64_t x_19860;\n        int64_t x_19861;\n        int64_t x_19862;\n        int64_t x_19863;\n        int64_t x_19864;\n        int64_t x_19865;\n        int64_t x_19866;\n        int64_t x_19875;\n        int64_t x_19876;\n        int64_t x_19877;\n        int64_t x_19878;\n        int64_t x_19879;\n        int64_t x_19880;\n        int64_t x_19881;\n        int64_t x_19882;\n        bool ltid_in_bounds_19887 = slt64(sext_i32_i64(local_tid_19779),\n                 ",
            "                         segscan_group_sizze_18709);\n        int32_t skip_threads_19888;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19887) {\n                x_19863 = ((volatile __local\n                            int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19779)];\n                x_19864 = ((volatile __local\n                            int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19779)];\n                x_19865 = ((volatile __local\n                            int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19779)];\n                x_19866 = ((volatile __local\n                            int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19779)];\n                if ((local_tid_19779 - squot32(local_tid_19779, 32) * 32) ==\n                    0) {\n                    x_19859 = x_19863;\n                    x_19860 = x_19864;\n                    x_19861 = x_19865;\n                    x_19862 = x_19866;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19888 = 1;\n            while (slt32(skip_threads_19888, 32)) {\n                bool thread_active_19889 = sle32(skip_threads_19888,\n                                                 local_tid_19779 -\n                                      ",
            "           squot32(local_tid_19779, 32) *\n                                                 32) && ltid_in_bounds_19887;\n                \n                if (thread_active_19889) {\n                    // read operands\n                    {\n                        x_19859 = ((volatile __local\n                                    int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19779) -\n                                                                 sext_i32_i64(skip_threads_19888))];\n                        x_19860 = ((volatile __local\n                                    int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19779) -\n                                                                 sext_i32_i64(skip_threads_19888))];\n                        x_19861 = ((volatile __local\n                                    int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19779) -\n                                                                 sext_i32_i64(skip_threads_19888))];\n                        x_19862 = ((volatile __local\n                                    int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19779) -\n                                                                 sext_i32_i64(skip_threads_19888))];\n                    }\n                }\n ",
            "               // perform operation\n                {\n                    bool inactive_19890 = slt32(smod32((local_tid_19779 + 1) *\n                                                       3 - 1 +\n                                                       segsizze_compact_19813 -\n                                                       boundary_19812,\n                                                       segsizze_compact_19813),\n                                                (local_tid_19779 + 1) * 3 - 1 -\n                                                ((local_tid_19779 -\n                                                  skip_threads_19888 + 1) * 3 -\n                                                 1));\n                    \n                    if (thread_active_19889 && inactive_19890) {\n                        x_19859 = x_19863;\n                        x_19860 = x_19864;\n                        x_19861 = x_19865;\n                        x_19862 = x_19866;\n                    }\n                    if (thread_active_19889) {\n                        if (!inactive_19890) {\n                            int64_t defunc_1_op_res_19867 = add64(x_19859,\n                                                                  x_19863);\n                            int64_t defunc_1_op_res_19868 = add64(x_19860,\n                                                                  x_19864);\n                            int64_t defunc_1_op_res_19869 = add64(x_19861,\n                                                                  x_19865);\n                            int64_t defunc_1_op_res_19870 = add64(x_19862,\n                                                                  x_19866);\n                            \n                            x_19859 = defunc_1_op_res_19867;\n                            x_19860 = defunc_1_op_res_19868;\n                            x_19861 = defunc_1_op_res_19869;\n                            x_19862 = defunc_1_op_res_19870;\n                        }\n              ",
            "      }\n                }\n                if (sle32(wave_sizze_19781, skip_threads_19888)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19889) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19779)] =\n                            x_19859;\n                        x_19863 = x_19859;\n                        ((volatile __local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19779)] =\n                            x_19860;\n                        x_19864 = x_19860;\n                        ((volatile __local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19779)] =\n                            x_19861;\n                        x_19865 = x_19861;\n                        ((volatile __local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19779)] =\n                            x_19862;\n                        x_19866 = x_19862;\n                    }\n                }\n                if (sle32(wave_sizze_19781, skip_threads_19888)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19888 *= 2;\n            }\n        }\n        barrier(CLK_LO",
            "CAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19779 - squot32(local_tid_19779, 32) * 32) == 31 &&\n                ltid_in_bounds_19887) {\n                ((volatile __local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19779,\n                                                                   32))] =\n                    x_19859;\n                ((volatile __local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19779,\n                                                                   32))] =\n                    x_19860;\n                ((volatile __local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19779,\n                                                                   32))] =\n                    x_19861;\n                ((volatile __local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19779,\n                                                                   32))] =\n                    x_19862;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19891;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19779, 32) =",
            "= 0 && ltid_in_bounds_19887) {\n                    x_19879 = ((volatile __local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19779)];\n                    x_19880 = ((volatile __local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19779)];\n                    x_19881 = ((volatile __local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19779)];\n                    x_19882 = ((volatile __local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19779)];\n                    if ((local_tid_19779 - squot32(local_tid_19779, 32) * 32) ==\n                        0) {\n                        x_19875 = x_19879;\n                        x_19876 = x_19880;\n                        x_19877 = x_19881;\n                        x_19878 = x_19882;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19891 = 1;\n                while (slt32(skip_threads_19891, 32)) {\n                    bool thread_active_19892 = sle32(skip_threads_19891,\n                                                     local_tid_19779 -\n                                                     squot32(local_tid_",
            "19779,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19779, 32) == 0 &&\n                          ltid_in_bounds_19887);\n                    \n                    if (thread_active_19892) {\n                        // read operands\n                        {\n                            x_19875 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19779) -\n                                                                     sext_i32_i64(skip_threads_19891))];\n                            x_19876 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19779) -\n                                                                     sext_i32_i64(skip_threads_19891))];\n                            x_19877 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19779) -\n                                                                     sext_i32_i64(skip_threads_19891))];\n                            x_19878 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_",
            "i64(local_tid_19779) -\n                                                                     sext_i32_i64(skip_threads_19891))];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19893 = slt32(smod32((local_tid_19779 *\n                                                            32 + 32 - 1 + 1) *\n                                                           3 - 1 +\n                                                           segsizze_compact_19813 -\n                                                           boundary_19812,\n                                                           segsizze_compact_19813),\n                                                    (local_tid_19779 * 32 + 32 -\n                                                     1 + 1) * 3 - 1 -\n                                                    (((local_tid_19779 -\n                                                       skip_threads_19891) *\n                                                      32 + 32 - 1 + 1) * 3 -\n                                                     1));\n                        \n                        if (thread_active_19892 && inactive_19893) {\n                            x_19875 = x_19879;\n                            x_19876 = x_19880;\n                            x_19877 = x_19881;\n                            x_19878 = x_19882;\n                        }\n                        if (thread_active_19892) {\n                            if (!inactive_19893) {\n                                int64_t defunc_1_op_res_19883 = add64(x_19875,\n                                                                      x_19879);\n                                int64_t defunc_1_op_res_19884 = add64(x_19876,\n                                                                      x_19880);\n                                int64_t defunc_1_op_res_19885 = add64(x_19877,\n                                                   ",
            "                   x_19881);\n                                int64_t defunc_1_op_res_19886 = add64(x_19878,\n                                                                      x_19882);\n                                \n                                x_19875 = defunc_1_op_res_19883;\n                                x_19876 = defunc_1_op_res_19884;\n                                x_19877 = defunc_1_op_res_19885;\n                                x_19878 = defunc_1_op_res_19886;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19781, skip_threads_19891)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19892) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19779)] =\n                                x_19875;\n                            x_19879 = x_19875;\n                            ((volatile __local\n                              int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19779)] =\n                                x_19876;\n                            x_19880 = x_19876;\n                            ((volatile __local\n                              int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19779)] =\n                                x_19877;\n                            x_19881 = x_19877;\n  ",
            "                          ((volatile __local\n                              int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19779)] =\n                                x_19878;\n                            x_19882 = x_19878;\n                        }\n                    }\n                    if (sle32(wave_sizze_19781, skip_threads_19891)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19891 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19894 = squot32(local_tid_19779, 32) == 0 ||\n             !ltid_in_bounds_19887;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19894) {\n                    x_19863 = x_19859;\n                    x_19864 = x_19860;\n                    x_19865 = x_19861;\n                    x_19866 = x_19862;\n                    x_19859 = ((__local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19779,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19860 = ((__local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19779,\n                                                                            ",
            "      32)) -\n                                                             (int64_t) 1)];\n                    x_19861 = ((__local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19779,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19862 = ((__local\n                                int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19779,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19895 = slt32(smod32((local_tid_19779 + 1) * 3 -\n                                                   1 + segsizze_compact_19813 -\n                                                   boundary_19812,\n                                                   segsizze_compact_19813),\n                                            (local_tid_19779 + 1) * 3 - 1 -\n                                            ((squot32(local_tid_19779, 32) *\n                                              32 - 1 + 1) * 3 - 1));\n                \n                if (!no_carry_in_19894) {\n                    if (inactive_19895) {\n                        x_19859 = x_19863;\n                        x_19860 = x_19864;\n                        x_19861 = x_19865;\n                        x_19862 = x_19866;\n                    }\n                }\n                if (!no_carry_in_19894) {\n   ",
            "                 if (!inactive_19895) {\n                        int64_t defunc_1_op_res_19867 = add64(x_19859, x_19863);\n                        int64_t defunc_1_op_res_19868 = add64(x_19860, x_19864);\n                        int64_t defunc_1_op_res_19869 = add64(x_19861, x_19865);\n                        int64_t defunc_1_op_res_19870 = add64(x_19862, x_19866);\n                        \n                        x_19859 = defunc_1_op_res_19867;\n                        x_19860 = defunc_1_op_res_19868;\n                        x_19861 = defunc_1_op_res_19869;\n                        x_19862 = defunc_1_op_res_19870;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19894) {\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        x_19859;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        x_19860;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        x_19861;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        x_19862;\n                }\n            }\n        }\n        b",
            "arrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19779, 32) == 0 && ltid_in_bounds_19887) {\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n                    x_19863;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n                    x_19864;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n                    x_19865;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19779)] =\n                    x_19866;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_19779 == 0) {\n            acc_19871 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18709 -\n                                                       (int64_t) 1)];\n            acc_19872 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                              (int64_t) 8) +\n                                                   ",
            "   (segscan_group_sizze_18709 -\n                                                       (int64_t) 1)];\n            acc_19873 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18709 -\n                                                       (int64_t) 1)];\n            acc_19874 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18709 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_19871 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19783,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19779) -\n                                                       (int64_t) 1)];\n            acc_19872 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19784,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19779) -\n                                                       (int64_t) 1)];\n            acc_19873 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19785,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19779) -\n                                                       (int64_t) 1)];\n            acc_19874 = ((__local\n                          int64_t *) local_mem_19793)[squot64(byte_offsets_19786,\n                       ",
            "                                       (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19779) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_19896 = (int64_t) 0;\n    int64_t prefix_19897 = (int64_t) 0;\n    int64_t prefix_19898 = (int64_t) 0;\n    int64_t prefix_19899 = (int64_t) 0;\n    bool block_new_sgm_19900 = sgm_idx_19811 == (int64_t) 0;\n    \n    // Perform lookback\n    {\n        if (block_new_sgm_19900 && local_tid_19779 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_19752)[dynamic_id_19809] = acc_19871;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19756)[dynamic_id_19809] = acc_19872;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19760)[dynamic_id_19809] = acc_19873;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19764)[dynamic_id_19809] = acc_19874;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_19748)[dynamic_id_19809] = (int8_t) 2;\n            acc_19871 = (int64_t) 0;\n            acc_19872 = (int64_t) 0;\n            acc_19873 = (int64_t) 0;\n            acc_19874 = (int64_t) 0;\n        }\n        if (!block_new_sgm_19900 && slt32(local_tid_19779, wave_sizze_19781)) {\n            if (local_tid_19779 == 0) {\n                if (boundary_19812 == sext_i64_i32(segscan_group_sizze_18709 *\n                    (int64_t) 3)) {\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19750)[dynamic_id_19809] =\n                        acc_19871;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19754)[dynamic_id_19809] =\n                        acc_19872;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19758)[dynamic_id_19809] =\n                   ",
            "     acc_19873;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19762)[dynamic_id_19809] =\n                        acc_19874;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19748)[dynamic_id_19809] =\n                        (int8_t) 1;\n                } else {\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19752)[dynamic_id_19809] =\n                        acc_19871;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19756)[dynamic_id_19809] =\n                        acc_19872;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19760)[dynamic_id_19809] =\n                        acc_19873;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19764)[dynamic_id_19809] =\n                        acc_19874;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19748)[dynamic_id_19809] =\n                        (int8_t) 2;\n                }\n                \n                int8_t tmp_19901;\n                \n                tmp_19901 = ((volatile __global\n                              int8_t *) status_flags_mem_19748)[dynamic_id_19809 -\n                                                                (int64_t) 1];\n                ((volatile __local int8_t *) local_mem_19793)[(int64_t) 0] =\n                    tmp_19901;\n            }\n            mem_fence_local();\n            \n            int8_t status_19902;\n            \n            status_19902 = ((__local int8_t *) local_mem_19793)[(int64_t) 0];\n            if (status_19902 == (int8_t) 2) {\n                if (local_tid_19779 == 0) {\n                    prefix_19896 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19752)[dynamic_id_19809 -\n ",
            "                                                                      (int64_t) 1];\n                    prefix_19897 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19756)[dynamic_id_19809 -\n                                                                       (int64_t) 1];\n                    prefix_19898 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19760)[dynamic_id_19809 -\n                                                                       (int64_t) 1];\n                    prefix_19899 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19764)[dynamic_id_19809 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_19903 = dynamic_id_19809 -\n                        sext_i32_i64(wave_sizze_19781);\n                \n                while (slt32(wave_sizze_19781 * -1, readOffset_19903)) {\n                    int32_t read_i_19904 = readOffset_19903 + local_tid_19779;\n                    int64_t aggr_19905 = (int64_t) 0;\n                    int64_t aggr_19906 = (int64_t) 0;\n                    int64_t aggr_19907 = (int64_t) 0;\n                    int64_t aggr_19908 = (int64_t) 0;\n                    int8_t flag_19909 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_19904)) {\n                        if (sle64(blockOff_19810 - (sext_i32_i64(read_i_19904 +\n                                                    1) *\n                                                    segscan_group_sizze_18709 *\n                                                    (int64_t) 3 - (int64_t) 1),\n                                  sgm_idx_19811)) {\n                            flag_19909 = ((volatile __global\n                                           int8_t *) status_flags_mem_19748)[sext_i32_i64(read_i_19904)];\n                            if (flag_19909 ==",
            " (int8_t) 2) {\n                                aggr_19905 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19752)[sext_i32_i64(read_i_19904)];\n                                aggr_19906 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19756)[sext_i32_i64(read_i_19904)];\n                                aggr_19907 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19760)[sext_i32_i64(read_i_19904)];\n                                aggr_19908 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19764)[sext_i32_i64(read_i_19904)];\n                            } else {\n                                if (flag_19909 == (int8_t) 1) {\n                                    aggr_19905 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19750)[sext_i32_i64(read_i_19904)];\n                                    aggr_19906 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19754)[sext_i32_i64(read_i_19904)];\n                                    aggr_19907 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19758)[sext_i32_i64(read_i_19904)];\n                                    aggr_19908 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19762)[sext_i32_i64(read_i_19904)];\n                                }\n                            }\n                        } else {\n                            flag_19909 = (int8_t) 2;\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_",
            "19779)] =\n                        aggr_19905;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        aggr_19906;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        aggr_19907;\n                    ((__local\n                      int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19779)] =\n                        aggr_19908;\n                    ((__local\n                      int8_t *) local_mem_19793)[sext_i32_i64(local_tid_19779)] =\n                        flag_19909;\n                    flag_19909 = ((__local\n                                   int8_t *) local_mem_19793)[sext_i32_i64(wave_sizze_19781) -\n                                                              (int64_t) 1];\n                    if (slt8(flag_19909, (int8_t) 2)) {\n                        int8_t flg_x_19922;\n                        int8_t flg_y_19923;\n                        int64_t x_19910;\n                        int64_t x_19911;\n                        int64_t x_19912;\n                        int64_t x_19913;\n                        int64_t x_19914;\n                        int64_t x_19915;\n                        int64_t x_19916;\n                        int64_t x_19917;\n                        int32_t skip_threads_19924;\n                        \n                        // read input for in-block scan\n                        {\n                            flg_y_19923 = ((volat",
            "ile __local\n                                            int8_t *) local_mem_19793)[sext_i32_i64(local_tid_19779)];\n                            x_19914 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19779)];\n                            x_19915 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19779)];\n                            x_19916 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19779)];\n                            x_19917 = ((volatile __local\n                                        int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19779)];\n                            if ((local_tid_19779 - squot32(local_tid_19779,\n                                                           32) * 32) == 0) {\n                                x_19910 = x_19914;\n                                x_19911 = x_19915;\n                                x_19912 = x_19916;\n                                x_19913 = x_19917;\n                                flg_x_19922 = flg_y_19923;\n                            }\n                        }\n                     ",
            "   // in-block scan (hopefully no barriers needed)\n                        {\n                            skip_threads_19924 = 1;\n                            while (slt32(skip_threads_19924, 32)) {\n                                if (sle32(skip_threads_19924, local_tid_19779 -\n                                          squot32(local_tid_19779, 32) * 32)) {\n                                    // read operands\n                                    {\n                                        flg_x_19922 = ((volatile __local\n                                                        int8_t *) local_mem_19793)[sext_i32_i64(local_tid_19779) -\n                                                                                   sext_i32_i64(skip_threads_19924)];\n                                        x_19910 = ((volatile __local\n                                                    int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19779) -\n                                                                                 sext_i32_i64(skip_threads_19924))];\n                                        x_19911 = ((volatile __local\n                                                    int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19779) -\n                                                                                 sext_i32_i64(skip_threads_19924))];\n                                        x_19912 = ((volatile __local\n                                                    int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                     ",
            "                                                   (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19779) -\n                                                                                 sext_i32_i64(skip_threads_19924))];\n                                        x_19913 = ((volatile __local\n                                                    int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19779) -\n                                                                                 sext_i32_i64(skip_threads_19924))];\n                                    }\n                                    // perform operation\n                                    {\n                                        if (flg_y_19923 == (int8_t) 2 ||\n                                            flg_y_19923 == (int8_t) 0) {\n                                            flg_x_19922 = flg_y_19923;\n                                            x_19910 = x_19914;\n                                            x_19911 = x_19915;\n                                            x_19912 = x_19916;\n                                            x_19913 = x_19917;\n                                        } else {\n                                            int64_t defunc_1_op_res_19918 =\n                                                    add64(x_19910, x_19914);\n                                            int64_t defunc_1_op_res_19919 =\n                                                    add64(x_19911, x_19915);\n                                            int64_t defunc_1_op_res_19920 =\n                                                    add64(x_19912, x_19916);\n                                            int64_t defunc_1_op_res_19921 =\n    ",
            "                                                add64(x_19913, x_19917);\n                                            \n                                            x_19910 = defunc_1_op_res_19918;\n                                            x_19911 = defunc_1_op_res_19919;\n                                            x_19912 = defunc_1_op_res_19920;\n                                            x_19913 = defunc_1_op_res_19921;\n                                        }\n                                    }\n                                    // write result\n                                    {\n                                        ((volatile __local\n                                          int8_t *) local_mem_19793)[sext_i32_i64(local_tid_19779)] =\n                                            flg_x_19922;\n                                        flg_y_19923 = flg_x_19922;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19779)] =\n                                            x_19910;\n                                        x_19914 = x_19910;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19779)] =\n                                            x_19911;\n                                        x_19915 = x_19911;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                    ",
            "                                                          (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19779)] =\n                                            x_19912;\n                                        x_19916 = x_19912;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19779)] =\n                                            x_19913;\n                                        x_19917 = x_19913;\n                                    }\n                                }\n                                skip_threads_19924 *= 2;\n                            }\n                        }\n                    }\n                    flag_19909 = ((__local\n                                   int8_t *) local_mem_19793)[sext_i32_i64(wave_sizze_19781) -\n                                                              (int64_t) 1];\n                    aggr_19905 = ((__local\n                                   int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19781) -\n                                                                (int64_t) 1)];\n                    aggr_19906 = ((__local\n                                   int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19781) -\n                                                                (int64_t) 1)];\n                    ag",
            "gr_19907 = ((__local\n                                   int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19781) -\n                                                                (int64_t) 1)];\n                    aggr_19908 = ((__local\n                                   int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19781) -\n                                                                (int64_t) 1)];\n                    if (flag_19909 == (int8_t) 2) {\n                        readOffset_19903 = wave_sizze_19781 * -1;\n                    } else {\n                        if (flag_19909 == (int8_t) 1) {\n                            readOffset_19903 -= wave_sizze_19781;\n                        }\n                    }\n                    if (slt8((int8_t) 0, flag_19909)) {\n                        int64_t x_19925 = aggr_19905;\n                        int64_t x_19926 = aggr_19906;\n                        int64_t x_19927 = aggr_19907;\n                        int64_t x_19928 = aggr_19908;\n                        int64_t x_19929 = prefix_19896;\n                        int64_t x_19930 = prefix_19897;\n                        int64_t x_19931 = prefix_19898;\n                        int64_t x_19932 = prefix_19899;\n                        int64_t defunc_1_op_res_19933 = add64(x_19925, x_19929);\n                        int64_t defunc_1_op_res_19934 = add64(x_19926, x_19930);\n                        int64_t defunc_1_op_res_19935 = add64(x_19927, x_19931);\n                        int64_t defunc_1_op_res_19936 = add64(x_19928, x_19932);\n                        \n                        prefix_19896 = defunc_1_op_res_19933",
            ";\n                        prefix_19897 = defunc_1_op_res_19934;\n                        prefix_19898 = defunc_1_op_res_19935;\n                        prefix_19899 = defunc_1_op_res_19936;\n                    }\n                    mem_fence_local();\n                }\n            }\n            if (local_tid_19779 == 0) {\n                if (boundary_19812 == sext_i64_i32(segscan_group_sizze_18709 *\n                    (int64_t) 3)) {\n                    int64_t x_19937 = prefix_19896;\n                    int64_t x_19938 = prefix_19897;\n                    int64_t x_19939 = prefix_19898;\n                    int64_t x_19940 = prefix_19899;\n                    int64_t x_19941 = acc_19871;\n                    int64_t x_19942 = acc_19872;\n                    int64_t x_19943 = acc_19873;\n                    int64_t x_19944 = acc_19874;\n                    int64_t defunc_1_op_res_19945 = add64(x_19937, x_19941);\n                    int64_t defunc_1_op_res_19946 = add64(x_19938, x_19942);\n                    int64_t defunc_1_op_res_19947 = add64(x_19939, x_19943);\n                    int64_t defunc_1_op_res_19948 = add64(x_19940, x_19944);\n                    \n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19752)[dynamic_id_19809] =\n                        defunc_1_op_res_19945;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19756)[dynamic_id_19809] =\n                        defunc_1_op_res_19946;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19760)[dynamic_id_19809] =\n                        defunc_1_op_res_19947;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19764)[dynamic_id_19809] =\n                        defunc_1_op_res_19948;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19748)[dynamic_id_19809] =\n                       ",
            " (int8_t) 2;\n                }\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                      (int64_t) 8)] =\n                    prefix_19896;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                      (int64_t) 8)] =\n                    prefix_19897;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                                      (int64_t) 8)] =\n                    prefix_19898;\n                ((__local\n                  int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                      (int64_t) 8)] =\n                    prefix_19899;\n                acc_19871 = (int64_t) 0;\n                acc_19872 = (int64_t) 0;\n                acc_19873 = (int64_t) 0;\n                acc_19874 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_19809 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_19896 = ((__local\n                             int64_t *) local_mem_19793)[squot64(warp_byte_offset_19788,\n                                                                 (int64_t) 8)];\n            prefix_19897 = ((__local\n                             int64_t *) local_mem_19793)[squot64(warp_byte_offset_19789,\n                                                                 (int64_t) 8)];\n            prefix_19898 = ((__local\n                             int64_t *) local_mem_19793)[squot64(warp_byte_offset_19790,\n                                                                 (int64_t) 8)];\n            prefix_19899 = ((__local\n                             int64_t *) local_mem_19793)[squot64(warp_byte_offset_19791,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM",
            "_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_19949;\n        int64_t x_19953;\n        int64_t x_19961 = prefix_19896;\n        int64_t x_19965 = acc_19871;\n        int64_t x_19950;\n        int64_t x_19954;\n        int64_t x_19962 = prefix_19897;\n        int64_t x_19966 = acc_19872;\n        int64_t x_19951;\n        int64_t x_19955;\n        int64_t x_19963 = prefix_19898;\n        int64_t x_19967 = acc_19873;\n        int64_t x_19952;\n        int64_t x_19956;\n        int64_t x_19964 = prefix_19899;\n        int64_t x_19968 = acc_19874;\n        \n        if (slt32(local_tid_19779 * 3, boundary_19812) &&\n            !block_new_sgm_19900) {\n            int64_t defunc_1_op_res_19969 = add64(x_19961, x_19965);\n            int64_t defunc_1_op_res_19970 = add64(x_19962, x_19966);\n            int64_t defunc_1_op_res_19971 = add64(x_19963, x_19967);\n            int64_t defunc_1_op_res_19972 = add64(x_19964, x_19968);\n            \n            x_19949 = defunc_1_op_res_19969;\n            x_19950 = defunc_1_op_res_19970;\n            x_19951 = defunc_1_op_res_19971;\n            x_19952 = defunc_1_op_res_19972;\n        } else {\n            x_19949 = acc_19871;\n            x_19950 = acc_19872;\n            x_19951 = acc_19873;\n            x_19952 = acc_19874;\n        }\n        \n        int32_t stopping_point_19973 = segsizze_compact_19813 -\n                srem32(local_tid_19779 * 3 - 1 + segsizze_compact_19813 -\n                       boundary_19812, segsizze_compact_19813);\n        \n        for (int64_t i_19974 = 0; i_19974 < (int64_t) 3; i_19974++) {\n            if (slt32(sext_i64_i32(i_19974), stopping_point_19973 - 1)) {\n                x_19953 = private_mem_19814[i_19974];\n                x_19954 = private_mem_19816[i_19974];\n                x_19955 = private_mem_19818[i_19974];\n                x_19956 = private_mem_19820[i_19974];\n                \n                int64_t defunc_1_op_res_19957 = add64(x_19949, x_19953);\n                int64_t defunc_1_o",
            "p_res_19958 = add64(x_19950, x_19954);\n                int64_t defunc_1_op_res_19959 = add64(x_19951, x_19955);\n                int64_t defunc_1_op_res_19960 = add64(x_19952, x_19956);\n                \n                private_mem_19814[i_19974] = defunc_1_op_res_19957;\n                private_mem_19816[i_19974] = defunc_1_op_res_19958;\n                private_mem_19818[i_19974] = defunc_1_op_res_19959;\n                private_mem_19820[i_19974] = defunc_1_op_res_19960;\n            }\n        }\n    }\n    // Transpose scan output and Write it to global memory in coalesced fashion\n    {\n        for (int64_t i_19975 = 0; i_19975 < (int64_t) 3; i_19975++) {\n            int64_t sharedIdx_19976 = sext_i32_i64(local_tid_19779 * 3) +\n                    i_19975;\n            int64_t tmp_19977;\n            \n            tmp_19977 = private_mem_19814[i_19975];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19976] = tmp_19977;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19978 = 0; i_19978 < (int64_t) 3; i_19978++) {\n            int64_t flat_idx_19979 = blockOff_19810 +\n                    segscan_group_sizze_18709 * i_19978 +\n                    sext_i32_i64(local_tid_19779);\n            int64_t slice_19980 = g_16498;\n            int64_t slice_19981 = b_16497 * slice_19980;\n            int64_t gtid_18717 = squot64(flat_idx_19979, slice_19980);\n            int64_t remnant_19982 = flat_idx_19979 - gtid_18717 * slice_19980;\n            int64_t gtid_18718 = remnant_19982;\n            int64_t remnant_19983 = remnant_19982 - gtid_18718;\n            \n            if (slt64(flat_idx_19979, b_16497 * g_16498)) {\n                int64_t tmp_19984;\n                \n                tmp_19984 = ((__local\n                              int64_t *) local_mem_19793)[flat_idx_19979 -\n                                                          blockOff_19810];\n                ((__global int64_t *) mem_19353)[gtid_18717 * g_16498 +\n                                 ",
            "                gtid_18718] = tmp_19984;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19985 = 0; i_19985 < (int64_t) 3; i_19985++) {\n            int64_t sharedIdx_19986 = sext_i32_i64(local_tid_19779 * 3) +\n                    i_19985;\n            int64_t tmp_19987;\n            \n            tmp_19987 = private_mem_19816[i_19985];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19986] = tmp_19987;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19988 = 0; i_19988 < (int64_t) 3; i_19988++) {\n            int64_t flat_idx_19989 = blockOff_19810 +\n                    segscan_group_sizze_18709 * i_19988 +\n                    sext_i32_i64(local_tid_19779);\n            int64_t slice_19990 = g_16498;\n            int64_t slice_19991 = b_16497 * slice_19990;\n            int64_t gtid_18717 = squot64(flat_idx_19989, slice_19990);\n            int64_t remnant_19992 = flat_idx_19989 - gtid_18717 * slice_19990;\n            int64_t gtid_18718 = remnant_19992;\n            int64_t remnant_19993 = remnant_19992 - gtid_18718;\n            \n            if (slt64(flat_idx_19989, b_16497 * g_16498)) {\n                int64_t tmp_19994;\n                \n                tmp_19994 = ((__local\n                              int64_t *) local_mem_19793)[flat_idx_19989 -\n                                                          blockOff_19810];\n                ((__global int64_t *) mem_19357)[gtid_18717 * g_16498 +\n                                                 gtid_18718] = tmp_19994;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19995 = 0; i_19995 < (int64_t) 3; i_19995++) {\n            int64_t sharedIdx_19996 = sext_i32_i64(local_tid_19779 * 3) +\n                    i_19995;\n            int64_t tmp_19997;\n            \n            tmp_19997 = private_mem_19818[i_19995];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_19996] = tmp_19997;\n        }\n        barrier(CLK_LOCAL",
            "_MEM_FENCE);\n        for (int64_t i_19998 = 0; i_19998 < (int64_t) 3; i_19998++) {\n            int64_t flat_idx_19999 = blockOff_19810 +\n                    segscan_group_sizze_18709 * i_19998 +\n                    sext_i32_i64(local_tid_19779);\n            int64_t slice_20000 = g_16498;\n            int64_t slice_20001 = b_16497 * slice_20000;\n            int64_t gtid_18717 = squot64(flat_idx_19999, slice_20000);\n            int64_t remnant_20002 = flat_idx_19999 - gtid_18717 * slice_20000;\n            int64_t gtid_18718 = remnant_20002;\n            int64_t remnant_20003 = remnant_20002 - gtid_18718;\n            \n            if (slt64(flat_idx_19999, b_16497 * g_16498)) {\n                int64_t tmp_20004;\n                \n                tmp_20004 = ((__local\n                              int64_t *) local_mem_19793)[flat_idx_19999 -\n                                                          blockOff_19810];\n                ((__global int64_t *) mem_19361)[gtid_18717 * g_16498 +\n                                                 gtid_18718] = tmp_20004;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20005 = 0; i_20005 < (int64_t) 3; i_20005++) {\n            int64_t sharedIdx_20006 = sext_i32_i64(local_tid_19779 * 3) +\n                    i_20005;\n            int64_t tmp_20007;\n            \n            tmp_20007 = private_mem_19820[i_20005];\n            ((__local int64_t *) local_mem_19793)[sharedIdx_20006] = tmp_20007;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20008 = 0; i_20008 < (int64_t) 3; i_20008++) {\n            int64_t flat_idx_20009 = blockOff_19810 +\n                    segscan_group_sizze_18709 * i_20008 +\n                    sext_i32_i64(local_tid_19779);\n            int64_t slice_20010 = g_16498;\n            int64_t slice_20011 = b_16497 * slice_20010;\n            int64_t gtid_18717 = squot64(flat_idx_20009, slice_20010);\n            int64_t remnant_20012 = flat_idx_20009 - gtid_18717 * slic",
            "e_20010;\n            int64_t gtid_18718 = remnant_20012;\n            int64_t remnant_20013 = remnant_20012 - gtid_18718;\n            \n            if (slt64(flat_idx_20009, b_16497 * g_16498)) {\n                int64_t tmp_20014;\n                \n                tmp_20014 = ((__local\n                              int64_t *) local_mem_19793)[flat_idx_20009 -\n                                                          blockOff_19810];\n                ((__global int64_t *) mem_19365)[gtid_18717 * g_16498 +\n                                                 gtid_18718] = tmp_20014;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_19809 == sdiv_up64(b_16497 * g_16498,\n                                          segscan_group_sizze_18709 *\n                                          (int64_t) 3) - (int64_t) 1) {\n            ((__global\n              int32_t *) sortBagAndDoStuffziid_counter_mem_19746)[(int64_t) 0] =\n                0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_18709\n}\n",
            NULL};
static const char *tuning_param_names[] = {"builtin#iota_i64.group_size_19561",
                                           "builtin#replicate_i8.group_size_19773",
                                           "randomField.segmap_group_size_16663",
                                           "sortBag.group_size_19681",
                                           "sortBag.segmap_group_size_16736",
                                           "sortBag.segmap_group_size_17094",
                                           "sortBag.segmap_group_size_17260",
                                           "sortBag.segmap_group_size_17488",
                                           "sortBag.segmap_num_groups_16738",
                                           "sortBag.segscan_group_size_17309",
                                           "sortBag.segscan_num_groups_17311",
                                           "sortBag.suff_intra_par_1",
                                           "sortBag.suff_intra_par_2",
                                           "sortBag.suff_outer_par_0",
                                           "sortBagAndDoStuff.group_size_19689",
                                           "sortBagAndDoStuff.segmap_group_size_17798",
                                           "sortBagAndDoStuff.segmap_group_size_18162",
                                           "sortBagAndDoStuff.segmap_group_size_18330",
                                           "sortBagAndDoStuff.segmap_group_size_18558",
                                           "sortBagAndDoStuff.segmap_group_size_18860",
                                           "sortBagAndDoStuff.segmap_group_size_18889",
                                           "sortBagAndDoStuff.segmap_num_groups_17800",
                                           "sortBagAndDoStuff.segred_group_size_18174",
                                           "sortBagAndDoStuff.segred_group_size_18899",
                                           "sortBagAndDoStuff.segred_num_groups_18176",
                                           "sortBagAndDoStuff.segred_num_groups_18901",
                                           "sortBagAndDoStuff.segscan_group_size_18379",
                                           "sortBagAndDoStuff.segscan_num_groups_18381",
                                           "sortBagAndDoStuff.suff_intra_par_1",
                                           "sortBagAndDoStuff.suff_intra_par_2",
                                           "sortBagAndDoStuff.suff_outer_par_0",
                                           "sortBagAndDoStuff.suff_outer_par_3"};
static const char *tuning_param_vars[] =
                  {"builtinzhiota_i64zigroup_sizze_19561",
                   "builtinzhreplicate_i8zigroup_sizze_19773",
                   "randomFieldzisegmap_group_sizze_16663",
                   "sortBagzigroup_sizze_19681",
                   "sortBagzisegmap_group_sizze_16736",
                   "sortBagzisegmap_group_sizze_17094",
                   "sortBagzisegmap_group_sizze_17260",
                   "sortBagzisegmap_group_sizze_17488",
                   "sortBagzisegmap_num_groups_16738",
                   "sortBagzisegscan_group_sizze_17309",
                   "sortBagzisegscan_num_groups_17311",
                   "sortBagzisuff_intra_par_1", "sortBagzisuff_intra_par_2",
                   "sortBagzisuff_outer_par_0",
                   "sortBagAndDoStuffzigroup_sizze_19689",
                   "sortBagAndDoStuffzisegmap_group_sizze_17798",
                   "sortBagAndDoStuffzisegmap_group_sizze_18162",
                   "sortBagAndDoStuffzisegmap_group_sizze_18330",
                   "sortBagAndDoStuffzisegmap_group_sizze_18558",
                   "sortBagAndDoStuffzisegmap_group_sizze_18860",
                   "sortBagAndDoStuffzisegmap_group_sizze_18889",
                   "sortBagAndDoStuffzisegmap_num_groups_17800",
                   "sortBagAndDoStuffzisegred_group_sizze_18174",
                   "sortBagAndDoStuffzisegred_group_sizze_18899",
                   "sortBagAndDoStuffzisegred_num_groups_18176",
                   "sortBagAndDoStuffzisegred_num_groups_18901",
                   "sortBagAndDoStuffzisegscan_group_sizze_18379",
                   "sortBagAndDoStuffzisegscan_num_groups_18381",
                   "sortBagAndDoStuffzisuff_intra_par_1",
                   "sortBagAndDoStuffzisuff_intra_par_2",
                   "sortBagAndDoStuffzisuff_outer_par_0",
                   "sortBagAndDoStuffzisuff_outer_par_3"};
static const char *tuning_param_classes[] = {"group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "num_groups", "group_size",
                                             "num_groups",
                                             "threshold(32, !sortBag.suff_outer_par_0)",
                                             "threshold(32, !sortBag.suff_outer_par_0 !sortBag.suff_intra_par_1)",
                                             "threshold(def,)", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "num_groups", "group_size",
                                             "group_size", "num_groups",
                                             "num_groups", "group_size",
                                             "num_groups",
                                             "threshold(32, !sortBagAndDoStuff.suff_outer_par_0)",
                                             "threshold(32, !sortBagAndDoStuff.suff_outer_par_0 !sortBagAndDoStuff.suff_intra_par_1)",
                                             "threshold(def,)",
                                             "threshold(def,)"};
struct tuning_params {
    int64_t *builtinzhiota_i64zigroup_sizze_19561;
    int64_t *builtinzhreplicate_i8zigroup_sizze_19773;
    int64_t *randomFieldzisegmap_group_sizze_16663;
    int64_t *sortBagzigroup_sizze_19681;
    int64_t *sortBagzisegmap_group_sizze_16736;
    int64_t *sortBagzisegmap_group_sizze_17094;
    int64_t *sortBagzisegmap_group_sizze_17260;
    int64_t *sortBagzisegmap_group_sizze_17488;
    int64_t *sortBagzisegmap_num_groups_16738;
    int64_t *sortBagzisegscan_group_sizze_17309;
    int64_t *sortBagzisegscan_num_groups_17311;
    int64_t *sortBagzisuff_intra_par_1;
    int64_t *sortBagzisuff_intra_par_2;
    int64_t *sortBagzisuff_outer_par_0;
    int64_t *sortBagAndDoStuffzigroup_sizze_19689;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_17798;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18162;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18330;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18558;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18860;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18889;
    int64_t *sortBagAndDoStuffzisegmap_num_groups_17800;
    int64_t *sortBagAndDoStuffzisegred_group_sizze_18174;
    int64_t *sortBagAndDoStuffzisegred_group_sizze_18899;
    int64_t *sortBagAndDoStuffzisegred_num_groups_18176;
    int64_t *sortBagAndDoStuffzisegred_num_groups_18901;
    int64_t *sortBagAndDoStuffzisegscan_group_sizze_18379;
    int64_t *sortBagAndDoStuffzisegscan_num_groups_18381;
    int64_t *sortBagAndDoStuffzisuff_intra_par_1;
    int64_t *sortBagAndDoStuffzisuff_intra_par_2;
    int64_t *sortBagAndDoStuffzisuff_outer_par_0;
    int64_t *sortBagAndDoStuffzisuff_outer_par_3;
};
struct futhark_context_config {
    int in_use;
    struct cuda_config cu_cfg;
    int profiling;
    int64_t tuning_params[32];
    int num_nvrtc_opts;
    const char **nvrtc_opts;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->profiling = 0;
    cfg->num_nvrtc_opts = 0;
    cfg->nvrtc_opts = (const char **) malloc(sizeof(const char *));
    cfg->nvrtc_opts[0] = NULL;
    cfg->tuning_params[0] = 0;
    cfg->tuning_params[1] = 0;
    cfg->tuning_params[2] = 0;
    cfg->tuning_params[3] = 0;
    cfg->tuning_params[4] = 0;
    cfg->tuning_params[5] = 0;
    cfg->tuning_params[6] = 0;
    cfg->tuning_params[7] = 0;
    cfg->tuning_params[8] = 0;
    cfg->tuning_params[9] = 0;
    cfg->tuning_params[10] = 0;
    cfg->tuning_params[11] = 32;
    cfg->tuning_params[12] = 32;
    cfg->tuning_params[13] = 0;
    cfg->tuning_params[14] = 0;
    cfg->tuning_params[15] = 0;
    cfg->tuning_params[16] = 0;
    cfg->tuning_params[17] = 0;
    cfg->tuning_params[18] = 0;
    cfg->tuning_params[19] = 0;
    cfg->tuning_params[20] = 0;
    cfg->tuning_params[21] = 0;
    cfg->tuning_params[22] = 0;
    cfg->tuning_params[23] = 0;
    cfg->tuning_params[24] = 0;
    cfg->tuning_params[25] = 0;
    cfg->tuning_params[26] = 0;
    cfg->tuning_params[27] = 0;
    cfg->tuning_params[28] = 32;
    cfg->tuning_params[29] = 32;
    cfg->tuning_params[30] = 0;
    cfg->tuning_params[31] = 0;
    cuda_config_init(&cfg->cu_cfg, 32, tuning_param_names, tuning_param_vars,
                     cfg->tuning_params, tuning_param_classes);
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg->nvrtc_opts);
    free(cfg);
}
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt)
{
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = opt;
    cfg->num_nvrtc_opts++;
    cfg->nvrtc_opts = (const char **) realloc(cfg->nvrtc_opts,
                                              (cfg->num_nvrtc_opts + 1) *
                                              sizeof(const char *));
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = NULL;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->cu_cfg.logging = cfg->cu_cfg.debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag)
{
    cfg->cu_cfg.logging = flag;
}
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s)
{
    set_preferred_device(&cfg->cu_cfg, s);
}
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path)
{
    cfg->cu_cfg.dump_program_to = path;
}
void futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                              const char *path)
{
    cfg->cu_cfg.load_program_from = path;
}
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path)
{
    cfg->cu_cfg.dump_ptx_to = path;
}
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path)
{
    cfg->cu_cfg.load_ptx_from = path;
}
void futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                                   int size)
{
    cfg->cu_cfg.default_block_size = size;
    cfg->cu_cfg.default_block_size_changed = 1;
}
void futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                                   int num)
{
    cfg->cu_cfg.default_grid_size = num;
    cfg->cu_cfg.default_grid_size_changed = 1;
}
void futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_tile_size = size;
    cfg->cu_cfg.default_tile_size_changed = 1;
}
void futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                      int size)
{
    cfg->cu_cfg.default_reg_tile_size = size;
}
void futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_threshold = size;
}
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t new_value)
{
    for (int i = 0; i < 32; i++) {
        if (strcmp(param_name, tuning_param_names[i]) == 0) {
            cfg->tuning_params[i] = new_value;
            return 0;
        }
    }
    if (strcmp(param_name, "default_group_size") == 0) {
        cfg->cu_cfg.default_block_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_num_groups") == 0) {
        cfg->cu_cfg.default_grid_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_threshold") == 0) {
        cfg->cu_cfg.default_threshold = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_tile_size") == 0) {
        cfg->cu_cfg.default_tile_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_reg_tile_size") == 0) {
        cfg->cu_cfg.default_reg_tile_size = new_value;
        return 0;
    }
    return 1;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int64_t peak_mem_usage_device;
    int64_t cur_mem_usage_device;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    struct memblock_device sortBagziid_counter_mem_19738;
    struct memblock_device sortBagAndDoStuffziid_counter_mem_19746;
    struct memblock_device sortBagAndDoStuffzicounter_mem_20062;
    struct memblock_device sortBagAndDoStuffzicounter_mem_20154;
    CUfunction builtinzhiota_i64ziiota_i64_19558;
    int64_t builtinzhiota_i64ziiota_i64_19558_total_runtime;
    int builtinzhiota_i64ziiota_i64_19558_runs;
    CUfunction builtinzhreplicate_i8zireplicate_19770;
    int64_t builtinzhreplicate_i8zireplicate_19770_total_runtime;
    int builtinzhreplicate_i8zireplicate_19770_runs;
    CUfunction gpu_map_transpose_f32;
    int64_t gpu_map_transpose_f32_total_runtime;
    int gpu_map_transpose_f32_runs;
    CUfunction gpu_map_transpose_f32_low_height;
    int64_t gpu_map_transpose_f32_low_height_total_runtime;
    int gpu_map_transpose_f32_low_height_runs;
    CUfunction gpu_map_transpose_f32_low_width;
    int64_t gpu_map_transpose_f32_low_width_total_runtime;
    int gpu_map_transpose_f32_low_width_runs;
    CUfunction gpu_map_transpose_f32_small;
    int64_t gpu_map_transpose_f32_small_total_runtime;
    int gpu_map_transpose_f32_small_runs;
    CUfunction randomFieldzisegmap_16688;
    int64_t randomFieldzisegmap_16688_total_runtime;
    int randomFieldzisegmap_16688_runs;
    CUfunction sortBagzireplicate_19678;
    int64_t sortBagzireplicate_19678_total_runtime;
    int sortBagzireplicate_19678_runs;
    CUfunction sortBagzisegmap_16853;
    int64_t sortBagzisegmap_16853_total_runtime;
    int sortBagzisegmap_16853_runs;
    CUfunction sortBagzisegmap_17517;
    int64_t sortBagzisegmap_17517_total_runtime;
    int sortBagzisegmap_17517_runs;
    CUfunction sortBagzisegmap_17718;
    int64_t sortBagzisegmap_17718_total_runtime;
    int sortBagzisegmap_17718_runs;
    CUfunction sortBagzisegmap_17759;
    int64_t sortBagzisegmap_17759_total_runtime;
    int sortBagzisegmap_17759_runs;
    CUfunction sortBagzisegmap_intragroup_16965;
    int64_t sortBagzisegmap_intragroup_16965_total_runtime;
    int sortBagzisegmap_intragroup_16965_runs;
    CUfunction sortBagzisegmap_intragroup_17546;
    int64_t sortBagzisegmap_intragroup_17546_total_runtime;
    int sortBagzisegmap_intragroup_17546_runs;
    CUfunction sortBagzisegscan_17649;
    int64_t sortBagzisegscan_17649_total_runtime;
    int sortBagzisegscan_17649_runs;
    CUfunction sortBagAndDoStuffzireplicate_19686;
    int64_t sortBagAndDoStuffzireplicate_19686_total_runtime;
    int sortBagAndDoStuffzireplicate_19686_runs;
    CUfunction sortBagAndDoStuffzisegmap_17921;
    int64_t sortBagAndDoStuffzisegmap_17921_total_runtime;
    int sortBagAndDoStuffzisegmap_17921_runs;
    CUfunction sortBagAndDoStuffzisegmap_18587;
    int64_t sortBagAndDoStuffzisegmap_18587_total_runtime;
    int sortBagAndDoStuffzisegmap_18587_runs;
    CUfunction sortBagAndDoStuffzisegmap_18788;
    int64_t sortBagAndDoStuffzisegmap_18788_total_runtime;
    int sortBagAndDoStuffzisegmap_18788_runs;
    CUfunction sortBagAndDoStuffzisegmap_18846;
    int64_t sortBagAndDoStuffzisegmap_18846_total_runtime;
    int sortBagAndDoStuffzisegmap_18846_runs;
    CUfunction sortBagAndDoStuffzisegmap_18877;
    int64_t sortBagAndDoStuffzisegmap_18877_total_runtime;
    int sortBagAndDoStuffzisegmap_18877_runs;
    CUfunction sortBagAndDoStuffzisegmap_18933;
    int64_t sortBagAndDoStuffzisegmap_18933_total_runtime;
    int sortBagAndDoStuffzisegmap_18933_runs;
    CUfunction sortBagAndDoStuffzisegmap_intragroup_18039;
    int64_t sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime;
    int sortBagAndDoStuffzisegmap_intragroup_18039_runs;
    CUfunction sortBagAndDoStuffzisegmap_intragroup_18616;
    int64_t sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime;
    int sortBagAndDoStuffzisegmap_intragroup_18616_runs;
    CUfunction sortBagAndDoStuffzisegred_large_18827;
    int64_t sortBagAndDoStuffzisegred_large_18827_total_runtime;
    int sortBagAndDoStuffzisegred_large_18827_runs;
    CUfunction sortBagAndDoStuffzisegred_large_18922;
    int64_t sortBagAndDoStuffzisegred_large_18922_total_runtime;
    int sortBagAndDoStuffzisegred_large_18922_runs;
    CUfunction sortBagAndDoStuffzisegred_small_18827;
    int64_t sortBagAndDoStuffzisegred_small_18827_total_runtime;
    int sortBagAndDoStuffzisegred_small_18827_runs;
    CUfunction sortBagAndDoStuffzisegred_small_18922;
    int64_t sortBagAndDoStuffzisegred_small_18922_total_runtime;
    int sortBagAndDoStuffzisegred_small_18922_runs;
    CUfunction sortBagAndDoStuffzisegscan_18719;
    int64_t sortBagAndDoStuffzisegscan_18719_total_runtime;
    int sortBagAndDoStuffzisegscan_18719_runs;
    int64_t copy_dev_to_dev_total_runtime;
    int copy_dev_to_dev_runs;
    int64_t copy_dev_to_host_total_runtime;
    int copy_dev_to_host_runs;
    int64_t copy_host_to_dev_total_runtime;
    int copy_host_to_dev_runs;
    int64_t copy_scalar_to_dev_total_runtime;
    int copy_scalar_to_dev_runs;
    int64_t copy_scalar_from_dev_total_runtime;
    int copy_scalar_from_dev_runs;
    CUdeviceptr global_failure;
    CUdeviceptr global_failure_args;
    struct cuda_context cuda;
    struct tuning_params tuning_params;
    int32_t failure_is_an_option;
    int total_runs;
    long total_runtime;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->debugging = ctx->detail_memory = cfg->cu_cfg.debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = cfg->cu_cfg.logging;
    ctx->error = NULL;
    ctx->log = stderr;
    ctx->cuda.profiling_records_capacity = 200;
    ctx->cuda.profiling_records_used = 0;
    ctx->cuda.profiling_records = malloc(ctx->cuda.profiling_records_capacity *
        sizeof(struct profiling_record));
    ctx->cuda.cfg = cfg->cu_cfg;
    create_lock(&ctx->lock);
    ctx->failure_is_an_option = 0;
    ctx->total_runs = 0;
    ctx->total_runtime = 0;
    ctx->peak_mem_usage_device = 0;
    ctx->cur_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->error = cuda_setup(&ctx->cuda, cuda_program, cfg->nvrtc_opts);
    if (ctx->error != NULL)
        futhark_panic(1, "%s\n", ctx->error);
    
    int32_t no_error = -1;
    
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure, sizeof(no_error)));
    CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->global_failure, &no_error,
                                    sizeof(no_error)));
    // The +1 is to avoid zero-byte allocations.
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure_args, sizeof(int64_t) *
                                  (2 + 1)));
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhiota_i64ziiota_i64_19558,
                                           ctx->cuda.module,
                                           "builtinzhiota_i64ziiota_i64_19558"));
    ctx->builtinzhiota_i64ziiota_i64_19558_total_runtime = 0;
    ctx->builtinzhiota_i64ziiota_i64_19558_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhreplicate_i8zireplicate_19770,
                                           ctx->cuda.module,
                                           "builtinzhreplicate_i8zireplicate_19770"));
    ctx->builtinzhreplicate_i8zireplicate_19770_total_runtime = 0;
    ctx->builtinzhreplicate_i8zireplicate_19770_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32"));
    ctx->gpu_map_transpose_f32_total_runtime = 0;
    ctx->gpu_map_transpose_f32_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_low_height,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_low_height"));
    ctx->gpu_map_transpose_f32_low_height_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_height_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_low_width,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_low_width"));
    ctx->gpu_map_transpose_f32_low_width_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_width_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_small,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_small"));
    ctx->gpu_map_transpose_f32_small_total_runtime = 0;
    ctx->gpu_map_transpose_f32_small_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->randomFieldzisegmap_16688,
                                           ctx->cuda.module,
                                           "randomFieldzisegmap_16688"));
    ctx->randomFieldzisegmap_16688_total_runtime = 0;
    ctx->randomFieldzisegmap_16688_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzireplicate_19678,
                                           ctx->cuda.module,
                                           "sortBagzireplicate_19678"));
    ctx->sortBagzireplicate_19678_total_runtime = 0;
    ctx->sortBagzireplicate_19678_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_16853,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_16853"));
    ctx->sortBagzisegmap_16853_total_runtime = 0;
    ctx->sortBagzisegmap_16853_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17517,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17517"));
    ctx->sortBagzisegmap_17517_total_runtime = 0;
    ctx->sortBagzisegmap_17517_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17718,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17718"));
    ctx->sortBagzisegmap_17718_total_runtime = 0;
    ctx->sortBagzisegmap_17718_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17759,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17759"));
    ctx->sortBagzisegmap_17759_total_runtime = 0;
    ctx->sortBagzisegmap_17759_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_intragroup_16965,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_intragroup_16965"));
    ctx->sortBagzisegmap_intragroup_16965_total_runtime = 0;
    ctx->sortBagzisegmap_intragroup_16965_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_intragroup_17546,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_intragroup_17546"));
    ctx->sortBagzisegmap_intragroup_17546_total_runtime = 0;
    ctx->sortBagzisegmap_intragroup_17546_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegscan_17649,
                                           ctx->cuda.module,
                                           "sortBagzisegscan_17649"));
    ctx->sortBagzisegscan_17649_total_runtime = 0;
    ctx->sortBagzisegscan_17649_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzireplicate_19686,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzireplicate_19686"));
    ctx->sortBagAndDoStuffzireplicate_19686_total_runtime = 0;
    ctx->sortBagAndDoStuffzireplicate_19686_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_17921,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_17921"));
    ctx->sortBagAndDoStuffzisegmap_17921_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_17921_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18587,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18587"));
    ctx->sortBagAndDoStuffzisegmap_18587_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18587_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18788,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18788"));
    ctx->sortBagAndDoStuffzisegmap_18788_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18788_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18846,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18846"));
    ctx->sortBagAndDoStuffzisegmap_18846_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18846_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18877,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18877"));
    ctx->sortBagAndDoStuffzisegmap_18877_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18877_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18933,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18933"));
    ctx->sortBagAndDoStuffzisegmap_18933_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18933_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_intragroup_18039,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_intragroup_18039"));
    ctx->sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_intragroup_18616,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_intragroup_18616"));
    ctx->sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_large_18827,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_large_18827"));
    ctx->sortBagAndDoStuffzisegred_large_18827_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_large_18827_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_large_18922,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_large_18922"));
    ctx->sortBagAndDoStuffzisegred_large_18922_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_large_18922_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_small_18827,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_small_18827"));
    ctx->sortBagAndDoStuffzisegred_small_18827_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_small_18827_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_small_18922,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_small_18922"));
    ctx->sortBagAndDoStuffzisegred_small_18922_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_small_18922_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegscan_18719,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegscan_18719"));
    ctx->sortBagAndDoStuffzisegscan_18719_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegscan_18719_runs = 0;
    ctx->copy_dev_to_dev_total_runtime = 0;
    ctx->copy_dev_to_dev_runs = 0;
    ctx->copy_dev_to_host_total_runtime = 0;
    ctx->copy_dev_to_host_runs = 0;
    ctx->copy_host_to_dev_total_runtime = 0;
    ctx->copy_host_to_dev_runs = 0;
    ctx->copy_scalar_to_dev_total_runtime = 0;
    ctx->copy_scalar_to_dev_runs = 0;
    ctx->copy_scalar_from_dev_total_runtime = 0;
    ctx->copy_scalar_from_dev_runs = 0;
    {
        ctx->sortBagziid_counter_mem_19738.references = NULL;
        ctx->sortBagziid_counter_mem_19738.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagziid_counter_mem_19738.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagziid_counter_mem_19738.mem,
                                            sortBagziid_counter_mem_realtype_20318,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffziid_counter_mem_19746.references = NULL;
        ctx->sortBagAndDoStuffziid_counter_mem_19746.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffziid_counter_mem_19746.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffziid_counter_mem_19746.mem,
                                            sortBagAndDoStuffziid_counter_mem_realtype_20444,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffzicounter_mem_20062.references = NULL;
        ctx->sortBagAndDoStuffzicounter_mem_20062.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffzicounter_mem_20062.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffzicounter_mem_20062.mem,
                                            sortBagAndDoStuffzicounter_mem_realtype_20489,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffzicounter_mem_20154.references = NULL;
        ctx->sortBagAndDoStuffzicounter_mem_20154.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffzicounter_mem_20154.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffzicounter_mem_20154.mem,
                                            sortBagAndDoStuffzicounter_mem_realtype_20522,
                                            10240 * sizeof(int32_t)));
    }
    ctx->tuning_params.builtinzhiota_i64zigroup_sizze_19561 =
        &cfg->tuning_params[0];
    ctx->tuning_params.builtinzhreplicate_i8zigroup_sizze_19773 =
        &cfg->tuning_params[1];
    ctx->tuning_params.randomFieldzisegmap_group_sizze_16663 =
        &cfg->tuning_params[2];
    ctx->tuning_params.sortBagzigroup_sizze_19681 = &cfg->tuning_params[3];
    ctx->tuning_params.sortBagzisegmap_group_sizze_16736 =
        &cfg->tuning_params[4];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17094 =
        &cfg->tuning_params[5];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17260 =
        &cfg->tuning_params[6];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17488 =
        &cfg->tuning_params[7];
    ctx->tuning_params.sortBagzisegmap_num_groups_16738 =
        &cfg->tuning_params[8];
    ctx->tuning_params.sortBagzisegscan_group_sizze_17309 =
        &cfg->tuning_params[9];
    ctx->tuning_params.sortBagzisegscan_num_groups_17311 =
        &cfg->tuning_params[10];
    ctx->tuning_params.sortBagzisuff_intra_par_1 = &cfg->tuning_params[11];
    ctx->tuning_params.sortBagzisuff_intra_par_2 = &cfg->tuning_params[12];
    ctx->tuning_params.sortBagzisuff_outer_par_0 = &cfg->tuning_params[13];
    ctx->tuning_params.sortBagAndDoStuffzigroup_sizze_19689 =
        &cfg->tuning_params[14];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_17798 =
        &cfg->tuning_params[15];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18162 =
        &cfg->tuning_params[16];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18330 =
        &cfg->tuning_params[17];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18558 =
        &cfg->tuning_params[18];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18860 =
        &cfg->tuning_params[19];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18889 =
        &cfg->tuning_params[20];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_num_groups_17800 =
        &cfg->tuning_params[21];
    ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18174 =
        &cfg->tuning_params[22];
    ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18899 =
        &cfg->tuning_params[23];
    ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18176 =
        &cfg->tuning_params[24];
    ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18901 =
        &cfg->tuning_params[25];
    ctx->tuning_params.sortBagAndDoStuffzisegscan_group_sizze_18379 =
        &cfg->tuning_params[26];
    ctx->tuning_params.sortBagAndDoStuffzisegscan_num_groups_18381 =
        &cfg->tuning_params[27];
    ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_1 =
        &cfg->tuning_params[28];
    ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_2 =
        &cfg->tuning_params[29];
    ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_0 =
        &cfg->tuning_params[30];
    ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_3 =
        &cfg->tuning_params[31];
    init_constants(ctx);
    // Clear the free list of any deallocations that occurred while initialising constants.
    CUDA_SUCCEED_FATAL(cuda_free_all(&ctx->cuda));
    futhark_context_sync(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    cuMemFree(ctx->global_failure);
    cuMemFree(ctx->global_failure_args);
    cuda_cleanup(&ctx->cuda);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    CUDA_SUCCEED_OR_RETURN(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    CUDA_SUCCEED_OR_RETURN(cuCtxSynchronize());
    if (ctx->failure_is_an_option) {
        int32_t failure_idx;
        
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&failure_idx, ctx->global_failure,
                                            sizeof(int32_t)));
        ctx->failure_is_an_option = 0;
        if (failure_idx >= 0) {
            int32_t no_failure = -1;
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(ctx->global_failure,
                                                &no_failure, sizeof(int32_t)));
            
            int64_t args[2 + 1];
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&args, ctx->global_failure_args,
                                                sizeof(args)));
            switch (failure_idx) {
                
              case 0:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 1:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 2:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 3:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 4:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 5:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 6:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/util/radix_sort.fut:65:3-68:33\n   #3  fut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
            }
            return FUTHARK_PROGRAM_ERROR;
        }
    }
    CUDA_SUCCEED_OR_RETURN(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    return 0;
}
static int memblock_unref_device(struct futhark_context *ctx,
                                 struct memblock_device *block, const
                                 char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "space 'device'", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_device -= block->size;
            CUDA_SUCCEED_OR_RETURN(cuda_free(&ctx->cuda, block->mem, desc));
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_device);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc_device(struct futhark_context *ctx,
                                 struct memblock_device *block, int64_t size,
                                 const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "space 'device'",
                      ctx->cur_mem_usage_device);
    
    int ret = memblock_unref_device(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "space 'device'",
                (long long) ctx->cur_mem_usage_device + size);
    if (ctx->cur_mem_usage_device > ctx->peak_mem_usage_device) {
        ctx->peak_mem_usage_device = ctx->cur_mem_usage_device;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    ctx->error = CUDA_SUCCEED_NONFATAL(cuda_alloc(&ctx->cuda, ctx->log,
                                                  (size_t) size, desc,
                                                  &block->mem));
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_device += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "space 'device'", (long long) size,
                      (long long) ctx->cur_mem_usage_device, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set_device(struct futhark_context *ctx,
                               struct memblock_device *lhs,
                               struct memblock_device *rhs, const
                               char *lhs_desc)
{
    int ret = memblock_unref_device(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        str_builder(&builder,
                    "Peak memory usage for space 'device': %lld bytes.\n",
                    (long long) ctx->peak_mem_usage_device);
        { }
    }
    if (ctx->profiling) {
        CUDA_SUCCEED_FATAL(cuda_tally_profiling_records(&ctx->cuda));
        str_builder(&builder,
                    "copy_dev_to_dev                           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_dev_runs,
                    (long) ctx->copy_dev_to_dev_total_runtime /
                    (ctx->copy_dev_to_dev_runs !=
                     0 ? ctx->copy_dev_to_dev_runs : 1),
                    (long) ctx->copy_dev_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_dev_runs;
        str_builder(&builder,
                    "copy_dev_to_host                          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_host_runs,
                    (long) ctx->copy_dev_to_host_total_runtime /
                    (ctx->copy_dev_to_host_runs !=
                     0 ? ctx->copy_dev_to_host_runs : 1),
                    (long) ctx->copy_dev_to_host_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_host_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_host_runs;
        str_builder(&builder,
                    "copy_host_to_dev                          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_host_to_dev_runs,
                    (long) ctx->copy_host_to_dev_total_runtime /
                    (ctx->copy_host_to_dev_runs !=
                     0 ? ctx->copy_host_to_dev_runs : 1),
                    (long) ctx->copy_host_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_host_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_host_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_to_dev                        ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_to_dev_runs,
                    (long) ctx->copy_scalar_to_dev_total_runtime /
                    (ctx->copy_scalar_to_dev_runs !=
                     0 ? ctx->copy_scalar_to_dev_runs : 1),
                    (long) ctx->copy_scalar_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_from_dev                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_from_dev_runs,
                    (long) ctx->copy_scalar_from_dev_total_runtime /
                    (ctx->copy_scalar_from_dev_runs !=
                     0 ? ctx->copy_scalar_from_dev_runs : 1),
                    (long) ctx->copy_scalar_from_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_from_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_from_dev_runs;
        str_builder(&builder,
                    "builtin#iota_i64.iota_i64_19558           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhiota_i64ziiota_i64_19558_runs,
                    (long) ctx->builtinzhiota_i64ziiota_i64_19558_total_runtime /
                    (ctx->builtinzhiota_i64ziiota_i64_19558_runs !=
                     0 ? ctx->builtinzhiota_i64ziiota_i64_19558_runs : 1),
                    (long) ctx->builtinzhiota_i64ziiota_i64_19558_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhiota_i64ziiota_i64_19558_total_runtime;
        ctx->total_runs += ctx->builtinzhiota_i64ziiota_i64_19558_runs;
        str_builder(&builder,
                    "builtin#replicate_i8.replicate_19770      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhreplicate_i8zireplicate_19770_runs,
                    (long) ctx->builtinzhreplicate_i8zireplicate_19770_total_runtime /
                    (ctx->builtinzhreplicate_i8zireplicate_19770_runs !=
                     0 ? ctx->builtinzhreplicate_i8zireplicate_19770_runs : 1),
                    (long) ctx->builtinzhreplicate_i8zireplicate_19770_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhreplicate_i8zireplicate_19770_total_runtime;
        ctx->total_runs += ctx->builtinzhreplicate_i8zireplicate_19770_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32                     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_runs,
                    (long) ctx->gpu_map_transpose_f32_total_runtime /
                    (ctx->gpu_map_transpose_f32_runs !=
                     0 ? ctx->gpu_map_transpose_f32_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_height          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_height_runs,
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_height_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_height_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_height_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_height_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_width           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_width_runs,
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_width_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_width_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_width_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_width_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_small               ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_small_runs,
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime /
                    (ctx->gpu_map_transpose_f32_small_runs !=
                     0 ? ctx->gpu_map_transpose_f32_small_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_small_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_small_runs;
        str_builder(&builder,
                    "randomField.segmap_16688                  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->randomFieldzisegmap_16688_runs,
                    (long) ctx->randomFieldzisegmap_16688_total_runtime /
                    (ctx->randomFieldzisegmap_16688_runs !=
                     0 ? ctx->randomFieldzisegmap_16688_runs : 1),
                    (long) ctx->randomFieldzisegmap_16688_total_runtime);
        ctx->total_runtime += ctx->randomFieldzisegmap_16688_total_runtime;
        ctx->total_runs += ctx->randomFieldzisegmap_16688_runs;
        str_builder(&builder,
                    "sortBag.replicate_19678                   ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzireplicate_19678_runs,
                    (long) ctx->sortBagzireplicate_19678_total_runtime /
                    (ctx->sortBagzireplicate_19678_runs !=
                     0 ? ctx->sortBagzireplicate_19678_runs : 1),
                    (long) ctx->sortBagzireplicate_19678_total_runtime);
        ctx->total_runtime += ctx->sortBagzireplicate_19678_total_runtime;
        ctx->total_runs += ctx->sortBagzireplicate_19678_runs;
        str_builder(&builder,
                    "sortBag.segmap_16853                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_16853_runs,
                    (long) ctx->sortBagzisegmap_16853_total_runtime /
                    (ctx->sortBagzisegmap_16853_runs !=
                     0 ? ctx->sortBagzisegmap_16853_runs : 1),
                    (long) ctx->sortBagzisegmap_16853_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_16853_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_16853_runs;
        str_builder(&builder,
                    "sortBag.segmap_17517                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17517_runs,
                    (long) ctx->sortBagzisegmap_17517_total_runtime /
                    (ctx->sortBagzisegmap_17517_runs !=
                     0 ? ctx->sortBagzisegmap_17517_runs : 1),
                    (long) ctx->sortBagzisegmap_17517_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17517_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17517_runs;
        str_builder(&builder,
                    "sortBag.segmap_17718                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17718_runs,
                    (long) ctx->sortBagzisegmap_17718_total_runtime /
                    (ctx->sortBagzisegmap_17718_runs !=
                     0 ? ctx->sortBagzisegmap_17718_runs : 1),
                    (long) ctx->sortBagzisegmap_17718_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17718_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17718_runs;
        str_builder(&builder,
                    "sortBag.segmap_17759                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17759_runs,
                    (long) ctx->sortBagzisegmap_17759_total_runtime /
                    (ctx->sortBagzisegmap_17759_runs !=
                     0 ? ctx->sortBagzisegmap_17759_runs : 1),
                    (long) ctx->sortBagzisegmap_17759_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17759_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17759_runs;
        str_builder(&builder,
                    "sortBag.segmap_intragroup_16965           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_intragroup_16965_runs,
                    (long) ctx->sortBagzisegmap_intragroup_16965_total_runtime /
                    (ctx->sortBagzisegmap_intragroup_16965_runs !=
                     0 ? ctx->sortBagzisegmap_intragroup_16965_runs : 1),
                    (long) ctx->sortBagzisegmap_intragroup_16965_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagzisegmap_intragroup_16965_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_intragroup_16965_runs;
        str_builder(&builder,
                    "sortBag.segmap_intragroup_17546           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_intragroup_17546_runs,
                    (long) ctx->sortBagzisegmap_intragroup_17546_total_runtime /
                    (ctx->sortBagzisegmap_intragroup_17546_runs !=
                     0 ? ctx->sortBagzisegmap_intragroup_17546_runs : 1),
                    (long) ctx->sortBagzisegmap_intragroup_17546_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagzisegmap_intragroup_17546_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_intragroup_17546_runs;
        str_builder(&builder,
                    "sortBag.segscan_17649                     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegscan_17649_runs,
                    (long) ctx->sortBagzisegscan_17649_total_runtime /
                    (ctx->sortBagzisegscan_17649_runs !=
                     0 ? ctx->sortBagzisegscan_17649_runs : 1),
                    (long) ctx->sortBagzisegscan_17649_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegscan_17649_total_runtime;
        ctx->total_runs += ctx->sortBagzisegscan_17649_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.replicate_19686         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzireplicate_19686_runs,
                    (long) ctx->sortBagAndDoStuffzireplicate_19686_total_runtime /
                    (ctx->sortBagAndDoStuffzireplicate_19686_runs !=
                     0 ? ctx->sortBagAndDoStuffzireplicate_19686_runs : 1),
                    (long) ctx->sortBagAndDoStuffzireplicate_19686_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzireplicate_19686_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzireplicate_19686_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_17921            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_17921_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_17921_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_17921_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_17921_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_17921_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_17921_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_17921_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18587            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18587_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18587_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18587_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18587_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18587_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18587_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18587_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18788            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18788_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18788_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18788_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18788_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18788_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18788_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18788_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18846            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18846_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18846_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18846_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18846_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18846_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18846_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18846_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18877            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18877_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18877_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18877_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18877_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18877_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18877_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18877_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18933            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18933_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18933_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18933_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18933_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18933_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18933_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18933_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_intragroup_18039 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_intragroup_18616 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_large_18827      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_large_18827_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_large_18827_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_large_18827_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_large_18827_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_large_18827_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_large_18827_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_large_18827_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_large_18922      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_large_18922_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_large_18922_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_large_18922_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_large_18922_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_large_18922_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_large_18922_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_large_18922_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_small_18827      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_small_18827_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_small_18827_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_small_18827_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_small_18827_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_small_18827_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_small_18827_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_small_18827_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_small_18922      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_small_18922_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_small_18922_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_small_18922_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_small_18922_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_small_18922_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_small_18922_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_small_18922_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segscan_18719           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegscan_18719_runs,
                    (long) ctx->sortBagAndDoStuffzisegscan_18719_total_runtime /
                    (ctx->sortBagAndDoStuffzisegscan_18719_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegscan_18719_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegscan_18719_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegscan_18719_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegscan_18719_runs;
        str_builder(&builder, "%d operations with cumulative runtime: %6ldus\n",
                    ctx->total_runs, ctx->total_runtime);
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    ctx->peak_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    if (ctx->error == NULL)
        CUDA_SUCCEED_NONFATAL(cuda_free_all(&ctx->cuda));
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6);
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_19553,
                                    int32_t n_19554, int64_t x_19555,
                                    int64_t s_19556);
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_19766,
                                        int32_t num_elems_19767,
                                        int8_t val_19768);
static int futrts_entry_randomField(struct futhark_context *ctx,
                                    struct memblock_device *mem_out_p_20235,
                                    int64_t seed_16320, int64_t b_16321,
                                    int64_t g_16322);
static int futrts_entry_sortBag(struct futhark_context *ctx,
                                struct memblock_device *mem_out_p_20240,
                                struct memblock_device *mem_out_p_20241,
                                struct memblock_device keys_mem_19005,
                                struct memblock_device values_mem_19006,
                                int64_t b_16351, int64_t g_16352);
static int futrts_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                          struct memblock_device *mem_out_p_20360,
                                          struct memblock_device *mem_out_p_20361,
                                          struct memblock_device *mem_out_p_20362,
                                          struct memblock_device *mem_out_p_20363,
                                          struct memblock_device keys_mem_19005,
                                          struct memblock_device values_mem_19006,
                                          int64_t b_16497, int64_t g_16498);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock_device mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) arr->shape[0] * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                      struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock_device mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6)
{
    (void) ctx;
    
    int err = 0;
    
    if (!(num_arrays_4 == 0 || (x_elems_5 == 0 || y_elems_6 == 0))) {
        int32_t muly_8 = squot32(16, x_elems_5);
        int32_t mulx_7 = squot32(16, y_elems_6);
        
        if (num_arrays_4 == 1 && (x_elems_5 == 1 || y_elems_6 == 1)) {
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(destmem_0.mem +
                                                sext_i32_i64(destoffset_1),
                                                srcmem_2.mem +
                                                sext_i32_i64(srcoffset_3),
                                                sext_i32_i64(x_elems_5 *
                                                y_elems_6 * 4)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
        } else {
            if (sle32(x_elems_5, 8) && slt32(16, y_elems_6)) {
                unsigned int shared_sizze_20202 = (int64_t) 1088;
                CUdeviceptr kernel_arg_20204 = destmem_0.mem;
                CUdeviceptr kernel_arg_20205 = srcmem_2.mem;
                unsigned int shared_offset_20203 = 0;
                
                if ((((((1 && sdiv_up32(x_elems_5, 16) != 0) &&
                        sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) != 0) &&
                       num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) >= 1 <<
                        16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (num_arrays_4 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up32(x_elems_5, 16);
                    grid[perm[1]] = sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16);
                    grid[perm[2]] = num_arrays_4;
                    
                    void *kernel_args_20199[] = {&perm[0], &perm[1], &perm[2],
                                                 &shared_offset_20203,
                                                 &destoffset_1, &srcoffset_3,
                                                 &num_arrays_4, &x_elems_5,
                                                 &y_elems_6, &mulx_7, &muly_8,
                                                 &kernel_arg_20204,
                                                 &kernel_arg_20205};
                    int64_t time_start_20200 = 0, time_end_20201 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "gpu_map_transpose_f32_low_width",
                                (long) sdiv_up32(x_elems_5, 16),
                                (long) sdiv_up32(sdiv_up32(y_elems_6, muly_8),
                                                 16), (long) num_arrays_4,
                                (long) 16, (long) 16, (long) 1, (int) (0 +
                                                                       (shared_sizze_20202 +
                                                                        (8 -
                                                                         shared_sizze_20202 %
                                                                         8) %
                                                                        8)));
                        time_start_20200 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->gpu_map_transpose_f32_low_width_runs,
                                                  &ctx->gpu_map_transpose_f32_low_width_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_low_width,
                                                          grid[0], grid[1],
                                                          grid[2], 16, 16, 1,
                                                          0 +
                                                          (shared_sizze_20202 +
                                                           (8 -
                                                            shared_sizze_20202 %
                                                            8) % 8), NULL,
                                                          kernel_args_20199,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20201 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "gpu_map_transpose_f32_low_width",
                                time_end_20201 - time_start_20200);
                    }
                }
            } else {
                if (sle32(y_elems_6, 8) && slt32(16, x_elems_5)) {
                    unsigned int shared_sizze_20209 = (int64_t) 1088;
                    CUdeviceptr kernel_arg_20211 = destmem_0.mem;
                    CUdeviceptr kernel_arg_20212 = srcmem_2.mem;
                    unsigned int shared_offset_20210 = 0;
                    
                    if ((((((1 && sdiv_up32(sdiv_up32(x_elems_5, mulx_7), 16) !=
                             0) && sdiv_up32(y_elems_6, 16) != 0) &&
                           num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 !=
                        0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (sdiv_up32(y_elems_6, 16) >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (num_arrays_4 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = sdiv_up32(sdiv_up32(x_elems_5, mulx_7),
                                                  16);
                        grid[perm[1]] = sdiv_up32(y_elems_6, 16);
                        grid[perm[2]] = num_arrays_4;
                        
                        void *kernel_args_20206[] = {&perm[0], &perm[1],
                                                     &perm[2],
                                                     &shared_offset_20210,
                                                     &destoffset_1,
                                                     &srcoffset_3,
                                                     &num_arrays_4, &x_elems_5,
                                                     &y_elems_6, &mulx_7,
                                                     &muly_8, &kernel_arg_20211,
                                                     &kernel_arg_20212};
                        int64_t time_start_20207 = 0, time_end_20208 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "gpu_map_transpose_f32_low_height",
                                    (long) sdiv_up32(sdiv_up32(x_elems_5,
                                                               mulx_7), 16),
                                    (long) sdiv_up32(y_elems_6, 16),
                                    (long) num_arrays_4, (long) 16, (long) 16,
                                    (long) 1, (int) (0 + (shared_sizze_20209 +
                                                          (8 -
                                                           shared_sizze_20209 %
                                                           8) % 8)));
                            time_start_20207 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->gpu_map_transpose_f32_low_height_runs,
                                                      &ctx->gpu_map_transpose_f32_low_height_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_low_height,
                                                              grid[0], grid[1],
                                                              grid[2], 16, 16,
                                                              1, 0 +
                                                              (shared_sizze_20209 +
                                                               (8 -
                                                                shared_sizze_20209 %
                                                                8) % 8), NULL,
                                                              kernel_args_20206,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20208 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "gpu_map_transpose_f32_low_height",
                                    time_end_20208 - time_start_20207);
                        }
                    }
                } else {
                    if (sle32(x_elems_5, 8) && sle32(y_elems_6, 8)) {
                        unsigned int shared_sizze_20216 = (int64_t) 1;
                        CUdeviceptr kernel_arg_20218 = destmem_0.mem;
                        CUdeviceptr kernel_arg_20219 = srcmem_2.mem;
                        unsigned int shared_offset_20217 = 0;
                        
                        if ((((((1 && sdiv_up32(num_arrays_4 * x_elems_5 *
                                                y_elems_6, 256) != 0) && 1 !=
                                0) && 1 != 0) && 256 != 0) && 1 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(num_arrays_4 * x_elems_5 *
                                                      y_elems_6, 256);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20213[] = {&shared_offset_20217,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_20218,
                                                         &kernel_arg_20219};
                            int64_t time_start_20214 = 0, time_end_20215 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "gpu_map_transpose_f32_small",
                                        (long) sdiv_up32(num_arrays_4 *
                                                         x_elems_5 * y_elems_6,
                                                         256), (long) 1,
                                        (long) 1, (long) 256, (long) 1,
                                        (long) 1, (int) (0 +
                                                         (shared_sizze_20216 +
                                                          (8 -
                                                           shared_sizze_20216 %
                                                           8) % 8)));
                                time_start_20214 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_f32_small_runs,
                                                          &ctx->gpu_map_transpose_f32_small_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_small,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 256,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20216 +
                                                                   (8 -
                                                                    shared_sizze_20216 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20213,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20215 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32_small",
                                        time_end_20215 - time_start_20214);
                            }
                        }
                    } else {
                        unsigned int shared_sizze_20223 = (int64_t) 4224;
                        CUdeviceptr kernel_arg_20225 = destmem_0.mem;
                        CUdeviceptr kernel_arg_20226 = srcmem_2.mem;
                        unsigned int shared_offset_20224 = 0;
                        
                        if ((((((1 && sdiv_up32(x_elems_5, 32) != 0) &&
                                sdiv_up32(y_elems_6, 32) != 0) &&
                               num_arrays_4 != 0) && 32 != 0) && 8 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (sdiv_up32(y_elems_6, 32) >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (num_arrays_4 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(x_elems_5, 32);
                            grid[perm[1]] = sdiv_up32(y_elems_6, 32);
                            grid[perm[2]] = num_arrays_4;
                            
                            void *kernel_args_20220[] = {&perm[0], &perm[1],
                                                         &perm[2],
                                                         &shared_offset_20224,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_20225,
                                                         &kernel_arg_20226};
                            int64_t time_start_20221 = 0, time_end_20222 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "gpu_map_transpose_f32",
                                        (long) sdiv_up32(x_elems_5, 32),
                                        (long) sdiv_up32(y_elems_6, 32),
                                        (long) num_arrays_4, (long) 32,
                                        (long) 8, (long) 1, (int) (0 +
                                                                   (shared_sizze_20223 +
                                                                    (8 -
                                                                     shared_sizze_20223 %
                                                                     8) % 8)));
                                time_start_20221 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_f32_runs,
                                                          &ctx->gpu_map_transpose_f32_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 32,
                                                                  8, 1, 0 +
                                                                  (shared_sizze_20223 +
                                                                   (8 -
                                                                    shared_sizze_20223 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20220,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20222 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32",
                                        time_end_20222 - time_start_20221);
                            }
                        }
                    }
                }
            }
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_19553,
                                    int32_t n_19554, int64_t x_19555,
                                    int64_t s_19556)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_19561;
    
    group_sizze_19561 =
        *ctx->tuning_params.builtinzhiota_i64zigroup_sizze_19561;
    
    int64_t num_groups_19562 = sdiv_up64(n_19554, group_sizze_19561);
    CUdeviceptr kernel_arg_20230 = mem_19553.mem;
    
    if ((((((1 && num_groups_19562 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_19561 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_19562;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20227[] = {&n_19554, &x_19555, &s_19556,
                                     &kernel_arg_20230};
        int64_t time_start_20228 = 0, time_end_20229 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "builtin#iota_i64.iota_i64_19558", (long) num_groups_19562,
                    (long) 1, (long) 1, (long) group_sizze_19561, (long) 1,
                    (long) 1, (int) 0);
            time_start_20228 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhiota_i64ziiota_i64_19558_runs,
                                      &ctx->builtinzhiota_i64ziiota_i64_19558_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhiota_i64ziiota_i64_19558,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_19561, 1, 1, 0, NULL,
                                              kernel_args_20227, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20229 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#iota_i64.iota_i64_19558", time_end_20229 -
                    time_start_20228);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_19766,
                                        int32_t num_elems_19767,
                                        int8_t val_19768)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_19773;
    
    group_sizze_19773 =
        *ctx->tuning_params.builtinzhreplicate_i8zigroup_sizze_19773;
    
    int64_t num_groups_19774 = sdiv_up64(num_elems_19767, group_sizze_19773);
    CUdeviceptr kernel_arg_20234 = mem_19766.mem;
    
    if ((((((1 && num_groups_19774 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_19773 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_19774;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20231[] = {&num_elems_19767, &val_19768,
                                     &kernel_arg_20234};
        int64_t time_start_20232 = 0, time_end_20233 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "builtin#replicate_i8.replicate_19770",
                    (long) num_groups_19774, (long) 1, (long) 1,
                    (long) group_sizze_19773, (long) 1, (long) 1, (int) 0);
            time_start_20232 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhreplicate_i8zireplicate_19770_runs,
                                      &ctx->builtinzhreplicate_i8zireplicate_19770_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhreplicate_i8zireplicate_19770,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_19773, 1, 1, 0, NULL,
                                              kernel_args_20231, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20233 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#replicate_i8.replicate_19770", time_end_20233 -
                    time_start_20232);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_entry_randomField(struct futhark_context *ctx,
                                    struct memblock_device *mem_out_p_20235,
                                    int64_t seed_16320, int64_t b_16321,
                                    int64_t g_16322)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19012;
    
    mem_19012.references = NULL;
    
    struct memblock_device mem_19008;
    
    mem_19008.references = NULL;
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    
    int32_t i64_res_16323 = sext_i64_i32(seed_16320);
    int32_t unsign_arg_16324 = 5460 ^ i64_res_16323;
    int32_t unsign_arg_16325 = mul32(48271, unsign_arg_16324);
    int32_t unsign_arg_16326 = umod32(unsign_arg_16325, 2147483647);
    int64_t randomField_1d_arg_16327 = mul64(b_16321, g_16322);
    int32_t unsign_arg_16328 = mul32(48271, unsign_arg_16326);
    int32_t unsign_arg_16329 = umod32(unsign_arg_16328, 2147483647);
    bool bounds_invalid_upwards_16330 = slt64(randomField_1d_arg_16327,
                                              (int64_t) 0);
    bool valid_16331 = !bounds_invalid_upwards_16330;
    bool range_valid_c_16332;
    
    if (!valid_16331) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) randomField_1d_arg_16327,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  fut/util/cpprandom.fut:176:8-56\n   #3  fut/util/random.fut:17:16-42\n   #4  fut/util/random.fut:25:22-45\n   #5  fut/entries.fut:11:24-46\n   #6  fut/entries.fut:6:1-12:11\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_16684;
    
    segmap_group_sizze_16684 =
        *ctx->tuning_params.randomFieldzisegmap_group_sizze_16663;
    
    int64_t segmap_usable_groups_16685 = sdiv_up64(randomField_1d_arg_16327,
                                                   segmap_group_sizze_16684);
    int64_t binop_y_19006 = (int64_t) 4 * randomField_1d_arg_16327;
    int64_t bytes_19007 = smax64((int64_t) 0, binop_y_19006);
    
    if (memblock_alloc_device(ctx, &mem_19008, bytes_19007, "mem_19008")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    int32_t virt_num_groups_19550 =
            sext_i64_i32(sdiv_up64(randomField_1d_arg_16327,
                                   segmap_group_sizze_16684));
    CUdeviceptr kernel_arg_20239 = mem_19008.mem;
    
    if ((((((1 && segmap_usable_groups_16685 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_16684 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_16685;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20236[] = {&ctx->global_failure,
                                     &randomField_1d_arg_16327,
                                     &unsign_arg_16329, &kernel_arg_20239};
        int64_t time_start_20237 = 0, time_end_20238 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "randomField.segmap_16688",
                    (long) segmap_usable_groups_16685, (long) 1, (long) 1,
                    (long) segmap_group_sizze_16684, (long) 1, (long) 1,
                    (int) 0);
            time_start_20237 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->randomFieldzisegmap_16688_runs,
                                      &ctx->randomFieldzisegmap_16688_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->randomFieldzisegmap_16688,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_16684, 1, 1, 0,
                                              NULL, kernel_args_20236, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20238 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "randomField.segmap_16688", time_end_20238 -
                    time_start_20237);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_alloc_device(ctx, &mem_19012, bytes_19007, "mem_19012")) {
        err = 1;
        goto cleanup;
    }
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19012.mem + (int64_t) 0,
                                        mem_19008.mem + (int64_t) 0, b_16321 *
                                        g_16322 * (int64_t) 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (memblock_unref_device(ctx, &mem_19008, "mem_19008") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19549, &mem_19012, "mem_19012") != 0)
        return 1;
    (*mem_out_p_20235).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20235, &mem_out_19549,
                            "mem_out_19549") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19012, "mem_19012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19008, "mem_19008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19549, "mem_out_19549") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_sortBag(struct futhark_context *ctx,
                                struct memblock_device *mem_out_p_20240,
                                struct memblock_device *mem_out_p_20241,
                                struct memblock_device keys_mem_19005,
                                struct memblock_device values_mem_19006,
                                int64_t b_16351, int64_t g_16352)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19395;
    
    mem_19395.references = NULL;
    
    struct memblock_device mem_19391;
    
    mem_19391.references = NULL;
    
    struct memblock_device mem_param_tmp_19691;
    
    mem_param_tmp_19691.references = NULL;
    
    struct memblock_device mem_param_tmp_19690;
    
    mem_param_tmp_19690.references = NULL;
    
    struct memblock_device incprefixes_mem_19756;
    
    incprefixes_mem_19756.references = NULL;
    
    struct memblock_device aggregates_mem_19754;
    
    aggregates_mem_19754.references = NULL;
    
    struct memblock_device incprefixes_mem_19752;
    
    incprefixes_mem_19752.references = NULL;
    
    struct memblock_device aggregates_mem_19750;
    
    aggregates_mem_19750.references = NULL;
    
    struct memblock_device incprefixes_mem_19748;
    
    incprefixes_mem_19748.references = NULL;
    
    struct memblock_device aggregates_mem_19746;
    
    aggregates_mem_19746.references = NULL;
    
    struct memblock_device incprefixes_mem_19744;
    
    incprefixes_mem_19744.references = NULL;
    
    struct memblock_device aggregates_mem_19742;
    
    aggregates_mem_19742.references = NULL;
    
    struct memblock_device status_flags_mem_19740;
    
    status_flags_mem_19740.references = NULL;
    
    struct memblock_device mem_19363;
    
    mem_19363.references = NULL;
    
    struct memblock_device mem_19359;
    
    mem_19359.references = NULL;
    
    struct memblock_device mem_19355;
    
    mem_19355.references = NULL;
    
    struct memblock_device mem_19351;
    
    mem_19351.references = NULL;
    
    struct memblock_device mem_19347;
    
    mem_19347.references = NULL;
    
    struct memblock_device mem_19342;
    
    mem_19342.references = NULL;
    
    struct memblock_device mem_19338;
    
    mem_19338.references = NULL;
    
    struct memblock_device ext_mem_19365;
    
    ext_mem_19365.references = NULL;
    
    struct memblock_device ext_mem_19366;
    
    ext_mem_19366.references = NULL;
    
    struct memblock_device mem_19310;
    
    mem_19310.references = NULL;
    
    struct memblock_device mem_19306;
    
    mem_19306.references = NULL;
    
    struct memblock_device mem_param_19298;
    
    mem_param_19298.references = NULL;
    
    struct memblock_device mem_param_19290;
    
    mem_param_19290.references = NULL;
    
    struct memblock_device ext_mem_19371;
    
    ext_mem_19371.references = NULL;
    
    struct memblock_device ext_mem_19372;
    
    ext_mem_19372.references = NULL;
    
    struct memblock_device mem_19282;
    
    mem_19282.references = NULL;
    
    struct memblock_device mem_19278;
    
    mem_19278.references = NULL;
    
    struct memblock_device mem_19274;
    
    mem_19274.references = NULL;
    
    struct memblock_device color_19490;
    
    color_19490.references = NULL;
    
    struct memblock_device color_19486;
    
    color_19486.references = NULL;
    
    struct memblock_device mem_19269;
    
    mem_19269.references = NULL;
    
    struct memblock_device mem_19265;
    
    mem_19265.references = NULL;
    
    struct memblock_device ext_mem_19396;
    
    ext_mem_19396.references = NULL;
    
    struct memblock_device ext_mem_19397;
    
    ext_mem_19397.references = NULL;
    
    struct memblock_device mem_19406;
    
    mem_19406.references = NULL;
    
    struct memblock_device mem_19401;
    
    mem_19401.references = NULL;
    
    struct memblock_device color_19484;
    
    color_19484.references = NULL;
    
    struct memblock_device color_19483;
    
    color_19483.references = NULL;
    
    struct memblock_device color_19482;
    
    color_19482.references = NULL;
    
    struct memblock_device color_19481;
    
    color_19481.references = NULL;
    
    struct memblock_device color_19480;
    
    color_19480.references = NULL;
    
    struct memblock_device color_19479;
    
    color_19479.references = NULL;
    
    struct memblock_device color_19478;
    
    color_19478.references = NULL;
    
    struct memblock_device color_19477;
    
    color_19477.references = NULL;
    
    struct memblock_device color_19476;
    
    color_19476.references = NULL;
    
    struct memblock_device color_19475;
    
    color_19475.references = NULL;
    
    struct memblock_device color_19474;
    
    color_19474.references = NULL;
    
    struct memblock_device mem_19194;
    
    mem_19194.references = NULL;
    
    struct memblock_device mem_19191;
    
    mem_19191.references = NULL;
    
    struct memblock_device mem_19015;
    
    mem_19015.references = NULL;
    
    struct memblock_device mem_19012;
    
    mem_19012.references = NULL;
    
    struct memblock_device ext_mem_19408;
    
    ext_mem_19408.references = NULL;
    
    struct memblock_device ext_mem_19409;
    
    ext_mem_19409.references = NULL;
    
    struct memblock_device mem_19009;
    
    mem_19009.references = NULL;
    
    struct memblock_device mem_out_19550;
    
    mem_out_19550.references = NULL;
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    
    bool cond_16355 = g_16352 == (int64_t) 0;
    int32_t iters_16356;
    
    if (cond_16355) {
        iters_16356 = 0;
    } else {
        iters_16356 = 16;
    }
    
    int64_t binop_y_19007 = (int64_t) 8 * g_16352;
    int64_t bytes_19008 = smax64((int64_t) 0, binop_y_19007);
    
    if (memblock_alloc_device(ctx, &mem_19009, bytes_19008, "mem_19009")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_19009, g_16352, (int64_t) 0,
                                 (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool loop_nonempty_16358 = slt32(0, iters_16356);
    int64_t i_16359 = sub64(g_16352, (int64_t) 1);
    bool x_16360 = sle64((int64_t) 0, i_16359);
    bool y_16361 = slt64(i_16359, g_16352);
    bool bounds_check_16362 = x_16360 && y_16361;
    bool loop_not_taken_16363 = !loop_nonempty_16358;
    bool protect_assert_disj_16364 = bounds_check_16362 || loop_not_taken_16363;
    bool index_certs_16365;
    
    if (!protect_assert_disj_16364) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_16359,
                               "] out of bounds for array of shape [",
                               (long long) g_16352, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  fut/util/radix_sort.fut:25:24-35\n   #2  fut/util/radix_sort.fut:53:31-62\n   #3  fut/util/radix_sort.fut:115:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  fut/util/radix_sort.fut:65:3-67:47\n   #6  fut/util/radix_sort.fut:121:3-57\n   #7  fut/entries.fut:19:16-88\n   #8  fut/entries.fut:14:1-22:22\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool suff_outer_par_16732;
    
    suff_outer_par_16732 = *ctx->tuning_params.sortBagzisuff_outer_par_0 <=
        b_16351;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_outer_par_0", (long) b_16351,
                suff_outer_par_16732 ? "true" : "false");
    
    int64_t max_group_sizze_16959;
    
    max_group_sizze_16959 = ctx->cuda.max_block_size;
    
    bool fits_16960 = sle64(g_16352, max_group_sizze_16959);
    bool suff_intra_par_16958;
    
    suff_intra_par_16958 = *ctx->tuning_params.sortBagzisuff_intra_par_1 <=
        g_16352;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_intra_par_1", (long) g_16352,
                suff_intra_par_16958 ? "true" : "false");
    
    bool intra_suff_and_fits_16961 = suff_intra_par_16958 && fits_16960;
    int64_t segmap_group_sizze_16847;
    
    segmap_group_sizze_16847 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_16736;
    
    int64_t num_groups_16848;
    int32_t max_num_groups_19561;
    
    max_num_groups_19561 = *ctx->tuning_params.sortBagzisegmap_num_groups_16738;
    num_groups_16848 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(b_16351,
                                                            segmap_group_sizze_16847),
                                                  sext_i32_i64(max_num_groups_19561))));
    
    int64_t nest_sizze_17511 = b_16351 * g_16352;
    int64_t segmap_group_sizze_17512;
    
    segmap_group_sizze_17512 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17488;
    
    bool suff_intra_par_17539;
    
    suff_intra_par_17539 = *ctx->tuning_params.sortBagzisuff_intra_par_2 <=
        g_16352;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_intra_par_2", (long) g_16352,
                suff_intra_par_17539 ? "true" : "false");
    
    bool intra_suff_and_fits_17540 = fits_16960 && suff_intra_par_17539;
    int64_t segscan_group_sizze_17639;
    
    segscan_group_sizze_17639 =
        *ctx->tuning_params.sortBagzisegscan_group_sizze_17309;
    
    int64_t num_groups_17640;
    int32_t max_num_groups_19562;
    
    max_num_groups_19562 =
        *ctx->tuning_params.sortBagzisegscan_num_groups_17311;
    num_groups_17640 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_17511,
                                                            segscan_group_sizze_17639),
                                                  sext_i32_i64(max_num_groups_19562))));
    
    int64_t segmap_group_sizze_17712;
    
    segmap_group_sizze_17712 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17260;
    
    int64_t segmap_group_sizze_17753;
    
    segmap_group_sizze_17753 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17094;
    
    int64_t segmap_usable_groups_17713 = sdiv_up_safe64(nest_sizze_17511,
                                                        segmap_group_sizze_17712);
    int64_t bytes_19011 = (int64_t) 4 * nest_sizze_17511;
    int64_t binop_y_19017 = (int64_t) 4 * g_16352;
    int64_t bytes_19018 = smax64((int64_t) 0, binop_y_19017);
    int64_t bytes_19400 = smax64((int64_t) 0, bytes_19011);
    int64_t binop_y_19276 = (int64_t) 8 * nest_sizze_17511;
    int64_t bytes_19277 = smax64((int64_t) 0, binop_y_19276);
    int64_t num_bytes_19454 = (int64_t) 4 * g_16352;
    int64_t num_bytes_19458 = (int64_t) 8 * g_16352;
    int64_t num_bytes_19464 = (int64_t) 4 * g_16352;
    int64_t num_bytes_19468 = (int64_t) 8 * g_16352;
    int64_t maxSubHelper_19485 = umax64(bytes_19008, bytes_19018);
    int64_t num_threads_19505 = segmap_group_sizze_16847 * num_groups_16848;
    int64_t total_sizze_19506 = num_bytes_19458 * num_threads_19505;
    int64_t total_sizze_19507 = num_bytes_19454 * num_threads_19505;
    int64_t total_sizze_19508 = bytes_19018 * num_threads_19505;
    int64_t total_sizze_19509 = bytes_19018 * num_threads_19505;
    int64_t total_sizze_19510 = bytes_19008 * num_threads_19505;
    int64_t total_sizze_19511 = bytes_19018 * num_threads_19505;
    int64_t total_sizze_19512 = bytes_19008 * num_threads_19505;
    int64_t total_sizze_19513 = bytes_19008 * num_threads_19505;
    int64_t total_sizze_19514 = bytes_19008 * num_threads_19505;
    int64_t total_sizze_19515 = bytes_19008 * num_threads_19505;
    int64_t total_sizze_19516 = bytes_19018 * num_threads_19505;
    int64_t total_sizze_19518 = b_16351 * num_bytes_19468;
    int64_t total_sizze_19519 = b_16351 * bytes_19008;
    int32_t local_memory_capacity_20031;
    
    local_memory_capacity_20031 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20031)) &&
        suff_outer_par_16732) {
        if (memblock_alloc_device(ctx, &mem_19012, bytes_19011, "mem_19012")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19012, (int64_t) 0,
                                                  keys_mem_19005, (int64_t) 0,
                                                  (int64_t) 1, g_16352,
                                                  b_16351) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19015, bytes_19011, "mem_19015")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19015, (int64_t) 0,
                                                  values_mem_19006, (int64_t) 0,
                                                  (int64_t) 1, g_16352,
                                                  b_16351) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19191, bytes_19011, "mem_19191")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19194, bytes_19011, "mem_19194")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19474, total_sizze_19506,
                                  "color_19474")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19475, total_sizze_19507,
                                  "color_19475")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19476, total_sizze_19508,
                                  "color_19476")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19477, total_sizze_19509,
                                  "color_19477")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19478, total_sizze_19510,
                                  "color_19478")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19479, total_sizze_19511,
                                  "color_19479")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19480, total_sizze_19512,
                                  "color_19480")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19481, total_sizze_19513,
                                  "color_19481")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19482, total_sizze_19514,
                                  "color_19482")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19483, total_sizze_19515,
                                  "color_19483")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19484, total_sizze_19516,
                                  "color_19484")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_19563 = sext_i64_i32(sdiv_up64(b_16351,
                                                               segmap_group_sizze_16847));
        CUdeviceptr kernel_arg_20245 = mem_19012.mem;
        CUdeviceptr kernel_arg_20246 = mem_19015.mem;
        CUdeviceptr kernel_arg_20247 = mem_19191.mem;
        CUdeviceptr kernel_arg_20248 = mem_19194.mem;
        CUdeviceptr kernel_arg_20249 = color_19474.mem;
        CUdeviceptr kernel_arg_20250 = color_19475.mem;
        CUdeviceptr kernel_arg_20251 = color_19476.mem;
        CUdeviceptr kernel_arg_20252 = color_19477.mem;
        CUdeviceptr kernel_arg_20253 = color_19478.mem;
        CUdeviceptr kernel_arg_20254 = color_19479.mem;
        CUdeviceptr kernel_arg_20255 = color_19480.mem;
        CUdeviceptr kernel_arg_20256 = color_19481.mem;
        CUdeviceptr kernel_arg_20257 = color_19482.mem;
        CUdeviceptr kernel_arg_20258 = color_19483.mem;
        CUdeviceptr kernel_arg_20259 = color_19484.mem;
        
        if ((((((1 && num_groups_16848 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_16847 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_16848;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20242[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args, &b_16351,
                                         &g_16352, &iters_16356, &i_16359,
                                         &num_groups_16848, &num_threads_19505,
                                         &virt_num_groups_19563,
                                         &kernel_arg_20245, &kernel_arg_20246,
                                         &kernel_arg_20247, &kernel_arg_20248,
                                         &kernel_arg_20249, &kernel_arg_20250,
                                         &kernel_arg_20251, &kernel_arg_20252,
                                         &kernel_arg_20253, &kernel_arg_20254,
                                         &kernel_arg_20255, &kernel_arg_20256,
                                         &kernel_arg_20257, &kernel_arg_20258,
                                         &kernel_arg_20259};
            int64_t time_start_20243 = 0, time_end_20244 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBag.segmap_16853", (long) num_groups_16848,
                        (long) 1, (long) 1, (long) segmap_group_sizze_16847,
                        (long) 1, (long) 1, (int) 0);
                time_start_20243 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagzisegmap_16853_runs,
                                          &ctx->sortBagzisegmap_16853_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_16853,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_16847, 1,
                                                  1, 0, NULL, kernel_args_20242,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20244 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBag.segmap_16853", time_end_20244 -
                        time_start_20243);
            }
        }
        ctx->failure_is_an_option = 1;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19012, "mem_19012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19015, "mem_19015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19474, "color_19474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19475, "color_19475") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19476, "color_19476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19477, "color_19477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19478, "color_19478") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19479, "color_19479") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19480, "color_19480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19481, "color_19481") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19482, "color_19482") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19483, "color_19483") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19484, "color_19484") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19401, bytes_19400, "mem_19401")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19401, (int64_t) 0,
                                                  mem_19191, (int64_t) 0,
                                                  (int64_t) 1, b_16351,
                                                  g_16352) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19191, "mem_19191") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19406, bytes_19400, "mem_19406")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19406, (int64_t) 0,
                                                  mem_19194, (int64_t) 0,
                                                  (int64_t) 1, b_16351,
                                                  g_16352) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19194, "mem_19194") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19409, &mem_19401, "mem_19401") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19408, &mem_19406, "mem_19406") !=
            0)
            return 1;
    } else {
        int32_t local_memory_capacity_20030;
        
        local_memory_capacity_20030 = ctx->cuda.max_shared_memory;
        if (sle64(num_bytes_19464 + srem64((int64_t) 8 - srem64(num_bytes_19464,
                                                                (int64_t) 8),
                                           (int64_t) 8) + (maxSubHelper_19485 +
                                                           srem64((int64_t) 8 -
                                                                  srem64(maxSubHelper_19485,
                                                                         (int64_t) 8),
                                                                  (int64_t) 8)) +
                  (bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19018 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19018,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19008 + srem64((int64_t) 8 - srem64(bytes_19008,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19008 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19008,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19008 + srem64((int64_t) 8 - srem64(bytes_19008,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19008 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19008,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                             (int64_t) 8),
                                        (int64_t) 8)),
                  sext_i32_i64(local_memory_capacity_20030)) &&
            intra_suff_and_fits_16961) {
            if (memblock_alloc_device(ctx, &mem_19265, bytes_19400,
                                      "mem_19265")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19269, bytes_19400,
                                      "mem_19269")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19486, total_sizze_19518,
                                      "color_19486")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19490, total_sizze_19519,
                                      "color_19490")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t num_chunks_19616 = sext_i64_i32(sdiv_up64(g_16352,
                                                              g_16352));
            int32_t virt_num_groups_19617 = sext_i64_i32(b_16351);
            unsigned int shared_sizze_20263 = bytes_19018;
            unsigned int shared_sizze_20265 = bytes_19008;
            unsigned int shared_sizze_20267 = bytes_19008;
            unsigned int shared_sizze_20269 = bytes_19008;
            unsigned int shared_sizze_20271 = bytes_19008;
            unsigned int shared_sizze_20273 = bytes_19018;
            unsigned int shared_sizze_20275 = bytes_19018;
            unsigned int shared_sizze_20277 = maxSubHelper_19485;
            unsigned int shared_sizze_20279 = num_bytes_19464;
            CUdeviceptr kernel_arg_20281 = keys_mem_19005.mem;
            CUdeviceptr kernel_arg_20282 = values_mem_19006.mem;
            CUdeviceptr kernel_arg_20283 = mem_19265.mem;
            CUdeviceptr kernel_arg_20284 = mem_19269.mem;
            CUdeviceptr kernel_arg_20285 = color_19486.mem;
            CUdeviceptr kernel_arg_20286 = color_19490.mem;
            unsigned int shared_offset_20264 = 0;
            unsigned int shared_offset_20266 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8);
            unsigned int shared_offset_20268 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8);
            unsigned int shared_offset_20270 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8);
            unsigned int shared_offset_20272 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8) + (shared_sizze_20269 + (8 - shared_sizze_20269 %
                                                      8) % 8);
            unsigned int shared_offset_20274 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8) + (shared_sizze_20269 + (8 - shared_sizze_20269 %
                                                      8) % 8) +
                         (shared_sizze_20271 + (8 - shared_sizze_20271 % 8) %
                          8);
            unsigned int shared_offset_20276 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8) + (shared_sizze_20269 + (8 - shared_sizze_20269 %
                                                      8) % 8) +
                         (shared_sizze_20271 + (8 - shared_sizze_20271 % 8) %
                          8) + (shared_sizze_20273 + (8 - shared_sizze_20273 %
                                                      8) % 8);
            unsigned int shared_offset_20278 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8) + (shared_sizze_20269 + (8 - shared_sizze_20269 %
                                                      8) % 8) +
                         (shared_sizze_20271 + (8 - shared_sizze_20271 % 8) %
                          8) + (shared_sizze_20273 + (8 - shared_sizze_20273 %
                                                      8) % 8) +
                         (shared_sizze_20275 + (8 - shared_sizze_20275 % 8) %
                          8);
            unsigned int shared_offset_20280 = 0 + (shared_sizze_20263 + (8 -
                                                                          shared_sizze_20263 %
                                                                          8) %
                                                    8) + (shared_sizze_20265 +
                                                          (8 -
                                                           shared_sizze_20265 %
                                                           8) % 8) +
                         (shared_sizze_20267 + (8 - shared_sizze_20267 % 8) %
                          8) + (shared_sizze_20269 + (8 - shared_sizze_20269 %
                                                      8) % 8) +
                         (shared_sizze_20271 + (8 - shared_sizze_20271 % 8) %
                          8) + (shared_sizze_20273 + (8 - shared_sizze_20273 %
                                                      8) % 8) +
                         (shared_sizze_20275 + (8 - shared_sizze_20275 % 8) %
                          8) + (shared_sizze_20277 + (8 - shared_sizze_20277 %
                                                      8) % 8);
            
            if ((((((1 && b_16351 != 0) && 1 != 0) && 1 != 0) && g_16352 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = b_16351;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20260[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &shared_offset_20264,
                                             &shared_offset_20266,
                                             &shared_offset_20268,
                                             &shared_offset_20270,
                                             &shared_offset_20272,
                                             &shared_offset_20274,
                                             &shared_offset_20276,
                                             &shared_offset_20278,
                                             &shared_offset_20280, &b_16351,
                                             &g_16352, &iters_16356, &i_16359,
                                             &kernel_arg_20281,
                                             &kernel_arg_20282,
                                             &kernel_arg_20283,
                                             &kernel_arg_20284,
                                             &kernel_arg_20285,
                                             &kernel_arg_20286};
                int64_t time_start_20261 = 0, time_end_20262 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_intragroup_16965", (long) b_16351,
                            (long) 1, (long) 1, (long) g_16352, (long) 1,
                            (long) 1, (int) (0 + (shared_sizze_20263 + (8 -
                                                                        shared_sizze_20263 %
                                                                        8) %
                                                  8) + (shared_sizze_20265 +
                                                        (8 -
                                                         shared_sizze_20265 %
                                                         8) % 8) +
                                             (shared_sizze_20267 + (8 -
                                                                    shared_sizze_20267 %
                                                                    8) % 8) +
                                             (shared_sizze_20269 + (8 -
                                                                    shared_sizze_20269 %
                                                                    8) % 8) +
                                             (shared_sizze_20271 + (8 -
                                                                    shared_sizze_20271 %
                                                                    8) % 8) +
                                             (shared_sizze_20273 + (8 -
                                                                    shared_sizze_20273 %
                                                                    8) % 8) +
                                             (shared_sizze_20275 + (8 -
                                                                    shared_sizze_20275 %
                                                                    8) % 8) +
                                             (shared_sizze_20277 + (8 -
                                                                    shared_sizze_20277 %
                                                                    8) % 8) +
                                             (shared_sizze_20279 + (8 -
                                                                    shared_sizze_20279 %
                                                                    8) % 8)));
                    time_start_20261 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_intragroup_16965_runs,
                                              &ctx->sortBagzisegmap_intragroup_16965_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_intragroup_16965,
                                                      grid[0], grid[1], grid[2],
                                                      g_16352, 1, 1, 0 +
                                                      (shared_sizze_20263 + (8 -
                                                                             shared_sizze_20263 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20265 + (8 -
                                                                             shared_sizze_20265 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20267 + (8 -
                                                                             shared_sizze_20267 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20269 + (8 -
                                                                             shared_sizze_20269 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20271 + (8 -
                                                                             shared_sizze_20271 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20273 + (8 -
                                                                             shared_sizze_20273 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20275 + (8 -
                                                                             shared_sizze_20275 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20277 + (8 -
                                                                             shared_sizze_20277 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20279 + (8 -
                                                                             shared_sizze_20279 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20260, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20262 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_intragroup_16965", time_end_20262 -
                            time_start_20261);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &color_19486, "color_19486") != 0)
                return 1;
            if (memblock_unref_device(ctx, &color_19490, "color_19490") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19397, &mem_19265,
                                    "mem_19265") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19396, &mem_19269,
                                    "mem_19269") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_17513 = sdiv_up64(nest_sizze_17511,
                                                           segmap_group_sizze_17512);
            
            if (memblock_alloc_device(ctx, &mem_19274, bytes_19400,
                                      "mem_19274")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_19667 = sext_i64_i32(sdiv_up64(b_16351 *
                                                                   g_16352,
                                                                   segmap_group_sizze_17512));
            CUdeviceptr kernel_arg_20290 = keys_mem_19005.mem;
            CUdeviceptr kernel_arg_20291 = mem_19274.mem;
            
            if ((((((1 && segmap_usable_groups_17513 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_17512 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_17513;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20287[] = {&ctx->global_failure, &b_16351,
                                             &g_16352, &kernel_arg_20290,
                                             &kernel_arg_20291};
                int64_t time_start_20288 = 0, time_end_20289 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_17517",
                            (long) segmap_usable_groups_17513, (long) 1,
                            (long) 1, (long) segmap_group_sizze_17512, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20288 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_17517_runs,
                                              &ctx->sortBagzisegmap_17517_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17517,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_17512,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20287, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20289 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_17517", time_end_20289 -
                            time_start_20288);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_alloc_device(ctx, &mem_19278, bytes_19277,
                                      "mem_19278")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_19681;
            
            group_sizze_19681 = *ctx->tuning_params.sortBagzigroup_sizze_19681;
            
            int64_t num_groups_19682 = sdiv_up64(b_16351 * g_16352,
                                                 group_sizze_19681);
            CUdeviceptr kernel_arg_20295 = mem_19009.mem;
            CUdeviceptr kernel_arg_20296 = mem_19278.mem;
            
            if ((((((1 && num_groups_19682 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_19681 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_19682;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20292[] = {&b_16351, &g_16352,
                                             &kernel_arg_20295,
                                             &kernel_arg_20296};
                int64_t time_start_20293 = 0, time_end_20294 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.replicate_19678", (long) num_groups_19682,
                            (long) 1, (long) 1, (long) group_sizze_19681,
                            (long) 1, (long) 1, (int) 0);
                    time_start_20293 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzireplicate_19678_runs,
                                              &ctx->sortBagzireplicate_19678_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzireplicate_19678,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_19681, 1, 1,
                                                      0, NULL,
                                                      kernel_args_20292, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20294 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.replicate_19678", time_end_20294 -
                            time_start_20293);
                }
            }
            if (memblock_alloc_device(ctx, &mem_19282, bytes_19400,
                                      "mem_19282")) {
                err = 1;
                goto cleanup;
            }
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19282.mem + (int64_t) 0,
                                                mem_19274.mem + (int64_t) 0,
                                                b_16351 * g_16352 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (memblock_set_device(ctx, &mem_param_19290, &mem_19282,
                                    "mem_19282") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_19298, &mem_19278,
                                    "mem_19278") != 0)
                return 1;
            for (int32_t i_17525 = 0; i_17525 < iters_16356; i_17525++) {
                if (memblock_alloc_device(ctx, &mem_19306, bytes_19400,
                                          "mem_19306")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19306.mem + (int64_t) 0,
                                                    mem_param_19290.mem +
                                                    (int64_t) 0, b_16351 *
                                                    g_16352 * (int64_t) 4));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (memblock_alloc_device(ctx, &mem_19310, bytes_19277,
                                          "mem_19310")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19310.mem + (int64_t) 0,
                                                    mem_param_19298.mem +
                                                    (int64_t) 0, b_16351 *
                                                    g_16352 * (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                
                int32_t defunc_2_radix_sort_step_arg_17530 = mul32(2, i_17525);
                int32_t defunc_0_get_bit_arg_17531 = add32(1,
                                                           defunc_2_radix_sort_step_arg_17530);
                bool cond_f_res_17532 = defunc_0_get_bit_arg_17531 == 31;
                bool cond_f_res_17533 = defunc_2_radix_sort_step_arg_17530 ==
                     31;
                int32_t local_memory_capacity_20018;
                
                local_memory_capacity_20018 = ctx->cuda.max_shared_memory;
                if (sle64(bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                                    (int64_t) 8),
                                               (int64_t) 8) + (bytes_19008 +
                                                               srem64((int64_t) 8 -
                                                                      srem64(bytes_19008,
                                                                             (int64_t) 8),
                                                                      (int64_t) 8)) +
                          (bytes_19008 + srem64((int64_t) 8 -
                                                srem64(bytes_19008,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19008 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19008,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19008 + srem64((int64_t) 8 -
                                                srem64(bytes_19008,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19008 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19008,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19018 + srem64((int64_t) 8 -
                                                srem64(bytes_19018,
                                                       (int64_t) 8),
                                                (int64_t) 8)),
                          sext_i32_i64(local_memory_capacity_20018)) &&
                    intra_suff_and_fits_17540) {
                    if (memblock_alloc_device(ctx, &mem_19338, bytes_19400,
                                              "mem_19338")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19342, bytes_19277,
                                              "mem_19342")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t num_chunks_19694 = sext_i64_i32(sdiv_up64(g_16352,
                                                                      g_16352));
                    int32_t virt_num_groups_19695 = sext_i64_i32(b_16351);
                    unsigned int shared_sizze_20300 = bytes_19018;
                    unsigned int shared_sizze_20302 = bytes_19008;
                    unsigned int shared_sizze_20304 = bytes_19008;
                    unsigned int shared_sizze_20306 = bytes_19008;
                    unsigned int shared_sizze_20308 = bytes_19008;
                    unsigned int shared_sizze_20310 = bytes_19008;
                    unsigned int shared_sizze_20312 = bytes_19018;
                    CUdeviceptr kernel_arg_20314 = mem_param_19290.mem;
                    CUdeviceptr kernel_arg_20315 = mem_param_19298.mem;
                    CUdeviceptr kernel_arg_20316 = mem_19338.mem;
                    CUdeviceptr kernel_arg_20317 = mem_19342.mem;
                    unsigned int shared_offset_20301 = 0;
                    unsigned int shared_offset_20303 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8);
                    unsigned int shared_offset_20305 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8) +
                                 (shared_sizze_20302 + (8 - shared_sizze_20302 %
                                                        8) % 8);
                    unsigned int shared_offset_20307 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8) +
                                 (shared_sizze_20302 + (8 - shared_sizze_20302 %
                                                        8) % 8) +
                                 (shared_sizze_20304 + (8 - shared_sizze_20304 %
                                                        8) % 8);
                    unsigned int shared_offset_20309 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8) +
                                 (shared_sizze_20302 + (8 - shared_sizze_20302 %
                                                        8) % 8) +
                                 (shared_sizze_20304 + (8 - shared_sizze_20304 %
                                                        8) % 8) +
                                 (shared_sizze_20306 + (8 - shared_sizze_20306 %
                                                        8) % 8);
                    unsigned int shared_offset_20311 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8) +
                                 (shared_sizze_20302 + (8 - shared_sizze_20302 %
                                                        8) % 8) +
                                 (shared_sizze_20304 + (8 - shared_sizze_20304 %
                                                        8) % 8) +
                                 (shared_sizze_20306 + (8 - shared_sizze_20306 %
                                                        8) % 8) +
                                 (shared_sizze_20308 + (8 - shared_sizze_20308 %
                                                        8) % 8);
                    unsigned int shared_offset_20313 = 0 + (shared_sizze_20300 +
                                                            (8 -
                                                             shared_sizze_20300 %
                                                             8) % 8) +
                                 (shared_sizze_20302 + (8 - shared_sizze_20302 %
                                                        8) % 8) +
                                 (shared_sizze_20304 + (8 - shared_sizze_20304 %
                                                        8) % 8) +
                                 (shared_sizze_20306 + (8 - shared_sizze_20306 %
                                                        8) % 8) +
                                 (shared_sizze_20308 + (8 - shared_sizze_20308 %
                                                        8) % 8) +
                                 (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                        8) % 8);
                    
                    if ((((((1 && b_16351 != 0) && 1 != 0) && 1 != 0) &&
                          g_16352 != 0) && 1 != 0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = b_16351;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20297[] = {&ctx->global_failure,
                                                     &shared_offset_20301,
                                                     &shared_offset_20303,
                                                     &shared_offset_20305,
                                                     &shared_offset_20307,
                                                     &shared_offset_20309,
                                                     &shared_offset_20311,
                                                     &shared_offset_20313,
                                                     &b_16351, &g_16352,
                                                     &i_16359,
                                                     &defunc_2_radix_sort_step_arg_17530,
                                                     &defunc_0_get_bit_arg_17531,
                                                     &cond_f_res_17532,
                                                     &cond_f_res_17533,
                                                     &kernel_arg_20314,
                                                     &kernel_arg_20315,
                                                     &kernel_arg_20316,
                                                     &kernel_arg_20317};
                        int64_t time_start_20298 = 0, time_end_20299 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBag.segmap_intragroup_17546",
                                    (long) b_16351, (long) 1, (long) 1,
                                    (long) g_16352, (long) 1, (long) 1,
                                    (int) (0 + (shared_sizze_20300 + (8 -
                                                                      shared_sizze_20300 %
                                                                      8) % 8) +
                                           (shared_sizze_20302 + (8 -
                                                                  shared_sizze_20302 %
                                                                  8) % 8) +
                                           (shared_sizze_20304 + (8 -
                                                                  shared_sizze_20304 %
                                                                  8) % 8) +
                                           (shared_sizze_20306 + (8 -
                                                                  shared_sizze_20306 %
                                                                  8) % 8) +
                                           (shared_sizze_20308 + (8 -
                                                                  shared_sizze_20308 %
                                                                  8) % 8) +
                                           (shared_sizze_20310 + (8 -
                                                                  shared_sizze_20310 %
                                                                  8) % 8) +
                                           (shared_sizze_20312 + (8 -
                                                                  shared_sizze_20312 %
                                                                  8) % 8)));
                            time_start_20298 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagzisegmap_intragroup_17546_runs,
                                                      &ctx->sortBagzisegmap_intragroup_17546_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_intragroup_17546,
                                                              grid[0], grid[1],
                                                              grid[2], g_16352,
                                                              1, 1, 0 +
                                                              (shared_sizze_20300 +
                                                               (8 -
                                                                shared_sizze_20300 %
                                                                8) % 8) +
                                                              (shared_sizze_20302 +
                                                               (8 -
                                                                shared_sizze_20302 %
                                                                8) % 8) +
                                                              (shared_sizze_20304 +
                                                               (8 -
                                                                shared_sizze_20304 %
                                                                8) % 8) +
                                                              (shared_sizze_20306 +
                                                               (8 -
                                                                shared_sizze_20306 %
                                                                8) % 8) +
                                                              (shared_sizze_20308 +
                                                               (8 -
                                                                shared_sizze_20308 %
                                                                8) % 8) +
                                                              (shared_sizze_20310 +
                                                               (8 -
                                                                shared_sizze_20310 %
                                                                8) % 8) +
                                                              (shared_sizze_20312 +
                                                               (8 -
                                                                shared_sizze_20312 %
                                                                8) % 8), NULL,
                                                              kernel_args_20297,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20299 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBag.segmap_intragroup_17546",
                                    time_end_20299 - time_start_20298);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_set_device(ctx, &ext_mem_19366, &mem_19338,
                                            "mem_19338") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19365, &mem_19342,
                                            "mem_19342") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx, &mem_19347, bytes_19277,
                                              "mem_19347")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19351, bytes_19277,
                                              "mem_19351")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19355, bytes_19277,
                                              "mem_19355")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19359, bytes_19277,
                                              "mem_19359")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19363, bytes_19400,
                                              "mem_19363")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64((int64_t) 0, b_16351 * g_16352)) {
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegScan");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: number of elements processed sequentially per thread is m:",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: memory constraints is: ",
                                    (long long) 11, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: register constraints is: ",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: sumT' is: ", (long long) 8, '\n');
                        
                        int64_t numThreads_19736 = sdiv_up64(b_16351 * g_16352,
                                                             segscan_group_sizze_17639 *
                                                             (int64_t) 3) *
                                segscan_group_sizze_17639;
                        int64_t numGroups_19737 = sdiv_up64(b_16351 * g_16352,
                                                            segscan_group_sizze_17639 *
                                                            (int64_t) 3);
                        struct memblock_device sortBagziid_counter_mem_19738 =
                                               ctx->sortBagziid_counter_mem_19738;
                        
                        if (memblock_alloc_device(ctx, &status_flags_mem_19740,
                                                  numGroups_19737,
                                                  "status_flags_mem_19740")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19742,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "aggregates_mem_19742")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19744,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "incprefixes_mem_19744")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19746,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "aggregates_mem_19746")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19748,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "incprefixes_mem_19748")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19750,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "aggregates_mem_19750")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19752,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "incprefixes_mem_19752")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19754,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "aggregates_mem_19754")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19756,
                                                  (int64_t) 8 * numGroups_19737,
                                                  "incprefixes_mem_19756")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i8(ctx,
                                                         status_flags_mem_19740,
                                                         numGroups_19737,
                                                         (int8_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        unsigned int shared_sizze_20322 =
                                     smax64(smax64((int64_t) 1056,
                                                   sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                 segscan_group_sizze_17639,
                                                                                 (int64_t) 8) *
                                                                       (int64_t) 8 +
                                                                       (int64_t) 8 *
                                                                       segscan_group_sizze_17639,
                                                                       (int64_t) 8) *
                                                             (int64_t) 8 +
                                                             (int64_t) 8 *
                                                             segscan_group_sizze_17639,
                                                             (int64_t) 8) *
                                                   (int64_t) 8 + (int64_t) 8 *
                                                   segscan_group_sizze_17639),
                                            smax64(smax64(smax64((int64_t) 3 *
                                                                 segscan_group_sizze_17639 *
                                                                 (int64_t) 8,
                                                                 (int64_t) 3 *
                                                                 segscan_group_sizze_17639 *
                                                                 (int64_t) 8),
                                                          (int64_t) 3 *
                                                          segscan_group_sizze_17639 *
                                                          (int64_t) 8),
                                                   (int64_t) 3 *
                                                   segscan_group_sizze_17639 *
                                                   (int64_t) 8));
                        CUdeviceptr kernel_arg_20324 = mem_param_19290.mem;
                        CUdeviceptr kernel_arg_20325 = mem_19347.mem;
                        CUdeviceptr kernel_arg_20326 = mem_19351.mem;
                        CUdeviceptr kernel_arg_20327 = mem_19355.mem;
                        CUdeviceptr kernel_arg_20328 = mem_19359.mem;
                        CUdeviceptr kernel_arg_20329 = mem_19363.mem;
                        CUdeviceptr kernel_arg_20330 =
                                    sortBagziid_counter_mem_19738.mem;
                        CUdeviceptr kernel_arg_20331 =
                                    status_flags_mem_19740.mem;
                        CUdeviceptr kernel_arg_20332 = aggregates_mem_19742.mem;
                        CUdeviceptr kernel_arg_20333 =
                                    incprefixes_mem_19744.mem;
                        CUdeviceptr kernel_arg_20334 = aggregates_mem_19746.mem;
                        CUdeviceptr kernel_arg_20335 =
                                    incprefixes_mem_19748.mem;
                        CUdeviceptr kernel_arg_20336 = aggregates_mem_19750.mem;
                        CUdeviceptr kernel_arg_20337 =
                                    incprefixes_mem_19752.mem;
                        CUdeviceptr kernel_arg_20338 = aggregates_mem_19754.mem;
                        CUdeviceptr kernel_arg_20339 =
                                    incprefixes_mem_19756.mem;
                        unsigned int shared_offset_20323 = 0;
                        
                        if ((((((1 && sdiv_up64(b_16351 * g_16352,
                                                segscan_group_sizze_17639 *
                                                (int64_t) 3) != 0) && 1 != 0) &&
                               1 != 0) && segscan_group_sizze_17639 != 0) &&
                             1 != 0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up64(b_16351 * g_16352,
                                                      segscan_group_sizze_17639 *
                                                      (int64_t) 3);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20319[] = {&ctx->global_failure,
                                                         &shared_offset_20323,
                                                         &b_16351, &g_16352,
                                                         &defunc_2_radix_sort_step_arg_17530,
                                                         &defunc_0_get_bit_arg_17531,
                                                         &cond_f_res_17532,
                                                         &cond_f_res_17533,
                                                         &kernel_arg_20324,
                                                         &kernel_arg_20325,
                                                         &kernel_arg_20326,
                                                         &kernel_arg_20327,
                                                         &kernel_arg_20328,
                                                         &kernel_arg_20329,
                                                         &kernel_arg_20330,
                                                         &kernel_arg_20331,
                                                         &kernel_arg_20332,
                                                         &kernel_arg_20333,
                                                         &kernel_arg_20334,
                                                         &kernel_arg_20335,
                                                         &kernel_arg_20336,
                                                         &kernel_arg_20337,
                                                         &kernel_arg_20338,
                                                         &kernel_arg_20339};
                            int64_t time_start_20320 = 0, time_end_20321 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "sortBag.segscan_17649",
                                        (long) sdiv_up64(b_16351 * g_16352,
                                                         segscan_group_sizze_17639 *
                                                         (int64_t) 3), (long) 1,
                                        (long) 1,
                                        (long) segscan_group_sizze_17639,
                                        (long) 1, (long) 1, (int) (0 +
                                                                   (shared_sizze_20322 +
                                                                    (8 -
                                                                     shared_sizze_20322 %
                                                                     8) % 8)));
                                time_start_20320 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->sortBagzisegscan_17649_runs,
                                                          &ctx->sortBagzisegscan_17649_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegscan_17649,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  segscan_group_sizze_17639,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20322 +
                                                                   (8 -
                                                                    shared_sizze_20322 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20319,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20321 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "sortBag.segscan_17649",
                                        time_end_20321 - time_start_20320);
                            }
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t virt_num_groups_20007 =
                            sext_i64_i32(sdiv_up64(b_16351 * g_16352,
                                                   segmap_group_sizze_17712));
                    CUdeviceptr kernel_arg_20343 = mem_param_19290.mem;
                    CUdeviceptr kernel_arg_20344 = mem_param_19298.mem;
                    CUdeviceptr kernel_arg_20345 = mem_19306.mem;
                    CUdeviceptr kernel_arg_20346 = mem_19310.mem;
                    CUdeviceptr kernel_arg_20347 = mem_19347.mem;
                    CUdeviceptr kernel_arg_20348 = mem_19351.mem;
                    CUdeviceptr kernel_arg_20349 = mem_19355.mem;
                    CUdeviceptr kernel_arg_20350 = mem_19359.mem;
                    CUdeviceptr kernel_arg_20351 = mem_19363.mem;
                    
                    if ((((((1 && segmap_usable_groups_17713 != 0) && 1 != 0) &&
                           1 != 0) && segmap_group_sizze_17712 != 0) && 1 !=
                         0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = segmap_usable_groups_17713;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20340[] = {&ctx->global_failure,
                                                     &b_16351, &g_16352,
                                                     &i_16359,
                                                     &kernel_arg_20343,
                                                     &kernel_arg_20344,
                                                     &kernel_arg_20345,
                                                     &kernel_arg_20346,
                                                     &kernel_arg_20347,
                                                     &kernel_arg_20348,
                                                     &kernel_arg_20349,
                                                     &kernel_arg_20350,
                                                     &kernel_arg_20351};
                        int64_t time_start_20341 = 0, time_end_20342 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBag.segmap_17718",
                                    (long) segmap_usable_groups_17713, (long) 1,
                                    (long) 1, (long) segmap_group_sizze_17712,
                                    (long) 1, (long) 1, (int) 0);
                            time_start_20341 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagzisegmap_17718_runs,
                                                      &ctx->sortBagzisegmap_17718_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17718,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              segmap_group_sizze_17712,
                                                              1, 1, 0, NULL,
                                                              kernel_args_20340,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20342 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBag.segmap_17718", time_end_20342 -
                                    time_start_20341);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_unref_device(ctx, &mem_19347, "mem_19347") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19351, "mem_19351") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19355, "mem_19355") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19359, "mem_19359") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19363, "mem_19363") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19366, &mem_19306,
                                            "mem_19306") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19365, &mem_19310,
                                            "mem_19310") != 0)
                        return 1;
                }
                if (memblock_unref_device(ctx, &mem_19306, "mem_19306") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_19310, "mem_19310") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19690,
                                        &ext_mem_19366, "ext_mem_19366") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19691,
                                        &ext_mem_19365, "ext_mem_19365") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19290,
                                        &mem_param_tmp_19690,
                                        "mem_param_tmp_19690") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19298,
                                        &mem_param_tmp_19691,
                                        "mem_param_tmp_19691") != 0)
                    return 1;
            }
            if (memblock_set_device(ctx, &ext_mem_19372, &mem_param_19290,
                                    "mem_param_19290") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19371, &mem_param_19298,
                                    "mem_param_19298") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19278, "mem_19278") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19282, "mem_19282") != 0)
                return 1;
            
            int64_t segmap_usable_groups_17754 = sdiv_up64(nest_sizze_17511,
                                                           segmap_group_sizze_17753);
            
            if (memblock_alloc_device(ctx, &mem_19391, bytes_19400,
                                      "mem_19391")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19395, bytes_19400,
                                      "mem_19395")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_20019 = sext_i64_i32(sdiv_up64(b_16351 *
                                                                   g_16352,
                                                                   segmap_group_sizze_17753));
            CUdeviceptr kernel_arg_20355 = values_mem_19006.mem;
            CUdeviceptr kernel_arg_20356 = mem_19274.mem;
            CUdeviceptr kernel_arg_20357 = ext_mem_19371.mem;
            CUdeviceptr kernel_arg_20358 = mem_19391.mem;
            CUdeviceptr kernel_arg_20359 = mem_19395.mem;
            
            if ((((((1 && segmap_usable_groups_17754 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_17753 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_17754;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20352[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &b_16351, &g_16352,
                                             &kernel_arg_20355,
                                             &kernel_arg_20356,
                                             &kernel_arg_20357,
                                             &kernel_arg_20358,
                                             &kernel_arg_20359};
                int64_t time_start_20353 = 0, time_end_20354 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_17759",
                            (long) segmap_usable_groups_17754, (long) 1,
                            (long) 1, (long) segmap_group_sizze_17753, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20353 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_17759_runs,
                                              &ctx->sortBagzisegmap_17759_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17759,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_17753,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20352, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20354 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_17759", time_end_20354 -
                            time_start_20353);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_19274, "mem_19274") != 0)
                return 1;
            if (memblock_unref_device(ctx, &ext_mem_19371, "ext_mem_19371") !=
                0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19397, &mem_19391,
                                    "mem_19391") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19396, &mem_19395,
                                    "mem_19395") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &ext_mem_19409, &ext_mem_19397,
                                "ext_mem_19397") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19408, &ext_mem_19396,
                                "ext_mem_19396") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_19009, "mem_19009") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19549, &ext_mem_19409,
                            "ext_mem_19409") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19550, &ext_mem_19408,
                            "ext_mem_19408") != 0)
        return 1;
    (*mem_out_p_20240).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20240, &mem_out_19549,
                            "mem_out_19549") != 0)
        return 1;
    (*mem_out_p_20241).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20241, &mem_out_19550,
                            "mem_out_19550") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19395, "mem_19395") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19391, "mem_19391") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19691,
                                  "mem_param_tmp_19691") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19690,
                                  "mem_param_tmp_19690") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19756,
                                  "incprefixes_mem_19756") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19754,
                                  "aggregates_mem_19754") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19752,
                                  "incprefixes_mem_19752") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19750,
                                  "aggregates_mem_19750") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19748,
                                  "incprefixes_mem_19748") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19746,
                                  "aggregates_mem_19746") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19744,
                                  "incprefixes_mem_19744") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19742,
                                  "aggregates_mem_19742") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_19740,
                                  "status_flags_mem_19740") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19363, "mem_19363") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19359, "mem_19359") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19355, "mem_19355") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19351, "mem_19351") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19347, "mem_19347") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19342, "mem_19342") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19338, "mem_19338") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19365, "ext_mem_19365") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19366, "ext_mem_19366") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19310, "mem_19310") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19306, "mem_19306") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19298, "mem_param_19298") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19290, "mem_param_19290") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19371, "ext_mem_19371") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19372, "ext_mem_19372") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19282, "mem_19282") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19278, "mem_19278") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19274, "mem_19274") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19490, "color_19490") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19486, "color_19486") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19269, "mem_19269") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19265, "mem_19265") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19396, "ext_mem_19396") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19397, "ext_mem_19397") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19406, "mem_19406") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19401, "mem_19401") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19484, "color_19484") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19483, "color_19483") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19482, "color_19482") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19481, "color_19481") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19480, "color_19480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19479, "color_19479") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19478, "color_19478") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19477, "color_19477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19476, "color_19476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19475, "color_19475") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19474, "color_19474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19194, "mem_19194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19191, "mem_19191") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19015, "mem_19015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19012, "mem_19012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19408, "ext_mem_19408") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19409, "ext_mem_19409") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19550, "mem_out_19550") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19549, "mem_out_19549") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                          struct memblock_device *mem_out_p_20360,
                                          struct memblock_device *mem_out_p_20361,
                                          struct memblock_device *mem_out_p_20362,
                                          struct memblock_device *mem_out_p_20363,
                                          struct memblock_device keys_mem_19005,
                                          struct memblock_device values_mem_19006,
                                          int64_t b_16497, int64_t g_16498)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19439;
    
    mem_19439.references = NULL;
    
    struct memblock_device segred_tmp_mem_20152;
    
    segred_tmp_mem_20152.references = NULL;
    
    struct memblock_device mem_19435;
    
    mem_19435.references = NULL;
    
    struct memblock_device mem_19431;
    
    mem_19431.references = NULL;
    
    struct memblock_device mem_19428;
    
    mem_19428.references = NULL;
    
    struct memblock_device ext_mem_19440;
    
    ext_mem_19440.references = NULL;
    
    struct memblock_device mem_19408;
    
    mem_19408.references = NULL;
    
    struct memblock_device segred_tmp_mem_20060;
    
    segred_tmp_mem_20060.references = NULL;
    
    struct memblock_device mem_19404;
    
    mem_19404.references = NULL;
    
    struct memblock_device mem_19400;
    
    mem_19400.references = NULL;
    
    struct memblock_device mem_19396;
    
    mem_19396.references = NULL;
    
    struct memblock_device mem_param_tmp_19699;
    
    mem_param_tmp_19699.references = NULL;
    
    struct memblock_device mem_param_tmp_19698;
    
    mem_param_tmp_19698.references = NULL;
    
    struct memblock_device incprefixes_mem_19764;
    
    incprefixes_mem_19764.references = NULL;
    
    struct memblock_device aggregates_mem_19762;
    
    aggregates_mem_19762.references = NULL;
    
    struct memblock_device incprefixes_mem_19760;
    
    incprefixes_mem_19760.references = NULL;
    
    struct memblock_device aggregates_mem_19758;
    
    aggregates_mem_19758.references = NULL;
    
    struct memblock_device incprefixes_mem_19756;
    
    incprefixes_mem_19756.references = NULL;
    
    struct memblock_device aggregates_mem_19754;
    
    aggregates_mem_19754.references = NULL;
    
    struct memblock_device incprefixes_mem_19752;
    
    incprefixes_mem_19752.references = NULL;
    
    struct memblock_device aggregates_mem_19750;
    
    aggregates_mem_19750.references = NULL;
    
    struct memblock_device status_flags_mem_19748;
    
    status_flags_mem_19748.references = NULL;
    
    struct memblock_device mem_19369;
    
    mem_19369.references = NULL;
    
    struct memblock_device mem_19365;
    
    mem_19365.references = NULL;
    
    struct memblock_device mem_19361;
    
    mem_19361.references = NULL;
    
    struct memblock_device mem_19357;
    
    mem_19357.references = NULL;
    
    struct memblock_device mem_19353;
    
    mem_19353.references = NULL;
    
    struct memblock_device mem_19348;
    
    mem_19348.references = NULL;
    
    struct memblock_device mem_19344;
    
    mem_19344.references = NULL;
    
    struct memblock_device ext_mem_19371;
    
    ext_mem_19371.references = NULL;
    
    struct memblock_device ext_mem_19372;
    
    ext_mem_19372.references = NULL;
    
    struct memblock_device mem_19316;
    
    mem_19316.references = NULL;
    
    struct memblock_device mem_19312;
    
    mem_19312.references = NULL;
    
    struct memblock_device mem_param_19304;
    
    mem_param_19304.references = NULL;
    
    struct memblock_device mem_param_19296;
    
    mem_param_19296.references = NULL;
    
    struct memblock_device ext_mem_19377;
    
    ext_mem_19377.references = NULL;
    
    struct memblock_device ext_mem_19378;
    
    ext_mem_19378.references = NULL;
    
    struct memblock_device mem_19288;
    
    mem_19288.references = NULL;
    
    struct memblock_device mem_19284;
    
    mem_19284.references = NULL;
    
    struct memblock_device mem_19280;
    
    mem_19280.references = NULL;
    
    struct memblock_device color_19490;
    
    color_19490.references = NULL;
    
    struct memblock_device color_19486;
    
    color_19486.references = NULL;
    
    struct memblock_device mem_19275;
    
    mem_19275.references = NULL;
    
    struct memblock_device mem_19271;
    
    mem_19271.references = NULL;
    
    struct memblock_device mem_19267;
    
    mem_19267.references = NULL;
    
    struct memblock_device ext_mem_19409;
    
    ext_mem_19409.references = NULL;
    
    struct memblock_device ext_mem_19410;
    
    ext_mem_19410.references = NULL;
    
    struct memblock_device ext_mem_19411;
    
    ext_mem_19411.references = NULL;
    
    struct memblock_device mem_19420;
    
    mem_19420.references = NULL;
    
    struct memblock_device mem_19415;
    
    mem_19415.references = NULL;
    
    struct memblock_device color_19484;
    
    color_19484.references = NULL;
    
    struct memblock_device color_19483;
    
    color_19483.references = NULL;
    
    struct memblock_device color_19482;
    
    color_19482.references = NULL;
    
    struct memblock_device color_19481;
    
    color_19481.references = NULL;
    
    struct memblock_device color_19480;
    
    color_19480.references = NULL;
    
    struct memblock_device color_19479;
    
    color_19479.references = NULL;
    
    struct memblock_device color_19478;
    
    color_19478.references = NULL;
    
    struct memblock_device color_19477;
    
    color_19477.references = NULL;
    
    struct memblock_device color_19476;
    
    color_19476.references = NULL;
    
    struct memblock_device color_19475;
    
    color_19475.references = NULL;
    
    struct memblock_device color_19474;
    
    color_19474.references = NULL;
    
    struct memblock_device mem_19197;
    
    mem_19197.references = NULL;
    
    struct memblock_device mem_19194;
    
    mem_19194.references = NULL;
    
    struct memblock_device mem_19191;
    
    mem_19191.references = NULL;
    
    struct memblock_device mem_19015;
    
    mem_19015.references = NULL;
    
    struct memblock_device mem_19012;
    
    mem_19012.references = NULL;
    
    struct memblock_device ext_mem_19422;
    
    ext_mem_19422.references = NULL;
    
    struct memblock_device ext_mem_19423;
    
    ext_mem_19423.references = NULL;
    
    struct memblock_device ext_mem_19424;
    
    ext_mem_19424.references = NULL;
    
    struct memblock_device mem_19009;
    
    mem_19009.references = NULL;
    
    struct memblock_device mem_out_19552;
    
    mem_out_19552.references = NULL;
    
    struct memblock_device mem_out_19551;
    
    mem_out_19551.references = NULL;
    
    struct memblock_device mem_out_19550;
    
    mem_out_19550.references = NULL;
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    
    bool cond_16501 = g_16498 == (int64_t) 0;
    int32_t iters_16502;
    
    if (cond_16501) {
        iters_16502 = 0;
    } else {
        iters_16502 = 16;
    }
    
    int64_t binop_y_19007 = (int64_t) 8 * g_16498;
    int64_t bytes_19008 = smax64((int64_t) 0, binop_y_19007);
    
    if (memblock_alloc_device(ctx, &mem_19009, bytes_19008, "mem_19009")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_19009, g_16498, (int64_t) 0,
                                 (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool loop_nonempty_16504 = slt32(0, iters_16502);
    int64_t i_16505 = sub64(g_16498, (int64_t) 1);
    bool x_16506 = sle64((int64_t) 0, i_16505);
    bool y_16507 = slt64(i_16505, g_16498);
    bool bounds_check_16508 = x_16506 && y_16507;
    bool loop_not_taken_16509 = !loop_nonempty_16504;
    bool protect_assert_disj_16510 = bounds_check_16508 || loop_not_taken_16509;
    bool index_certs_16511;
    
    if (!protect_assert_disj_16510) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_16505,
                               "] out of bounds for array of shape [",
                               (long long) g_16498, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  fut/util/radix_sort.fut:25:24-35\n   #2  fut/util/radix_sort.fut:53:31-62\n   #3  fut/util/radix_sort.fut:115:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  fut/util/radix_sort.fut:65:3-67:47\n   #6  fut/util/radix_sort.fut:121:3-57\n   #7  fut/entries.fut:29:16-88\n   #8  fut/entries.fut:24:1-34:52\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    float i64_res_16512 = sitofp_i64_f32(g_16498);
    bool suff_outer_par_17794;
    
    suff_outer_par_17794 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_0 <= b_16497;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_outer_par_0", (long) b_16497,
                suff_outer_par_17794 ? "true" : "false");
    
    int64_t max_group_sizze_18032;
    
    max_group_sizze_18032 = ctx->cuda.max_block_size;
    
    bool fits_18033 = sle64(g_16498, max_group_sizze_18032);
    bool suff_intra_par_18031;
    
    suff_intra_par_18031 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_1 <= g_16498;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_intra_par_1", (long) g_16498,
                suff_intra_par_18031 ? "true" : "false");
    
    bool intra_suff_and_fits_18034 = suff_intra_par_18031 && fits_18033;
    int64_t segmap_group_sizze_17914;
    
    segmap_group_sizze_17914 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_17798;
    
    int64_t num_groups_17915;
    int32_t max_num_groups_19563;
    
    max_num_groups_19563 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_num_groups_17800;
    num_groups_17915 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(b_16497,
                                                            segmap_group_sizze_17914),
                                                  sext_i32_i64(max_num_groups_19563))));
    
    int64_t nest_sizze_18581 = b_16497 * g_16498;
    int64_t segmap_group_sizze_18582;
    
    segmap_group_sizze_18582 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18558;
    
    bool suff_intra_par_18609;
    
    suff_intra_par_18609 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_2 <= g_16498;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_intra_par_2", (long) g_16498,
                suff_intra_par_18609 ? "true" : "false");
    
    bool intra_suff_and_fits_18610 = fits_18033 && suff_intra_par_18609;
    int64_t segscan_group_sizze_18709;
    
    segscan_group_sizze_18709 =
        *ctx->tuning_params.sortBagAndDoStuffzisegscan_group_sizze_18379;
    
    int64_t num_groups_18710;
    int32_t max_num_groups_19564;
    
    max_num_groups_19564 =
        *ctx->tuning_params.sortBagAndDoStuffzisegscan_num_groups_18381;
    num_groups_18710 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18581,
                                                            segscan_group_sizze_18709),
                                                  sext_i32_i64(max_num_groups_19564))));
    
    int64_t segmap_group_sizze_18782;
    
    segmap_group_sizze_18782 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18330;
    
    int64_t segred_group_sizze_18819;
    
    segred_group_sizze_18819 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18174;
    
    int64_t num_groups_18820;
    int32_t max_num_groups_19565;
    
    max_num_groups_19565 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18176;
    num_groups_18820 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18581,
                                                            segred_group_sizze_18819),
                                                  sext_i32_i64(max_num_groups_19565))));
    
    int64_t segmap_group_sizze_18842;
    
    segmap_group_sizze_18842 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18162;
    
    int64_t segmap_usable_groups_18783 = sdiv_up_safe64(nest_sizze_18581,
                                                        segmap_group_sizze_18782);
    int64_t bytes_19011 = (int64_t) 4 * nest_sizze_18581;
    int64_t binop_y_19189 = (int64_t) 4 * b_16497;
    int64_t bytes_19190 = smax64((int64_t) 0, binop_y_19189);
    int64_t binop_y_19017 = (int64_t) 4 * g_16498;
    int64_t bytes_19018 = smax64((int64_t) 0, binop_y_19017);
    int64_t bytes_19414 = smax64((int64_t) 0, bytes_19011);
    int64_t binop_y_19282 = (int64_t) 8 * nest_sizze_18581;
    int64_t bytes_19283 = smax64((int64_t) 0, binop_y_19282);
    int64_t num_bytes_19454 = (int64_t) 4 * g_16498;
    int64_t num_bytes_19458 = (int64_t) 8 * g_16498;
    int64_t num_bytes_19464 = (int64_t) 4 * g_16498;
    int64_t num_bytes_19468 = (int64_t) 8 * g_16498;
    int64_t maxSubHelper_19485 = umax64(bytes_19008, bytes_19018);
    int64_t num_threads_19525 = segmap_group_sizze_17914 * num_groups_17915;
    int64_t total_sizze_19526 = num_bytes_19458 * num_threads_19525;
    int64_t total_sizze_19527 = num_bytes_19454 * num_threads_19525;
    int64_t total_sizze_19528 = bytes_19018 * num_threads_19525;
    int64_t total_sizze_19529 = bytes_19018 * num_threads_19525;
    int64_t total_sizze_19530 = bytes_19008 * num_threads_19525;
    int64_t total_sizze_19531 = bytes_19018 * num_threads_19525;
    int64_t total_sizze_19532 = bytes_19008 * num_threads_19525;
    int64_t total_sizze_19533 = bytes_19008 * num_threads_19525;
    int64_t total_sizze_19534 = bytes_19008 * num_threads_19525;
    int64_t total_sizze_19535 = bytes_19008 * num_threads_19525;
    int64_t total_sizze_19536 = bytes_19018 * num_threads_19525;
    int64_t total_sizze_19538 = b_16497 * num_bytes_19468;
    int64_t total_sizze_19539 = b_16497 * bytes_19008;
    int32_t local_memory_capacity_20107;
    
    local_memory_capacity_20107 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20107)) &&
        suff_outer_par_17794) {
        if (memblock_alloc_device(ctx, &mem_19012, bytes_19011, "mem_19012")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19012, (int64_t) 0,
                                                  keys_mem_19005, (int64_t) 0,
                                                  (int64_t) 1, g_16498,
                                                  b_16497) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19015, bytes_19011, "mem_19015")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19015, (int64_t) 0,
                                                  values_mem_19006, (int64_t) 0,
                                                  (int64_t) 1, g_16498,
                                                  b_16497) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19191, bytes_19190, "mem_19191")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19194, bytes_19011, "mem_19194")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19197, bytes_19011, "mem_19197")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19474, total_sizze_19526,
                                  "color_19474")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19475, total_sizze_19527,
                                  "color_19475")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19476, total_sizze_19528,
                                  "color_19476")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19477, total_sizze_19529,
                                  "color_19477")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19478, total_sizze_19530,
                                  "color_19478")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19479, total_sizze_19531,
                                  "color_19479")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19480, total_sizze_19532,
                                  "color_19480")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19481, total_sizze_19533,
                                  "color_19481")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19482, total_sizze_19534,
                                  "color_19482")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19483, total_sizze_19535,
                                  "color_19483")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19484, total_sizze_19536,
                                  "color_19484")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_19566 = sext_i64_i32(sdiv_up64(b_16497,
                                                               segmap_group_sizze_17914));
        CUdeviceptr kernel_arg_20367 = mem_19012.mem;
        CUdeviceptr kernel_arg_20368 = mem_19015.mem;
        CUdeviceptr kernel_arg_20369 = mem_19191.mem;
        CUdeviceptr kernel_arg_20370 = mem_19194.mem;
        CUdeviceptr kernel_arg_20371 = mem_19197.mem;
        CUdeviceptr kernel_arg_20372 = color_19474.mem;
        CUdeviceptr kernel_arg_20373 = color_19475.mem;
        CUdeviceptr kernel_arg_20374 = color_19476.mem;
        CUdeviceptr kernel_arg_20375 = color_19477.mem;
        CUdeviceptr kernel_arg_20376 = color_19478.mem;
        CUdeviceptr kernel_arg_20377 = color_19479.mem;
        CUdeviceptr kernel_arg_20378 = color_19480.mem;
        CUdeviceptr kernel_arg_20379 = color_19481.mem;
        CUdeviceptr kernel_arg_20380 = color_19482.mem;
        CUdeviceptr kernel_arg_20381 = color_19483.mem;
        CUdeviceptr kernel_arg_20382 = color_19484.mem;
        
        if ((((((1 && num_groups_17915 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_17914 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_17915;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20364[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args, &b_16497,
                                         &g_16498, &iters_16502, &i_16505,
                                         &i64_res_16512, &num_groups_17915,
                                         &num_threads_19525,
                                         &virt_num_groups_19566,
                                         &kernel_arg_20367, &kernel_arg_20368,
                                         &kernel_arg_20369, &kernel_arg_20370,
                                         &kernel_arg_20371, &kernel_arg_20372,
                                         &kernel_arg_20373, &kernel_arg_20374,
                                         &kernel_arg_20375, &kernel_arg_20376,
                                         &kernel_arg_20377, &kernel_arg_20378,
                                         &kernel_arg_20379, &kernel_arg_20380,
                                         &kernel_arg_20381, &kernel_arg_20382};
            int64_t time_start_20365 = 0, time_end_20366 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_17921",
                        (long) num_groups_17915, (long) 1, (long) 1,
                        (long) segmap_group_sizze_17914, (long) 1, (long) 1,
                        (int) 0);
                time_start_20365 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_17921_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_17921_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_17921,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_17914, 1,
                                                  1, 0, NULL, kernel_args_20364,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20366 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_17921", time_end_20366 -
                        time_start_20365);
            }
        }
        ctx->failure_is_an_option = 1;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19012, "mem_19012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19015, "mem_19015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19474, "color_19474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19475, "color_19475") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19476, "color_19476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19477, "color_19477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19478, "color_19478") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19479, "color_19479") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19480, "color_19480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19481, "color_19481") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19482, "color_19482") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19483, "color_19483") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19484, "color_19484") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19415, bytes_19414, "mem_19415")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19415, (int64_t) 0,
                                                  mem_19194, (int64_t) 0,
                                                  (int64_t) 1, b_16497,
                                                  g_16498) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19194, "mem_19194") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19420, bytes_19414, "mem_19420")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19420, (int64_t) 0,
                                                  mem_19197, (int64_t) 0,
                                                  (int64_t) 1, b_16497,
                                                  g_16498) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19197, "mem_19197") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19424, &mem_19191, "mem_19191") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19423, &mem_19415, "mem_19415") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19422, &mem_19420, "mem_19420") !=
            0)
            return 1;
    } else {
        int32_t local_memory_capacity_20106;
        
        local_memory_capacity_20106 = ctx->cuda.max_shared_memory;
        if (sle64(num_bytes_19464 + srem64((int64_t) 8 - srem64(num_bytes_19464,
                                                                (int64_t) 8),
                                           (int64_t) 8) + (maxSubHelper_19485 +
                                                           srem64((int64_t) 8 -
                                                                  srem64(maxSubHelper_19485,
                                                                         (int64_t) 8),
                                                                  (int64_t) 8)) +
                  (bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19018 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19018,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19008 + srem64((int64_t) 8 - srem64(bytes_19008,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19008 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19008,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19008 + srem64((int64_t) 8 - srem64(bytes_19008,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19008 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19008,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + ((int64_t) 4 * g_16498 +
                                                         srem64((int64_t) 8 -
                                                                srem64((int64_t) 4 *
                                                                       g_16498,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)),
                  sext_i32_i64(local_memory_capacity_20106)) &&
            intra_suff_and_fits_18034) {
            if (memblock_alloc_device(ctx, &mem_19267, bytes_19190,
                                      "mem_19267")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19271, bytes_19414,
                                      "mem_19271")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19275, bytes_19414,
                                      "mem_19275")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19486, total_sizze_19538,
                                      "color_19486")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19490, total_sizze_19539,
                                      "color_19490")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t num_chunks_19620 = sext_i64_i32(sdiv_up64(g_16498,
                                                              g_16498));
            int32_t virt_num_groups_19621 = sext_i64_i32(b_16497);
            unsigned int shared_sizze_20386 = (int64_t) 4 * g_16498;
            unsigned int shared_sizze_20388 = bytes_19018;
            unsigned int shared_sizze_20390 = bytes_19008;
            unsigned int shared_sizze_20392 = bytes_19008;
            unsigned int shared_sizze_20394 = bytes_19008;
            unsigned int shared_sizze_20396 = bytes_19008;
            unsigned int shared_sizze_20398 = bytes_19018;
            unsigned int shared_sizze_20400 = bytes_19018;
            unsigned int shared_sizze_20402 = maxSubHelper_19485;
            unsigned int shared_sizze_20404 = num_bytes_19464;
            CUdeviceptr kernel_arg_20406 = keys_mem_19005.mem;
            CUdeviceptr kernel_arg_20407 = values_mem_19006.mem;
            CUdeviceptr kernel_arg_20408 = mem_19267.mem;
            CUdeviceptr kernel_arg_20409 = mem_19271.mem;
            CUdeviceptr kernel_arg_20410 = mem_19275.mem;
            CUdeviceptr kernel_arg_20411 = color_19486.mem;
            CUdeviceptr kernel_arg_20412 = color_19490.mem;
            unsigned int shared_offset_20387 = 0;
            unsigned int shared_offset_20389 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8);
            unsigned int shared_offset_20391 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8);
            unsigned int shared_offset_20393 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8);
            unsigned int shared_offset_20395 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8);
            unsigned int shared_offset_20397 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8) +
                         (shared_sizze_20394 + (8 - shared_sizze_20394 % 8) %
                          8);
            unsigned int shared_offset_20399 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8) +
                         (shared_sizze_20394 + (8 - shared_sizze_20394 % 8) %
                          8) + (shared_sizze_20396 + (8 - shared_sizze_20396 %
                                                      8) % 8);
            unsigned int shared_offset_20401 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8) +
                         (shared_sizze_20394 + (8 - shared_sizze_20394 % 8) %
                          8) + (shared_sizze_20396 + (8 - shared_sizze_20396 %
                                                      8) % 8) +
                         (shared_sizze_20398 + (8 - shared_sizze_20398 % 8) %
                          8);
            unsigned int shared_offset_20403 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8) +
                         (shared_sizze_20394 + (8 - shared_sizze_20394 % 8) %
                          8) + (shared_sizze_20396 + (8 - shared_sizze_20396 %
                                                      8) % 8) +
                         (shared_sizze_20398 + (8 - shared_sizze_20398 % 8) %
                          8) + (shared_sizze_20400 + (8 - shared_sizze_20400 %
                                                      8) % 8);
            unsigned int shared_offset_20405 = 0 + (shared_sizze_20386 + (8 -
                                                                          shared_sizze_20386 %
                                                                          8) %
                                                    8) + (shared_sizze_20388 +
                                                          (8 -
                                                           shared_sizze_20388 %
                                                           8) % 8) +
                         (shared_sizze_20390 + (8 - shared_sizze_20390 % 8) %
                          8) + (shared_sizze_20392 + (8 - shared_sizze_20392 %
                                                      8) % 8) +
                         (shared_sizze_20394 + (8 - shared_sizze_20394 % 8) %
                          8) + (shared_sizze_20396 + (8 - shared_sizze_20396 %
                                                      8) % 8) +
                         (shared_sizze_20398 + (8 - shared_sizze_20398 % 8) %
                          8) + (shared_sizze_20400 + (8 - shared_sizze_20400 %
                                                      8) % 8) +
                         (shared_sizze_20402 + (8 - shared_sizze_20402 % 8) %
                          8);
            
            if ((((((1 && b_16497 != 0) && 1 != 0) && 1 != 0) && g_16498 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = b_16497;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20383[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &shared_offset_20387,
                                             &shared_offset_20389,
                                             &shared_offset_20391,
                                             &shared_offset_20393,
                                             &shared_offset_20395,
                                             &shared_offset_20397,
                                             &shared_offset_20399,
                                             &shared_offset_20401,
                                             &shared_offset_20403,
                                             &shared_offset_20405, &b_16497,
                                             &g_16498, &iters_16502, &i_16505,
                                             &i64_res_16512, &kernel_arg_20406,
                                             &kernel_arg_20407,
                                             &kernel_arg_20408,
                                             &kernel_arg_20409,
                                             &kernel_arg_20410,
                                             &kernel_arg_20411,
                                             &kernel_arg_20412};
                int64_t time_start_20384 = 0, time_end_20385 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_intragroup_18039",
                            (long) b_16497, (long) 1, (long) 1, (long) g_16498,
                            (long) 1, (long) 1, (int) (0 + (shared_sizze_20386 +
                                                            (8 -
                                                             shared_sizze_20386 %
                                                             8) % 8) +
                                                       (shared_sizze_20388 +
                                                        (8 -
                                                         shared_sizze_20388 %
                                                         8) % 8) +
                                                       (shared_sizze_20390 +
                                                        (8 -
                                                         shared_sizze_20390 %
                                                         8) % 8) +
                                                       (shared_sizze_20392 +
                                                        (8 -
                                                         shared_sizze_20392 %
                                                         8) % 8) +
                                                       (shared_sizze_20394 +
                                                        (8 -
                                                         shared_sizze_20394 %
                                                         8) % 8) +
                                                       (shared_sizze_20396 +
                                                        (8 -
                                                         shared_sizze_20396 %
                                                         8) % 8) +
                                                       (shared_sizze_20398 +
                                                        (8 -
                                                         shared_sizze_20398 %
                                                         8) % 8) +
                                                       (shared_sizze_20400 +
                                                        (8 -
                                                         shared_sizze_20400 %
                                                         8) % 8) +
                                                       (shared_sizze_20402 +
                                                        (8 -
                                                         shared_sizze_20402 %
                                                         8) % 8) +
                                                       (shared_sizze_20404 +
                                                        (8 -
                                                         shared_sizze_20404 %
                                                         8) % 8)));
                    time_start_20384 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_intragroup_18039_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_intragroup_18039_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_intragroup_18039,
                                                      grid[0], grid[1], grid[2],
                                                      g_16498, 1, 1, 0 +
                                                      (shared_sizze_20386 + (8 -
                                                                             shared_sizze_20386 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20388 + (8 -
                                                                             shared_sizze_20388 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20390 + (8 -
                                                                             shared_sizze_20390 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20392 + (8 -
                                                                             shared_sizze_20392 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20394 + (8 -
                                                                             shared_sizze_20394 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20396 + (8 -
                                                                             shared_sizze_20396 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20398 + (8 -
                                                                             shared_sizze_20398 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20400 + (8 -
                                                                             shared_sizze_20400 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20402 + (8 -
                                                                             shared_sizze_20402 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20404 + (8 -
                                                                             shared_sizze_20404 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20383, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20385 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_intragroup_18039",
                            time_end_20385 - time_start_20384);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &color_19486, "color_19486") != 0)
                return 1;
            if (memblock_unref_device(ctx, &color_19490, "color_19490") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19411, &mem_19267,
                                    "mem_19267") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19410, &mem_19271,
                                    "mem_19271") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19409, &mem_19275,
                                    "mem_19275") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_18583 = sdiv_up64(nest_sizze_18581,
                                                           segmap_group_sizze_18582);
            
            if (memblock_alloc_device(ctx, &mem_19280, bytes_19414,
                                      "mem_19280")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_19675 = sext_i64_i32(sdiv_up64(b_16497 *
                                                                   g_16498,
                                                                   segmap_group_sizze_18582));
            CUdeviceptr kernel_arg_20416 = keys_mem_19005.mem;
            CUdeviceptr kernel_arg_20417 = mem_19280.mem;
            
            if ((((((1 && segmap_usable_groups_18583 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_18582 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_18583;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20413[] = {&ctx->global_failure, &b_16497,
                                             &g_16498, &kernel_arg_20416,
                                             &kernel_arg_20417};
                int64_t time_start_20414 = 0, time_end_20415 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_18587",
                            (long) segmap_usable_groups_18583, (long) 1,
                            (long) 1, (long) segmap_group_sizze_18582, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20414 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_18587_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_18587_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18587,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_18582,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20413, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20415 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_18587", time_end_20415 -
                            time_start_20414);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_alloc_device(ctx, &mem_19284, bytes_19283,
                                      "mem_19284")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_19689;
            
            group_sizze_19689 =
                *ctx->tuning_params.sortBagAndDoStuffzigroup_sizze_19689;
            
            int64_t num_groups_19690 = sdiv_up64(b_16497 * g_16498,
                                                 group_sizze_19689);
            CUdeviceptr kernel_arg_20421 = mem_19009.mem;
            CUdeviceptr kernel_arg_20422 = mem_19284.mem;
            
            if ((((((1 && num_groups_19690 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_19689 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_19690;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20418[] = {&b_16497, &g_16498,
                                             &kernel_arg_20421,
                                             &kernel_arg_20422};
                int64_t time_start_20419 = 0, time_end_20420 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.replicate_19686",
                            (long) num_groups_19690, (long) 1, (long) 1,
                            (long) group_sizze_19689, (long) 1, (long) 1,
                            (int) 0);
                    time_start_20419 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzireplicate_19686_runs,
                                              &ctx->sortBagAndDoStuffzireplicate_19686_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzireplicate_19686,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_19689, 1, 1,
                                                      0, NULL,
                                                      kernel_args_20418, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20420 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.replicate_19686",
                            time_end_20420 - time_start_20419);
                }
            }
            if (memblock_alloc_device(ctx, &mem_19288, bytes_19414,
                                      "mem_19288")) {
                err = 1;
                goto cleanup;
            }
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19288.mem + (int64_t) 0,
                                                mem_19280.mem + (int64_t) 0,
                                                b_16497 * g_16498 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (memblock_set_device(ctx, &mem_param_19296, &mem_19288,
                                    "mem_19288") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_19304, &mem_19284,
                                    "mem_19284") != 0)
                return 1;
            for (int32_t i_18595 = 0; i_18595 < iters_16502; i_18595++) {
                if (memblock_alloc_device(ctx, &mem_19312, bytes_19414,
                                          "mem_19312")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19312.mem + (int64_t) 0,
                                                    mem_param_19296.mem +
                                                    (int64_t) 0, b_16497 *
                                                    g_16498 * (int64_t) 4));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (memblock_alloc_device(ctx, &mem_19316, bytes_19283,
                                          "mem_19316")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19316.mem + (int64_t) 0,
                                                    mem_param_19304.mem +
                                                    (int64_t) 0, b_16497 *
                                                    g_16498 * (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                
                int32_t defunc_2_radix_sort_step_arg_18600 = mul32(2, i_18595);
                int32_t defunc_0_get_bit_arg_18601 = add32(1,
                                                           defunc_2_radix_sort_step_arg_18600);
                bool cond_f_res_18602 = defunc_0_get_bit_arg_18601 == 31;
                bool cond_f_res_18603 = defunc_2_radix_sort_step_arg_18600 ==
                     31;
                int32_t local_memory_capacity_20026;
                
                local_memory_capacity_20026 = ctx->cuda.max_shared_memory;
                if (sle64(bytes_19018 + srem64((int64_t) 8 - srem64(bytes_19018,
                                                                    (int64_t) 8),
                                               (int64_t) 8) + (bytes_19008 +
                                                               srem64((int64_t) 8 -
                                                                      srem64(bytes_19008,
                                                                             (int64_t) 8),
                                                                      (int64_t) 8)) +
                          (bytes_19008 + srem64((int64_t) 8 -
                                                srem64(bytes_19008,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19008 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19008,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19008 + srem64((int64_t) 8 -
                                                srem64(bytes_19008,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19008 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19008,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19018 + srem64((int64_t) 8 -
                                                srem64(bytes_19018,
                                                       (int64_t) 8),
                                                (int64_t) 8)),
                          sext_i32_i64(local_memory_capacity_20026)) &&
                    intra_suff_and_fits_18610) {
                    if (memblock_alloc_device(ctx, &mem_19344, bytes_19414,
                                              "mem_19344")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19348, bytes_19283,
                                              "mem_19348")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t num_chunks_19702 = sext_i64_i32(sdiv_up64(g_16498,
                                                                      g_16498));
                    int32_t virt_num_groups_19703 = sext_i64_i32(b_16497);
                    unsigned int shared_sizze_20426 = bytes_19018;
                    unsigned int shared_sizze_20428 = bytes_19008;
                    unsigned int shared_sizze_20430 = bytes_19008;
                    unsigned int shared_sizze_20432 = bytes_19008;
                    unsigned int shared_sizze_20434 = bytes_19008;
                    unsigned int shared_sizze_20436 = bytes_19008;
                    unsigned int shared_sizze_20438 = bytes_19018;
                    CUdeviceptr kernel_arg_20440 = mem_param_19296.mem;
                    CUdeviceptr kernel_arg_20441 = mem_param_19304.mem;
                    CUdeviceptr kernel_arg_20442 = mem_19344.mem;
                    CUdeviceptr kernel_arg_20443 = mem_19348.mem;
                    unsigned int shared_offset_20427 = 0;
                    unsigned int shared_offset_20429 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8);
                    unsigned int shared_offset_20431 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8) +
                                 (shared_sizze_20428 + (8 - shared_sizze_20428 %
                                                        8) % 8);
                    unsigned int shared_offset_20433 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8) +
                                 (shared_sizze_20428 + (8 - shared_sizze_20428 %
                                                        8) % 8) +
                                 (shared_sizze_20430 + (8 - shared_sizze_20430 %
                                                        8) % 8);
                    unsigned int shared_offset_20435 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8) +
                                 (shared_sizze_20428 + (8 - shared_sizze_20428 %
                                                        8) % 8) +
                                 (shared_sizze_20430 + (8 - shared_sizze_20430 %
                                                        8) % 8) +
                                 (shared_sizze_20432 + (8 - shared_sizze_20432 %
                                                        8) % 8);
                    unsigned int shared_offset_20437 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8) +
                                 (shared_sizze_20428 + (8 - shared_sizze_20428 %
                                                        8) % 8) +
                                 (shared_sizze_20430 + (8 - shared_sizze_20430 %
                                                        8) % 8) +
                                 (shared_sizze_20432 + (8 - shared_sizze_20432 %
                                                        8) % 8) +
                                 (shared_sizze_20434 + (8 - shared_sizze_20434 %
                                                        8) % 8);
                    unsigned int shared_offset_20439 = 0 + (shared_sizze_20426 +
                                                            (8 -
                                                             shared_sizze_20426 %
                                                             8) % 8) +
                                 (shared_sizze_20428 + (8 - shared_sizze_20428 %
                                                        8) % 8) +
                                 (shared_sizze_20430 + (8 - shared_sizze_20430 %
                                                        8) % 8) +
                                 (shared_sizze_20432 + (8 - shared_sizze_20432 %
                                                        8) % 8) +
                                 (shared_sizze_20434 + (8 - shared_sizze_20434 %
                                                        8) % 8) +
                                 (shared_sizze_20436 + (8 - shared_sizze_20436 %
                                                        8) % 8);
                    
                    if ((((((1 && b_16497 != 0) && 1 != 0) && 1 != 0) &&
                          g_16498 != 0) && 1 != 0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = b_16497;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20423[] = {&ctx->global_failure,
                                                     &shared_offset_20427,
                                                     &shared_offset_20429,
                                                     &shared_offset_20431,
                                                     &shared_offset_20433,
                                                     &shared_offset_20435,
                                                     &shared_offset_20437,
                                                     &shared_offset_20439,
                                                     &b_16497, &g_16498,
                                                     &i_16505,
                                                     &defunc_2_radix_sort_step_arg_18600,
                                                     &defunc_0_get_bit_arg_18601,
                                                     &cond_f_res_18602,
                                                     &cond_f_res_18603,
                                                     &kernel_arg_20440,
                                                     &kernel_arg_20441,
                                                     &kernel_arg_20442,
                                                     &kernel_arg_20443};
                        int64_t time_start_20424 = 0, time_end_20425 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBagAndDoStuff.segmap_intragroup_18616",
                                    (long) b_16497, (long) 1, (long) 1,
                                    (long) g_16498, (long) 1, (long) 1,
                                    (int) (0 + (shared_sizze_20426 + (8 -
                                                                      shared_sizze_20426 %
                                                                      8) % 8) +
                                           (shared_sizze_20428 + (8 -
                                                                  shared_sizze_20428 %
                                                                  8) % 8) +
                                           (shared_sizze_20430 + (8 -
                                                                  shared_sizze_20430 %
                                                                  8) % 8) +
                                           (shared_sizze_20432 + (8 -
                                                                  shared_sizze_20432 %
                                                                  8) % 8) +
                                           (shared_sizze_20434 + (8 -
                                                                  shared_sizze_20434 %
                                                                  8) % 8) +
                                           (shared_sizze_20436 + (8 -
                                                                  shared_sizze_20436 %
                                                                  8) % 8) +
                                           (shared_sizze_20438 + (8 -
                                                                  shared_sizze_20438 %
                                                                  8) % 8)));
                            time_start_20424 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagAndDoStuffzisegmap_intragroup_18616_runs,
                                                      &ctx->sortBagAndDoStuffzisegmap_intragroup_18616_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_intragroup_18616,
                                                              grid[0], grid[1],
                                                              grid[2], g_16498,
                                                              1, 1, 0 +
                                                              (shared_sizze_20426 +
                                                               (8 -
                                                                shared_sizze_20426 %
                                                                8) % 8) +
                                                              (shared_sizze_20428 +
                                                               (8 -
                                                                shared_sizze_20428 %
                                                                8) % 8) +
                                                              (shared_sizze_20430 +
                                                               (8 -
                                                                shared_sizze_20430 %
                                                                8) % 8) +
                                                              (shared_sizze_20432 +
                                                               (8 -
                                                                shared_sizze_20432 %
                                                                8) % 8) +
                                                              (shared_sizze_20434 +
                                                               (8 -
                                                                shared_sizze_20434 %
                                                                8) % 8) +
                                                              (shared_sizze_20436 +
                                                               (8 -
                                                                shared_sizze_20436 %
                                                                8) % 8) +
                                                              (shared_sizze_20438 +
                                                               (8 -
                                                                shared_sizze_20438 %
                                                                8) % 8), NULL,
                                                              kernel_args_20423,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20425 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBagAndDoStuff.segmap_intragroup_18616",
                                    time_end_20425 - time_start_20424);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_set_device(ctx, &ext_mem_19372, &mem_19344,
                                            "mem_19344") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19371, &mem_19348,
                                            "mem_19348") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx, &mem_19353, bytes_19283,
                                              "mem_19353")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19357, bytes_19283,
                                              "mem_19357")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19361, bytes_19283,
                                              "mem_19361")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19365, bytes_19283,
                                              "mem_19365")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19369, bytes_19414,
                                              "mem_19369")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64((int64_t) 0, b_16497 * g_16498)) {
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegScan");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: number of elements processed sequentially per thread is m:",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: memory constraints is: ",
                                    (long long) 11, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: register constraints is: ",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: sumT' is: ", (long long) 8, '\n');
                        
                        int64_t numThreads_19744 = sdiv_up64(b_16497 * g_16498,
                                                             segscan_group_sizze_18709 *
                                                             (int64_t) 3) *
                                segscan_group_sizze_18709;
                        int64_t numGroups_19745 = sdiv_up64(b_16497 * g_16498,
                                                            segscan_group_sizze_18709 *
                                                            (int64_t) 3);
                        struct memblock_device
                        sortBagAndDoStuffziid_counter_mem_19746 =
                        ctx->sortBagAndDoStuffziid_counter_mem_19746;
                        
                        if (memblock_alloc_device(ctx, &status_flags_mem_19748,
                                                  numGroups_19745,
                                                  "status_flags_mem_19748")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19750,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "aggregates_mem_19750")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19752,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "incprefixes_mem_19752")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19754,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "aggregates_mem_19754")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19756,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "incprefixes_mem_19756")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19758,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "aggregates_mem_19758")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19760,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "incprefixes_mem_19760")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19762,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "aggregates_mem_19762")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19764,
                                                  (int64_t) 8 * numGroups_19745,
                                                  "incprefixes_mem_19764")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i8(ctx,
                                                         status_flags_mem_19748,
                                                         numGroups_19745,
                                                         (int8_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        unsigned int shared_sizze_20448 =
                                     smax64(smax64((int64_t) 1056,
                                                   sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                 segscan_group_sizze_18709,
                                                                                 (int64_t) 8) *
                                                                       (int64_t) 8 +
                                                                       (int64_t) 8 *
                                                                       segscan_group_sizze_18709,
                                                                       (int64_t) 8) *
                                                             (int64_t) 8 +
                                                             (int64_t) 8 *
                                                             segscan_group_sizze_18709,
                                                             (int64_t) 8) *
                                                   (int64_t) 8 + (int64_t) 8 *
                                                   segscan_group_sizze_18709),
                                            smax64(smax64(smax64((int64_t) 3 *
                                                                 segscan_group_sizze_18709 *
                                                                 (int64_t) 8,
                                                                 (int64_t) 3 *
                                                                 segscan_group_sizze_18709 *
                                                                 (int64_t) 8),
                                                          (int64_t) 3 *
                                                          segscan_group_sizze_18709 *
                                                          (int64_t) 8),
                                                   (int64_t) 3 *
                                                   segscan_group_sizze_18709 *
                                                   (int64_t) 8));
                        CUdeviceptr kernel_arg_20450 = mem_param_19296.mem;
                        CUdeviceptr kernel_arg_20451 = mem_19353.mem;
                        CUdeviceptr kernel_arg_20452 = mem_19357.mem;
                        CUdeviceptr kernel_arg_20453 = mem_19361.mem;
                        CUdeviceptr kernel_arg_20454 = mem_19365.mem;
                        CUdeviceptr kernel_arg_20455 = mem_19369.mem;
                        CUdeviceptr kernel_arg_20456 =
                                    sortBagAndDoStuffziid_counter_mem_19746.mem;
                        CUdeviceptr kernel_arg_20457 =
                                    status_flags_mem_19748.mem;
                        CUdeviceptr kernel_arg_20458 = aggregates_mem_19750.mem;
                        CUdeviceptr kernel_arg_20459 =
                                    incprefixes_mem_19752.mem;
                        CUdeviceptr kernel_arg_20460 = aggregates_mem_19754.mem;
                        CUdeviceptr kernel_arg_20461 =
                                    incprefixes_mem_19756.mem;
                        CUdeviceptr kernel_arg_20462 = aggregates_mem_19758.mem;
                        CUdeviceptr kernel_arg_20463 =
                                    incprefixes_mem_19760.mem;
                        CUdeviceptr kernel_arg_20464 = aggregates_mem_19762.mem;
                        CUdeviceptr kernel_arg_20465 =
                                    incprefixes_mem_19764.mem;
                        unsigned int shared_offset_20449 = 0;
                        
                        if ((((((1 && sdiv_up64(b_16497 * g_16498,
                                                segscan_group_sizze_18709 *
                                                (int64_t) 3) != 0) && 1 != 0) &&
                               1 != 0) && segscan_group_sizze_18709 != 0) &&
                             1 != 0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up64(b_16497 * g_16498,
                                                      segscan_group_sizze_18709 *
                                                      (int64_t) 3);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20445[] = {&ctx->global_failure,
                                                         &shared_offset_20449,
                                                         &b_16497, &g_16498,
                                                         &defunc_2_radix_sort_step_arg_18600,
                                                         &defunc_0_get_bit_arg_18601,
                                                         &cond_f_res_18602,
                                                         &cond_f_res_18603,
                                                         &kernel_arg_20450,
                                                         &kernel_arg_20451,
                                                         &kernel_arg_20452,
                                                         &kernel_arg_20453,
                                                         &kernel_arg_20454,
                                                         &kernel_arg_20455,
                                                         &kernel_arg_20456,
                                                         &kernel_arg_20457,
                                                         &kernel_arg_20458,
                                                         &kernel_arg_20459,
                                                         &kernel_arg_20460,
                                                         &kernel_arg_20461,
                                                         &kernel_arg_20462,
                                                         &kernel_arg_20463,
                                                         &kernel_arg_20464,
                                                         &kernel_arg_20465};
                            int64_t time_start_20446 = 0, time_end_20447 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "sortBagAndDoStuff.segscan_18719",
                                        (long) sdiv_up64(b_16497 * g_16498,
                                                         segscan_group_sizze_18709 *
                                                         (int64_t) 3), (long) 1,
                                        (long) 1,
                                        (long) segscan_group_sizze_18709,
                                        (long) 1, (long) 1, (int) (0 +
                                                                   (shared_sizze_20448 +
                                                                    (8 -
                                                                     shared_sizze_20448 %
                                                                     8) % 8)));
                                time_start_20446 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->sortBagAndDoStuffzisegscan_18719_runs,
                                                          &ctx->sortBagAndDoStuffzisegscan_18719_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegscan_18719,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  segscan_group_sizze_18709,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20448 +
                                                                   (8 -
                                                                    shared_sizze_20448 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20445,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20447 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "sortBagAndDoStuff.segscan_18719",
                                        time_end_20447 - time_start_20446);
                            }
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t virt_num_groups_20015 =
                            sext_i64_i32(sdiv_up64(b_16497 * g_16498,
                                                   segmap_group_sizze_18782));
                    CUdeviceptr kernel_arg_20469 = mem_param_19296.mem;
                    CUdeviceptr kernel_arg_20470 = mem_param_19304.mem;
                    CUdeviceptr kernel_arg_20471 = mem_19312.mem;
                    CUdeviceptr kernel_arg_20472 = mem_19316.mem;
                    CUdeviceptr kernel_arg_20473 = mem_19353.mem;
                    CUdeviceptr kernel_arg_20474 = mem_19357.mem;
                    CUdeviceptr kernel_arg_20475 = mem_19361.mem;
                    CUdeviceptr kernel_arg_20476 = mem_19365.mem;
                    CUdeviceptr kernel_arg_20477 = mem_19369.mem;
                    
                    if ((((((1 && segmap_usable_groups_18783 != 0) && 1 != 0) &&
                           1 != 0) && segmap_group_sizze_18782 != 0) && 1 !=
                         0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = segmap_usable_groups_18783;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20466[] = {&ctx->global_failure,
                                                     &b_16497, &g_16498,
                                                     &i_16505,
                                                     &kernel_arg_20469,
                                                     &kernel_arg_20470,
                                                     &kernel_arg_20471,
                                                     &kernel_arg_20472,
                                                     &kernel_arg_20473,
                                                     &kernel_arg_20474,
                                                     &kernel_arg_20475,
                                                     &kernel_arg_20476,
                                                     &kernel_arg_20477};
                        int64_t time_start_20467 = 0, time_end_20468 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBagAndDoStuff.segmap_18788",
                                    (long) segmap_usable_groups_18783, (long) 1,
                                    (long) 1, (long) segmap_group_sizze_18782,
                                    (long) 1, (long) 1, (int) 0);
                            time_start_20467 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagAndDoStuffzisegmap_18788_runs,
                                                      &ctx->sortBagAndDoStuffzisegmap_18788_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18788,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              segmap_group_sizze_18782,
                                                              1, 1, 0, NULL,
                                                              kernel_args_20466,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20468 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBagAndDoStuff.segmap_18788",
                                    time_end_20468 - time_start_20467);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_unref_device(ctx, &mem_19353, "mem_19353") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19357, "mem_19357") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19361, "mem_19361") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19365, "mem_19365") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19369, "mem_19369") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19372, &mem_19312,
                                            "mem_19312") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19371, &mem_19316,
                                            "mem_19316") != 0)
                        return 1;
                }
                if (memblock_unref_device(ctx, &mem_19312, "mem_19312") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_19316, "mem_19316") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19698,
                                        &ext_mem_19372, "ext_mem_19372") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19699,
                                        &ext_mem_19371, "ext_mem_19371") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19296,
                                        &mem_param_tmp_19698,
                                        "mem_param_tmp_19698") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19304,
                                        &mem_param_tmp_19699,
                                        "mem_param_tmp_19699") != 0)
                    return 1;
            }
            if (memblock_set_device(ctx, &ext_mem_19378, &mem_param_19296,
                                    "mem_param_19296") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19377, &mem_param_19304,
                                    "mem_param_19304") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19284, "mem_19284") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19288, "mem_19288") != 0)
                return 1;
            if (memblock_alloc_device(ctx, &mem_19396, bytes_19190,
                                      "mem_19396")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19400, bytes_19414,
                                      "mem_19400")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19404, bytes_19414,
                                      "mem_19404")) {
                err = 1;
                goto cleanup;
            }
            if (slt64(g_16498 * (int64_t) 2, segred_group_sizze_18819)) {
                int64_t segment_sizze_nonzzero_20027 = smax64((int64_t) 1,
                                                              g_16498);
                int64_t num_threads_20028 = num_groups_18820 *
                        segred_group_sizze_18819;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) b_16497, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) g_16498, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                            (long long) squot64(segred_group_sizze_18819,
                                                segment_sizze_nonzzero_20027),
                            '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "required_groups",
                            (long long) sext_i64_i32(sdiv_up64(b_16497,
                                                               squot64(segred_group_sizze_18819,
                                                                       segment_sizze_nonzzero_20027))),
                            '\n');
                
                unsigned int shared_sizze_20481 = (int64_t) 4 *
                             segred_group_sizze_18819;
                CUdeviceptr kernel_arg_20483 = values_mem_19006.mem;
                CUdeviceptr kernel_arg_20484 = mem_19280.mem;
                CUdeviceptr kernel_arg_20485 = ext_mem_19377.mem;
                CUdeviceptr kernel_arg_20486 = mem_19396.mem;
                CUdeviceptr kernel_arg_20487 = mem_19400.mem;
                CUdeviceptr kernel_arg_20488 = mem_19404.mem;
                unsigned int shared_offset_20482 = 0;
                
                if ((((((1 && num_groups_18820 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_18819 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_18820;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_20478[] = {&ctx->global_failure,
                                                 &ctx->failure_is_an_option,
                                                 &ctx->global_failure_args,
                                                 &shared_offset_20482, &b_16497,
                                                 &g_16498, &num_groups_18820,
                                                 &segment_sizze_nonzzero_20027,
                                                 &kernel_arg_20483,
                                                 &kernel_arg_20484,
                                                 &kernel_arg_20485,
                                                 &kernel_arg_20486,
                                                 &kernel_arg_20487,
                                                 &kernel_arg_20488};
                    int64_t time_start_20479 = 0, time_end_20480 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "sortBagAndDoStuff.segred_small_18827",
                                (long) num_groups_18820, (long) 1, (long) 1,
                                (long) segred_group_sizze_18819, (long) 1,
                                (long) 1, (int) (0 + (shared_sizze_20481 + (8 -
                                                                            shared_sizze_20481 %
                                                                            8) %
                                                      8)));
                        time_start_20479 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->sortBagAndDoStuffzisegred_small_18827_runs,
                                                  &ctx->sortBagAndDoStuffzisegred_small_18827_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_small_18827,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_18819,
                                                          1, 1, 0 +
                                                          (shared_sizze_20481 +
                                                           (8 -
                                                            shared_sizze_20481 %
                                                            8) % 8), NULL,
                                                          kernel_args_20478,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20480 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "sortBagAndDoStuff.segred_small_18827",
                                time_end_20480 - time_start_20479);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            } else {
                int64_t groups_per_segment_20055 = sdiv_up64(num_groups_18820,
                                                             smax64((int64_t) 1,
                                                                    b_16497));
                int64_t elements_per_thread_20056 = sdiv_up64(g_16498,
                                                              segred_group_sizze_18819 *
                                                              groups_per_segment_20055);
                int64_t virt_num_groups_20057 = groups_per_segment_20055 *
                        b_16497;
                int64_t num_threads_20058 = num_groups_18820 *
                        segred_group_sizze_18819;
                int64_t threads_per_segment_20059 = groups_per_segment_20055 *
                        segred_group_sizze_18819;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) b_16497, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) g_16498, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                            (long long) virt_num_groups_20057, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_groups",
                            (long long) num_groups_18820, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "group_size",
                            (long long) segred_group_sizze_18819, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                            (long long) elements_per_thread_20056, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                            (long long) groups_per_segment_20055, '\n');
                if (memblock_alloc_device(ctx, &segred_tmp_mem_20060,
                                          (int64_t) 4 * virt_num_groups_20057,
                                          "segred_tmp_mem_20060")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device sortBagAndDoStuffzicounter_mem_20062 =
                                       ctx->sortBagAndDoStuffzicounter_mem_20062;
                unsigned int shared_sizze_20493 = 1;
                unsigned int shared_sizze_20495 = (int64_t) 4 *
                             segred_group_sizze_18819;
                CUdeviceptr kernel_arg_20497 = values_mem_19006.mem;
                CUdeviceptr kernel_arg_20498 = mem_19280.mem;
                CUdeviceptr kernel_arg_20499 = ext_mem_19377.mem;
                CUdeviceptr kernel_arg_20500 = mem_19396.mem;
                CUdeviceptr kernel_arg_20501 = mem_19400.mem;
                CUdeviceptr kernel_arg_20502 = mem_19404.mem;
                CUdeviceptr kernel_arg_20503 = segred_tmp_mem_20060.mem;
                CUdeviceptr kernel_arg_20504 =
                            sortBagAndDoStuffzicounter_mem_20062.mem;
                unsigned int shared_offset_20494 = 0;
                unsigned int shared_offset_20496 = 0 + (shared_sizze_20493 +
                                                        (8 -
                                                         shared_sizze_20493 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_18820 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_18819 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_18820;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_20490[] = {&ctx->global_failure,
                                                 &ctx->failure_is_an_option,
                                                 &ctx->global_failure_args,
                                                 &shared_offset_20494,
                                                 &shared_offset_20496, &b_16497,
                                                 &g_16498, &num_groups_18820,
                                                 &groups_per_segment_20055,
                                                 &elements_per_thread_20056,
                                                 &virt_num_groups_20057,
                                                 &threads_per_segment_20059,
                                                 &kernel_arg_20497,
                                                 &kernel_arg_20498,
                                                 &kernel_arg_20499,
                                                 &kernel_arg_20500,
                                                 &kernel_arg_20501,
                                                 &kernel_arg_20502,
                                                 &kernel_arg_20503,
                                                 &kernel_arg_20504};
                    int64_t time_start_20491 = 0, time_end_20492 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "sortBagAndDoStuff.segred_large_18827",
                                (long) num_groups_18820, (long) 1, (long) 1,
                                (long) segred_group_sizze_18819, (long) 1,
                                (long) 1, (int) (0 + (shared_sizze_20493 + (8 -
                                                                            shared_sizze_20493 %
                                                                            8) %
                                                      8) + (shared_sizze_20495 +
                                                            (8 -
                                                             shared_sizze_20495 %
                                                             8) % 8)));
                        time_start_20491 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->sortBagAndDoStuffzisegred_large_18827_runs,
                                                  &ctx->sortBagAndDoStuffzisegred_large_18827_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_large_18827,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_18819,
                                                          1, 1, 0 +
                                                          (shared_sizze_20493 +
                                                           (8 -
                                                            shared_sizze_20493 %
                                                            8) % 8) +
                                                          (shared_sizze_20495 +
                                                           (8 -
                                                            shared_sizze_20495 %
                                                            8) % 8), NULL,
                                                          kernel_args_20490,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20492 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "sortBagAndDoStuff.segred_large_18827",
                                time_end_20492 - time_start_20491);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            }
            if (memblock_unref_device(ctx, &mem_19280, "mem_19280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &ext_mem_19377, "ext_mem_19377") !=
                0)
                return 1;
            
            int64_t segmap_usable_groups_18843 = sdiv_up64(b_16497,
                                                           segmap_group_sizze_18842);
            
            if (memblock_alloc_device(ctx, &mem_19408, bytes_19190,
                                      "mem_19408")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_20097 = sext_i64_i32(sdiv_up64(b_16497,
                                                                   segmap_group_sizze_18842));
            CUdeviceptr kernel_arg_20508 = mem_19396.mem;
            CUdeviceptr kernel_arg_20509 = mem_19408.mem;
            
            if ((((((1 && segmap_usable_groups_18843 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_18842 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_18843;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20505[] = {&ctx->global_failure, &b_16497,
                                             &i64_res_16512, &kernel_arg_20508,
                                             &kernel_arg_20509};
                int64_t time_start_20506 = 0, time_end_20507 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_18846",
                            (long) segmap_usable_groups_18843, (long) 1,
                            (long) 1, (long) segmap_group_sizze_18842, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20506 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_18846_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_18846_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18846,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_18842,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20505, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20507 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_18846", time_end_20507 -
                            time_start_20506);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_19396, "mem_19396") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19411, &mem_19408,
                                    "mem_19408") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19410, &mem_19400,
                                    "mem_19400") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19409, &mem_19404,
                                    "mem_19404") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &ext_mem_19424, &ext_mem_19411,
                                "ext_mem_19411") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19423, &ext_mem_19410,
                                "ext_mem_19410") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19422, &ext_mem_19409,
                                "ext_mem_19409") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_19009, "mem_19009") != 0)
        return 1;
    
    float i64_res_16651 = sitofp_i64_f32(b_16497);
    bool suff_outer_par_18856;
    
    suff_outer_par_18856 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_3 <= g_16498;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_outer_par_3", (long) g_16498,
                suff_outer_par_18856 ? "true" : "false");
    
    int64_t segmap_group_sizze_18873;
    
    segmap_group_sizze_18873 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18860;
    
    int64_t segred_group_sizze_18916;
    
    segred_group_sizze_18916 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18899;
    
    int64_t num_groups_18917;
    int32_t max_num_groups_20108;
    
    max_num_groups_20108 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18901;
    num_groups_18917 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18581,
                                                            segred_group_sizze_18916),
                                                  sext_i32_i64(max_num_groups_20108))));
    
    int64_t segmap_group_sizze_18929;
    
    segmap_group_sizze_18929 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18889;
    
    int32_t local_memory_capacity_20198;
    
    local_memory_capacity_20198 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20198)) &&
        suff_outer_par_18856) {
        int64_t segmap_usable_groups_18874 = sdiv_up64(g_16498,
                                                       segmap_group_sizze_18873);
        
        if (memblock_alloc_device(ctx, &mem_19428, bytes_19018, "mem_19428")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_20109 = sext_i64_i32(sdiv_up64(g_16498,
                                                               segmap_group_sizze_18873));
        CUdeviceptr kernel_arg_20513 = ext_mem_19423.mem;
        CUdeviceptr kernel_arg_20514 = mem_19428.mem;
        
        if ((((((1 && segmap_usable_groups_18874 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_18873 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_18874;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20510[] = {&ctx->global_failure, &b_16497,
                                         &g_16498, &i64_res_16651,
                                         &kernel_arg_20513, &kernel_arg_20514};
            int64_t time_start_20511 = 0, time_end_20512 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_18877",
                        (long) segmap_usable_groups_18874, (long) 1, (long) 1,
                        (long) segmap_group_sizze_18873, (long) 1, (long) 1,
                        (int) 0);
                time_start_20511 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_18877_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_18877_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18877,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_18873, 1,
                                                  1, 0, NULL, kernel_args_20510,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20512 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_18877", time_end_20512 -
                        time_start_20511);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_set_device(ctx, &ext_mem_19440, &mem_19428, "mem_19428") !=
            0)
            return 1;
    } else {
        if (memblock_alloc_device(ctx, &mem_19431, bytes_19011, "mem_19431")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19431, (int64_t) 0,
                                                  ext_mem_19423, (int64_t) 0,
                                                  (int64_t) 1, g_16498,
                                                  b_16497) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19435, bytes_19018, "mem_19435")) {
            err = 1;
            goto cleanup;
        }
        if (slt64(b_16497 * (int64_t) 2, segred_group_sizze_18916)) {
            int64_t segment_sizze_nonzzero_20119 = smax64((int64_t) 1, b_16497);
            int64_t num_threads_20120 = num_groups_18917 *
                    segred_group_sizze_18916;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed-small");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_segments",
                        (long long) g_16498, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segment_size",
                        (long long) b_16497, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                        (long long) squot64(segred_group_sizze_18916,
                                            segment_sizze_nonzzero_20119),
                        '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "required_groups",
                        (long long) sext_i64_i32(sdiv_up64(g_16498,
                                                           squot64(segred_group_sizze_18916,
                                                                   segment_sizze_nonzzero_20119))),
                        '\n');
            
            unsigned int shared_sizze_20518 = (int64_t) 4 *
                         segred_group_sizze_18916;
            CUdeviceptr kernel_arg_20520 = mem_19431.mem;
            CUdeviceptr kernel_arg_20521 = mem_19435.mem;
            unsigned int shared_offset_20519 = 0;
            
            if ((((((1 && num_groups_18917 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_18916 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_18917;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20515[] = {&ctx->global_failure,
                                             &shared_offset_20519, &b_16497,
                                             &g_16498, &num_groups_18917,
                                             &segment_sizze_nonzzero_20119,
                                             &kernel_arg_20520,
                                             &kernel_arg_20521};
                int64_t time_start_20516 = 0, time_end_20517 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segred_small_18922",
                            (long) num_groups_18917, (long) 1, (long) 1,
                            (long) segred_group_sizze_18916, (long) 1, (long) 1,
                            (int) (0 + (shared_sizze_20518 + (8 -
                                                              shared_sizze_20518 %
                                                              8) % 8)));
                    time_start_20516 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegred_small_18922_runs,
                                              &ctx->sortBagAndDoStuffzisegred_small_18922_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_small_18922,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_18916,
                                                      1, 1, 0 +
                                                      (shared_sizze_20518 + (8 -
                                                                             shared_sizze_20518 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20515, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20517 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segred_small_18922",
                            time_end_20517 - time_start_20516);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
        } else {
            int64_t groups_per_segment_20147 = sdiv_up64(num_groups_18917,
                                                         smax64((int64_t) 1,
                                                                g_16498));
            int64_t elements_per_thread_20148 = sdiv_up64(b_16497,
                                                          segred_group_sizze_18916 *
                                                          groups_per_segment_20147);
            int64_t virt_num_groups_20149 = groups_per_segment_20147 * g_16498;
            int64_t num_threads_20150 = num_groups_18917 *
                    segred_group_sizze_18916;
            int64_t threads_per_segment_20151 = groups_per_segment_20147 *
                    segred_group_sizze_18916;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed-large");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_segments",
                        (long long) g_16498, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segment_size",
                        (long long) b_16497, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                        (long long) virt_num_groups_20149, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_groups",
                        (long long) num_groups_18917, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "group_size",
                        (long long) segred_group_sizze_18916, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                        (long long) elements_per_thread_20148, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                        (long long) groups_per_segment_20147, '\n');
            if (memblock_alloc_device(ctx, &segred_tmp_mem_20152, (int64_t) 4 *
                                      virt_num_groups_20149,
                                      "segred_tmp_mem_20152")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device sortBagAndDoStuffzicounter_mem_20154 =
                                   ctx->sortBagAndDoStuffzicounter_mem_20154;
            unsigned int shared_sizze_20526 = 1;
            unsigned int shared_sizze_20528 = (int64_t) 4 *
                         segred_group_sizze_18916;
            CUdeviceptr kernel_arg_20530 = mem_19431.mem;
            CUdeviceptr kernel_arg_20531 = mem_19435.mem;
            CUdeviceptr kernel_arg_20532 = segred_tmp_mem_20152.mem;
            CUdeviceptr kernel_arg_20533 =
                        sortBagAndDoStuffzicounter_mem_20154.mem;
            unsigned int shared_offset_20527 = 0;
            unsigned int shared_offset_20529 = 0 + (shared_sizze_20526 + (8 -
                                                                          shared_sizze_20526 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_18917 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_18916 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_18917;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20523[] = {&ctx->global_failure,
                                             &shared_offset_20527,
                                             &shared_offset_20529, &b_16497,
                                             &g_16498, &num_groups_18917,
                                             &groups_per_segment_20147,
                                             &elements_per_thread_20148,
                                             &virt_num_groups_20149,
                                             &threads_per_segment_20151,
                                             &kernel_arg_20530,
                                             &kernel_arg_20531,
                                             &kernel_arg_20532,
                                             &kernel_arg_20533};
                int64_t time_start_20524 = 0, time_end_20525 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segred_large_18922",
                            (long) num_groups_18917, (long) 1, (long) 1,
                            (long) segred_group_sizze_18916, (long) 1, (long) 1,
                            (int) (0 + (shared_sizze_20526 + (8 -
                                                              shared_sizze_20526 %
                                                              8) % 8) +
                                   (shared_sizze_20528 + (8 -
                                                          shared_sizze_20528 %
                                                          8) % 8)));
                    time_start_20524 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegred_large_18922_runs,
                                              &ctx->sortBagAndDoStuffzisegred_large_18922_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_large_18922,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_18916,
                                                      1, 1, 0 +
                                                      (shared_sizze_20526 + (8 -
                                                                             shared_sizze_20526 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20528 + (8 -
                                                                             shared_sizze_20528 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20523, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20525 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segred_large_18922",
                            time_end_20525 - time_start_20524);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
        }
        if (memblock_unref_device(ctx, &mem_19431, "mem_19431") != 0)
            return 1;
        
        int64_t segmap_usable_groups_18930 = sdiv_up64(g_16498,
                                                       segmap_group_sizze_18929);
        
        if (memblock_alloc_device(ctx, &mem_19439, bytes_19018, "mem_19439")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_20189 = sext_i64_i32(sdiv_up64(g_16498,
                                                               segmap_group_sizze_18929));
        CUdeviceptr kernel_arg_20537 = mem_19435.mem;
        CUdeviceptr kernel_arg_20538 = mem_19439.mem;
        
        if ((((((1 && segmap_usable_groups_18930 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_18929 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_18930;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20534[] = {&ctx->global_failure, &g_16498,
                                         &i64_res_16651, &kernel_arg_20537,
                                         &kernel_arg_20538};
            int64_t time_start_20535 = 0, time_end_20536 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_18933",
                        (long) segmap_usable_groups_18930, (long) 1, (long) 1,
                        (long) segmap_group_sizze_18929, (long) 1, (long) 1,
                        (int) 0);
                time_start_20535 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_18933_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_18933_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18933,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_18929, 1,
                                                  1, 0, NULL, kernel_args_20534,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20536 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_18933", time_end_20536 -
                        time_start_20535);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19435, "mem_19435") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19440, &mem_19439, "mem_19439") !=
            0)
            return 1;
    }
    if (memblock_set_device(ctx, &mem_out_19549, &ext_mem_19422,
                            "ext_mem_19422") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19550, &ext_mem_19423,
                            "ext_mem_19423") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19551, &ext_mem_19424,
                            "ext_mem_19424") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19552, &ext_mem_19440,
                            "ext_mem_19440") != 0)
        return 1;
    (*mem_out_p_20360).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20360, &mem_out_19549,
                            "mem_out_19549") != 0)
        return 1;
    (*mem_out_p_20361).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20361, &mem_out_19550,
                            "mem_out_19550") != 0)
        return 1;
    (*mem_out_p_20362).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20362, &mem_out_19551,
                            "mem_out_19551") != 0)
        return 1;
    (*mem_out_p_20363).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20363, &mem_out_19552,
                            "mem_out_19552") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19439, "mem_19439") != 0)
            return 1;
        if (memblock_unref_device(ctx, &segred_tmp_mem_20152,
                                  "segred_tmp_mem_20152") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19435, "mem_19435") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19431, "mem_19431") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19428, "mem_19428") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19440, "ext_mem_19440") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19408, "mem_19408") != 0)
            return 1;
        if (memblock_unref_device(ctx, &segred_tmp_mem_20060,
                                  "segred_tmp_mem_20060") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19404, "mem_19404") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19400, "mem_19400") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19396, "mem_19396") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19699,
                                  "mem_param_tmp_19699") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19698,
                                  "mem_param_tmp_19698") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19764,
                                  "incprefixes_mem_19764") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19762,
                                  "aggregates_mem_19762") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19760,
                                  "incprefixes_mem_19760") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19758,
                                  "aggregates_mem_19758") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19756,
                                  "incprefixes_mem_19756") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19754,
                                  "aggregates_mem_19754") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19752,
                                  "incprefixes_mem_19752") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19750,
                                  "aggregates_mem_19750") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_19748,
                                  "status_flags_mem_19748") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19369, "mem_19369") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19365, "mem_19365") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19361, "mem_19361") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19357, "mem_19357") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19353, "mem_19353") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19348, "mem_19348") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19344, "mem_19344") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19371, "ext_mem_19371") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19372, "ext_mem_19372") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19316, "mem_19316") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19312, "mem_19312") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19304, "mem_param_19304") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19296, "mem_param_19296") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19377, "ext_mem_19377") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19378, "ext_mem_19378") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19288, "mem_19288") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19284, "mem_19284") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19280, "mem_19280") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19490, "color_19490") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19486, "color_19486") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19275, "mem_19275") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19271, "mem_19271") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19267, "mem_19267") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19409, "ext_mem_19409") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19410, "ext_mem_19410") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19411, "ext_mem_19411") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19420, "mem_19420") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19415, "mem_19415") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19484, "color_19484") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19483, "color_19483") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19482, "color_19482") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19481, "color_19481") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19480, "color_19480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19479, "color_19479") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19478, "color_19478") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19477, "color_19477") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19476, "color_19476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19475, "color_19475") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19474, "color_19474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19197, "mem_19197") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19194, "mem_19194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19191, "mem_19191") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19015, "mem_19015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19012, "mem_19012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19422, "ext_mem_19422") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19423, "ext_mem_19423") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19424, "ext_mem_19424") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19552, "mem_out_19552") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19551, "mem_out_19551") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19550, "mem_out_19550") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19549, "mem_out_19549") != 0)
            return 1;
    }
    return err;
}

int futhark_entry_randomField(struct futhark_context *ctx,
                              struct futhark_f32_2d **out0, const int64_t in0,
                              const int64_t in1, const int64_t in2)
{
    int64_t seed_16320;
    int64_t b_16321;
    int64_t g_16322;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    seed_16320 = in0;
    b_16321 = in1;
    g_16322 = in2;
    if (ret == 0) {
        ret = futrts_entry_randomField(ctx, &mem_out_19549, seed_16320, b_16321,
                                       g_16322);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19549;
            (*out0)->shape[0] = b_16321;
            (*out0)->shape[1] = g_16322;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_sortBag(struct futhark_context *ctx,
                          struct futhark_f32_2d **out0,
                          struct futhark_f32_2d **out1, const
                          struct futhark_f32_2d *in0, const
                          struct futhark_f32_2d *in1)
{
    int64_t b_16351;
    int64_t g_16352;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19550;
    
    mem_out_19550.references = NULL;
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    
    struct memblock_device values_mem_19006;
    
    values_mem_19006.references = NULL;
    
    struct memblock_device keys_mem_19005;
    
    keys_mem_19005.references = NULL;
    keys_mem_19005 = in0->mem;
    b_16351 = in0->shape[0];
    g_16352 = in0->shape[1];
    values_mem_19006 = in1->mem;
    b_16351 = in1->shape[0];
    g_16352 = in1->shape[1];
    if (!((b_16351 == in0->shape[0] && g_16352 == in0->shape[1]) && (b_16351 ==
                                                                     in1->shape[0] &&
                                                                     g_16352 ==
                                                                     in1->shape[1]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: %s entry point arguments have invalid sizes.\n",
                          "sortBag");
    }
    if (ret == 0) {
        ret = futrts_entry_sortBag(ctx, &mem_out_19549, &mem_out_19550,
                                   keys_mem_19005, values_mem_19006, b_16351,
                                   g_16352);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19549;
            (*out0)->shape[0] = b_16351;
            (*out0)->shape[1] = g_16352;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_19550;
            (*out1)->shape[0] = b_16351;
            (*out1)->shape[1] = g_16352;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                    struct futhark_f32_2d **out0,
                                    struct futhark_f32_2d **out1,
                                    struct futhark_f32_1d **out2,
                                    struct futhark_f32_1d **out3, const
                                    struct futhark_f32_2d *in0, const
                                    struct futhark_f32_2d *in1)
{
    int64_t b_16497;
    int64_t g_16498;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19552;
    
    mem_out_19552.references = NULL;
    
    struct memblock_device mem_out_19551;
    
    mem_out_19551.references = NULL;
    
    struct memblock_device mem_out_19550;
    
    mem_out_19550.references = NULL;
    
    struct memblock_device mem_out_19549;
    
    mem_out_19549.references = NULL;
    
    struct memblock_device values_mem_19006;
    
    values_mem_19006.references = NULL;
    
    struct memblock_device keys_mem_19005;
    
    keys_mem_19005.references = NULL;
    keys_mem_19005 = in0->mem;
    b_16497 = in0->shape[0];
    g_16498 = in0->shape[1];
    values_mem_19006 = in1->mem;
    b_16497 = in1->shape[0];
    g_16498 = in1->shape[1];
    if (!((b_16497 == in0->shape[0] && g_16498 == in0->shape[1]) && (b_16497 ==
                                                                     in1->shape[0] &&
                                                                     g_16498 ==
                                                                     in1->shape[1]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: %s entry point arguments have invalid sizes.\n",
                          "sortBagAndDoStuff");
    }
    if (ret == 0) {
        ret = futrts_entry_sortBagAndDoStuff(ctx, &mem_out_19549,
                                             &mem_out_19550, &mem_out_19551,
                                             &mem_out_19552, keys_mem_19005,
                                             values_mem_19006, b_16497,
                                             g_16498);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19549;
            (*out0)->shape[0] = b_16497;
            (*out0)->shape[1] = g_16498;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_19550;
            (*out1)->shape[0] = b_16497;
            (*out1)->shape[1] = g_16498;
            assert((*out2 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out2)->mem = mem_out_19551;
            (*out2)->shape[0] = b_16497;
            assert((*out3 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out3)->mem = mem_out_19552;
            (*out3)->shape[0] = g_16498;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
  
