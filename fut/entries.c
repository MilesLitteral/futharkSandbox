// Generated by Futhark 0.22.0
// git: 5b2a4d5 (Fri Mar 25 09:00:58 2022 +0100) [modified]

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s);
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path);
void
futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                         const char *path);
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path);
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path);
void
futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                              int size);
void
futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                              int num);
void
futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                             int num);
void
futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                 int num);
void
futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                             int num);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t new_value);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
CUdeviceptr futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                      struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_randomField(struct futhark_context *ctx,
                              struct futhark_f32_2d **out0, const int64_t in0,
                              const int64_t in1, const int64_t in2);
int futhark_entry_sortBag(struct futhark_context *ctx,
                          struct futhark_f32_2d **out0,
                          struct futhark_f32_2d **out1, const
                          struct futhark_f32_2d *in0, const
                          struct futhark_f32_2d *in1);
int futhark_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                    struct futhark_f32_2d **out0,
                                    struct futhark_f32_2d **out1,
                                    struct futhark_f32_1d **out2,
                                    struct futhark_f32_1d **out3, const
                                    struct futhark_f32_2d *in0, const
                                    struct futhark_f32_2d *in1);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_cuda
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

static int lexical_realloc(char **error, unsigned char **ptr, size_t *old_size, size_t new_size) {
  unsigned char *new = realloc(*ptr, new_size);
  if (new == NULL) {
    *error = msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                       (long long) new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>


#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>


// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

static inline int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

static inline uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f32_bool(float x) {
  return x != 0;
}

static inline float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

static inline bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

static inline f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
static int32_t sortBagziid_counter_mem_realtype_20359[1];
static int32_t sortBagAndDoStuffziid_counter_mem_realtype_20485[1];
static int32_t sortBagAndDoStuffzicounter_mem_realtype_20530[10240];
static int32_t sortBagAndDoStuffzicounter_mem_realtype_20563[10240];
struct memblock_device {
    int *references;
    CUdeviceptr mem;
    int64_t size;
    const char *desc;
};
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
#include <cuda.h>
#include <nvrtc.h>
typedef CUdeviceptr fl_mem_t;
// Start of free_list.h.

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem_t mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries;        // Pointer to entries.
  int capacity;                           // Number of entries.
  int used;                               // Number of valid entries.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
}

static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem_t mem, const char *tag) {
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size,
                          size_t *size_out, fl_mem_t *mem_out) {
  int size_match = -1;
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid &&
        size <= l->entries[i].size &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    return 0;
  } else {
    return 1;
  }
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem_t *mem_out) {
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

// End of free_list.h.

// Start of cuda.h.

#define CUDA_SUCCEED_FATAL(x) cuda_api_succeed_fatal(x, #x, __FILE__, __LINE__)
#define CUDA_SUCCEED_NONFATAL(x) cuda_api_succeed_nonfatal(x, #x, __FILE__, __LINE__)
#define NVRTC_SUCCEED_FATAL(x) nvrtc_api_succeed_fatal(x, #x, __FILE__, __LINE__)
#define NVRTC_SUCCEED_NONFATAL(x) nvrtc_api_succeed_nonfatal(x, #x, __FILE__, __LINE__)
// Take care not to override an existing error.
#define CUDA_SUCCEED_OR_RETURN(e) {               \
    char *serror = CUDA_SUCCEED_NONFATAL(e);      \
    if (serror) {                                 \
      if (!ctx->error) {                          \
        ctx->error = serror;                      \
        return bad;                               \
      } else {                                    \
        free(serror);                             \
      }                                           \
    }                                             \
  }

// CUDA_SUCCEED_OR_RETURN returns the value of the variable 'bad' in
// scope.  By default, it will be this one.  Create a local variable
// of some other type if needed.  This is a bit of a hack, but it
// saves effort in the code generator.
static const int bad = 1;

static inline void cuda_api_succeed_fatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    futhark_panic(-1, "%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

static char* cuda_api_succeed_nonfatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    return msgprintf("%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  } else {
    return NULL;
  }
}

static inline void nvrtc_api_succeed_fatal(nvrtcResult res, const char *call,
                                           const char *file, int line) {
  if (res != NVRTC_SUCCESS) {
    const char *err_str = nvrtcGetErrorString(res);
    futhark_panic(-1, "%s:%d: NVRTC call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

static char* nvrtc_api_succeed_nonfatal(nvrtcResult res, const char *call,
                                        const char *file, int line) {
  if (res != NVRTC_SUCCESS) {
    const char *err_str = nvrtcGetErrorString(res);
    return msgprintf("%s:%d: NVRTC call\n  %s\nfailed with error code %d (%s)\n",
                     file, line, call, res, err_str);
  } else {
    return NULL;
  }
}

struct cuda_config {
  int debugging;
  int logging;
  const char *preferred_device;
  int preferred_device_num;

  const char *dump_program_to;
  const char *load_program_from;

  const char *dump_ptx_to;
  const char *load_ptx_from;

  size_t default_block_size;
  size_t default_grid_size;
  size_t default_tile_size;
  size_t default_reg_tile_size;
  size_t default_threshold;

  int default_block_size_changed;
  int default_grid_size_changed;
  int default_tile_size_changed;

  int num_sizes;
  const char **size_names;
  const char **size_vars;
  int64_t *size_values;
  const char **size_classes;
};

static void cuda_config_init(struct cuda_config *cfg,
                             int num_sizes,
                             const char *size_names[],
                             const char *size_vars[],
                             int64_t *size_values,
                             const char *size_classes[]) {
  cfg->debugging = 0;
  cfg->logging = 0;
  cfg->preferred_device_num = 0;
  cfg->preferred_device = "";
  cfg->dump_program_to = NULL;
  cfg->load_program_from = NULL;

  cfg->dump_ptx_to = NULL;
  cfg->load_ptx_from = NULL;

  cfg->default_block_size = 256;
  cfg->default_grid_size = 0; // Set properly later.
  cfg->default_tile_size = 32;
  cfg->default_reg_tile_size = 2;
  cfg->default_threshold = 32*1024;

  cfg->default_block_size_changed = 0;
  cfg->default_grid_size_changed = 0;
  cfg->default_tile_size_changed = 0;

  cfg->num_sizes = num_sizes;
  cfg->size_names = size_names;
  cfg->size_vars = size_vars;
  cfg->size_values = size_values;
  cfg->size_classes = size_classes;
}

// A record of something that happened.
struct profiling_record {
  cudaEvent_t *events; // Points to two events.
  int *runs;
  int64_t *runtime;
};

struct cuda_context {
  CUdevice dev;
  CUcontext cu_ctx;
  CUmodule module;

  struct cuda_config cfg;

  struct free_list free_list;

  size_t max_block_size;
  size_t max_grid_size;
  size_t max_tile_size;
  size_t max_threshold;
  size_t max_shared_memory;
  size_t max_bespoke;

  size_t lockstep_width;

  struct profiling_record *profiling_records;
  int profiling_records_capacity;
  int profiling_records_used;
};

#define CU_DEV_ATTR(x) (CU_DEVICE_ATTRIBUTE_##x)
#define device_query(dev,attrib) _device_query(dev, CU_DEV_ATTR(attrib))
static int _device_query(CUdevice dev, CUdevice_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuDeviceGetAttribute(&val, attrib, dev));
  return val;
}

#define CU_FUN_ATTR(x) (CU_FUNC_ATTRIBUTE_##x)
#define function_query(fn,attrib) _function_query(dev, CU_FUN_ATTR(attrib))
static int _function_query(CUfunction dev, CUfunction_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuFuncGetAttribute(&val, attrib, dev));
  return val;
}

static void set_preferred_device(struct cuda_config *cfg, const char *s) {
  int x = 0;
  if (*s == '#') {
    s++;
    while (isdigit(*s)) {
      x = x * 10 + (*s++)-'0';
    }
    // Skip trailing spaces.
    while (isspace(*s)) {
      s++;
    }
  }
  cfg->preferred_device = s;
  cfg->preferred_device_num = x;
}

static int cuda_device_setup(struct cuda_context *ctx) {
  char name[256];
  int count, chosen = -1, best_cc = -1;
  int cc_major_best, cc_minor_best;
  int cc_major, cc_minor;
  CUdevice dev;

  CUDA_SUCCEED_FATAL(cuDeviceGetCount(&count));
  if (count == 0) { return 1; }

  int num_device_matches = 0;

  // XXX: Current device selection policy is to choose the device with the
  // highest compute capability (if no preferred device is set).
  // This should maybe be changed, since greater compute capability is not
  // necessarily an indicator of better performance.
  for (int i = 0; i < count; i++) {
    CUDA_SUCCEED_FATAL(cuDeviceGet(&dev, i));

    cc_major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
    cc_minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

    CUDA_SUCCEED_FATAL(cuDeviceGetName(name, sizeof(name) - 1, dev));
    name[sizeof(name) - 1] = 0;

    if (ctx->cfg.debugging) {
      fprintf(stderr, "Device #%d: name=\"%s\", compute capability=%d.%d\n",
          i, name, cc_major, cc_minor);
    }

    if (device_query(dev, COMPUTE_MODE) == CU_COMPUTEMODE_PROHIBITED) {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "Device #%d is compute-prohibited, ignoring\n", i);
      }
      continue;
    }

    if (best_cc == -1 || cc_major > cc_major_best ||
        (cc_major == cc_major_best && cc_minor > cc_minor_best)) {
      best_cc = i;
      cc_major_best = cc_major;
      cc_minor_best = cc_minor;
    }

    if (strstr(name, ctx->cfg.preferred_device) != NULL &&
        num_device_matches++ == ctx->cfg.preferred_device_num) {
      chosen = i;
      break;
    }
  }

  if (chosen == -1) { chosen = best_cc; }
  if (chosen == -1) { return 1; }

  if (ctx->cfg.debugging) {
    fprintf(stderr, "Using device #%d\n", chosen);
  }

  CUDA_SUCCEED_FATAL(cuDeviceGet(&ctx->dev, chosen));
  return 0;
}

static char *concat_fragments(const char *src_fragments[]) {
  size_t src_len = 0;
  const char **p;

  for (p = src_fragments; *p; p++) {
    src_len += strlen(*p);
  }

  char *src = (char*) malloc(src_len + 1);
  size_t n = 0;
  for (p = src_fragments; *p; p++) {
    strcpy(src + n, *p);
    n += strlen(*p);
  }

  return src;
}

static const char *cuda_nvrtc_get_arch(CUdevice dev) {
  struct {
    int major;
    int minor;
    const char *arch_str;
  } static const x[] = {
    { 3, 0, "compute_30" },
    { 3, 2, "compute_32" },
    { 3, 5, "compute_35" },
    { 3, 7, "compute_37" },
    { 5, 0, "compute_50" },
    { 5, 2, "compute_52" },
    { 5, 3, "compute_53" },
    { 6, 0, "compute_60" },
    { 6, 1, "compute_61" },
    { 6, 2, "compute_62" },
    { 7, 0, "compute_70" },
    { 7, 2, "compute_72" },
    { 7, 5, "compute_75" },
    { 8, 0, "compute_80" }
  };

  int major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
  int minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

  int chosen = -1;
  for (int i = 0; i < sizeof(x)/sizeof(x[0]); i++) {
    if (x[i].major < major || (x[i].major == major && x[i].minor <= minor)) {
      chosen = i;
    } else {
      break;
    }
  }

  if (chosen == -1) {
    futhark_panic(-1, "Unsupported compute capability %d.%d\n", major, minor);
  }

  if (x[chosen].major != major || x[chosen].minor != minor) {
    fprintf(stderr,
            "Warning: device compute capability is %d.%d, but newest supported by Futhark is %d.%d.\n",
            major, minor, x[chosen].major, x[chosen].minor);
  }

  return x[chosen].arch_str;
}

static char* cuda_nvrtc_build(struct cuda_context *ctx, const char *src,
                              const char *extra_opts[], char **ptx) {
  nvrtcProgram prog;
  char *problem = NULL;

  problem = NVRTC_SUCCEED_NONFATAL(nvrtcCreateProgram(&prog, src, "futhark-cuda", 0, NULL, NULL));

  if (problem) {
    return problem;
  }

  int arch_set = 0, num_extra_opts;

  // nvrtc cannot handle multiple -arch options.  Hence, if one of the
  // extra_opts is -arch, we have to be careful not to do our usual
  // automatic generation.
  for (num_extra_opts = 0; extra_opts[num_extra_opts] != NULL; num_extra_opts++) {
    if (strstr(extra_opts[num_extra_opts], "-arch")
        == extra_opts[num_extra_opts] ||
        strstr(extra_opts[num_extra_opts], "--gpu-architecture")
        == extra_opts[num_extra_opts]) {
      arch_set = 1;
    }
  }

  size_t n_opts, i = 0, i_dyn, n_opts_alloc = 20 + num_extra_opts + ctx->cfg.num_sizes;
  const char **opts = (const char**) malloc(n_opts_alloc * sizeof(const char *));
  if (!arch_set) {
    opts[i++] = "-arch";
    opts[i++] = cuda_nvrtc_get_arch(ctx->dev);
  }
  opts[i++] = "-default-device";
  if (ctx->cfg.debugging) {
    opts[i++] = "-G";
    opts[i++] = "-lineinfo";
  } else {
    opts[i++] = "--disable-warnings";
  }
  i_dyn = i;
  for (size_t j = 0; j < ctx->cfg.num_sizes; j++) {
    opts[i++] = msgprintf("-D%s=%zu", ctx->cfg.size_vars[j],
        ctx->cfg.size_values[j]);
  }
  opts[i++] = msgprintf("-DLOCKSTEP_WIDTH=%zu", ctx->lockstep_width);
  opts[i++] = msgprintf("-DMAX_THREADS_PER_BLOCK=%zu", ctx->max_block_size);

  // Time for the best lines of the code in the entire compiler.
  if (getenv("CUDA_HOME") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_HOME"));
  }
  if (getenv("CUDA_ROOT") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_ROOT"));
  }
  if (getenv("CUDA_PATH") != NULL) {
    opts[i++] = msgprintf("-I%s/include", getenv("CUDA_PATH"));
  }
  opts[i++] = msgprintf("-I/usr/local/cuda/include");
  opts[i++] = msgprintf("-I/usr/include");

  // It is crucial that the extra_opts are last, so that the free()
  // logic below does not cause problems.
  for (int j = 0; extra_opts[j] != NULL; j++) {
    opts[i++] = extra_opts[j];
  }

  n_opts = i;

  if (ctx->cfg.debugging) {
    fprintf(stderr, "NVRTC compile options:\n");
    for (size_t j = 0; j < n_opts; j++) {
      fprintf(stderr, "\t%s\n", opts[j]);
    }
    fprintf(stderr, "\n");
  }

  nvrtcResult res = nvrtcCompileProgram(prog, n_opts, opts);
  if (res != NVRTC_SUCCESS) {
    size_t log_size;
    if (nvrtcGetProgramLogSize(prog, &log_size) == NVRTC_SUCCESS) {
      char *log = (char*) malloc(log_size);
      if (nvrtcGetProgramLog(prog, log) == NVRTC_SUCCESS) {
        problem = msgprintf("NVRTC compilation failed.\n\n%s\n", log);
      } else {
        problem = msgprintf("Could not retrieve compilation log\n");
      }
      free(log);
    }
    return problem;
  }

  for (i = i_dyn; i < n_opts-num_extra_opts; i++) { free((char *)opts[i]); }
  free(opts);

  size_t ptx_size;
  NVRTC_SUCCEED_FATAL(nvrtcGetPTXSize(prog, &ptx_size));
  *ptx = (char*) malloc(ptx_size);
  NVRTC_SUCCEED_FATAL(nvrtcGetPTX(prog, *ptx));

  NVRTC_SUCCEED_FATAL(nvrtcDestroyProgram(&prog));

  return NULL;
}

static void cuda_size_setup(struct cuda_context *ctx)
{
  if (ctx->cfg.default_block_size > ctx->max_block_size) {
    if (ctx->cfg.default_block_size_changed) {
      fprintf(stderr,
          "Note: Device limits default block size to %zu (down from %zu).\n",
          ctx->max_block_size, ctx->cfg.default_block_size);
    }
    ctx->cfg.default_block_size = ctx->max_block_size;
  }
  if (ctx->cfg.default_grid_size > ctx->max_grid_size) {
    if (ctx->cfg.default_grid_size_changed) {
      fprintf(stderr,
          "Note: Device limits default grid size to %zu (down from %zu).\n",
          ctx->max_grid_size, ctx->cfg.default_grid_size);
    }
    ctx->cfg.default_grid_size = ctx->max_grid_size;
  }
  if (ctx->cfg.default_tile_size > ctx->max_tile_size) {
    if (ctx->cfg.default_tile_size_changed) {
      fprintf(stderr,
          "Note: Device limits default tile size to %zu (down from %zu).\n",
          ctx->max_tile_size, ctx->cfg.default_tile_size);
    }
    ctx->cfg.default_tile_size = ctx->max_tile_size;
  }

  if (!ctx->cfg.default_grid_size_changed) {
    ctx->cfg.default_grid_size =
      (device_query(ctx->dev, MULTIPROCESSOR_COUNT) *
       device_query(ctx->dev, MAX_THREADS_PER_MULTIPROCESSOR))
      / ctx->cfg.default_block_size;
  }

  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    const char *size_class = ctx->cfg.size_classes[i];
    int64_t *size_value = &ctx->cfg.size_values[i];
    const char* size_name = ctx->cfg.size_names[i];
    int64_t max_value = 0, default_value = 0;

    if (strstr(size_class, "group_size") == size_class) {
      max_value = ctx->max_block_size;
      default_value = ctx->cfg.default_block_size;
    } else if (strstr(size_class, "num_groups") == size_class) {
      max_value = ctx->max_grid_size;
      default_value = ctx->cfg.default_grid_size;
      // XXX: as a quick and dirty hack, use twice as many threads for
      // histograms by default.  We really should just be smarter
      // about sizes somehow.
      if (strstr(size_name, ".seghist_") != NULL) {
        default_value *= 2;
      }
    } else if (strstr(size_class, "tile_size") == size_class) {
      max_value = ctx->max_tile_size;
      default_value = ctx->cfg.default_tile_size;
    } else if (strstr(size_class, "reg_tile_size") == size_class) {
      max_value = 0; // No limit.
      default_value = ctx->cfg.default_reg_tile_size;
    } else if (strstr(size_class, "threshold") == size_class) {
      // Threshold can be as large as it takes.
      default_value = ctx->cfg.default_threshold;
    } else {
      // Bespoke sizes have no limit or default.
    }

    if (*size_value == 0) {
      *size_value = default_value;
    } else if (max_value > 0 && *size_value > max_value) {
      fprintf(stderr, "Note: Device limits %s to %zu (down from %zu)\n",
              size_name, max_value, *size_value);
      *size_value = max_value;
    }
  }
}

static char* cuda_module_setup(struct cuda_context *ctx,
                               const char *src_fragments[],
                               const char *extra_opts[]) {
  char *ptx = NULL, *src = NULL;

  if (ctx->cfg.load_program_from == NULL) {
    src = concat_fragments(src_fragments);
  } else {
    src = slurp_file(ctx->cfg.load_program_from, NULL);
  }

  if (ctx->cfg.load_ptx_from) {
    if (ctx->cfg.load_program_from != NULL) {
      fprintf(stderr,
              "WARNING: Using PTX from %s instead of C code from %s\n",
              ctx->cfg.load_ptx_from, ctx->cfg.load_program_from);
    }
    ptx = slurp_file(ctx->cfg.load_ptx_from, NULL);
  }

  if (ctx->cfg.dump_program_to != NULL) {
    dump_file(ctx->cfg.dump_program_to, src, strlen(src));
  }

  if (ptx == NULL) {
    char* problem = cuda_nvrtc_build(ctx, src, extra_opts, &ptx);
    if (problem != NULL) {
      free(src);
      return problem;
    }
  }

  if (ctx->cfg.dump_ptx_to != NULL) {
    dump_file(ctx->cfg.dump_ptx_to, ptx, strlen(ptx));
  }

  CUDA_SUCCEED_FATAL(cuModuleLoadData(&ctx->module, ptx));

  free(ptx);
  if (src != NULL) {
    free(src);
  }

  return NULL;
}

static char* cuda_setup(struct cuda_context *ctx, const char *src_fragments[], const char *extra_opts[]) {
  CUDA_SUCCEED_FATAL(cuInit(0));

  if (cuda_device_setup(ctx) != 0) {
    futhark_panic(-1, "No suitable CUDA device found.\n");
  }
  CUDA_SUCCEED_FATAL(cuCtxCreate(&ctx->cu_ctx, 0, ctx->dev));

  free_list_init(&ctx->free_list);

  ctx->max_shared_memory = device_query(ctx->dev, MAX_SHARED_MEMORY_PER_BLOCK);
  ctx->max_block_size = device_query(ctx->dev, MAX_THREADS_PER_BLOCK);
  ctx->max_grid_size = device_query(ctx->dev, MAX_GRID_DIM_X);
  ctx->max_tile_size = sqrt(ctx->max_block_size);
  ctx->max_threshold = 0;
  ctx->max_bespoke = 0;
  ctx->lockstep_width = device_query(ctx->dev, WARP_SIZE);

  cuda_size_setup(ctx);
  return cuda_module_setup(ctx, src_fragments, extra_opts);
}

// Count up the runtime all the profiling_records that occured during execution.
// Also clears the buffer of profiling_records.
static cudaError_t cuda_tally_profiling_records(struct cuda_context *ctx) {
  cudaError_t err;
  for (int i = 0; i < ctx->profiling_records_used; i++) {
    struct profiling_record record = ctx->profiling_records[i];

    float ms;
    if ((err = cudaEventElapsedTime(&ms, record.events[0], record.events[1])) != cudaSuccess) {
      return err;
    }

    // CUDA provides milisecond resolution, but we want microseconds.
    *record.runs += 1;
    *record.runtime += ms*1000;

    if ((err = cudaEventDestroy(record.events[0])) != cudaSuccess) {
      return err;
    }
    if ((err = cudaEventDestroy(record.events[1])) != cudaSuccess) {
      return err;
    }

    free(record.events);
  }

  ctx->profiling_records_used = 0;

  return cudaSuccess;
}

// Returns pointer to two events.
static cudaEvent_t* cuda_get_events(struct cuda_context *ctx, int *runs, int64_t *runtime) {
    if (ctx->profiling_records_used == ctx->profiling_records_capacity) {
      ctx->profiling_records_capacity *= 2;
      ctx->profiling_records =
        realloc(ctx->profiling_records,
                ctx->profiling_records_capacity *
                sizeof(struct profiling_record));
    }
    cudaEvent_t *events = calloc(2, sizeof(cudaEvent_t));
    cudaEventCreate(&events[0]);
    cudaEventCreate(&events[1]);
    ctx->profiling_records[ctx->profiling_records_used].events = events;
    ctx->profiling_records[ctx->profiling_records_used].runs = runs;
    ctx->profiling_records[ctx->profiling_records_used].runtime = runtime;
    ctx->profiling_records_used++;
    return events;
}

static CUresult cuda_free_all(struct cuda_context *ctx);

static void cuda_cleanup(struct cuda_context *ctx) {
  CUDA_SUCCEED_FATAL(cuda_free_all(ctx));
  (void)cuda_tally_profiling_records(ctx);
  free(ctx->profiling_records);
  CUDA_SUCCEED_FATAL(cuModuleUnload(ctx->module));
  CUDA_SUCCEED_FATAL(cuCtxDestroy(ctx->cu_ctx));
}

static CUresult cuda_alloc(struct cuda_context *ctx, FILE *log,
                           size_t min_size, const char *tag, CUdeviceptr *mem_out) {
  if (min_size < sizeof(int)) {
    min_size = sizeof(int);
  }

  size_t size;
  if (free_list_find(&ctx->free_list, min_size, &size, mem_out) == 0) {
    if (size >= min_size) {
      if (ctx->cfg.debugging) {
        fprintf(log, "No need to allocate: Found a block in the free list.\n");
      }
      return CUDA_SUCCESS;
    } else {
      if (ctx->cfg.debugging) {
        fprintf(log, "Found a free block, but it was too small.\n");
      }

      CUresult res = cuMemFree(*mem_out);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    }
  }

  if (ctx->cfg.debugging) {
    fprintf(log, "Actually allocating the desired block.\n");
  }

  CUresult res = cuMemAlloc(mem_out, min_size);
  while (res == CUDA_ERROR_OUT_OF_MEMORY) {
    CUdeviceptr mem;
    if (free_list_first(&ctx->free_list, &mem) == 0) {
      res = cuMemFree(mem);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    } else {
      break;
    }
    res = cuMemAlloc(mem_out, min_size);
  }

  return res;
}

static CUresult cuda_free(struct cuda_context *ctx, CUdeviceptr mem,
                          const char *tag) {
  size_t size;
  CUdeviceptr existing_mem;

  // If there is already a block with this tag, then remove it.
  if (free_list_find(&ctx->free_list, -1, &size, &existing_mem) == 0) {
    CUresult res = cuMemFree(existing_mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  CUresult res = cuMemGetAddressRange(NULL, &size, mem);
  if (res == CUDA_SUCCESS) {
    free_list_insert(&ctx->free_list, size, mem, tag);
  }

  return res;
}

static CUresult cuda_free_all(struct cuda_context *ctx) {
  CUdeviceptr mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, &mem) == 0) {
    CUresult res = cuMemFree(mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  return CUDA_SUCCESS;
}

// End of cuda.h.

const char *cuda_program[] =
           {"\n#define FUTHARK_CUDA\n#define FUTHARK_F64_ENABLED\n\ntypedef char int8_t;\ntypedef short int16_t;\ntypedef int int32_t;\ntypedef long long int64_t;\ntypedef unsigned char uint8_t;\ntypedef unsigned short uint16_t;\ntypedef unsigned int uint32_t;\ntypedef unsigned long long uint64_t;\ntypedef uint8_t uchar;\ntypedef uint16_t ushort;\ntypedef uint32_t uint;\ntypedef uint64_t ulong;\n#define __kernel extern \"C\" __global__ __launch_bounds__(MAX_THREADS_PER_BLOCK)\n#define __global\n#define __local\n#define __private\n#define __constant\n#define __write_only\n#define __read_only\n\nstatic inline int get_group_id_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  switch (d) {\n    case 0: d = block_dim0; break;\n    case 1: d = block_dim1; break;\n    case 2: d = block_dim2; break;\n  }\n  switch (d) {\n    case 0: return blockIdx.x;\n    case 1: return blockIdx.y;\n    case 2: return blockIdx.z;\n    default: return 0;\n  }\n}\n#define get_group_id(d) get_group_id_fn(block_dim0, block_dim1, block_dim2, d)\n\nstatic inline int get_num_groups_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  switch (d) {\n    case 0: d = block_dim0; break;\n    case 1: d = block_dim1; break;\n    case 2: d = block_dim2; break;\n  }\n  switch(d) {\n    case 0: return gridDim.x;\n    case 1: return gridDim.y;\n    case 2: return gridDim.z;\n    default: return 0;\n  }\n}\n#define get_num_groups(d) get_num_groups_fn(block_dim0, block_dim1, block_dim2, d)\n\nstatic inline int get_local_id(int d) {\n  switch (d) {\n    case 0: return threadIdx.x;\n    case 1: return threadIdx.y;\n    case 2: return threadIdx.z;\n    default: return 0;\n  }\n}\n\nstatic inline int get_local_size(int d) {\n  switch (d) {\n    case 0: return blockDim.x;\n    case 1: return blockDim.y;\n    case 2: return blockDim.z;\n    default: return 0;\n  }\n}\n\nstatic inline int get_global_id_fn(int block_dim0, int block_dim1, int block_dim2, int d) {\n  return get_group_id(d) * get_local_size(d) + get_local_id(d);\n}\n#define get_global_id(d) get_global_id_fn(block_dim0,",
            " block_dim1, block_dim2, d)\n\nstatic inline int get_global_size(int block_dim0, int block_dim1, int block_dim2, int d) {\n  return get_num_groups(d) * get_local_size(d);\n}\n\n#define CLK_LOCAL_MEM_FENCE 1\n#define CLK_GLOBAL_MEM_FENCE 2\nstatic inline void barrier(int x) {\n  __syncthreads();\n}\nstatic inline void mem_fence_local() {\n  __threadfence_block();\n}\nstatic inline void mem_fence_global() {\n  __threadfence();\n}\n\n#define NAN (0.0/0.0)\n#define INFINITY (1.0/0.0)\nextern volatile __shared__ unsigned char shared_mem[];\n// Start of half.h.\n\n// Conversion functions are from http://half.sourceforge.net/, but\n// translated to C.\n//\n// Copyright (c) 2012-2021 Christian Rau\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#ifndef __OPENCL_VERSION__\n#define __constant\n#endif\n\n__constant static const uint16_t base_table[512] = {\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x00",
            "00, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,\n  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,\n  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,\n  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000",
            ", 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,\n  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,\n  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,\n  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,\n  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, ",
            "0xFC00, 0xFC00 };\n\n__constant static const unsigned char shift_table[512] = {\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\n  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,\n  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, ",
            "24, 24, 24, 24, 24, 24, 24,\n  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };\n\n__constant static const uint32_t mantissa_table[2048] = {\n  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,\n  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,\n  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,\n  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,\n  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,\n  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,\n  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,\n  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,\n  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,\n  0x37100000, 0x37110000, 0x3712000",
            "0, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,\n  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,\n  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,\n  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,\n  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,\n  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,\n  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,\n  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,\n  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,\n  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,\n  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B800",
            "0, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,\n  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,\n  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,\n  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,\n  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,\n  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,\n  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,\n  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,\n  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,\n  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,\n  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE000",
            "0, 0x37EE8000, 0x37EF0000, 0x37EF8000,\n  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,\n  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,\n  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,\n  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,\n  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,\n  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,\n  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,\n  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,\n  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,\n  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,\n  0x38200000, 0x38204",
            "000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,\n  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,\n  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,\n  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,\n  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,\n  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,\n  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,\n  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,\n  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,\n  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,\n  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498",
            "000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,\n  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,\n  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,\n  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,\n  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,\n  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,\n  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,\n  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,\n  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,\n  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,\n  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C",
            "000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,\n  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,\n  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,\n  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,\n  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,\n  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,\n  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,\n  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,\n  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,\n  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,\n  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,\n  0x380",
            "E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,\n  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,\n  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,\n  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,\n  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,\n  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,\n  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,\n  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,\n  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,\n  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,\n  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x382",
            "2A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,\n  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,\n  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,\n  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,\n  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,\n  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,\n  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,\n  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,\n  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,\n  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,\n  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x383",
            "74000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,\n  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,\n  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,\n  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,\n  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,\n  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,\n  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,\n  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,\n  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,\n  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,\n  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384",
            "BE000,\n  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,\n  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,\n  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,\n  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,\n  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,\n  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,\n  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,\n  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,\n  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,\n  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,\n  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x3",
            "8608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,\n  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,\n  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,\n  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,\n  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,\n  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,\n  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,\n  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,\n  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,\n  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,\n  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x3",
            "8752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,\n  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,\n  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,\n  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,\n  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,\n  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };\n__constant static const uint32_t exponent_table[64] = {\n  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,\n  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,\n  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,\n  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };\n__constant static const unsigned short offset_table[64] = {\n  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, ",
            "1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,\n  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };\n\nstatic uint16_t float2halfbits(float value) {\n  union { float x; uint32_t y; } u;\n  u.x = value;\n  uint32_t bits = u.y;\n\n  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;\n\n  return hbits;\n}\n\nstatic float halfbits2float(uint16_t value) {\n  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];\n\n  union { uint32_t x; float y; } u;\n  u.x = bits;\n  return u.y;\n}\n\n// End of half.h.\n// Start of scalar.h.\n\n// Implementation of the primitive scalar operations.  Very\n// repetitive.  This code is inserted directly into both CUDA and\n// OpenCL programs, as well as the CPU code, so it has some #ifdefs to\n// work everywhere.  Some operations are defined as macros because\n// this allows us to use them as constant expressions in things like\n// array sizes and static initialisers.\n\n// Some of the #ifdefs are because OpenCL uses type-generic functions\n// for some operations (e.g. sqrt), while C and CUDA sensibly use\n// distinct functions for different precisions (e.g. sqrtf() and\n// sqrt()).  This is quite annoying.  Due to C's unfortunate casting\n// rules, it is also really easy to accidentally implement\n// floating-point functions in the wrong precision, so be careful.\n\n// Double-precision definitions are only included if the preprocessor\n// macro FUTHARK_F64_ENABLED is set.\n\nstatic inline uint8_t add8(uint8_t x, uint8_t y) {\n  return x + y;\n}\n\nstatic inline uint16_t add16(uint16_t x, uint16_t y) {\n  return x + y;\n}\n\nstatic inline uint32_t add32(uint32_t x, uint32_t y) {\n  return x + y;\n}\n\nstatic inline uint64_t add64(uint64_t x, uint64_t y) {\n  return x + y;\n}\n\nstati",
            "c inline uint8_t sub8(uint8_t x, uint8_t y) {\n  return x - y;\n}\n\nstatic inline uint16_t sub16(uint16_t x, uint16_t y) {\n  return x - y;\n}\n\nstatic inline uint32_t sub32(uint32_t x, uint32_t y) {\n  return x - y;\n}\n\nstatic inline uint64_t sub64(uint64_t x, uint64_t y) {\n  return x - y;\n}\n\nstatic inline uint8_t mul8(uint8_t x, uint8_t y) {\n  return x * y;\n}\n\nstatic inline uint16_t mul16(uint16_t x, uint16_t y) {\n  return x * y;\n}\n\nstatic inline uint32_t mul32(uint32_t x, uint32_t y) {\n  return x * y;\n}\n\nstatic inline uint64_t mul64(uint64_t x, uint64_t y) {\n  return x * y;\n}\n\nstatic inline uint8_t udiv8(uint8_t x, uint8_t y) {\n  return x / y;\n}\n\nstatic inline uint16_t udiv16(uint16_t x, uint16_t y) {\n  return x / y;\n}\n\nstatic inline uint32_t udiv32(uint32_t x, uint32_t y) {\n  return x / y;\n}\n\nstatic inline uint64_t udiv64(uint64_t x, uint64_t y) {\n  return x / y;\n}\n\nstatic inline uint8_t udiv_up8(uint8_t x, uint8_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint16_t udiv_up16(uint16_t x, uint16_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint32_t udiv_up32(uint32_t x, uint32_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint64_t udiv_up64(uint64_t x, uint64_t y) {\n  return (x + y - 1) / y;\n}\n\nstatic inline uint8_t umod8(uint8_t x, uint8_t y) {\n  return x % y;\n}\n\nstatic inline uint16_t umod16(uint16_t x, uint16_t y) {\n  return x % y;\n}\n\nstatic inline uint32_t umod32(uint32_t x, uint32_t y) {\n  return x % y;\n}\n\nstatic inline uint64_t umod64(uint64_t x, uint64_t y) {\n  return x % y;\n}\n\nstatic inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inli",
            "ne uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : (x + y - 1) / y;\n}\n\nstatic inline uint8_t umod_safe8(uint8_t x, uint8_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint16_t umod_safe16(uint16_t x, uint16_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint32_t umod_safe32(uint32_t x, uint32_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline uint64_t umod_safe64(uint64_t x, uint64_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int8_t sdiv8(int8_t x, int8_t y) {\n  int8_t q = x / y;\n  int8_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int16_t sdiv16(int16_t x, int16_t y) {\n  int16_t q = x / y;\n  int16_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int32_t sdiv32(int32_t x, int32_t y) {\n  int32_t q = x / y;\n  int32_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int64_t sdiv64(int64_t x, int64_t y) {\n  int64_t q = x / y;\n  int64_t r = x % y;\n\n  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\n\nstatic inline int8_t sdiv_up8(int8_t x, int8_t y) {\n  return sdiv8(x + y - 1, y);\n}\n\nstatic inline int16_t sdiv_up16(int16_t x, int16_t y) {\n  return sdiv16(x + y - 1, y);\n}\n\nstatic inline int32_t sdiv_up32(int32_t x, int32_t y) {\n  return sdiv32(x + y - 1, y);\n}\n\nstatic inline int64_t sdiv_up64(int64_t x, int64_t y) {\n  return sdiv64(x + y - 1, y);\n}\n\nstatic inline int8_t smod8(int8_t x, int8_t y) {\n  int8_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int16_t smod16(int16_t x, int16_t y) {\n  int16_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int32_t smod32(int32_t x, int32_t y) {\n  int32_t r = x % y;\n\n  return",
            " r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int64_t smod64(int64_t x, int64_t y) {\n  int64_t r = x % y;\n\n  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\n\nstatic inline int8_t sdiv_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : sdiv8(x, y);\n}\n\nstatic inline int16_t sdiv_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : sdiv16(x, y);\n}\n\nstatic inline int32_t sdiv_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : sdiv32(x, y);\n}\n\nstatic inline int64_t sdiv_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : sdiv64(x, y);\n}\n\nstatic inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {\n  return sdiv_safe8(x + y - 1, y);\n}\n\nstatic inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {\n  return sdiv_safe16(x + y - 1, y);\n}\n\nstatic inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {\n  return sdiv_safe32(x + y - 1, y);\n}\n\nstatic inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {\n  return sdiv_safe64(x + y - 1, y);\n}\n\nstatic inline int8_t smod_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : smod8(x, y);\n}\n\nstatic inline int16_t smod_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : smod16(x, y);\n}\n\nstatic inline int32_t smod_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : smod32(x, y);\n}\n\nstatic inline int64_t smod_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : smod64(x, y);\n}\n\nstatic inline int8_t squot8(int8_t x, int8_t y) {\n  return x / y;\n}\n\nstatic inline int16_t squot16(int16_t x, int16_t y) {\n  return x / y;\n}\n\nstatic inline int32_t squot32(int32_t x, int32_t y) {\n  return x / y;\n}\n\nstatic inline int64_t squot64(int64_t x, int64_t y) {\n  return x / y;\n}\n\nstatic inline int8_t srem8(int8_t x, int8_t y) {\n  return x % y;\n}\n\nstatic inline int16_t srem16(int16_t x, int16_t y) {\n  return x % y;\n}\n\nstatic inline int32_t srem32(int32_t x, int32_t y) {\n  return x % y;\n}\n\nstatic inline int64_t srem64(int64_t x, int64_t y) {\n  return x % y;\n}\n\nstatic inline int8_t squot_safe8(int8_t x, int8_t y)",
            " {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int16_t squot_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int32_t squot_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int64_t squot_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : x / y;\n}\n\nstatic inline int8_t srem_safe8(int8_t x, int8_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int16_t srem_safe16(int16_t x, int16_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int32_t srem_safe32(int32_t x, int32_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int64_t srem_safe64(int64_t x, int64_t y) {\n  return y == 0 ? 0 : x % y;\n}\n\nstatic inline int8_t smin8(int8_t x, int8_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int16_t smin16(int16_t x, int16_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int32_t smin32(int32_t x, int32_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int64_t smin64(int64_t x, int64_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint8_t umin8(uint8_t x, uint8_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint16_t umin16(uint16_t x, uint16_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint32_t umin32(uint32_t x, uint32_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline uint64_t umin64(uint64_t x, uint64_t y) {\n  return x < y ? x : y;\n}\n\nstatic inline int8_t smax8(int8_t x, int8_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int16_t smax16(int16_t x, int16_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int32_t smax32(int32_t x, int32_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline int64_t smax64(int64_t x, int64_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint8_t umax8(uint8_t x, uint8_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint16_t umax16(uint16_t x, uint16_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint32_t umax32(uint32_t x, uint32_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint64_t umax64(uint64_t x, uint64_t y) {\n  return x < y ? y : x;\n}\n\nstatic inline uint8_t shl8(uint8_t x, uint8_t y)",
            " {\n  return (uint8_t)(x << y);\n}\n\nstatic inline uint16_t shl16(uint16_t x, uint16_t y) {\n  return (uint16_t)(x << y);\n}\n\nstatic inline uint32_t shl32(uint32_t x, uint32_t y) {\n  return x << y;\n}\n\nstatic inline uint64_t shl64(uint64_t x, uint64_t y) {\n  return x << y;\n}\n\nstatic inline uint8_t lshr8(uint8_t x, uint8_t y) {\n  return x >> y;\n}\n\nstatic inline uint16_t lshr16(uint16_t x, uint16_t y) {\n  return x >> y;\n}\n\nstatic inline uint32_t lshr32(uint32_t x, uint32_t y) {\n  return x >> y;\n}\n\nstatic inline uint64_t lshr64(uint64_t x, uint64_t y) {\n  return x >> y;\n}\n\nstatic inline int8_t ashr8(int8_t x, int8_t y) {\n  return x >> y;\n}\n\nstatic inline int16_t ashr16(int16_t x, int16_t y) {\n  return x >> y;\n}\n\nstatic inline int32_t ashr32(int32_t x, int32_t y) {\n  return x >> y;\n}\n\nstatic inline int64_t ashr64(int64_t x, int64_t y) {\n  return x >> y;\n}\n\nstatic inline uint8_t and8(uint8_t x, uint8_t y) {\n  return x & y;\n}\n\nstatic inline uint16_t and16(uint16_t x, uint16_t y) {\n  return x & y;\n}\n\nstatic inline uint32_t and32(uint32_t x, uint32_t y) {\n  return x & y;\n}\n\nstatic inline uint64_t and64(uint64_t x, uint64_t y) {\n  return x & y;\n}\n\nstatic inline uint8_t or8(uint8_t x, uint8_t y) {\n  return x | y;\n}\n\nstatic inline uint16_t or16(uint16_t x, uint16_t y) {\n  return x | y;\n}\n\nstatic inline uint32_t or32(uint32_t x, uint32_t y) {\n  return x | y;\n}\n\nstatic inline uint64_t or64(uint64_t x, uint64_t y) {\n  return x | y;\n}\n\nstatic inline uint8_t xor8(uint8_t x, uint8_t y) {\n  return x ^ y;\n}\n\nstatic inline uint16_t xor16(uint16_t x, uint16_t y) {\n  return x ^ y;\n}\n\nstatic inline uint32_t xor32(uint32_t x, uint32_t y) {\n  return x ^ y;\n}\n\nstatic inline uint64_t xor64(uint64_t x, uint64_t y) {\n  return x ^ y;\n}\n\nstatic inline bool ult8(uint8_t x, uint8_t y) {\n  return x < y;\n}\n\nstatic inline bool ult16(uint16_t x, uint16_t y) {\n  return x < y;\n}\n\nstatic inline bool ult32(uint32_t x, uint32_t y) {\n  return x < y;\n}\n\nstatic inline bool ult64(uint64_t x, uint64_t y) {\n  return x ",
            "< y;\n}\n\nstatic inline bool ule8(uint8_t x, uint8_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule16(uint16_t x, uint16_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule32(uint32_t x, uint32_t y) {\n  return x <= y;\n}\n\nstatic inline bool ule64(uint64_t x, uint64_t y) {\n  return x <= y;\n}\n\nstatic inline bool slt8(int8_t x, int8_t y) {\n  return x < y;\n}\n\nstatic inline bool slt16(int16_t x, int16_t y) {\n  return x < y;\n}\n\nstatic inline bool slt32(int32_t x, int32_t y) {\n  return x < y;\n}\n\nstatic inline bool slt64(int64_t x, int64_t y) {\n  return x < y;\n}\n\nstatic inline bool sle8(int8_t x, int8_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle16(int16_t x, int16_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle32(int32_t x, int32_t y) {\n  return x <= y;\n}\n\nstatic inline bool sle64(int64_t x, int64_t y) {\n  return x <= y;\n}\n\nstatic inline uint8_t pow8(uint8_t x, uint8_t y) {\n  uint8_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint16_t pow16(uint16_t x, uint16_t y) {\n  uint16_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint32_t pow32(uint32_t x, uint32_t y) {\n  uint32_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline uint64_t pow64(uint64_t x, uint64_t y) {\n  uint64_t res = 1, rem = y;\n\n  while (rem != 0) {\n    if (rem & 1)\n      res *= x;\n    rem >>= 1;\n    x *= x;\n  }\n  return res;\n}\n\nstatic inline bool itob_i8_bool(int8_t x) {\n  return x;\n}\n\nstatic inline bool itob_i16_bool(int16_t x) {\n  return x;\n}\n\nstatic inline bool itob_i32_bool(int32_t x) {\n  return x;\n}\n\nstatic inline bool itob_i64_bool(int64_t x) {\n  return x;\n}\n\nstatic inline int8_t btoi_bool_i8(bool x) {\n  return x;\n}\n\nstatic inline int16_t btoi_bool_i16(bool x) {\n  return x;\n}\n\nstatic inline int32_t btoi_bool_i32(bool x) {\n  return x;\n}\n\nsta",
            "tic inline int64_t btoi_bool_i64(bool x) {\n  return x;\n}\n\n#define sext_i8_i8(x) ((int8_t) (int8_t) (x))\n#define sext_i8_i16(x) ((int16_t) (int8_t) (x))\n#define sext_i8_i32(x) ((int32_t) (int8_t) (x))\n#define sext_i8_i64(x) ((int64_t) (int8_t) (x))\n#define sext_i16_i8(x) ((int8_t) (int16_t) (x))\n#define sext_i16_i16(x) ((int16_t) (int16_t) (x))\n#define sext_i16_i32(x) ((int32_t) (int16_t) (x))\n#define sext_i16_i64(x) ((int64_t) (int16_t) (x))\n#define sext_i32_i8(x) ((int8_t) (int32_t) (x))\n#define sext_i32_i16(x) ((int16_t) (int32_t) (x))\n#define sext_i32_i32(x) ((int32_t) (int32_t) (x))\n#define sext_i32_i64(x) ((int64_t) (int32_t) (x))\n#define sext_i64_i8(x) ((int8_t) (int64_t) (x))\n#define sext_i64_i16(x) ((int16_t) (int64_t) (x))\n#define sext_i64_i32(x) ((int32_t) (int64_t) (x))\n#define sext_i64_i64(x) ((int64_t) (int64_t) (x))\n#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))\n#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))\n#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))\n#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))\n#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))\n#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))\n#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))\n#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))\n#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))\n#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))\n#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))\n#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))\n#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))\n#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))\n#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))\n#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))\n\nstatic int8_t abs8(int8_t x) {\n  return (int8_t)abs(x);\n}\n\nstatic int16_t abs16(int16_t x) {\n  return (int16_t)abs(x);\n}\n\nstatic int32_t abs32(int32_t x) {\n  return abs(x);\n}\n\nstatic int64_t abs64(int64_t x) {\n#if defined(__OPENCL_VERSION__)\n  return abs(x);\n#else\n  return llabs(x);\n#endif\n}\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_popc8(int",
            "8_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc16(int16_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc32(int32_t x) {\n  return popcount(x);\n}\n\nstatic int32_t futrts_popc64(int64_t x) {\n  return popcount(x);\n}\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_popc8(int8_t x) {\n  return __popc(zext_i8_i32(x));\n}\n\nstatic int32_t futrts_popc16(int16_t x) {\n  return __popc(zext_i16_i32(x));\n}\n\nstatic int32_t futrts_popc32(int32_t x) {\n  return __popc(x);\n}\n\nstatic int32_t futrts_popc64(int64_t x) {\n  return __popcll(x);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_popc8(uint8_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc16(uint16_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc32(uint32_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n\nstatic int32_t futrts_popc64(uint64_t x) {\n  int c = 0;\n  for (; x; ++c) { x &= x - 1; }\n  return c;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  return mul_hi(a, b);\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  return mul_hi(a, b);\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  uint16_t aa = a;\n  uint16_t bb = b;\n\n  return aa * bb >> 8;\n}\n\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {\n  uint32_t aa = a;\n  uint32_t bb = b;\n\n  return aa * bb >> 16;\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  return mulhi(a, b);\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  return mul64hi(a, b);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {\n  uint16_t aa = a;\n  uint16_t bb = b;\n\n  return aa * bb >> 8;\n}\n\nstatic uint16_t fu",
            "trts_mul_hi16(uint16_t a, uint16_t b) {\n  uint32_t aa = a;\n  uint32_t bb = b;\n\n  return aa * bb >> 16;\n}\n\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {\n  uint64_t aa = a;\n  uint64_t bb = b;\n\n  return aa * bb >> 32;\n}\n\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {\n  __uint128_t aa = a;\n  __uint128_t bb = b;\n\n  return aa * bb >> 64;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {\n  return mad_hi(a, b, c);\n}\n\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {\n  return mad_hi(a, b, c);\n}\n\n#else // Not OpenCL\n\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {\n  return futrts_mul_hi8(a, b) + c;\n}\n\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {\n  return futrts_mul_hi16(a, b) + c;\n}\n\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {\n  return futrts_mul_hi32(a, b) + c;\n}\n\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {\n  return futrts_mul_hi64(a, b) + c;\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_clzz8(int8_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return clz(x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return clz(x);\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_clzz8(int8_t x) {\n  return __clz(zext_i8_i32(x)) - 24;\n}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return __clz(zext_i16_i32(x)) - 16;\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return __clz(x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return __clzll(x);\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_clzz8(int8_t x) {\n  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;\n",
            "}\n\nstatic int32_t futrts_clzz16(int16_t x) {\n  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;\n}\n\nstatic int32_t futrts_clzz32(int32_t x) {\n  return x == 0 ? 32 : __builtin_clz((uint32_t)x);\n}\n\nstatic int32_t futrts_clzz64(int64_t x) {\n  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);\n}\n#endif\n\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_ctzz8(int8_t x) {\n  int i = 0;\n  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  int i = 0;\n  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  int i = 0;\n  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  int i = 0;\n  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)\n    ;\n  return i;\n}\n\n#elif defined(__CUDA_ARCH__)\n\nstatic int32_t futrts_ctzz8(int8_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 8 : y - 1;\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 16 : y - 1;\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  int y = __ffs(x);\n  return y == 0 ? 32 : y - 1;\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  int y = __ffsll(x);\n  return y == 0 ? 64 : y - 1;\n}\n\n#else // Not OpenCL or CUDA, but plain C.\n\nstatic int32_t futrts_ctzz8(int8_t x) {\n  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz16(int16_t x) {\n  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz32(int32_t x) {\n  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);\n}\n\nstatic int32_t futrts_ctzz64(int64_t x) {\n  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);\n}\n#endif\n\nstatic inline float fdiv32(float x, float y) {\n  return x / y;\n}\n\nstatic inline float fadd32(float x, float y) {\n  return x + y;\n}\n\nstatic inline float fsub32(float x, float y) {\n  return x - y;\n}\n\nstatic inline float fmul32(float x, float y) {\n  return x * y;\n}\n\nstatic inline bool cmplt32(float x, float y) {\n  retur",
            "n x < y;\n}\n\nstatic inline bool cmple32(float x, float y) {\n  return x <= y;\n}\n\nstatic inline float sitofp_i8_f32(int8_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i16_f32(int16_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i32_f32(int32_t x) {\n  return (float) x;\n}\n\nstatic inline float sitofp_i64_f32(int64_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i8_f32(uint8_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i16_f32(uint16_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i32_f32(uint32_t x) {\n  return (float) x;\n}\n\nstatic inline float uitofp_i64_f32(uint64_t x) {\n  return (float) x;\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline float fabs32(float x) {\n  return fabs(x);\n}\n\nstatic inline float fmax32(float x, float y) {\n  return fmax(x, y);\n}\n\nstatic inline float fmin32(float x, float y) {\n  return fmin(x, y);\n}\n\nstatic inline float fpow32(float x, float y) {\n  return pow(x, y);\n}\n\n#else // Not OpenCL, but CUDA or plain C.\n\nstatic inline float fabs32(float x) {\n  return fabsf(x);\n}\n\nstatic inline float fmax32(float x, float y) {\n  return fmaxf(x, y);\n}\n\nstatic inline float fmin32(float x, float y) {\n  return fminf(x, y);\n}\n\nstatic inline float fpow32(float x, float y) {\n  return powf(x, y);\n}\n#endif\n\nstatic inline bool futrts_isnan32(float x) {\n  return isnan(x);\n}\n\nstatic inline bool futrts_isinf32(float x) {\n  return isinf(x);\n}\n\nstatic inline int8_t fptosi_f32_i8(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int8_t) x;\n  }\n}\n\nstatic inline int16_t fptosi_f32_i16(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int16_t) x;\n  }\n}\n\nstatic inline int32_t fptosi_f32_i32(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int32_t) x;\n  }\n}\n\nstatic inline int64_t fptosi_f32_i64(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (int64_t) x;",
            "\n  };\n}\n\nstatic inline uint8_t fptoui_f32_i8(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint8_t) (int8_t) x;\n  }\n}\n\nstatic inline uint16_t fptoui_f32_i16(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint16_t) (int16_t) x;\n  }\n}\n\nstatic inline uint32_t fptoui_f32_i32(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint32_t) (int32_t) x;\n  }\n}\n\nstatic inline uint64_t fptoui_f32_i64(float x) {\n  if (futrts_isnan32(x) || futrts_isinf32(x)) {\n    return 0;\n  } else {\n    return (uint64_t) (int64_t) x;\n  }\n}\n\nstatic inline bool ftob_f32_bool(float x) {\n  return x != 0;\n}\n\nstatic inline float btof_bool_f32(bool x) {\n  return x ? 1 : 0;\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline float futrts_log32(float x) {\n  return log(x);\n}\n\nstatic inline float futrts_log2_32(float x) {\n  return log2(x);\n}\n\nstatic inline float futrts_log10_32(float x) {\n  return log10(x);\n}\n\nstatic inline float futrts_sqrt32(float x) {\n  return sqrt(x);\n}\n\nstatic inline float futrts_exp32(float x) {\n  return exp(x);\n}\n\nstatic inline float futrts_cos32(float x) {\n  return cos(x);\n}\n\nstatic inline float futrts_sin32(float x) {\n  return sin(x);\n}\n\nstatic inline float futrts_tan32(float x) {\n  return tan(x);\n}\n\nstatic inline float futrts_acos32(float x) {\n  return acos(x);\n}\n\nstatic inline float futrts_asin32(float x) {\n  return asin(x);\n}\n\nstatic inline float futrts_atan32(float x) {\n  return atan(x);\n}\n\nstatic inline float futrts_cosh32(float x) {\n  return cosh(x);\n}\n\nstatic inline float futrts_sinh32(float x) {\n  return sinh(x);\n}\n\nstatic inline float futrts_tanh32(float x) {\n  return tanh(x);\n}\n\nstatic inline float futrts_acosh32(float x) {\n  return acosh(x);\n}\n\nstatic inline float futrts_asinh32(float x) {\n  return asinh(x);\n}\n\nstatic inline float futrts_atanh32(float x) {\n  return atanh(x);\n}\n\nstatic inline float futrts_atan2_32(float x, float y) {\n  re",
            "turn atan2(x, y);\n}\n\nstatic inline float futrts_hypot32(float x, float y) {\n  return hypot(x, y);\n}\n\nstatic inline float futrts_gamma32(float x) {\n  return tgamma(x);\n}\n\nstatic inline float futrts_lgamma32(float x) {\n  return lgamma(x);\n}\n\nstatic inline float fmod32(float x, float y) {\n  return fmod(x, y);\n}\n\nstatic inline float futrts_round32(float x) {\n  return rint(x);\n}\n\nstatic inline float futrts_floor32(float x) {\n  return floor(x);\n}\n\nstatic inline float futrts_ceil32(float x) {\n  return ceil(x);\n}\n\nstatic inline float futrts_lerp32(float v0, float v1, float t) {\n  return mix(v0, v1, t);\n}\n\nstatic inline float futrts_mad32(float a, float b, float c) {\n  return mad(a, b, c);\n}\n\nstatic inline float futrts_fma32(float a, float b, float c) {\n  return fma(a, b, c);\n}\n\n#else // Not OpenCL, but CUDA or plain C.\n\nstatic inline float futrts_log32(float x) {\n  return logf(x);\n}\n\nstatic inline float futrts_log2_32(float x) {\n  return log2f(x);\n}\n\nstatic inline float futrts_log10_32(float x) {\n  return log10f(x);\n}\n\nstatic inline float futrts_sqrt32(float x) {\n  return sqrtf(x);\n}\n\nstatic inline float futrts_exp32(float x) {\n  return expf(x);\n}\n\nstatic inline float futrts_cos32(float x) {\n  return cosf(x);\n}\n\nstatic inline float futrts_sin32(float x) {\n  return sinf(x);\n}\n\nstatic inline float futrts_tan32(float x) {\n  return tanf(x);\n}\n\nstatic inline float futrts_acos32(float x) {\n  return acosf(x);\n}\n\nstatic inline float futrts_asin32(float x) {\n  return asinf(x);\n}\n\nstatic inline float futrts_atan32(float x) {\n  return atanf(x);\n}\n\nstatic inline float futrts_cosh32(float x) {\n  return coshf(x);\n}\n\nstatic inline float futrts_sinh32(float x) {\n  return sinhf(x);\n}\n\nstatic inline float futrts_tanh32(float x) {\n  return tanhf(x);\n}\n\nstatic inline float futrts_acosh32(float x) {\n  return acoshf(x);\n}\n\nstatic inline float futrts_asinh32(float x) {\n  return asinhf(x);\n}\n\nstatic inline float futrts_atanh32(float x) {\n  return atanhf(x);\n}\n\nstatic inline float futrts_atan2_32(f",
            "loat x, float y) {\n  return atan2f(x, y);\n}\n\nstatic inline float futrts_hypot32(float x, float y) {\n  return hypotf(x, y);\n}\n\nstatic inline float futrts_gamma32(float x) {\n  return tgammaf(x);\n}\n\nstatic inline float futrts_lgamma32(float x) {\n  return lgammaf(x);\n}\n\nstatic inline float fmod32(float x, float y) {\n  return fmodf(x, y);\n}\n\nstatic inline float futrts_round32(float x) {\n  return rintf(x);\n}\n\nstatic inline float futrts_floor32(float x) {\n  return floorf(x);\n}\n\nstatic inline float futrts_ceil32(float x) {\n  return ceilf(x);\n}\n\nstatic inline float futrts_lerp32(float v0, float v1, float t) {\n  return v0 + (v1 - v0) * t;\n}\n\nstatic inline float futrts_mad32(float a, float b, float c) {\n  return a * b + c;\n}\n\nstatic inline float futrts_fma32(float a, float b, float c) {\n  return fmaf(a, b, c);\n}\n#endif\n\nstatic inline int32_t futrts_to_bits32(float x) {\n  union {\n    float f;\n    int32_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline float futrts_from_bits32(int32_t x) {\n  union {\n    int32_t f;\n    float t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline float fsignum32(float x) {\n  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\nstatic inline double fdiv64(double x, double y) {\n  return x / y;\n}\n\nstatic inline double fadd64(double x, double y) {\n  return x + y;\n}\n\nstatic inline double fsub64(double x, double y) {\n  return x - y;\n}\n\nstatic inline double fmul64(double x, double y) {\n  return x * y;\n}\n\nstatic inline bool cmplt64(double x, double y) {\n  return x < y;\n}\n\nstatic inline bool cmple64(double x, double y) {\n  return x <= y;\n}\n\nstatic inline double sitofp_i8_f64(int8_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i16_f64(int16_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i32_f64(int32_t x) {\n  return (double) x;\n}\n\nstatic inline double sitofp_i64_f64(int64_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i8_f64(uint8_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i1",
            "6_f64(uint16_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i32_f64(uint32_t x) {\n  return (double) x;\n}\n\nstatic inline double uitofp_i64_f64(uint64_t x) {\n  return (double) x;\n}\n\nstatic inline double fabs64(double x) {\n  return fabs(x);\n}\n\nstatic inline double fmax64(double x, double y) {\n  return fmax(x, y);\n}\n\nstatic inline double fmin64(double x, double y) {\n  return fmin(x, y);\n}\n\nstatic inline double fpow64(double x, double y) {\n  return pow(x, y);\n}\n\nstatic inline double futrts_log64(double x) {\n  return log(x);\n}\n\nstatic inline double futrts_log2_64(double x) {\n  return log2(x);\n}\n\nstatic inline double futrts_log10_64(double x) {\n  return log10(x);\n}\n\nstatic inline double futrts_sqrt64(double x) {\n  return sqrt(x);\n}\n\nstatic inline double futrts_exp64(double x) {\n  return exp(x);\n}\n\nstatic inline double futrts_cos64(double x) {\n  return cos(x);\n}\n\nstatic inline double futrts_sin64(double x) {\n  return sin(x);\n}\n\nstatic inline double futrts_tan64(double x) {\n  return tan(x);\n}\n\nstatic inline double futrts_acos64(double x) {\n  return acos(x);\n}\n\nstatic inline double futrts_asin64(double x) {\n  return asin(x);\n}\n\nstatic inline double futrts_atan64(double x) {\n  return atan(x);\n}\n\nstatic inline double futrts_cosh64(double x) {\n  return cosh(x);\n}\n\nstatic inline double futrts_sinh64(double x) {\n  return sinh(x);\n}\n\nstatic inline double futrts_tanh64(double x) {\n  return tanh(x);\n}\n\nstatic inline double futrts_acosh64(double x) {\n  return acosh(x);\n}\n\nstatic inline double futrts_asinh64(double x) {\n  return asinh(x);\n}\n\nstatic inline double futrts_atanh64(double x) {\n  return atanh(x);\n}\n\nstatic inline double futrts_atan2_64(double x, double y) {\n  return atan2(x, y);\n}\n\nstatic inline double futrts_hypot64(double x, double y) {\n  return hypot(x, y);\n}\n\nstatic inline double futrts_gamma64(double x) {\n  return tgamma(x);\n}\n\nstatic inline double futrts_lgamma64(double x) {\n  return lgamma(x);\n}\n\nstatic inline double futrts_fma64(double a, double b, double",
            " c) {\n  return fma(a, b, c);\n}\n\nstatic inline double futrts_round64(double x) {\n  return rint(x);\n}\n\nstatic inline double futrts_ceil64(double x) {\n  return ceil(x);\n}\n\nstatic inline double futrts_floor64(double x) {\n  return floor(x);\n}\n\nstatic inline bool futrts_isnan64(double x) {\n  return isnan(x);\n}\n\nstatic inline bool futrts_isinf64(double x) {\n  return isinf(x);\n}\n\nstatic inline int8_t fptosi_f64_i8(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int8_t) x;\n  }\n}\n\nstatic inline int16_t fptosi_f64_i16(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int16_t) x;\n  }\n}\n\nstatic inline int32_t fptosi_f64_i32(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int32_t) x;\n  }\n}\n\nstatic inline int64_t fptosi_f64_i64(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (int64_t) x;\n  }\n}\n\nstatic inline uint8_t fptoui_f64_i8(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint8_t) (int8_t) x;\n  }\n}\n\nstatic inline uint16_t fptoui_f64_i16(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint16_t) (int16_t) x;\n  }\n}\n\nstatic inline uint32_t fptoui_f64_i32(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint32_t) (int32_t) x;\n  }\n}\n\nstatic inline uint64_t fptoui_f64_i64(double x) {\n  if (futrts_isnan64(x) || futrts_isinf64(x)) {\n    return 0;\n  } else {\n    return (uint64_t) (int64_t) x;\n  }\n}\n\nstatic inline bool ftob_f64_bool(double x) {\n  return x != 0;\n}\n\nstatic inline double btof_bool_f64(bool x) {\n  return x ? 1 : 0;\n}\n\nstatic inline int64_t futrts_to_bits64(double x) {\n  union {\n    double f;\n    int64_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline double futrts_from_bits64(int64_t x) {\n  union {\n    int64_t f;\n    double t;\n  } p;\n\n ",
            " p.f = x;\n  return p.t;\n}\n\nstatic inline double fmod64(double x, double y) {\n  return fmod(x, y);\n}\n\nstatic inline double fsignum64(double x) {\n  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);\n}\n\nstatic inline double futrts_lerp64(double v0, double v1, double t) {\n#ifdef __OPENCL_VERSION__\n  return mix(v0, v1, t);\n#else\n  return v0 + (v1 - v0) * t;\n#endif\n}\n\nstatic inline double futrts_mad64(double a, double b, double c) {\n#ifdef __OPENCL_VERSION__\n  return mad(a, b, c);\n#else\n  return a * b + c;\n#endif\n}\n\nstatic inline float fpconv_f32_f32(float x) {\n  return (float) x;\n}\n\nstatic inline double fpconv_f32_f64(float x) {\n  return (double) x;\n}\n\nstatic inline float fpconv_f64_f32(double x) {\n  return (float) x;\n}\n\nstatic inline double fpconv_f64_f64(double x) {\n  return (double) x;\n}\n\n#endif\n\n// End of scalar.h.\n// Start of scalar_f16.h.\n\n// Half-precision is emulated if needed (e.g. in straight C) with the\n// native type used if possible.  The emulation works by typedef'ing\n// 'float' to 'f16', and then implementing all operations on single\n// precision.  To cut down on duplication, we use the same code for\n// those Futhark functions that require just operators or casts.  The\n// in-memory representation for arrays will still be 16 bits even\n// under emulation, so the compiler will have to be careful when\n// generating reads or writes.\n\n#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)\n#define EMULATE_F16\n#endif\n\n#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)\n#pragma OPENCL EXTENSION cl_khr_fp16 : enable\n#endif\n\n#ifdef EMULATE_F16\n\n// Note that the half-precision storage format is still 16 bits - the\n// compiler will have to be real careful!\ntypedef float f16;\n\n#else\n\n#ifdef __CUDA_ARCH__\n#include <cuda_fp16.h>\n#endif\n\ntypedef half f16;\n\n#endif\n\n// Some of these functions convert to single precision because half\n// precision versions are not available.\n\nstatic inline f16 fadd16(f16 x, f16 y) {\n  return x + y;\n}\n\nstatic inline ",
            "f16 fsub16(f16 x, f16 y) {\n  return x - y;\n}\n\nstatic inline f16 fmul16(f16 x, f16 y) {\n  return x * y;\n}\n\nstatic inline bool cmplt16(f16 x, f16 y) {\n  return x < y;\n}\n\nstatic inline bool cmple16(f16 x, f16 y) {\n  return x <= y;\n}\n\nstatic inline f16 sitofp_i8_f16(int8_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i16_f16(int16_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i32_f16(int32_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 sitofp_i64_f16(int64_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i8_f16(uint8_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i16_f16(uint16_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i32_f16(uint32_t x) {\n  return (f16) x;\n}\n\nstatic inline f16 uitofp_i64_f16(uint64_t x) {\n  return (f16) x;\n}\n\nstatic inline int8_t fptosi_f16_i8(f16 x) {\n  return (int8_t) (float) x;\n}\n\nstatic inline int16_t fptosi_f16_i16(f16 x) {\n  return (int16_t) x;\n}\n\nstatic inline int32_t fptosi_f16_i32(f16 x) {\n  return (int32_t) x;\n}\n\nstatic inline int64_t fptosi_f16_i64(f16 x) {\n  return (int64_t) x;\n}\n\nstatic inline uint8_t fptoui_f16_i8(f16 x) {\n  return (uint8_t) (float) x;\n}\n\nstatic inline uint16_t fptoui_f16_i16(f16 x) {\n  return (uint16_t) x;\n}\n\nstatic inline uint32_t fptoui_f16_i32(f16 x) {\n  return (uint32_t) x;\n}\n\nstatic inline uint64_t fptoui_f16_i64(f16 x) {\n  return (uint64_t) x;\n}\n\nstatic inline bool ftob_f16_bool(f16 x) {\n  return x != (f16)0;\n}\n\nstatic inline f16 btof_bool_f16(bool x) {\n  return x ? 1 : 0;\n}\n\n#ifndef EMULATE_F16\n\n#ifdef __OPENCL_VERSION__\nstatic inline f16 fabs16(f16 x) {\n  return fabs(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmax(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fmin(x, y);\n}\n\nstatic inline f16 fpow16(f16 x, f16 y) {\n  return pow(x, y);\n}\n\n#else // Assuming CUDA.\n\nstatic inline f16 fabs16(f16 x) {\n  return fabsf(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmaxf(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fminf(x, y);\n}\n\nstatic",
            " inline f16 fpow16(f16 x, f16 y) {\n  return powf(x, y);\n}\n#endif\n\nstatic inline bool futrts_isnan16(f16 x) {\n  return isnan((float)x);\n}\n\nstatic inline bool futrts_isinf16(f16 x) {\n  return isinf((float)x);\n}\n\n#ifdef __OPENCL_VERSION__\nstatic inline f16 futrts_log16(f16 x) {\n  return log(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return log2(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return log10(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return sqrt(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return exp(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return cos(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return sin(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return tan(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return acos(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return asin(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return atan(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return cosh(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return sinh(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return tanh(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return acosh(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return asinh(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return atanh(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return atan2(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return hypot(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return tgamma(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return lgamma(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmod(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return rint(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return floor(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return ceil(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return mix(v0, v1, t);\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return mad(a, b, c);\n}\n\nstatic inli",
            "ne f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return fma(a, b, c);\n}\n\n#else // Assume CUDA.\n\nstatic inline f16 futrts_log16(f16 x) {\n  return hlog(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return hlog2(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return hlog10(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return hsqrt(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return hexp(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return hcos(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return hsin(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return tanf(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return acosf(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return asinf(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return atanf(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return coshf(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return sinhf(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return tanhf(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return acoshf(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return asinhf(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return atanhf(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return atan2f(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return hypotf(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return tgammaf(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return lgammaf(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmodf(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return rintf(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return hfloor(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return hceil(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return v0 + (v1 - v0) * t;\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return a * b + c;\n}\n\nstatic inline f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return fmaf(a, b, c);\n}\n\n#endif\n\n// The CUDA __half type cannot be put in",
            " unions for some reason, so we\n// use bespoke conversion functions instead.\n#ifdef __CUDA_ARCH__\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  return __half_as_ushort(x);\n}\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return __ushort_as_half(x);\n}\n#else\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  union {\n    f16 f;\n    int16_t t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  union {\n    int16_t f;\n    f16 t;\n  } p;\n\n  p.f = x;\n  return p.t;\n}\n#endif\n\n#else // No native f16 - emulate.\n\nstatic inline f16 fabs16(f16 x) {\n  return fabs32(x);\n}\n\nstatic inline f16 fmax16(f16 x, f16 y) {\n  return fmax32(x, y);\n}\n\nstatic inline f16 fmin16(f16 x, f16 y) {\n  return fmin32(x, y);\n}\n\nstatic inline f16 fpow16(f16 x, f16 y) {\n  return fpow32(x, y);\n}\n\nstatic inline bool futrts_isnan16(f16 x) {\n  return futrts_isnan32(x);\n}\n\nstatic inline bool futrts_isinf16(f16 x) {\n  return futrts_isinf32(x);\n}\n\nstatic inline f16 futrts_log16(f16 x) {\n  return futrts_log32(x);\n}\n\nstatic inline f16 futrts_log2_16(f16 x) {\n  return futrts_log2_32(x);\n}\n\nstatic inline f16 futrts_log10_16(f16 x) {\n  return futrts_log10_32(x);\n}\n\nstatic inline f16 futrts_sqrt16(f16 x) {\n  return futrts_sqrt32(x);\n}\n\nstatic inline f16 futrts_exp16(f16 x) {\n  return futrts_exp32(x);\n}\n\nstatic inline f16 futrts_cos16(f16 x) {\n  return futrts_cos32(x);\n}\n\nstatic inline f16 futrts_sin16(f16 x) {\n  return futrts_sin32(x);\n}\n\nstatic inline f16 futrts_tan16(f16 x) {\n  return futrts_tan32(x);\n}\n\nstatic inline f16 futrts_acos16(f16 x) {\n  return futrts_acos32(x);\n}\n\nstatic inline f16 futrts_asin16(f16 x) {\n  return futrts_asin32(x);\n}\n\nstatic inline f16 futrts_atan16(f16 x) {\n  return futrts_atan32(x);\n}\n\nstatic inline f16 futrts_cosh16(f16 x) {\n  return futrts_cosh32(x);\n}\n\nstatic inline f16 futrts_sinh16(f16 x) {\n  return futrts_sinh32(x);\n}\n\nstatic inline f16 futrts_tanh16(f16 x) {\n  return futrts_tanh32(x);\n}\n\nstatic inline f16 futrts_acosh16(f16 x) {\n  return futr",
            "ts_acosh32(x);\n}\n\nstatic inline f16 futrts_asinh16(f16 x) {\n  return futrts_asinh32(x);\n}\n\nstatic inline f16 futrts_atanh16(f16 x) {\n  return futrts_atanh32(x);\n}\n\nstatic inline f16 futrts_atan2_16(f16 x, f16 y) {\n  return futrts_atan2_32(x, y);\n}\n\nstatic inline f16 futrts_hypot16(f16 x, f16 y) {\n  return futrts_hypot32(x, y);\n}\n\nstatic inline f16 futrts_gamma16(f16 x) {\n  return futrts_gamma32(x);\n}\n\nstatic inline f16 futrts_lgamma16(f16 x) {\n  return futrts_lgamma32(x);\n}\n\nstatic inline f16 fmod16(f16 x, f16 y) {\n  return fmod32(x, y);\n}\n\nstatic inline f16 futrts_round16(f16 x) {\n  return futrts_round32(x);\n}\n\nstatic inline f16 futrts_floor16(f16 x) {\n  return futrts_floor32(x);\n}\n\nstatic inline f16 futrts_ceil16(f16 x) {\n  return futrts_ceil32(x);\n}\n\nstatic inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {\n  return futrts_lerp32(v0, v1, t);\n}\n\nstatic inline f16 futrts_mad16(f16 a, f16 b, f16 c) {\n  return futrts_mad32(a, b, c);\n}\n\nstatic inline f16 futrts_fma16(f16 a, f16 b, f16 c) {\n  return futrts_fma32(a, b, c);\n}\n\n// Even when we are using an OpenCL that does not support cl_khr_fp16,\n// it must still support vload_half for actually creating a\n// half-precision number, which can then be efficiently converted to a\n// float.  Similarly for vstore_half.\n#ifdef __OPENCL_VERSION__\n\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  int16_t y;\n  // Violating strict aliasing here.\n  vstore_half((float)x, 0, (half*)&y);\n  return y;\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return (f16)vload_half(0, (half*)&x);\n}\n\n#else\n\nstatic inline int16_t futrts_to_bits16(f16 x) {\n  return (int16_t)float2halfbits(x);\n}\n\nstatic inline f16 futrts_from_bits16(int16_t x) {\n  return halfbits2float((uint16_t)x);\n}\n\nstatic inline f16 fsignum16(f16 x) {\n  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);\n}\n\n#endif\n\n#endif\n\nstatic inline float fpconv_f16_f16(f16 x) {\n  return x;\n}\n\nstatic inline float fpconv_f16_f32(f16 x) {\n  return x;\n}\n\nstatic inline f16 fpconv_f32_f16(float ",
            "x) {\n  return x;\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\nstatic inline double fpconv_f16_f64(f16 x) {\n  return (double) x;\n}\n\nstatic inline f16 fpconv_f64_f16(double x) {\n  return (f16) x;\n}\n\n#endif\n\n\n// End of scalar_f16.h.\n// Start of atomics.h\n\ninline int32_t atomic_xchg_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xchg_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_global(volatile __global int32_t *p,\n                                         int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_local(volatile __local int32_t *p,\n                                        int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_add_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline int32_t atomic_add_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline float atomic_fadd_f32_global(volatile __global float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_global((volatile __global int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline float atomic_fadd_f32_local(volatile __local float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomic",
            "Add((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_local((volatile __local int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline int32_t atomic_smax_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smax_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_local(volatile __local int32_",
            "t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\n// Start of 64 bit atomics\n\ninline int64_t atomic_xchg_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xchg_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_global(volatile __global int64_t *p,\n                                         int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_local(volatile __local int64_t *p,\n                                        int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_add_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\ninline int64_t atomic_add_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  ret",
            "urn atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\ninline double atomic_fadd_f64_global(volatile __global double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_global((volatile __global int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline double atomic_fadd_f64_local(volatile __local double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_local((volatile __local int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\n#endif\n\ninline int64_t atomic_smax_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline int64_t atomic_smax_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline int64_t atomic_smin_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_smin_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_local(volatile __local uint64_t *p, uint64_t x) {",
            "\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_local(volatile __local uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\n// End of atomics.h\n\n\n\n__kernel void builtinzhiota_i64ziiota_i64_19599(int32_t n_19595,\n                                                int64_t x_19596,\n                                                int64_t s_19597, __global\n                                                unsigned char *mem_19594)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_19599;\n    int32_t iota_ltid_19600;\n    int32_t iota_gid_19601;\n    \n    i",
            "ota_gtid_19599 = get_global_id(0);\n    iota_ltid_19600 = get_local_id(0);\n    iota_gid_19601 = get_group_id(0);\n    if (slt64(iota_gtid_19599, n_19595)) {\n        ((__global int64_t *) mem_19594)[sext_i32_i64(iota_gtid_19599)] =\n            add64(mul64(sext_i32_i64(iota_gtid_19599), s_19597), x_19596);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void builtinzhreplicate_i8zireplicate_19811(int32_t num_elems_19808,\n                                                     int8_t val_19809, __global\n                                                     unsigned char *mem_19807)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19811;\n    int32_t replicate_ltid_19812;\n    int32_t replicate_gid_19813;\n    \n    replicate_gtid_19811 = get_global_id(0);\n    replicate_ltid_19812 = get_local_id(0);\n    replicate_gid_19813 = get_group_id(0);\n    \n    int64_t slice_19817 = num_elems_19808;\n    int64_t rep_i_19816 = sext_i32_i64(replicate_gtid_19811);\n    int64_t remnant_19818 = sext_i32_i64(replicate_gtid_19811) - rep_i_19816;\n    \n    if (slt64(replicate_gtid_19811, num_elems_19808)) {\n        ((__global int8_t *) mem_19807)[rep_i_19816] = val_19809;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32(const int block_dim0, const int block_dim1,\n                                    const int block_dim2,\n                                    uint block_9_backing_offset_0,\n                                    int32_t destoffset_1, int32_t srcoffset_3,\n                                    int32_t num_arrays_4, int32_t x_elems_5,\n                                    int32_t y_elems_6, int32_t mulx_7,\n                                    int32_t muly_8, __global\n                                    unsigned char *destmem_0, __global\n                                    unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n ",
            "   __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_global_id_0_37;\n    int32_t y_index_32 = get_group_id_1_41 * 32 + get_local_id_1_39;\n    float val_44;\n    \n    if (slt32(x_index_31, x_elems_5)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_in_35 = (y_index_32 + j_43 * 8) * x_elems_5 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, y_elems_6)) {\n                val_44 = ((__global\n                           float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                              index_in_35)];\n                ((__local float *) block_9)[sext_i32_i64((get_local_id_1_39 +\n                                                          j_43 * 8) * 33 +\n                                            get_local_id_0_38)] = val_44;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 32 + get_local_id_0_38;\n    y_index_32 = get_group_id_0_40 * 32 + get_local_id_1_39;\n    if (slt32(x_index_31, y_elems_6)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_out_36 = (y_index_32 + j_43 * 8) * y_elems_6 +\n              ",
            "      x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, x_elems_5)) {\n                val_44 = ((__local\n                           float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             33 + get_local_id_1_39 + j_43 *\n                                             8)];\n                ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                               index_out_36)] = val_44;\n            }\n        }\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_height(const int block_dim0, const\n                                               int block_dim1, const\n                                               int block_dim2,\n                                               uint block_9_backing_offset_0,\n                                               int32_t destoffset_1,\n                                               int32_t srcoffset_3,\n                                               int32_t num_arrays_4,\n                                               int32_t x_elems_5,\n                                               int32_t y_elems_6,\n                                               int32_t mulx_7, int32_t muly_8,\n                                               __global\n                                               unsigned char *destmem_0,\n                                               __global unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n ",
            "   \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_0_38 +\n            srem32(get_local_id_1_39, mulx_7) * 16;\n    int32_t y_index_32 = get_group_id_1_41 * 16 + squot32(get_local_id_1_39,\n                                                          mulx_7);\n    float val_44;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = val_44;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 + squot32(get_local_id_0_38, mulx_7);\n    y_index_32 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_1_39 +\n        srem32(get_local_id_0_38, mulx_7) * 16;\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        val_44 = ((__local float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             17 + get_local_id_1_39)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_low_width(const int block_dim0, const\n                                              int block_dim1, const\n                                           ",
            "   int block_dim2,\n                                              uint block_9_backing_offset_0,\n                                              int32_t destoffset_1,\n                                              int32_t srcoffset_3,\n                                              int32_t num_arrays_4,\n                                              int32_t x_elems_5,\n                                              int32_t y_elems_6, int32_t mulx_7,\n                                              int32_t muly_8, __global\n                                              unsigned char *destmem_0, __global\n                                              unsigned char *srcmem_2)\n{\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 + squot32(get_local_id_0_38,\n                                                          muly_8);\n    int32_t y_index_32 = get_group_id_1_41 * 16 * muly_8 + get_local_id_1_39 +\n            srem32(get_local_id_0_38, muly_8) * 16;\n    float val_44;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_3",
            "1, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__local float *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                    get_local_id_0_38)] = val_44;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 * muly_8 + get_local_id_0_38 +\n        srem32(get_local_id_1_39, muly_8) * 16;\n    y_index_32 = get_group_id_0_40 * 16 + squot32(get_local_id_1_39, muly_8);\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        val_44 = ((__local float *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                             17 + get_local_id_1_39)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_f32_small(uint block_9_backing_offset_0,\n                                          int32_t destoffset_1,\n                                          int32_t srcoffset_3,\n                                          int32_t num_arrays_4,\n                                          int32_t x_elems_5, int32_t y_elems_6,\n                                          int32_t mulx_7, int32_t muly_8,\n                                          __global unsigned char *destmem_0,\n                                          __global unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *block_9_backing_0 =\n                           &shared_mem[block_9_backing_offset_0];\n    __local unsigned char *block_9;\n    \n    block_9 = (__local unsigned char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n  ",
            "  int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = squot32(get_global_id_0_37, y_elems_6 *\n                                          x_elems_5) * (y_elems_6 * x_elems_5);\n    int32_t x_index_31 = squot32(srem32(get_global_id_0_37, y_elems_6 *\n                                        x_elems_5), y_elems_6);\n    int32_t y_index_32 = srem32(get_global_id_0_37, y_elems_6);\n    float val_44;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    int32_t index_out_36 = x_index_31 * y_elems_6 + y_index_32;\n    \n    if (slt32(get_global_id_0_37, x_elems_5 * y_elems_6 * num_arrays_4)) {\n        val_44 = ((__global float *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                               index_in_35)];\n        ((__global float *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                       index_out_36)] = val_44;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void randomFieldzisegmap_16729(__global int *global_failure,\n                                        int64_t randomField_1d_arg_16368,\n                                        int32_t unsign_arg_16370, __global\n                                        unsigned char *mem_19049)\n{\n    #define segmap_group_sizze_16725 (randomFieldzisegmap_group_sizze_16704)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19592;\n   ",
            " int32_t local_tid_19593;\n    int64_t group_sizze_19596;\n    int32_t wave_sizze_19595;\n    int32_t group_tid_19594;\n    \n    global_tid_19592 = get_global_id(0);\n    local_tid_19593 = get_local_id(0);\n    group_sizze_19596 = get_local_size(0);\n    wave_sizze_19595 = LOCKSTEP_WIDTH;\n    group_tid_19594 = get_group_id(0);\n    \n    int32_t phys_tid_16729 = global_tid_19592;\n    int64_t global_tid_19597 = sext_i32_i64(group_tid_19594) *\n            segmap_group_sizze_16725 + sext_i32_i64(local_tid_19593);\n    int64_t slice_19598 = randomField_1d_arg_16368;\n    int64_t gtid_16728 = global_tid_19597;\n    int64_t remnant_19599 = global_tid_19597 - gtid_16728;\n    \n    if (slt64(gtid_16728, randomField_1d_arg_16368)) {\n        int32_t i64_res_16731 = sext_i64_i32(gtid_16728);\n        int32_t x_16732 = lshr32(i64_res_16731, 16);\n        int32_t x_16733 = i64_res_16731 ^ x_16732;\n        int32_t x_16734 = mul32(73244475, x_16733);\n        int32_t x_16735 = lshr32(x_16734, 16);\n        int32_t x_16736 = x_16734 ^ x_16735;\n        int32_t x_16737 = mul32(73244475, x_16736);\n        int32_t x_16738 = lshr32(x_16737, 16);\n        int32_t x_16739 = x_16737 ^ x_16738;\n        int32_t unsign_arg_16740 = unsign_arg_16370 ^ x_16739;\n        int32_t unsign_arg_16741 = mul32(48271, unsign_arg_16740);\n        int32_t unsign_arg_16742 = umod32(unsign_arg_16741, 2147483647);\n        float u64_res_16743 = uitofp_i32_f32(unsign_arg_16742);\n        float zs_res_16744 = u64_res_16743 / 2.1474836e9F;\n        \n        ((__global float *) mem_19049)[gtid_16728] = zs_res_16744;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_16725\n}\n__kernel void sortBagzireplicate_19719(int64_t b_16392, int64_t g_16393,\n                                       __global unsigned char *mem_19050,\n                                       __global unsigned char *mem_19319)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19719;\n    int3",
            "2_t replicate_ltid_19720;\n    int32_t replicate_gid_19721;\n    \n    replicate_gtid_19719 = get_global_id(0);\n    replicate_ltid_19720 = get_local_id(0);\n    replicate_gid_19721 = get_group_id(0);\n    \n    int64_t slice_19726 = g_16393;\n    int64_t slice_19727 = b_16392 * slice_19726;\n    int64_t rep_i_19724 = squot64(sext_i32_i64(replicate_gtid_19719),\n                                  slice_19726);\n    int64_t remnant_19728 = sext_i32_i64(replicate_gtid_19719) - rep_i_19724 *\n            slice_19726;\n    int64_t rep_i_19725 = remnant_19728;\n    int64_t remnant_19729 = remnant_19728 - rep_i_19725;\n    \n    if (slt64(replicate_gtid_19719, b_16392 * g_16393)) {\n        int64_t tmp_19730;\n        \n        tmp_19730 = ((__global int64_t *) mem_19050)[rep_i_19725];\n        ((__global int64_t *) mem_19319)[rep_i_19724 * g_16393 + rep_i_19725] =\n            tmp_19730;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void sortBagzisegmap_16894(__global int *global_failure,\n                                    int failure_is_an_option, __global\n                                    int64_t *global_failure_args,\n                                    int64_t b_16392, int64_t g_16393,\n                                    int32_t iters_16397, int64_t i_16400,\n                                    int64_t num_groups_16889,\n                                    int64_t num_threads_19546,\n                                    int32_t virt_num_groups_19604, __global\n                                    unsigned char *mem_19053, __global\n                                    unsigned char *mem_19056, __global\n                                    unsigned char *mem_19232, __global\n                                    unsigned char *mem_19235, __global\n                                    unsigned char *color_19515, __global\n                                    unsigned char *color_19516, __global\n                                    unsigned char *color_19517, __global\n                                    uns",
            "igned char *color_19518, __global\n                                    unsigned char *color_19519, __global\n                                    unsigned char *color_19520, __global\n                                    unsigned char *color_19521, __global\n                                    unsigned char *color_19522, __global\n                                    unsigned char *color_19523, __global\n                                    unsigned char *color_19524, __global\n                                    unsigned char *color_19525)\n{\n    #define segmap_group_sizze_16888 (sortBagzisegmap_group_sizze_16777)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19605;\n    int32_t local_tid_19606;\n    int64_t group_sizze_19609;\n    int32_t wave_sizze_19608;\n    int32_t group_tid_19607;\n    \n    global_tid_19605 = get_global_id(0);\n    local_tid_19606 = get_local_id(0);\n    group_sizze_19609 = get_local_size(0);\n    wave_sizze_19608 = LOCKSTEP_WIDTH;\n    group_tid_19607 = get_group_id(0);\n    \n    int32_t phys_tid_16894 = global_tid_19605;\n    int32_t phys_group_id_19610;\n    \n    phys_group_id_19610 = get_group_id(0);\n    \n    int32_t iterations_19611 = sdiv_up32(virt_num_groups_19604 -\n                                         phys_group_id_19610,\n                                         sext_i64_i32(num_groups_16889));\n    \n    for (int32_t i_19612 = 0; i_19612 < iterations_19611; i_19612++) {\n        int32_t virt_group_id_19613 = phys_group_id_19610 + i_19612 *\n                sext_i64_i32(num_groups_16889);\n        int64_t global_tid_19614 = sext_i32_i64(virt_group_id_19613) *\n                segmap_group_sizze_16888 + sext_i32_i64(local_tid_19606);\n        int64_t sli",
            "ce_19615 = b_16392;\n        int64_t gtid_16893 = global_tid_19614;\n        int64_t remnant_19616 = global_tid_19614 - gtid_16893;\n        \n        if (slt64(gtid_16893, b_16392)) {\n            for (int64_t i_18994 = 0; i_18994 < g_16393; i_18994++) {\n                float x_16898;\n                \n                x_16898 = ((__global float *) mem_19053)[i_18994 * b_16392 +\n                                                         gtid_16893];\n                \n                float defunc_0_f_res_16899 = fmax32(0.0F, x_16898);\n                \n                ((__global float *) color_19525)[phys_tid_16894 + i_18994 *\n                                                 num_threads_19546] =\n                    defunc_0_f_res_16899;\n            }\n            for (int64_t i_19618 = 0; i_19618 < g_16393; i_19618++) {\n                float tmp_19619;\n                \n                tmp_19619 = ((__global float *) color_19525)[phys_tid_16894 +\n                                                             i_19618 *\n                                                             num_threads_19546];\n                ((__global float *) color_19516)[phys_tid_16894 + i_19618 *\n                                                 num_threads_19546] = tmp_19619;\n            }\n            for (int64_t i_19620 = 0; i_19620 < g_16393; i_19620++) {\n                int64_t x_19621 = (int64_t) 0 + i_19620 * (int64_t) 1;\n                \n                ((__global int64_t *) color_19515)[phys_tid_16894 + i_19620 *\n                                                   num_threads_19546] = x_19621;\n            }\n            \n            __global unsigned char *ext_mem_19191;\n            __global unsigned char *ext_mem_unused_19497;\n            __global unsigned char *ext_mem_19190;\n            __global unsigned char *ext_mem_unused_19501;\n            __global unsigned char *mem_param_19077;\n            __global unsigned char *mem_param_19082;\n            __global unsigned char *mem_param_out_19498;\n    ",
            "        __global unsigned char *mem_param_out_19502;\n            \n            mem_param_19077 = color_19516;\n            mem_param_out_19498 = color_19520;\n            mem_param_19082 = color_19515;\n            mem_param_out_19502 = color_19519;\n            for (int32_t i_16902 = 0; i_16902 < iters_16397; i_16902++) {\n                int32_t defunc_2_radix_sort_step_arg_16905 = mul32(2, i_16902);\n                int32_t defunc_0_get_bit_arg_16906 = add32(1,\n                                                           defunc_2_radix_sort_step_arg_16905);\n                bool cond_f_res_16907 = defunc_0_get_bit_arg_16906 == 31;\n                bool cond_f_res_16908 = defunc_2_radix_sort_step_arg_16905 ==\n                     31;\n                int64_t discard_19016;\n                int64_t discard_19017;\n                int64_t discard_19018;\n                int64_t discard_19019;\n                int64_t scanacc_19001;\n                int64_t scanacc_19002;\n                int64_t scanacc_19003;\n                int64_t scanacc_19004;\n                \n                scanacc_19001 = (int64_t) 0;\n                scanacc_19002 = (int64_t) 0;\n                scanacc_19003 = (int64_t) 0;\n                scanacc_19004 = (int64_t) 0;\n                for (int64_t i_19010 = 0; i_19010 < g_16393; i_19010++) {\n                    float x_16926;\n                    \n                    x_16926 = ((__global\n                                float *) mem_param_19077)[phys_tid_16894 +\n                                                          i_19010 *\n                                                          num_threads_19546];\n                    \n                    int32_t i32_arg_16927;\n                    \n                    i32_arg_16927 = futrts_to_bits32(x_16926);\n                    \n                    int32_t unsign_arg_16928 = ashr32(i32_arg_16927,\n                                                      defunc_0_get_bit_arg_16906);\n                    int32_t unsign_arg_1692",
            "9 = 1 & unsign_arg_16928;\n                    int32_t unsign_arg_16930 = ashr32(i32_arg_16927, 31);\n                    int32_t unsign_arg_16931 = 1 & unsign_arg_16930;\n                    bool cond_16932 = unsign_arg_16931 == 1;\n                    bool x_16933 = !cond_16932;\n                    bool y_16934 = cond_f_res_16907 && x_16933;\n                    bool cond_16935 = cond_16932 || y_16934;\n                    int32_t defunc_1_get_bit_res_16936;\n                    \n                    if (cond_16935) {\n                        int32_t defunc_1_get_bit_res_t_res_16937 = 1 ^\n                                unsign_arg_16929;\n                        \n                        defunc_1_get_bit_res_16936 =\n                            defunc_1_get_bit_res_t_res_16937;\n                    } else {\n                        defunc_1_get_bit_res_16936 = unsign_arg_16929;\n                    }\n                    \n                    int32_t x_16938 = mul32(2, defunc_1_get_bit_res_16936);\n                    int32_t unsign_arg_16939 = ashr32(i32_arg_16927,\n                                                      defunc_2_radix_sort_step_arg_16905);\n                    int32_t unsign_arg_16940 = 1 & unsign_arg_16939;\n                    bool y_16941 = cond_f_res_16908 && x_16933;\n                    bool cond_16942 = cond_16932 || y_16941;\n                    int32_t defunc_1_get_bit_res_16943;\n                    \n                    if (cond_16942) {\n                        int32_t defunc_1_get_bit_res_t_res_16944 = 1 ^\n                                unsign_arg_16940;\n                        \n                        defunc_1_get_bit_res_16943 =\n                            defunc_1_get_bit_res_t_res_16944;\n                    } else {\n                        defunc_1_get_bit_res_16943 = unsign_arg_16940;\n                    }\n                    \n                    int32_t defunc_0_f_res_16945 = add32(x_16938,\n                                                         defunc",
            "_1_get_bit_res_16943);\n                    bool cond_16946 = defunc_0_f_res_16945 == 0;\n                    int64_t defunc_0_f_res_16947 = btoi_bool_i64(cond_16946);\n                    int64_t defunc_0_f_res_16948;\n                    int64_t defunc_0_f_res_16949;\n                    int64_t defunc_0_f_res_16950;\n                    \n                    if (cond_16946) {\n                        defunc_0_f_res_16948 = (int64_t) 0;\n                        defunc_0_f_res_16949 = (int64_t) 0;\n                        defunc_0_f_res_16950 = (int64_t) 0;\n                    } else {\n                        bool cond_16951 = defunc_0_f_res_16945 == 1;\n                        int64_t defunc_0_f_res_f_res_16952 =\n                                btoi_bool_i64(cond_16951);\n                        int64_t defunc_0_f_res_f_res_16953;\n                        int64_t defunc_0_f_res_f_res_16954;\n                        \n                        if (cond_16951) {\n                            defunc_0_f_res_f_res_16953 = (int64_t) 0;\n                            defunc_0_f_res_f_res_16954 = (int64_t) 0;\n                        } else {\n                            bool cond_16955 = defunc_0_f_res_16945 == 2;\n                            int64_t defunc_0_f_res_f_res_f_res_16956 =\n                                    btoi_bool_i64(cond_16955);\n                            bool cond_neg_16957 = !cond_16955;\n                            int64_t defunc_0_f_res_f_res_f_res_16958 =\n                                    btoi_bool_i64(cond_neg_16957);\n                            \n                            defunc_0_f_res_f_res_16953 =\n                                defunc_0_f_res_f_res_f_res_16956;\n                            defunc_0_f_res_f_res_16954 =\n                                defunc_0_f_res_f_res_f_res_16958;\n                        }\n                        defunc_0_f_res_16948 = defunc_0_f_res_f_res_16952;\n                        defunc_0_f_res_16949 = defunc_0_f_res_f_res_16953;\n        ",
            "                defunc_0_f_res_16950 = defunc_0_f_res_f_res_16954;\n                    }\n                    \n                    int64_t defunc_1_op_res_16922 = add64(defunc_0_f_res_16947,\n                                                          scanacc_19001);\n                    int64_t defunc_1_op_res_16923 = add64(defunc_0_f_res_16948,\n                                                          scanacc_19002);\n                    int64_t defunc_1_op_res_16924 = add64(defunc_0_f_res_16949,\n                                                          scanacc_19003);\n                    int64_t defunc_1_op_res_16925 = add64(defunc_0_f_res_16950,\n                                                          scanacc_19004);\n                    \n                    ((__global int64_t *) color_19524)[phys_tid_16894 +\n                                                       i_19010 *\n                                                       num_threads_19546] =\n                        defunc_1_op_res_16922;\n                    ((__global int64_t *) color_19523)[phys_tid_16894 +\n                                                       i_19010 *\n                                                       num_threads_19546] =\n                        defunc_1_op_res_16923;\n                    ((__global int64_t *) color_19522)[phys_tid_16894 +\n                                                       i_19010 *\n                                                       num_threads_19546] =\n                        defunc_1_op_res_16924;\n                    ((__global int64_t *) color_19521)[phys_tid_16894 +\n                                                       i_19010 *\n                                                       num_threads_19546] =\n                        defunc_1_op_res_16925;\n                    ((__global int32_t *) color_19517)[phys_tid_16894 +\n                                                       i_19010 *\n                                                       num_threads_19546] =\n",
            "                        defunc_0_f_res_16945;\n                    \n                    int64_t scanacc_tmp_19628 = defunc_1_op_res_16922;\n                    int64_t scanacc_tmp_19629 = defunc_1_op_res_16923;\n                    int64_t scanacc_tmp_19630 = defunc_1_op_res_16924;\n                    int64_t scanacc_tmp_19631 = defunc_1_op_res_16925;\n                    \n                    scanacc_19001 = scanacc_tmp_19628;\n                    scanacc_19002 = scanacc_tmp_19629;\n                    scanacc_19003 = scanacc_tmp_19630;\n                    scanacc_19004 = scanacc_tmp_19631;\n                }\n                discard_19016 = scanacc_19001;\n                discard_19017 = scanacc_19002;\n                discard_19018 = scanacc_19003;\n                discard_19019 = scanacc_19004;\n                \n                int64_t last_res_16959;\n                \n                last_res_16959 = ((__global\n                                   int64_t *) color_19524)[phys_tid_16894 +\n                                                           i_16400 *\n                                                           num_threads_19546];\n                \n                int64_t last_res_16960;\n                \n                last_res_16960 = ((__global\n                                   int64_t *) color_19523)[phys_tid_16894 +\n                                                           i_16400 *\n                                                           num_threads_19546];\n                \n                int64_t last_res_16961;\n                \n                last_res_16961 = ((__global\n                                   int64_t *) color_19522)[phys_tid_16894 +\n                                                           i_16400 *\n                                                           num_threads_19546];\n                for (int64_t i_19637 = 0; i_19637 < g_16393; i_19637++) {\n                    float tmp_19638;\n                    \n                    tmp_19638 = ((__global\n ",
            "                                 float *) mem_param_19077)[phys_tid_16894 +\n                                                            i_19637 *\n                                                            num_threads_19546];\n                    ((__global float *) mem_param_out_19498)[phys_tid_16894 +\n                                                             i_19637 *\n                                                             num_threads_19546] =\n                        tmp_19638;\n                }\n                for (int64_t i_19639 = 0; i_19639 < g_16393; i_19639++) {\n                    int64_t tmp_19640;\n                    \n                    tmp_19640 = ((__global\n                                  int64_t *) mem_param_19082)[phys_tid_16894 +\n                                                              i_19639 *\n                                                              num_threads_19546];\n                    ((__global int64_t *) mem_param_out_19502)[phys_tid_16894 +\n                                                               i_19639 *\n                                                               num_threads_19546] =\n                        tmp_19640;\n                }\n                for (int64_t write_iter_19020 = 0; write_iter_19020 < g_16393;\n                     write_iter_19020++) {\n                    int32_t write_iv_19023;\n                    \n                    write_iv_19023 = ((__global\n                                       int32_t *) color_19517)[phys_tid_16894 +\n                                                               write_iter_19020 *\n                                                               num_threads_19546];\n                    \n                    bool match_lit_16973 = 0 == write_iv_19023;\n                    int64_t defunc_1_f_res_16974;\n                    \n                    if (match_lit_16973) {\n                        int64_t write_iv_19024;\n                        \n                        write_iv_19024",
            " = ((__global\n                                           int64_t *) color_19524)[phys_tid_16894 +\n                                                                   write_iter_19020 *\n                                                                   num_threads_19546];\n                        \n                        int64_t case_res_16975 = sub64(write_iv_19024,\n                                                       (int64_t) 1);\n                        \n                        defunc_1_f_res_16974 = case_res_16975;\n                    } else {\n                        bool match_lit_16976 = 1 == write_iv_19023;\n                        int64_t x_16977;\n                        \n                        if (match_lit_16976) {\n                            int64_t write_iv_19025;\n                            \n                            write_iv_19025 = ((__global\n                                               int64_t *) color_19523)[phys_tid_16894 +\n                                                                       write_iter_19020 *\n                                                                       num_threads_19546];\n                            \n                            int64_t x_16978 = add64(last_res_16959,\n                                                    write_iv_19025);\n                            int64_t case_res_16979 = sub64(x_16978,\n                                                           (int64_t) 1);\n                            \n                            x_16977 = case_res_16979;\n                        } else {\n                            bool match_lit_16980 = 2 == write_iv_19023;\n                            int64_t x_16981;\n                            \n                            if (match_lit_16980) {\n                                int64_t write_iv_19026;\n                                \n                                write_iv_19026 = ((__global\n                                                   int64_t *) color_19522)[phys_tid_16894 +",
            "\n                                                                           write_iter_19020 *\n                                                                           num_threads_19546];\n                                \n                                int64_t x_16982 = add64(last_res_16959,\n                                                        last_res_16960);\n                                int64_t x_16983 = add64(x_16982,\n                                                        write_iv_19026);\n                                int64_t case_res_16984 = sub64(x_16983,\n                                                               (int64_t) 1);\n                                \n                                x_16981 = case_res_16984;\n                            } else {\n                                int64_t write_iv_19027;\n                                \n                                write_iv_19027 = ((__global\n                                                   int64_t *) color_19521)[phys_tid_16894 +\n                                                                           write_iter_19020 *\n                                                                           num_threads_19546];\n                                \n                                int64_t x_16985 = add64(last_res_16959,\n                                                        last_res_16960);\n                                int64_t x_16986 = add64(last_res_16961,\n                                                        x_16985);\n                                int64_t x_16987 = add64(x_16986,\n                                                        write_iv_19027);\n                                int64_t defunc_1_f_res_res_16988 =\n                                        sub64(x_16987, (int64_t) 1);\n                                \n                                x_16981 = defunc_1_f_res_res_16988;\n                            }\n                            x_16977 = x_16981;\n                   ",
            "     }\n                        defunc_1_f_res_16974 = x_16977;\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_16974) &&\n                        slt64(defunc_1_f_res_16974, g_16393)) {\n                        for (int64_t i_19643 = 0; i_19643 < (int64_t) 1;\n                             i_19643++) {\n                            float tmp_19644;\n                            \n                            tmp_19644 = ((__global\n                                          float *) mem_param_19077)[phys_tid_16894 +\n                                                                    num_threads_19546 *\n                                                                    write_iter_19020 +\n                                                                    i_19643 *\n                                                                    num_threads_19546];\n                            ((__global\n                              float *) mem_param_out_19498)[phys_tid_16894 +\n                                                            num_threads_19546 *\n                                                            defunc_1_f_res_16974 +\n                                                            i_19643 *\n                                                            num_threads_19546] =\n                                tmp_19644;\n                        }\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_16974) &&\n                        slt64(defunc_1_f_res_16974, g_16393)) {\n                        for (int64_t i_19645 = 0; i_19645 < (int64_t) 1;\n                             i_19645++) {\n                            int64_t tmp_19646;\n                            \n                            tmp_19646 = ((__global\n                                          int64_t *) mem_param_19082)[phys_tid_16894 +\n                                                                      num_threads_19546 *\n                                             ",
            "                         write_iter_19020 +\n                                                                      i_19645 *\n                                                                      num_threads_19546];\n                            ((__global\n                              int64_t *) mem_param_out_19502)[phys_tid_16894 +\n                                                              num_threads_19546 *\n                                                              defunc_1_f_res_16974 +\n                                                              i_19645 *\n                                                              num_threads_19546] =\n                                tmp_19646;\n                        }\n                    }\n                }\n                \n                __global unsigned char *mem_param_tmp_19622;\n                \n                mem_param_tmp_19622 = mem_param_out_19498;\n                \n                __global unsigned char *mem_param_out_tmp_19623;\n                \n                mem_param_out_tmp_19623 = mem_param_19077;\n                \n                __global unsigned char *mem_param_tmp_19624;\n                \n                mem_param_tmp_19624 = mem_param_out_19502;\n                \n                __global unsigned char *mem_param_out_tmp_19625;\n                \n                mem_param_out_tmp_19625 = mem_param_19082;\n                mem_param_19077 = mem_param_tmp_19622;\n                mem_param_out_19498 = mem_param_out_tmp_19623;\n                mem_param_19082 = mem_param_tmp_19624;\n                mem_param_out_19502 = mem_param_out_tmp_19625;\n            }\n            ext_mem_19191 = mem_param_19077;\n            ext_mem_unused_19497 = mem_param_out_19498;\n            ext_mem_19190 = mem_param_19082;\n            ext_mem_unused_19501 = mem_param_out_19502;\n            for (int64_t i_19036 = 0; i_19036 < g_16393; i_19036++) {\n                int64_t x_16991;\n                \n                x_16991 = ((__global int6",
            "4_t *) ext_mem_19190)[phys_tid_16894 +\n                                                               i_19036 *\n                                                               num_threads_19546];\n                \n                bool x_16992 = sle64((int64_t) 0, x_16991);\n                bool y_16993 = slt64(x_16991, g_16393);\n                bool bounds_check_16994 = x_16992 && y_16993;\n                bool index_certs_16995;\n                \n                if (!bounds_check_16994) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 0) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_16991;\n                            global_failure_args[1] = (int64_t) g_16393;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                for (int64_t i_19649 = 0; i_19649 < (int64_t) 1; i_19649++) {\n                    float tmp_19650;\n                    \n                    tmp_19650 = ((__global float *) mem_19056)[b_16392 *\n                                                               x_16991 +\n                                                               gtid_16893 +\n                                                               i_19649 *\n                                                               b_16392];\n                    ((__global float *) color_19518)[phys_tid_16894 +\n                                                     num_threads_19546 *\n                                                     i_19036 + i_19649 *\n                                                     num_threads_19546] =\n                        tmp_19650;\n                }\n                for (int64_t i_19651 = 0; i_19651 < (int64_t) 1; i_19651++) {\n                    float tmp_19652;\n                    \n                    tmp_19652 = ((__global\n                        ",
            "          float *) color_19525)[phys_tid_16894 +\n                                                        num_threads_19546 *\n                                                        x_16991 + i_19651 *\n                                                        num_threads_19546];\n                    ((__global float *) color_19517)[phys_tid_16894 +\n                                                     num_threads_19546 *\n                                                     i_19036 + i_19651 *\n                                                     num_threads_19546] =\n                        tmp_19652;\n                }\n            }\n            for (int64_t i_19653 = 0; i_19653 < g_16393; i_19653++) {\n                float tmp_19654;\n                \n                tmp_19654 = ((__global float *) color_19518)[phys_tid_16894 +\n                                                             i_19653 *\n                                                             num_threads_19546];\n                ((__global float *) mem_19232)[gtid_16893 + i_19653 * b_16392] =\n                    tmp_19654;\n            }\n            for (int64_t i_19655 = 0; i_19655 < g_16393; i_19655++) {\n                float tmp_19656;\n                \n                tmp_19656 = ((__global float *) color_19517)[phys_tid_16894 +\n                                                             i_19655 *\n                                                             num_threads_19546];\n                ((__global float *) mem_19235)[gtid_16893 + i_19655 * b_16392] =\n                    tmp_19656;\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_16888\n}\n__kernel void sortBagzisegmap_17558(__global int *global_failure,\n                                    int64_t b_16392, int64_t g_16393, __global\n                                    unsigned char *keys_mem_19046, __global\n                                    unsigned char ",
            "*mem_19315)\n{\n    #define segmap_group_sizze_17553 (sortBagzisegmap_group_sizze_17529)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19709;\n    int32_t local_tid_19710;\n    int64_t group_sizze_19713;\n    int32_t wave_sizze_19712;\n    int32_t group_tid_19711;\n    \n    global_tid_19709 = get_global_id(0);\n    local_tid_19710 = get_local_id(0);\n    group_sizze_19713 = get_local_size(0);\n    wave_sizze_19712 = LOCKSTEP_WIDTH;\n    group_tid_19711 = get_group_id(0);\n    \n    int32_t phys_tid_17558 = global_tid_19709;\n    int64_t global_tid_19714 = sext_i32_i64(group_tid_19711) *\n            segmap_group_sizze_17553 + sext_i32_i64(local_tid_19710);\n    int64_t slice_19715 = g_16393;\n    int64_t slice_19716 = b_16392 * slice_19715;\n    int64_t gtid_17556 = squot64(global_tid_19714, slice_19715);\n    int64_t remnant_19717 = global_tid_19714 - gtid_17556 * slice_19715;\n    int64_t gtid_17557 = remnant_19717;\n    int64_t remnant_19718 = remnant_19717 - gtid_17557;\n    \n    if (slt64(gtid_17556, b_16392) && slt64(gtid_17557, g_16393)) {\n        float x_17559;\n        \n        x_17559 = ((__global float *) keys_mem_19046)[gtid_17556 * g_16393 +\n                                                      gtid_17557];\n        \n        float defunc_0_f_res_17560 = fmax32(0.0F, x_17559);\n        \n        ((__global float *) mem_19315)[gtid_17556 * g_16393 + gtid_17557] =\n            defunc_0_f_res_17560;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17553\n}\n__kernel void sortBagzisegmap_17759(__global int *global_failure,\n                                    int64_t b_16392, int64_t g_16393,\n                                    int64_t i_16400, __global\n                                    unsigned char *mem_param_19331, __global\n                                    unsigned char *mem_param_19339, __global\n                                    unsigne",
            "d char *mem_19347, __global\n                                    unsigned char *mem_19351, __global\n                                    unsigned char *mem_19388, __global\n                                    unsigned char *mem_19392, __global\n                                    unsigned char *mem_19396, __global\n                                    unsigned char *mem_19400, __global\n                                    unsigned char *mem_19404)\n{\n    #define segmap_group_sizze_17753 (sortBagzisegmap_group_sizze_17301)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20049;\n    int32_t local_tid_20050;\n    int64_t group_sizze_20053;\n    int32_t wave_sizze_20052;\n    int32_t group_tid_20051;\n    \n    global_tid_20049 = get_global_id(0);\n    local_tid_20050 = get_local_id(0);\n    group_sizze_20053 = get_local_size(0);\n    wave_sizze_20052 = LOCKSTEP_WIDTH;\n    group_tid_20051 = get_group_id(0);\n    \n    int32_t phys_tid_17759 = global_tid_20049;\n    int64_t global_tid_20054 = sext_i32_i64(group_tid_20051) *\n            segmap_group_sizze_17753 + sext_i32_i64(local_tid_20050);\n    int64_t slice_20055 = g_16393;\n    int64_t slice_20056 = b_16392 * slice_20055;\n    int64_t gtid_17757 = squot64(global_tid_20054, slice_20055);\n    int64_t remnant_20057 = global_tid_20054 - gtid_17757 * slice_20055;\n    int64_t gtid_17758 = remnant_20057;\n    int64_t remnant_20058 = remnant_20057 - gtid_17758;\n    \n    if (slt64(gtid_17757, b_16392) && slt64(gtid_17758, g_16393)) {\n        int32_t x_17763;\n        \n        x_17763 = ((__global int32_t *) mem_19404)[gtid_17757 * g_16393 +\n                                                   gtid_17758];\n        \n        float write_value_17768;\n        \n        write_value_17768 = ((__global float *) mem_param_19331)[gtid_17757 *\n                                                                 g_16393 +\n                      ",
            "                                           gtid_17758];\n        \n        int64_t write_value_17769;\n        \n        write_value_17769 = ((__global int64_t *) mem_param_19339)[gtid_17757 *\n                                                                   g_16393 +\n                                                                   gtid_17758];\n        \n        bool match_lit_17770 = 0 == x_17763;\n        int64_t defunc_1_f_res_17771;\n        \n        if (match_lit_17770) {\n            int64_t x_17764;\n            \n            x_17764 = ((__global int64_t *) mem_19388)[gtid_17757 * g_16393 +\n                                                       gtid_17758];\n            \n            int64_t case_res_17772 = sub64(x_17764, (int64_t) 1);\n            \n            defunc_1_f_res_17771 = case_res_17772;\n        } else {\n            int64_t last_res_17760;\n            \n            last_res_17760 = ((__global int64_t *) mem_19388)[gtid_17757 *\n                                                              g_16393 +\n                                                              i_16400];\n            \n            bool match_lit_17773 = 1 == x_17763;\n            int64_t x_17774;\n            \n            if (match_lit_17773) {\n                int64_t x_17765;\n                \n                x_17765 = ((__global int64_t *) mem_19392)[gtid_17757 *\n                                                           g_16393 +\n                                                           gtid_17758];\n                \n                int64_t x_17775 = add64(last_res_17760, x_17765);\n                int64_t case_res_17776 = sub64(x_17775, (int64_t) 1);\n                \n                x_17774 = case_res_17776;\n            } else {\n                int64_t last_res_17761;\n                \n                last_res_17761 = ((__global int64_t *) mem_19392)[gtid_17757 *\n                                                                  g_16393 +\n                                                           ",
            "       i_16400];\n                \n                bool match_lit_17777 = 2 == x_17763;\n                int64_t x_17778;\n                \n                if (match_lit_17777) {\n                    int64_t x_17766;\n                    \n                    x_17766 = ((__global int64_t *) mem_19396)[gtid_17757 *\n                                                               g_16393 +\n                                                               gtid_17758];\n                    \n                    int64_t x_17779 = add64(last_res_17760, last_res_17761);\n                    int64_t x_17780 = add64(x_17766, x_17779);\n                    int64_t case_res_17781 = sub64(x_17780, (int64_t) 1);\n                    \n                    x_17778 = case_res_17781;\n                } else {\n                    int64_t last_res_17762;\n                    \n                    last_res_17762 = ((__global\n                                       int64_t *) mem_19396)[gtid_17757 *\n                                                             g_16393 + i_16400];\n                    \n                    int64_t x_17767;\n                    \n                    x_17767 = ((__global int64_t *) mem_19400)[gtid_17757 *\n                                                               g_16393 +\n                                                               gtid_17758];\n                    \n                    int64_t x_17782 = add64(last_res_17760, last_res_17761);\n                    int64_t x_17783 = add64(last_res_17762, x_17782);\n                    int64_t x_17784 = add64(x_17767, x_17783);\n                    int64_t defunc_1_f_res_res_17785 = sub64(x_17784,\n                                                             (int64_t) 1);\n                    \n                    x_17778 = defunc_1_f_res_res_17785;\n                }\n                x_17774 = x_17778;\n            }\n            defunc_1_f_res_17771 = x_17774;\n        }\n        if ((sle64((int64_t) 0, gtid_17757) && slt64(gtid_17757, b_1",
            "6392)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_17771) &&\n             slt64(defunc_1_f_res_17771, g_16393))) {\n            ((__global float *) mem_19347)[gtid_17757 * g_16393 +\n                                           defunc_1_f_res_17771] =\n                write_value_17768;\n        }\n        if ((sle64((int64_t) 0, gtid_17757) && slt64(gtid_17757, b_16392)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_17771) &&\n             slt64(defunc_1_f_res_17771, g_16393))) {\n            ((__global int64_t *) mem_19351)[gtid_17757 * g_16393 +\n                                             defunc_1_f_res_17771] =\n                write_value_17769;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17753\n}\n__kernel void sortBagzisegmap_17800(__global int *global_failure,\n                                    int failure_is_an_option, __global\n                                    int64_t *global_failure_args,\n                                    int64_t b_16392, int64_t g_16393, __global\n                                    unsigned char *values_mem_19047, __global\n                                    unsigned char *mem_19315, __global\n                                    unsigned char *ext_mem_19412, __global\n                                    unsigned char *mem_19432, __global\n                                    unsigned char *mem_19436)\n{\n    #define segmap_group_sizze_17794 (sortBagzisegmap_group_sizze_17135)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20061;\n    int32_t local_tid_20062;\n    int64_t group_sizze_20065;\n    int32_t wave_sizze_20064;\n    int32_t group_tid_20063;\n    \n    global_tid_20061 = get_global_id(0);\n    local_tid_20062 = get_local_id(0);\n    group_sizze_20065 = get_local_size(0);\n    wave_sizze_20064 = LOCKSTEP_WIDTH;\n    group_tid_20063 = get_group_id(0);\n    \n    int32_t phys_tid_17800 = glob",
            "al_tid_20061;\n    int64_t global_tid_20066 = sext_i32_i64(group_tid_20063) *\n            segmap_group_sizze_17794 + sext_i32_i64(local_tid_20062);\n    int64_t slice_20067 = g_16393;\n    int64_t slice_20068 = b_16392 * slice_20067;\n    int64_t gtid_17798 = squot64(global_tid_20066, slice_20067);\n    int64_t remnant_20069 = global_tid_20066 - gtid_17798 * slice_20067;\n    int64_t gtid_17799 = remnant_20069;\n    int64_t remnant_20070 = remnant_20069 - gtid_17799;\n    \n    if (slt64(gtid_17798, b_16392) && slt64(gtid_17799, g_16393)) {\n        int64_t x_17803;\n        \n        x_17803 = ((__global int64_t *) ext_mem_19412)[gtid_17798 * g_16393 +\n                                                       gtid_17799];\n        \n        bool x_17804 = sle64((int64_t) 0, x_17803);\n        bool y_17805 = slt64(x_17803, g_16393);\n        bool bounds_check_17806 = x_17804 && y_17805;\n        bool index_certs_17807;\n        \n        if (!bounds_check_17806) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 2) == -1) {\n                    global_failure_args[0] = (int64_t) x_17803;\n                    global_failure_args[1] = (int64_t) g_16393;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        float defunc_0_f_res_17808;\n        \n        defunc_0_f_res_17808 = ((__global\n                                 float *) values_mem_19047)[gtid_17798 *\n                                                            g_16393 + x_17803];\n        \n        float defunc_0_f_res_17809;\n        \n        defunc_0_f_res_17809 = ((__global float *) mem_19315)[gtid_17798 *\n                                                              g_16393 +\n                                                              x_17803];\n        ((__global float *) mem_19432)[gtid_17798 * g_16393 + gtid_17799] =\n            defunc_0_f_res_17808;\n        ((__global float *) mem_19436)[gtid_17798 * g_16393 + gtid_17799] =\n            defunc_0_f_res_",
            "17809;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17794\n}\n__kernel void sortBagzisegmap_intragroup_17006(__global int *global_failure,\n                                               int failure_is_an_option,\n                                               __global\n                                               int64_t *global_failure_args,\n                                               uint color_19537_backing_offset_0,\n                                               uint color_19536_backing_offset_1,\n                                               uint color_19535_backing_offset_2,\n                                               uint color_19534_backing_offset_3,\n                                               uint color_19533_backing_offset_4,\n                                               uint color_19532_backing_offset_5,\n                                               uint color_19530_backing_offset_6,\n                                               uint color_19529_backing_offset_7,\n                                               uint color_19528_backing_offset_8,\n                                               int64_t b_16392, int64_t g_16393,\n                                               int32_t iters_16397,\n                                               int64_t i_16400, __global\n                                               unsigned char *keys_mem_19046,\n                                               __global\n                                               unsigned char *values_mem_19047,\n                                               __global\n                                               unsigned char *mem_19306,\n                                               __global\n                                               unsigned char *mem_19310,\n                                               __global\n                                               unsigned char *color_19527,\n                                               __global\n                   ",
            "                            unsigned char *color_19531)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19537_backing_8 =\n                           &shared_mem[color_19537_backing_offset_0];\n    volatile unsigned char *color_19536_backing_7 =\n                           &shared_mem[color_19536_backing_offset_1];\n    volatile unsigned char *color_19535_backing_6 =\n                           &shared_mem[color_19535_backing_offset_2];\n    volatile unsigned char *color_19534_backing_5 =\n                           &shared_mem[color_19534_backing_offset_3];\n    volatile unsigned char *color_19533_backing_4 =\n                           &shared_mem[color_19533_backing_offset_4];\n    volatile unsigned char *color_19532_backing_3 =\n                           &shared_mem[color_19532_backing_offset_5];\n    volatile unsigned char *color_19530_backing_2 =\n                           &shared_mem[color_19530_backing_offset_6];\n    volatile unsigned char *color_19529_backing_1 =\n                           &shared_mem[color_19529_backing_offset_7];\n    volatile unsigned char *color_19528_backing_0 =\n                           &shared_mem[color_19528_backing_offset_8];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19659;\n    int32_t local_tid_19660;\n    int64_t group_sizze_19663;\n    int32_t wave_sizze_19662;\n    int32_t group_tid_19661;\n    \n    global_tid_19659 = get_global_id(0);\n    local_tid_19660 = get_local_id(0);\n    group_sizze_19663 = get_local_size(0);\n    wave_sizze_19662 = LOCKSTEP_WIDTH;\n    group_tid_19661 = get_group_id(0);\n    \n    int32_t phys_tid_17006 = group_tid_19661;\n    int64_t slice_19665 = g_16393;\n    int64_t ltid_pre_19664 = sext_i32_i64(local_tid_19660);\n    int64_t",
            " remnant_19666 = sext_i32_i64(local_tid_19660) - ltid_pre_19664;\n    int64_t slice_19667 = b_16392;\n    int64_t gtid_17005 = sext_i32_i64(group_tid_19661);\n    int64_t remnant_19668 = sext_i32_i64(group_tid_19661) - gtid_17005;\n    __local unsigned char *color_19528;\n    \n    color_19528 = (__local unsigned char *) color_19528_backing_0;\n    \n    __local unsigned char *color_19529;\n    \n    color_19529 = (__local unsigned char *) color_19529_backing_1;\n    \n    __local unsigned char *color_19530;\n    \n    color_19530 = (__local unsigned char *) color_19530_backing_2;\n    \n    __local unsigned char *color_19532;\n    \n    color_19532 = (__local unsigned char *) color_19532_backing_3;\n    \n    __local unsigned char *color_19533;\n    \n    color_19533 = (__local unsigned char *) color_19533_backing_4;\n    \n    __local unsigned char *color_19534;\n    \n    color_19534 = (__local unsigned char *) color_19534_backing_5;\n    \n    __local unsigned char *color_19535;\n    \n    color_19535 = (__local unsigned char *) color_19535_backing_6;\n    \n    __local unsigned char *color_19536;\n    \n    color_19536 = (__local unsigned char *) color_19536_backing_7;\n    \n    __local unsigned char *color_19537;\n    \n    color_19537 = (__local unsigned char *) color_19537_backing_8;\n    \n    int32_t phys_tid_17013 = local_tid_19660;\n    int64_t gtid_17012 = sext_i32_i64(sext_i64_i32(ltid_pre_19664));\n    float x_17014;\n    \n    x_17014 = ((__global float *) keys_mem_19046)[gtid_17005 * g_16393 +\n                                                  gtid_17012];\n    \n    float defunc_0_f_res_17015 = fmax32(0.0F, x_17014);\n    \n    ((__local float *) color_19537)[gtid_17012] = defunc_0_f_res_17015;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19669;\n    \n    tmp_19669 = ((__local float *) color_19537)[sext_i32_i64(local_tid_19660)];\n    ((__local float *) color_19528)[sext_i32_i64(local_tid_19660)] = tmp_19669;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t x_19670 = (int64_t) 0 + sext_i",
            "32_i64(local_tid_19660) * (int64_t) 1;\n    \n    ((__global int64_t *) color_19527)[phys_tid_17006 * g_16393 +\n                                       sext_i32_i64(local_tid_19660)] = x_19670;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local unsigned char *ext_mem_19287;\n    __local unsigned char *ext_mem_unused_19507;\n    __global unsigned char *ext_mem_19286;\n    __global unsigned char *ext_mem_unused_19511;\n    __local unsigned char *mem_param_19245;\n    __global unsigned char *mem_param_19250;\n    __local unsigned char *mem_param_out_19508;\n    __global unsigned char *mem_param_out_19512;\n    \n    mem_param_19245 = color_19528;\n    mem_param_out_19508 = color_19532;\n    mem_param_19250 = color_19527;\n    mem_param_out_19512 = color_19531;\n    for (int32_t i_17018 = 0; i_17018 < iters_16397; i_17018++) {\n        int32_t defunc_2_radix_sort_step_arg_17021 = mul32(2, i_17018);\n        int32_t defunc_0_get_bit_arg_17022 = add32(1,\n                                                   defunc_2_radix_sort_step_arg_17021);\n        bool cond_f_res_17023 = defunc_0_get_bit_arg_17022 == 31;\n        bool cond_f_res_17024 = defunc_2_radix_sort_step_arg_17021 == 31;\n        int32_t phys_tid_17031 = local_tid_19660;\n        int64_t gtid_17030 = sext_i32_i64(sext_i64_i32(ltid_pre_19664));\n        float x_17044;\n        \n        x_17044 = ((__local float *) mem_param_19245)[gtid_17030];\n        \n        int32_t i32_arg_17045;\n        \n        i32_arg_17045 = futrts_to_bits32(x_17044);\n        \n        int32_t unsign_arg_17046 = ashr32(i32_arg_17045,\n                                          defunc_0_get_bit_arg_17022);\n        int32_t unsign_arg_17047 = 1 & unsign_arg_17046;\n        int32_t unsign_arg_17048 = ashr32(i32_arg_17045, 31);\n        int32_t unsign_arg_17049 = 1 & unsign_arg_17048;\n        bool cond_17050 = unsign_arg_17049 == 1;\n        bool x_17051 = !cond_17050;\n        bool y_17052 = cond_f_res_17023 && x_17051;\n        bool cond_17053 = cond_17050 || y_17052;\n      ",
            "  int32_t defunc_1_get_bit_res_17054;\n        \n        if (cond_17053) {\n            int32_t defunc_1_get_bit_res_t_res_17055 = 1 ^ unsign_arg_17047;\n            \n            defunc_1_get_bit_res_17054 = defunc_1_get_bit_res_t_res_17055;\n        } else {\n            defunc_1_get_bit_res_17054 = unsign_arg_17047;\n        }\n        \n        int32_t x_17056 = mul32(2, defunc_1_get_bit_res_17054);\n        int32_t unsign_arg_17057 = ashr32(i32_arg_17045,\n                                          defunc_2_radix_sort_step_arg_17021);\n        int32_t unsign_arg_17058 = 1 & unsign_arg_17057;\n        bool y_17059 = cond_f_res_17024 && x_17051;\n        bool cond_17060 = cond_17050 || y_17059;\n        int32_t defunc_1_get_bit_res_17061;\n        \n        if (cond_17060) {\n            int32_t defunc_1_get_bit_res_t_res_17062 = 1 ^ unsign_arg_17058;\n            \n            defunc_1_get_bit_res_17061 = defunc_1_get_bit_res_t_res_17062;\n        } else {\n            defunc_1_get_bit_res_17061 = unsign_arg_17058;\n        }\n        \n        int32_t defunc_0_f_res_17063 = add32(x_17056,\n                                             defunc_1_get_bit_res_17061);\n        bool cond_17064 = defunc_0_f_res_17063 == 0;\n        int64_t defunc_0_f_res_17065 = btoi_bool_i64(cond_17064);\n        int64_t defunc_0_f_res_17066;\n        int64_t defunc_0_f_res_17067;\n        int64_t defunc_0_f_res_17068;\n        \n        if (cond_17064) {\n            defunc_0_f_res_17066 = (int64_t) 0;\n            defunc_0_f_res_17067 = (int64_t) 0;\n            defunc_0_f_res_17068 = (int64_t) 0;\n        } else {\n            bool cond_17069 = defunc_0_f_res_17063 == 1;\n            int64_t defunc_0_f_res_f_res_17070 = btoi_bool_i64(cond_17069);\n            int64_t defunc_0_f_res_f_res_17071;\n            int64_t defunc_0_f_res_f_res_17072;\n            \n            if (cond_17069) {\n                defunc_0_f_res_f_res_17071 = (int64_t) 0;\n                defunc_0_f_res_f_res_17072 = (int64_t) 0;\n            } else {\n    ",
            "            bool cond_17073 = defunc_0_f_res_17063 == 2;\n                int64_t defunc_0_f_res_f_res_f_res_17074 =\n                        btoi_bool_i64(cond_17073);\n                bool cond_neg_17075 = !cond_17073;\n                int64_t defunc_0_f_res_f_res_f_res_17076 =\n                        btoi_bool_i64(cond_neg_17075);\n                \n                defunc_0_f_res_f_res_17071 = defunc_0_f_res_f_res_f_res_17074;\n                defunc_0_f_res_f_res_17072 = defunc_0_f_res_f_res_f_res_17076;\n            }\n            defunc_0_f_res_17066 = defunc_0_f_res_f_res_17070;\n            defunc_0_f_res_17067 = defunc_0_f_res_f_res_17071;\n            defunc_0_f_res_17068 = defunc_0_f_res_f_res_17072;\n        }\n        ((__local int64_t *) color_19536)[gtid_17030] = defunc_0_f_res_17065;\n        ((__local int64_t *) color_19535)[gtid_17030] = defunc_0_f_res_17066;\n        ((__local int64_t *) color_19534)[gtid_17030] = defunc_0_f_res_17067;\n        ((__local int64_t *) color_19533)[gtid_17030] = defunc_0_f_res_17068;\n        ((__local int32_t *) color_19530)[gtid_17030] = defunc_0_f_res_17063;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t dims_flat_19677 = g_16393;\n        int64_t x_17032;\n        int64_t x_17033;\n        int64_t x_17034;\n        int64_t x_17035;\n        int64_t x_17036;\n        int64_t x_17037;\n        int64_t x_17038;\n        int64_t x_17039;\n        int64_t x_19682;\n        int64_t x_19683;\n        int64_t x_19684;\n        int64_t x_19685;\n        int64_t x_19686;\n        int64_t x_19687;\n        int64_t x_19688;\n        int64_t x_19689;\n        bool ltid_in_bounds_19694 = slt64(sext_i32_i64(local_tid_19660),\n                                          g_16393);\n        int32_t skip_threads_19695;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19694) {\n                x_17036 = ((volatile __local\n                            int64_t *) color_19536)[sext_i32_i64(local_tid_19660)];\n           ",
            "     x_17037 = ((volatile __local\n                            int64_t *) color_19535)[sext_i32_i64(local_tid_19660)];\n                x_17038 = ((volatile __local\n                            int64_t *) color_19534)[sext_i32_i64(local_tid_19660)];\n                x_17039 = ((volatile __local\n                            int64_t *) color_19533)[sext_i32_i64(local_tid_19660)];\n                if ((local_tid_19660 - squot32(local_tid_19660, 32) * 32) ==\n                    0) {\n                    x_17032 = x_17036;\n                    x_17033 = x_17037;\n                    x_17034 = x_17038;\n                    x_17035 = x_17039;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19695 = 1;\n            while (slt32(skip_threads_19695, 32)) {\n                bool thread_active_19696 = sle32(skip_threads_19695,\n                                                 local_tid_19660 -\n                                                 squot32(local_tid_19660, 32) *\n                                                 32) && ltid_in_bounds_19694;\n                \n                if (thread_active_19696) {\n                    // read operands\n                    {\n                        x_17032 = ((volatile __local\n                                    int64_t *) color_19536)[sext_i32_i64(local_tid_19660) -\n                                                            sext_i32_i64(skip_threads_19695)];\n                        x_17033 = ((volatile __local\n                                    int64_t *) color_19535)[sext_i32_i64(local_tid_19660) -\n                                                            sext_i32_i64(skip_threads_19695)];\n                        x_17034 = ((volatile __local\n                                    int64_t *) color_19534)[sext_i32_i64(local_tid_19660) -\n                                                            sext_i32_i64(skip_threads_19695)];\n                        x_17035 = ((v",
            "olatile __local\n                                    int64_t *) color_19533)[sext_i32_i64(local_tid_19660) -\n                                                            sext_i32_i64(skip_threads_19695)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19697 =\n                         slt64(srem64(sext_i32_i64(local_tid_19660), g_16393),\n                               sext_i32_i64(local_tid_19660) -\n                               sext_i32_i64(local_tid_19660 -\n                               skip_threads_19695));\n                    \n                    if (thread_active_19696 && inactive_19697) {\n                        x_17032 = x_17036;\n                        x_17033 = x_17037;\n                        x_17034 = x_17038;\n                        x_17035 = x_17039;\n                    }\n                    if (thread_active_19696) {\n                        if (!inactive_19697) {\n                            int64_t defunc_1_op_res_17040 = add64(x_17032,\n                                                                  x_17036);\n                            int64_t defunc_1_op_res_17041 = add64(x_17033,\n                                                                  x_17037);\n                            int64_t defunc_1_op_res_17042 = add64(x_17034,\n                                                                  x_17038);\n                            int64_t defunc_1_op_res_17043 = add64(x_17035,\n                                                                  x_17039);\n                            \n                            x_17032 = defunc_1_op_res_17040;\n                            x_17033 = defunc_1_op_res_17041;\n                            x_17034 = defunc_1_op_res_17042;\n                            x_17035 = defunc_1_op_res_17043;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19662, skip_threads_19695)) {\n                   ",
            " barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19696) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19536)[sext_i32_i64(local_tid_19660)] =\n                            x_17032;\n                        x_17036 = x_17032;\n                        ((volatile __local\n                          int64_t *) color_19535)[sext_i32_i64(local_tid_19660)] =\n                            x_17033;\n                        x_17037 = x_17033;\n                        ((volatile __local\n                          int64_t *) color_19534)[sext_i32_i64(local_tid_19660)] =\n                            x_17034;\n                        x_17038 = x_17034;\n                        ((volatile __local\n                          int64_t *) color_19533)[sext_i32_i64(local_tid_19660)] =\n                            x_17035;\n                        x_17039 = x_17035;\n                    }\n                }\n                if (sle32(wave_sizze_19662, skip_threads_19695)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19695 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19660 - squot32(local_tid_19660, 32) * 32) == 31 &&\n                ltid_in_bounds_19694) {\n                ((volatile __local\n                  int64_t *) color_19536)[sext_i32_i64(squot32(local_tid_19660,\n                                                               32))] = x_17032;\n                ((volatile __local\n                  int64_t *) color_19535)[sext_i32_i64(squot32(local_tid_19660,\n                                                               32))] = x_17033;\n                ((volatile __local\n                  int64_t *) color_19534)[sext_i32_i64(squot32(local_tid_19660,\n                                              ",
            "                 32))] = x_17034;\n                ((volatile __local\n                  int64_t *) color_19533)[sext_i32_i64(squot32(local_tid_19660,\n                                                               32))] = x_17035;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19698;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19660, 32) == 0 && ltid_in_bounds_19694) {\n                    x_19686 = ((volatile __local\n                                int64_t *) color_19536)[sext_i32_i64(local_tid_19660)];\n                    x_19687 = ((volatile __local\n                                int64_t *) color_19535)[sext_i32_i64(local_tid_19660)];\n                    x_19688 = ((volatile __local\n                                int64_t *) color_19534)[sext_i32_i64(local_tid_19660)];\n                    x_19689 = ((volatile __local\n                                int64_t *) color_19533)[sext_i32_i64(local_tid_19660)];\n                    if ((local_tid_19660 - squot32(local_tid_19660, 32) * 32) ==\n                        0) {\n                        x_19682 = x_19686;\n                        x_19683 = x_19687;\n                        x_19684 = x_19688;\n                        x_19685 = x_19689;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19698 = 1;\n                while (slt32(skip_threads_19698, 32)) {\n                    bool thread_active_19699 = sle32(skip_threads_19698,\n                                                     local_tid_19660 -\n                                                     squot32(local_tid_19660,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19660, 32) == 0 &&\n    ",
            "                      ltid_in_bounds_19694);\n                    \n                    if (thread_active_19699) {\n                        // read operands\n                        {\n                            x_19682 = ((volatile __local\n                                        int64_t *) color_19536)[sext_i32_i64(local_tid_19660) -\n                                                                sext_i32_i64(skip_threads_19698)];\n                            x_19683 = ((volatile __local\n                                        int64_t *) color_19535)[sext_i32_i64(local_tid_19660) -\n                                                                sext_i32_i64(skip_threads_19698)];\n                            x_19684 = ((volatile __local\n                                        int64_t *) color_19534)[sext_i32_i64(local_tid_19660) -\n                                                                sext_i32_i64(skip_threads_19698)];\n                            x_19685 = ((volatile __local\n                                        int64_t *) color_19533)[sext_i32_i64(local_tid_19660) -\n                                                                sext_i32_i64(skip_threads_19698)];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19700 =\n                             slt64(srem64(sext_i32_i64(local_tid_19660 * 32 +\n                                          32 - 1), g_16393),\n                                   sext_i32_i64(local_tid_19660 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_19660 -\n                                                 skip_threads_19698) * 32 + 32 -\n                                   1));\n                        \n                        if (thread_active_19699 && inactive_19700) {\n                            x_19682 = x_19686;\n                            x_19683 = x_19687;\n                            x_19684 = x_19688;\n            ",
            "                x_19685 = x_19689;\n                        }\n                        if (thread_active_19699) {\n                            if (!inactive_19700) {\n                                int64_t defunc_1_op_res_19690 = add64(x_19682,\n                                                                      x_19686);\n                                int64_t defunc_1_op_res_19691 = add64(x_19683,\n                                                                      x_19687);\n                                int64_t defunc_1_op_res_19692 = add64(x_19684,\n                                                                      x_19688);\n                                int64_t defunc_1_op_res_19693 = add64(x_19685,\n                                                                      x_19689);\n                                \n                                x_19682 = defunc_1_op_res_19690;\n                                x_19683 = defunc_1_op_res_19691;\n                                x_19684 = defunc_1_op_res_19692;\n                                x_19685 = defunc_1_op_res_19693;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19662, skip_threads_19698)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19699) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) color_19536)[sext_i32_i64(local_tid_19660)] =\n                                x_19682;\n                            x_19686 = x_19682;\n                            ((volatile __local\n                              int64_t *) color_19535)[sext_i32_i64(local_tid_19660)] =\n                                x_19683;\n                            x_19687 = x_19683;\n                            ((volatile __local\n                              int64_t *) color_19534)[sext_i32_i64(local_tid_19",
            "660)] =\n                                x_19684;\n                            x_19688 = x_19684;\n                            ((volatile __local\n                              int64_t *) color_19533)[sext_i32_i64(local_tid_19660)] =\n                                x_19685;\n                            x_19689 = x_19685;\n                        }\n                    }\n                    if (sle32(wave_sizze_19662, skip_threads_19698)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19698 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19701 = squot32(local_tid_19660, 32) == 0 ||\n             !ltid_in_bounds_19694;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19701) {\n                    x_17036 = x_17032;\n                    x_17037 = x_17033;\n                    x_17038 = x_17034;\n                    x_17039 = x_17035;\n                    x_17032 = ((__local\n                                int64_t *) color_19536)[sext_i32_i64(squot32(local_tid_19660,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_17033 = ((__local\n                                int64_t *) color_19535)[sext_i32_i64(squot32(local_tid_19660,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_17034 = ((__local\n                                int64_t *) color_19534)[sext_i32_i64(squot32(local_tid_19660,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_17035 = ((__local\n                              ",
            "  int64_t *) color_19533)[sext_i32_i64(squot32(local_tid_19660,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19702 =\n                     slt64(srem64(sext_i32_i64(local_tid_19660), g_16393),\n                           sext_i32_i64(local_tid_19660) -\n                           sext_i32_i64(squot32(local_tid_19660, 32) * 32 - 1));\n                \n                if (!no_carry_in_19701) {\n                    if (inactive_19702) {\n                        x_17032 = x_17036;\n                        x_17033 = x_17037;\n                        x_17034 = x_17038;\n                        x_17035 = x_17039;\n                    }\n                }\n                if (!no_carry_in_19701) {\n                    if (!inactive_19702) {\n                        int64_t defunc_1_op_res_17040 = add64(x_17032, x_17036);\n                        int64_t defunc_1_op_res_17041 = add64(x_17033, x_17037);\n                        int64_t defunc_1_op_res_17042 = add64(x_17034, x_17038);\n                        int64_t defunc_1_op_res_17043 = add64(x_17035, x_17039);\n                        \n                        x_17032 = defunc_1_op_res_17040;\n                        x_17033 = defunc_1_op_res_17041;\n                        x_17034 = defunc_1_op_res_17042;\n                        x_17035 = defunc_1_op_res_17043;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19701) {\n                    ((__local\n                      int64_t *) color_19536)[sext_i32_i64(local_tid_19660)] =\n                        x_17032;\n                    ((__local\n                      int64_t *) color_19535)[sext_i32_i64(local_tid_19660)] =\n                        x_17033;\n                    ((__local\n                 ",
            "     int64_t *) color_19534)[sext_i32_i64(local_tid_19660)] =\n                        x_17034;\n                    ((__local\n                      int64_t *) color_19533)[sext_i32_i64(local_tid_19660)] =\n                        x_17035;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19660, 32) == 0 && ltid_in_bounds_19694) {\n                ((__local\n                  int64_t *) color_19536)[sext_i32_i64(local_tid_19660)] =\n                    x_17036;\n                ((__local\n                  int64_t *) color_19535)[sext_i32_i64(local_tid_19660)] =\n                    x_17037;\n                ((__local\n                  int64_t *) color_19534)[sext_i32_i64(local_tid_19660)] =\n                    x_17038;\n                ((__local\n                  int64_t *) color_19533)[sext_i32_i64(local_tid_19660)] =\n                    x_17039;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t last_res_17077;\n        \n        last_res_17077 = ((__local int64_t *) color_19536)[i_16400];\n        \n        int64_t last_res_17078;\n        \n        last_res_17078 = ((__local int64_t *) color_19535)[i_16400];\n        \n        int64_t last_res_17079;\n        \n        last_res_17079 = ((__local int64_t *) color_19534)[i_16400];\n        \n        float tmp_19703;\n        \n        tmp_19703 = ((__local\n                      float *) mem_param_19245)[sext_i32_i64(local_tid_19660)];\n        ((__local float *) mem_param_out_19508)[sext_i32_i64(local_tid_19660)] =\n            tmp_19703;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19704;\n        \n        tmp_19704 = ((__global int64_t *) mem_param_19250)[phys_tid_17006 *\n                                                           g_16393 +\n                                                           sext_i32_i64(local_tid_19660)];\n        ((__local int64_t *) co",
            "lor_19529)[sext_i32_i64(local_tid_19660)] =\n            tmp_19704;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t phys_tid_17085 = local_tid_19660;\n        int64_t write_i_17084 = sext_i32_i64(sext_i64_i32(ltid_pre_19664));\n        int32_t x_17086;\n        \n        x_17086 = ((__local int32_t *) color_19530)[write_i_17084];\n        \n        float write_value_17091;\n        \n        write_value_17091 = ((__local float *) mem_param_19245)[write_i_17084];\n        \n        int64_t write_value_17092;\n        \n        write_value_17092 = ((__global\n                              int64_t *) mem_param_19250)[phys_tid_17006 *\n                                                          g_16393 +\n                                                          write_i_17084];\n        \n        bool match_lit_17093 = 0 == x_17086;\n        int64_t defunc_1_f_res_17094;\n        \n        if (match_lit_17093) {\n            int64_t x_17087;\n            \n            x_17087 = ((__local int64_t *) color_19536)[write_i_17084];\n            \n            int64_t case_res_17095 = sub64(x_17087, (int64_t) 1);\n            \n            defunc_1_f_res_17094 = case_res_17095;\n        } else {\n            bool match_lit_17096 = 1 == x_17086;\n            int64_t x_17097;\n            \n            if (match_lit_17096) {\n                int64_t x_17088;\n                \n                x_17088 = ((__local int64_t *) color_19535)[write_i_17084];\n                \n                int64_t x_17098 = add64(last_res_17077, x_17088);\n                int64_t case_res_17099 = sub64(x_17098, (int64_t) 1);\n                \n                x_17097 = case_res_17099;\n            } else {\n                bool match_lit_17100 = 2 == x_17086;\n                int64_t x_17101;\n                \n                if (match_lit_17100) {\n                    int64_t x_17089;\n                    \n                    x_17089 = ((__local int64_t *) color_19534)[write_i_17084];\n                    \n                    int64_",
            "t x_17102 = add64(last_res_17077, last_res_17078);\n                    int64_t x_17103 = add64(x_17089, x_17102);\n                    int64_t case_res_17104 = sub64(x_17103, (int64_t) 1);\n                    \n                    x_17101 = case_res_17104;\n                } else {\n                    int64_t x_17090;\n                    \n                    x_17090 = ((__local int64_t *) color_19533)[write_i_17084];\n                    \n                    int64_t x_17105 = add64(last_res_17077, last_res_17078);\n                    int64_t x_17106 = add64(last_res_17079, x_17105);\n                    int64_t x_17107 = add64(x_17090, x_17106);\n                    int64_t defunc_1_f_res_res_17108 = sub64(x_17107,\n                                                             (int64_t) 1);\n                    \n                    x_17101 = defunc_1_f_res_res_17108;\n                }\n                x_17097 = x_17101;\n            }\n            defunc_1_f_res_17094 = x_17097;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_17094) &&\n            slt64(defunc_1_f_res_17094, g_16393)) {\n            ((__local float *) mem_param_out_19508)[defunc_1_f_res_17094] =\n                write_value_17091;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_17094) &&\n            slt64(defunc_1_f_res_17094, g_16393)) {\n            ((__local int64_t *) color_19529)[defunc_1_f_res_17094] =\n                write_value_17092;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19705;\n        \n        tmp_19705 = ((__local\n                      int64_t *) color_19529)[sext_i32_i64(local_tid_19660)];\n        ((__global int64_t *) mem_param_out_19512)[phys_tid_17006 * g_16393 +\n                                                   sext_i32_i64(local_tid_19660)] =\n            tmp_19705;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        __local unsigned char *mem_param_tmp_19671;\n        \n        mem_param_tmp_19671 = mem_param_out_19508;\n        \n        __lo",
            "cal unsigned char *mem_param_out_tmp_19672;\n        \n        mem_param_out_tmp_19672 = mem_param_19245;\n        \n        __global unsigned char *mem_param_tmp_19673;\n        \n        mem_param_tmp_19673 = mem_param_out_19512;\n        \n        __global unsigned char *mem_param_out_tmp_19674;\n        \n        mem_param_out_tmp_19674 = mem_param_19250;\n        mem_param_19245 = mem_param_tmp_19671;\n        mem_param_out_19508 = mem_param_out_tmp_19672;\n        mem_param_19250 = mem_param_tmp_19673;\n        mem_param_out_19512 = mem_param_out_tmp_19674;\n    }\n    ext_mem_19287 = mem_param_19245;\n    ext_mem_unused_19507 = mem_param_out_19508;\n    ext_mem_19286 = mem_param_19250;\n    ext_mem_unused_19511 = mem_param_out_19512;\n    \n    int32_t phys_tid_17112 = local_tid_19660;\n    int64_t gtid_17111 = sext_i32_i64(sext_i64_i32(ltid_pre_19664));\n    int64_t x_17113;\n    \n    x_17113 = ((__global int64_t *) ext_mem_19286)[phys_tid_17006 * g_16393 +\n                                                   gtid_17111];\n    \n    bool x_17114 = sle64((int64_t) 0, x_17113);\n    bool y_17115 = slt64(x_17113, g_16393);\n    bool bounds_check_17116 = x_17114 && y_17115;\n    bool index_certs_17117;\n    \n    if (!bounds_check_17116) {\n        {\n            if (atomic_cmpxchg_i32_global(global_failure, -1, 1) == -1) {\n                global_failure_args[0] = (int64_t) x_17113;\n                global_failure_args[1] = (int64_t) g_16393;\n                ;\n            }\n            local_failure = true;\n            goto error_3;\n        }\n    }\n    \n    float defunc_0_f_res_17118;\n    \n    defunc_0_f_res_17118 = ((__global float *) values_mem_19047)[gtid_17005 *\n                                                                 g_16393 +\n                                                                 x_17113];\n    \n    float defunc_0_f_res_17119;\n    \n    defunc_0_f_res_17119 = ((__local float *) color_19537)[x_17113];\n    ((__local float *) color_19530)[gtid_17111] = defunc_0_f_res_17118;\n    ",
            "((__local float *) color_19529)[gtid_17111] = defunc_0_f_res_17119;\n    \n  error_3:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19706;\n    \n    tmp_19706 = ((__local float *) color_19530)[sext_i32_i64(local_tid_19660)];\n    ((__global float *) mem_19306)[gtid_17005 * g_16393 +\n                                   sext_i32_i64(local_tid_19660)] = tmp_19706;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19707;\n    \n    tmp_19707 = ((__local float *) color_19529)[sext_i32_i64(local_tid_19660)];\n    ((__global float *) mem_19310)[gtid_17005 * g_16393 +\n                                   sext_i32_i64(local_tid_19660)] = tmp_19707;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_4:\n    return;\n}\n__kernel void sortBagzisegmap_intragroup_17587(__global int *global_failure,\n                                               uint color_19544_backing_offset_0,\n                                               uint color_19543_backing_offset_1,\n                                               uint color_19542_backing_offset_2,\n                                               uint color_19541_backing_offset_3,\n                                               uint color_19540_backing_offset_4,\n                                               uint color_19539_backing_offset_5,\n                                               uint color_19538_backing_offset_6,\n                                               int64_t b_16392, int64_t g_16393,\n                                               int64_t i_16400,\n                                               int32_t defunc_2_radix_sort_step_arg_17571,\n                                               int32_t defunc_0_get_bit_arg_17572,\n                                               unsigned char cond_f_res_17573_bits,\n                                               unsigned char cond_f_res_17574_bits,\n                                               __global\n                     ",
            "                          unsigned char *mem_param_19331,\n                                               __global\n                                               unsigned char *mem_param_19339,\n                                               __global\n                                               unsigned char *mem_19379,\n                                               __global\n                                               unsigned char *mem_19383)\n{\n    bool cond_f_res_17573 = cond_f_res_17573_bits;\n    bool cond_f_res_17574 = cond_f_res_17574_bits;\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19544_backing_6 =\n                           &shared_mem[color_19544_backing_offset_0];\n    volatile unsigned char *color_19543_backing_5 =\n                           &shared_mem[color_19543_backing_offset_1];\n    volatile unsigned char *color_19542_backing_4 =\n                           &shared_mem[color_19542_backing_offset_2];\n    volatile unsigned char *color_19541_backing_3 =\n                           &shared_mem[color_19541_backing_offset_3];\n    volatile unsigned char *color_19540_backing_2 =\n                           &shared_mem[color_19540_backing_offset_4];\n    volatile unsigned char *color_19539_backing_1 =\n                           &shared_mem[color_19539_backing_offset_5];\n    volatile unsigned char *color_19538_backing_0 =\n                           &shared_mem[color_19538_backing_offset_6];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19737;\n    int32_t local_tid_19738;\n    int64_t group_sizze_19741;\n    int32_t wave_sizze_19740;\n    int32_t group_tid_19739;\n    \n    global_tid_19737 = get_global_id(0);\n    local_tid_19738 = get_local_id(0);\n    group_sizze_19741 = get_local_size(0);\n    wave_sizze_19740 = LOCKSTEP_WIDTH;\n    group_tid_19739 = get_group_id(0);\n    \n    int32_t phys_tid_17587 = group_tid_19739;\n    int64_t slice_19743 = g_16393;\n    ",
            "int64_t ltid_pre_19742 = sext_i32_i64(local_tid_19738);\n    int64_t remnant_19744 = sext_i32_i64(local_tid_19738) - ltid_pre_19742;\n    int64_t slice_19745 = b_16392;\n    int64_t gtid_17586 = sext_i32_i64(group_tid_19739);\n    int64_t remnant_19746 = sext_i32_i64(group_tid_19739) - gtid_17586;\n    __local unsigned char *color_19538;\n    \n    color_19538 = (__local unsigned char *) color_19538_backing_0;\n    \n    __local unsigned char *color_19539;\n    \n    color_19539 = (__local unsigned char *) color_19539_backing_1;\n    \n    __local unsigned char *color_19540;\n    \n    color_19540 = (__local unsigned char *) color_19540_backing_2;\n    \n    __local unsigned char *color_19541;\n    \n    color_19541 = (__local unsigned char *) color_19541_backing_3;\n    \n    __local unsigned char *color_19542;\n    \n    color_19542 = (__local unsigned char *) color_19542_backing_4;\n    \n    __local unsigned char *color_19543;\n    \n    color_19543 = (__local unsigned char *) color_19543_backing_5;\n    \n    __local unsigned char *color_19544;\n    \n    color_19544 = (__local unsigned char *) color_19544_backing_6;\n    \n    float tmp_19747;\n    \n    tmp_19747 = ((__global float *) mem_param_19331)[gtid_17586 * g_16393 +\n                                                     sext_i32_i64(local_tid_19738)];\n    ((__local float *) color_19544)[sext_i32_i64(local_tid_19738)] = tmp_19747;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19748;\n    \n    tmp_19748 = ((__global int64_t *) mem_param_19339)[gtid_17586 * g_16393 +\n                                                       sext_i32_i64(local_tid_19738)];\n    ((__local int64_t *) color_19543)[sext_i32_i64(local_tid_19738)] =\n        tmp_19748;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t phys_tid_17602 = local_tid_19738;\n    int64_t gtid_17601 = sext_i32_i64(sext_i64_i32(ltid_pre_19742));\n    float x_17615;\n    \n    x_17615 = ((__global float *) mem_param_19331)[gtid_17586 * g_16393 +\n                                             ",
            "      gtid_17601];\n    \n    int32_t i32_arg_17616;\n    \n    i32_arg_17616 = futrts_to_bits32(x_17615);\n    \n    int32_t unsign_arg_17617 = ashr32(i32_arg_17616,\n                                      defunc_0_get_bit_arg_17572);\n    int32_t unsign_arg_17618 = 1 & unsign_arg_17617;\n    int32_t unsign_arg_17619 = ashr32(i32_arg_17616, 31);\n    int32_t unsign_arg_17620 = 1 & unsign_arg_17619;\n    bool cond_17621 = unsign_arg_17620 == 1;\n    bool x_17622 = !cond_17621;\n    bool y_17623 = cond_f_res_17573 && x_17622;\n    bool cond_17624 = cond_17621 || y_17623;\n    int32_t defunc_1_get_bit_res_17625;\n    \n    if (cond_17624) {\n        int32_t defunc_1_get_bit_res_t_res_17626 = 1 ^ unsign_arg_17618;\n        \n        defunc_1_get_bit_res_17625 = defunc_1_get_bit_res_t_res_17626;\n    } else {\n        defunc_1_get_bit_res_17625 = unsign_arg_17618;\n    }\n    \n    int32_t x_17627 = mul32(2, defunc_1_get_bit_res_17625);\n    int32_t unsign_arg_17628 = ashr32(i32_arg_17616,\n                                      defunc_2_radix_sort_step_arg_17571);\n    int32_t unsign_arg_17629 = 1 & unsign_arg_17628;\n    bool y_17630 = cond_f_res_17574 && x_17622;\n    bool cond_17631 = cond_17621 || y_17630;\n    int32_t defunc_1_get_bit_res_17632;\n    \n    if (cond_17631) {\n        int32_t defunc_1_get_bit_res_t_res_17633 = 1 ^ unsign_arg_17629;\n        \n        defunc_1_get_bit_res_17632 = defunc_1_get_bit_res_t_res_17633;\n    } else {\n        defunc_1_get_bit_res_17632 = unsign_arg_17629;\n    }\n    \n    int32_t defunc_0_f_res_17634 = add32(x_17627, defunc_1_get_bit_res_17632);\n    bool cond_17635 = defunc_0_f_res_17634 == 0;\n    int64_t defunc_0_f_res_17636 = btoi_bool_i64(cond_17635);\n    int64_t defunc_0_f_res_17637;\n    int64_t defunc_0_f_res_17638;\n    int64_t defunc_0_f_res_17639;\n    \n    if (cond_17635) {\n        defunc_0_f_res_17637 = (int64_t) 0;\n        defunc_0_f_res_17638 = (int64_t) 0;\n        defunc_0_f_res_17639 = (int64_t) 0;\n    } else {\n        bool cond_17640 = defunc_0_f_res_1",
            "7634 == 1;\n        int64_t defunc_0_f_res_f_res_17641 = btoi_bool_i64(cond_17640);\n        int64_t defunc_0_f_res_f_res_17642;\n        int64_t defunc_0_f_res_f_res_17643;\n        \n        if (cond_17640) {\n            defunc_0_f_res_f_res_17642 = (int64_t) 0;\n            defunc_0_f_res_f_res_17643 = (int64_t) 0;\n        } else {\n            bool cond_17644 = defunc_0_f_res_17634 == 2;\n            int64_t defunc_0_f_res_f_res_f_res_17645 =\n                    btoi_bool_i64(cond_17644);\n            bool cond_neg_17646 = !cond_17644;\n            int64_t defunc_0_f_res_f_res_f_res_17647 =\n                    btoi_bool_i64(cond_neg_17646);\n            \n            defunc_0_f_res_f_res_17642 = defunc_0_f_res_f_res_f_res_17645;\n            defunc_0_f_res_f_res_17643 = defunc_0_f_res_f_res_f_res_17647;\n        }\n        defunc_0_f_res_17637 = defunc_0_f_res_f_res_17641;\n        defunc_0_f_res_17638 = defunc_0_f_res_f_res_17642;\n        defunc_0_f_res_17639 = defunc_0_f_res_f_res_17643;\n    }\n    ((__local int64_t *) color_19542)[gtid_17601] = defunc_0_f_res_17636;\n    ((__local int64_t *) color_19541)[gtid_17601] = defunc_0_f_res_17637;\n    ((__local int64_t *) color_19540)[gtid_17601] = defunc_0_f_res_17638;\n    ((__local int64_t *) color_19539)[gtid_17601] = defunc_0_f_res_17639;\n    ((__local int32_t *) color_19538)[gtid_17601] = defunc_0_f_res_17634;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_19749 = g_16393;\n    int64_t x_17603;\n    int64_t x_17604;\n    int64_t x_17605;\n    int64_t x_17606;\n    int64_t x_17607;\n    int64_t x_17608;\n    int64_t x_17609;\n    int64_t x_17610;\n    int64_t x_19754;\n    int64_t x_19755;\n    int64_t x_19756;\n    int64_t x_19757;\n    int64_t x_19758;\n    int64_t x_19759;\n    int64_t x_19760;\n    int64_t x_19761;\n    bool ltid_in_bounds_19766 = slt64(sext_i32_i64(local_tid_19738), g_16393);\n    int32_t skip_threads_19767;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_19766) {\n            x_17607 = (",
            "(volatile __local\n                        int64_t *) color_19542)[sext_i32_i64(local_tid_19738)];\n            x_17608 = ((volatile __local\n                        int64_t *) color_19541)[sext_i32_i64(local_tid_19738)];\n            x_17609 = ((volatile __local\n                        int64_t *) color_19540)[sext_i32_i64(local_tid_19738)];\n            x_17610 = ((volatile __local\n                        int64_t *) color_19539)[sext_i32_i64(local_tid_19738)];\n            if ((local_tid_19738 - squot32(local_tid_19738, 32) * 32) == 0) {\n                x_17603 = x_17607;\n                x_17604 = x_17608;\n                x_17605 = x_17609;\n                x_17606 = x_17610;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_19767 = 1;\n        while (slt32(skip_threads_19767, 32)) {\n            bool thread_active_19768 = sle32(skip_threads_19767,\n                                             local_tid_19738 -\n                                             squot32(local_tid_19738, 32) *\n                                             32) && ltid_in_bounds_19766;\n            \n            if (thread_active_19768) {\n                // read operands\n                {\n                    x_17603 = ((volatile __local\n                                int64_t *) color_19542)[sext_i32_i64(local_tid_19738) -\n                                                        sext_i32_i64(skip_threads_19767)];\n                    x_17604 = ((volatile __local\n                                int64_t *) color_19541)[sext_i32_i64(local_tid_19738) -\n                                                        sext_i32_i64(skip_threads_19767)];\n                    x_17605 = ((volatile __local\n                                int64_t *) color_19540)[sext_i32_i64(local_tid_19738) -\n                                                        sext_i32_i64(skip_threads_19767)];\n                    x_17606 = ((volatile __local\n                                int64_t",
            " *) color_19539)[sext_i32_i64(local_tid_19738) -\n                                                        sext_i32_i64(skip_threads_19767)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19769 =\n                     slt64(srem64(sext_i32_i64(local_tid_19738), g_16393),\n                           sext_i32_i64(local_tid_19738) -\n                           sext_i32_i64(local_tid_19738 - skip_threads_19767));\n                \n                if (thread_active_19768 && inactive_19769) {\n                    x_17603 = x_17607;\n                    x_17604 = x_17608;\n                    x_17605 = x_17609;\n                    x_17606 = x_17610;\n                }\n                if (thread_active_19768) {\n                    if (!inactive_19769) {\n                        int64_t defunc_1_op_res_17611 = add64(x_17603, x_17607);\n                        int64_t defunc_1_op_res_17612 = add64(x_17604, x_17608);\n                        int64_t defunc_1_op_res_17613 = add64(x_17605, x_17609);\n                        int64_t defunc_1_op_res_17614 = add64(x_17606, x_17610);\n                        \n                        x_17603 = defunc_1_op_res_17611;\n                        x_17604 = defunc_1_op_res_17612;\n                        x_17605 = defunc_1_op_res_17613;\n                        x_17606 = defunc_1_op_res_17614;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_19740, skip_threads_19767)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (thread_active_19768) {\n                // write result\n                {\n                    ((volatile __local\n                      int64_t *) color_19542)[sext_i32_i64(local_tid_19738)] =\n                        x_17603;\n                    x_17607 = x_17603;\n                    ((volatile __local\n                      int64_t *) color_19541)[sext_i32_i64(local_tid_19738)] =\n                        x_17604;\n       ",
            "             x_17608 = x_17604;\n                    ((volatile __local\n                      int64_t *) color_19540)[sext_i32_i64(local_tid_19738)] =\n                        x_17605;\n                    x_17609 = x_17605;\n                    ((volatile __local\n                      int64_t *) color_19539)[sext_i32_i64(local_tid_19738)] =\n                        x_17606;\n                    x_17610 = x_17606;\n                }\n            }\n            if (sle32(wave_sizze_19740, skip_threads_19767)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_19767 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_19738 - squot32(local_tid_19738, 32) * 32) == 31 &&\n            ltid_in_bounds_19766) {\n            ((volatile __local\n              int64_t *) color_19542)[sext_i32_i64(squot32(local_tid_19738,\n                                                           32))] = x_17603;\n            ((volatile __local\n              int64_t *) color_19541)[sext_i32_i64(squot32(local_tid_19738,\n                                                           32))] = x_17604;\n            ((volatile __local\n              int64_t *) color_19540)[sext_i32_i64(squot32(local_tid_19738,\n                                                           32))] = x_17605;\n            ((volatile __local\n              int64_t *) color_19539)[sext_i32_i64(squot32(local_tid_19738,\n                                                           32))] = x_17606;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_19770;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_19738, 32) == 0 && ltid_in_bounds_19766) {\n                x_19758 = ((volatile __local\n                            int64_t *) color_19542)[sext_i32_i64(local_tid",
            "_19738)];\n                x_19759 = ((volatile __local\n                            int64_t *) color_19541)[sext_i32_i64(local_tid_19738)];\n                x_19760 = ((volatile __local\n                            int64_t *) color_19540)[sext_i32_i64(local_tid_19738)];\n                x_19761 = ((volatile __local\n                            int64_t *) color_19539)[sext_i32_i64(local_tid_19738)];\n                if ((local_tid_19738 - squot32(local_tid_19738, 32) * 32) ==\n                    0) {\n                    x_19754 = x_19758;\n                    x_19755 = x_19759;\n                    x_19756 = x_19760;\n                    x_19757 = x_19761;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19770 = 1;\n            while (slt32(skip_threads_19770, 32)) {\n                bool thread_active_19771 = sle32(skip_threads_19770,\n                                                 local_tid_19738 -\n                                                 squot32(local_tid_19738, 32) *\n                                                 32) &&\n                     (squot32(local_tid_19738, 32) == 0 &&\n                      ltid_in_bounds_19766);\n                \n                if (thread_active_19771) {\n                    // read operands\n                    {\n                        x_19754 = ((volatile __local\n                                    int64_t *) color_19542)[sext_i32_i64(local_tid_19738) -\n                                                            sext_i32_i64(skip_threads_19770)];\n                        x_19755 = ((volatile __local\n                                    int64_t *) color_19541)[sext_i32_i64(local_tid_19738) -\n                                                            sext_i32_i64(skip_threads_19770)];\n                        x_19756 = ((volatile __local\n                                    int64_t *) color_19540)[sext_i32_i64(local_tid_19738) -\n                             ",
            "                               sext_i32_i64(skip_threads_19770)];\n                        x_19757 = ((volatile __local\n                                    int64_t *) color_19539)[sext_i32_i64(local_tid_19738) -\n                                                            sext_i32_i64(skip_threads_19770)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19772 =\n                         slt64(srem64(sext_i32_i64(local_tid_19738 * 32 + 32 -\n                                      1), g_16393),\n                               sext_i32_i64(local_tid_19738 * 32 + 32 - 1) -\n                               sext_i32_i64((local_tid_19738 -\n                                             skip_threads_19770) * 32 + 32 -\n                               1));\n                    \n                    if (thread_active_19771 && inactive_19772) {\n                        x_19754 = x_19758;\n                        x_19755 = x_19759;\n                        x_19756 = x_19760;\n                        x_19757 = x_19761;\n                    }\n                    if (thread_active_19771) {\n                        if (!inactive_19772) {\n                            int64_t defunc_1_op_res_19762 = add64(x_19754,\n                                                                  x_19758);\n                            int64_t defunc_1_op_res_19763 = add64(x_19755,\n                                                                  x_19759);\n                            int64_t defunc_1_op_res_19764 = add64(x_19756,\n                                                                  x_19760);\n                            int64_t defunc_1_op_res_19765 = add64(x_19757,\n                                                                  x_19761);\n                            \n                            x_19754 = defunc_1_op_res_19762;\n                            x_19755 = defunc_1_op_res_19763;\n                            x_19756 = defunc",
            "_1_op_res_19764;\n                            x_19757 = defunc_1_op_res_19765;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19740, skip_threads_19770)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19771) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19542)[sext_i32_i64(local_tid_19738)] =\n                            x_19754;\n                        x_19758 = x_19754;\n                        ((volatile __local\n                          int64_t *) color_19541)[sext_i32_i64(local_tid_19738)] =\n                            x_19755;\n                        x_19759 = x_19755;\n                        ((volatile __local\n                          int64_t *) color_19540)[sext_i32_i64(local_tid_19738)] =\n                            x_19756;\n                        x_19760 = x_19756;\n                        ((volatile __local\n                          int64_t *) color_19539)[sext_i32_i64(local_tid_19738)] =\n                            x_19757;\n                        x_19761 = x_19757;\n                    }\n                }\n                if (sle32(wave_sizze_19740, skip_threads_19770)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19770 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    bool no_carry_in_19773 = squot32(local_tid_19738, 32) == 0 ||\n         !ltid_in_bounds_19766;\n    \n    // carry-in for every block except the first\n    {\n        // read operands\n        {\n            if (!no_carry_in_19773) {\n                x_17607 = x_17603;\n                x_17608 = x_17604;\n                x_17609 = x_17605;\n                x_17610 = x_17606;\n                x_17603 = ((__local\n                            int64_t *) color_19542)[sext_i32_i64(squot32(local_tid_19738,\n              ",
            "                                                           32)) -\n                                                    (int64_t) 1];\n                x_17604 = ((__local\n                            int64_t *) color_19541)[sext_i32_i64(squot32(local_tid_19738,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_17605 = ((__local\n                            int64_t *) color_19540)[sext_i32_i64(squot32(local_tid_19738,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_17606 = ((__local\n                            int64_t *) color_19539)[sext_i32_i64(squot32(local_tid_19738,\n                                                                         32)) -\n                                                    (int64_t) 1];\n            }\n        }\n        // perform operation\n        {\n            bool inactive_19774 = slt64(srem64(sext_i32_i64(local_tid_19738),\n                                               g_16393),\n                                        sext_i32_i64(local_tid_19738) -\n                                        sext_i32_i64(squot32(local_tid_19738,\n                                                             32) * 32 - 1));\n            \n            if (!no_carry_in_19773) {\n                if (inactive_19774) {\n                    x_17603 = x_17607;\n                    x_17604 = x_17608;\n                    x_17605 = x_17609;\n                    x_17606 = x_17610;\n                }\n            }\n            if (!no_carry_in_19773) {\n                if (!inactive_19774) {\n                    int64_t defunc_1_op_res_17611 = add64(x_17603, x_17607);\n                    int64_t defunc_1_op_res_17612 = add64(x_17604, x_17608);\n                    int64_t defunc_1_op_res_17613 = add64(x_17605, x_17609);\n                    int64_t defunc_1_op_re",
            "s_17614 = add64(x_17606, x_17610);\n                    \n                    x_17603 = defunc_1_op_res_17611;\n                    x_17604 = defunc_1_op_res_17612;\n                    x_17605 = defunc_1_op_res_17613;\n                    x_17606 = defunc_1_op_res_17614;\n                }\n            }\n        }\n        // write final result\n        {\n            if (!no_carry_in_19773) {\n                ((__local\n                  int64_t *) color_19542)[sext_i32_i64(local_tid_19738)] =\n                    x_17603;\n                ((__local\n                  int64_t *) color_19541)[sext_i32_i64(local_tid_19738)] =\n                    x_17604;\n                ((__local\n                  int64_t *) color_19540)[sext_i32_i64(local_tid_19738)] =\n                    x_17605;\n                ((__local\n                  int64_t *) color_19539)[sext_i32_i64(local_tid_19738)] =\n                    x_17606;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_19738, 32) == 0 && ltid_in_bounds_19766) {\n            ((__local int64_t *) color_19542)[sext_i32_i64(local_tid_19738)] =\n                x_17607;\n            ((__local int64_t *) color_19541)[sext_i32_i64(local_tid_19738)] =\n                x_17608;\n            ((__local int64_t *) color_19540)[sext_i32_i64(local_tid_19738)] =\n                x_17609;\n            ((__local int64_t *) color_19539)[sext_i32_i64(local_tid_19738)] =\n                x_17610;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t last_res_17648;\n    \n    last_res_17648 = ((__local int64_t *) color_19542)[i_16400];\n    \n    int64_t last_res_17649;\n    \n    last_res_17649 = ((__local int64_t *) color_19541)[i_16400];\n    \n    int64_t last_res_17650;\n    \n    last_res_17650 = ((__local int64_t *) color_19540)[i_16400];\n    \n    int32_t phys_tid_17654 = local_tid_19738;\n    int64_t write_i_17653 = sext_i32_i64(sext_i64_i32(ltid_pre_19742));\n    i",
            "nt32_t x_17655;\n    \n    x_17655 = ((__local int32_t *) color_19538)[write_i_17653];\n    \n    float write_value_17660;\n    \n    write_value_17660 = ((__global float *) mem_param_19331)[gtid_17586 *\n                                                             g_16393 +\n                                                             write_i_17653];\n    \n    int64_t write_value_17661;\n    \n    write_value_17661 = ((__global int64_t *) mem_param_19339)[gtid_17586 *\n                                                               g_16393 +\n                                                               write_i_17653];\n    \n    bool match_lit_17662 = 0 == x_17655;\n    int64_t defunc_1_f_res_17663;\n    \n    if (match_lit_17662) {\n        int64_t x_17656;\n        \n        x_17656 = ((__local int64_t *) color_19542)[write_i_17653];\n        \n        int64_t case_res_17664 = sub64(x_17656, (int64_t) 1);\n        \n        defunc_1_f_res_17663 = case_res_17664;\n    } else {\n        bool match_lit_17665 = 1 == x_17655;\n        int64_t x_17666;\n        \n        if (match_lit_17665) {\n            int64_t x_17657;\n            \n            x_17657 = ((__local int64_t *) color_19541)[write_i_17653];\n            \n            int64_t x_17667 = add64(last_res_17648, x_17657);\n            int64_t case_res_17668 = sub64(x_17667, (int64_t) 1);\n            \n            x_17666 = case_res_17668;\n        } else {\n            bool match_lit_17669 = 2 == x_17655;\n            int64_t x_17670;\n            \n            if (match_lit_17669) {\n                int64_t x_17658;\n                \n                x_17658 = ((__local int64_t *) color_19540)[write_i_17653];\n                \n                int64_t x_17671 = add64(last_res_17648, last_res_17649);\n                int64_t x_17672 = add64(x_17658, x_17671);\n                int64_t case_res_17673 = sub64(x_17672, (int64_t) 1);\n                \n                x_17670 = case_res_17673;\n            } else {\n                int64_t x_17659;\n              ",
            "  \n                x_17659 = ((__local int64_t *) color_19539)[write_i_17653];\n                \n                int64_t x_17674 = add64(last_res_17648, last_res_17649);\n                int64_t x_17675 = add64(last_res_17650, x_17674);\n                int64_t x_17676 = add64(x_17659, x_17675);\n                int64_t defunc_1_f_res_res_17677 = sub64(x_17676, (int64_t) 1);\n                \n                x_17670 = defunc_1_f_res_res_17677;\n            }\n            x_17666 = x_17670;\n        }\n        defunc_1_f_res_17663 = x_17666;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_17663) && slt64(defunc_1_f_res_17663,\n                                                          g_16393)) {\n        ((__local float *) color_19544)[defunc_1_f_res_17663] =\n            write_value_17660;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_17663) && slt64(defunc_1_f_res_17663,\n                                                          g_16393)) {\n        ((__local int64_t *) color_19543)[defunc_1_f_res_17663] =\n            write_value_17661;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19775;\n    \n    tmp_19775 = ((__local float *) color_19544)[sext_i32_i64(local_tid_19738)];\n    ((__global float *) mem_19379)[gtid_17586 * g_16393 +\n                                   sext_i32_i64(local_tid_19738)] = tmp_19775;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19776;\n    \n    tmp_19776 = ((__local\n                  int64_t *) color_19543)[sext_i32_i64(local_tid_19738)];\n    ((__global int64_t *) mem_19383)[gtid_17586 * g_16393 +\n                                     sext_i32_i64(local_tid_19738)] = tmp_19776;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_2:\n    return;\n}\n__kernel void sortBagzisegscan_17690(__global int *global_failure,\n                                     uint local_mem_19826_backing_offset_0,\n                                     int64_t b_16392, int64_t g_16393,\n                                     int32_t defunc_2_radix_sort_step_arg_17571,\n   ",
            "                                  int32_t defunc_0_get_bit_arg_17572,\n                                     unsigned char cond_f_res_17573_bits,\n                                     unsigned char cond_f_res_17574_bits,\n                                     __global unsigned char *mem_param_19331,\n                                     __global unsigned char *mem_19388, __global\n                                     unsigned char *mem_19392, __global\n                                     unsigned char *mem_19396, __global\n                                     unsigned char *mem_19400, __global\n                                     unsigned char *mem_19404, __global\n                                     unsigned char *sortBagziid_counter_mem_19779,\n                                     __global\n                                     unsigned char *status_flags_mem_19781,\n                                     __global\n                                     unsigned char *aggregates_mem_19783,\n                                     __global\n                                     unsigned char *incprefixes_mem_19785,\n                                     __global\n                                     unsigned char *aggregates_mem_19787,\n                                     __global\n                                     unsigned char *incprefixes_mem_19789,\n                                     __global\n                                     unsigned char *aggregates_mem_19791,\n                                     __global\n                                     unsigned char *incprefixes_mem_19793,\n                                     __global\n                                     unsigned char *aggregates_mem_19795,\n                                     __global\n                                     unsigned char *incprefixes_mem_19797)\n{\n    bool cond_f_res_17573 = cond_f_res_17573_bits;\n    bool cond_f_res_17574 = cond_f_res_17574_bits;\n    \n    #define segscan_group_sizze_17680 (sortBagzisegscan_g",
            "roup_sizze_17350)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *local_mem_19826_backing_0 =\n                           &shared_mem[local_mem_19826_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19811;\n    int32_t local_tid_19812;\n    int64_t group_sizze_19815;\n    int32_t wave_sizze_19814;\n    int32_t group_tid_19813;\n    \n    global_tid_19811 = get_global_id(0);\n    local_tid_19812 = get_local_id(0);\n    group_sizze_19815 = get_local_size(0);\n    wave_sizze_19814 = LOCKSTEP_WIDTH;\n    group_tid_19813 = get_group_id(0);\n    \n    int32_t phys_tid_17690 = global_tid_19811;\n    int64_t byte_offsets_19816 = (int64_t) 0;\n    int64_t byte_offsets_19817 = segscan_group_sizze_17680 * (int64_t) 8;\n    int64_t byte_offsets_19818 = sdiv_up64(segscan_group_sizze_17680 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17680 * (int64_t) 8;\n    int64_t byte_offsets_19819 = sdiv_up64(sdiv_up64(segscan_group_sizze_17680 *\n                                                     (int64_t) 8, (int64_t) 8) *\n                                           (int64_t) 8 +\n                                           segscan_group_sizze_17680 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17680 * (int64_t) 8;\n    int64_t byte_offsets_19820 =\n            sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_17680 *\n                                          (int64_t) 8, (int64_t) 8) *\n                                (int64_t) 8 + segscan_group_sizze_17680 *\n                                (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n                      segscan_group_sizze_17680 * (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_17680 * (int64_t) 8;\n    int64_t warp_byte_offset_19821 = (int64_t) 32;\n    int64_t warp_byt",
            "e_offset_19822 = (int64_t) 288;\n    int64_t warp_byte_offset_19823 = (int64_t) 544;\n    int64_t warp_byte_offset_19824 = (int64_t) 800;\n    int64_t warp_byte_offset_19825 = (int64_t) 1056;\n    \n    // Allocate reused shared memeory\n    { }\n    \n    __local unsigned char *local_mem_19826;\n    \n    local_mem_19826 = (__local unsigned char *) local_mem_19826_backing_0;\n    \n    int64_t trans_arr_len_19827 = (int64_t) 3 * segscan_group_sizze_17680;\n    int32_t dynamic_id_19842;\n    \n    if (local_tid_19812 == 0) {\n        dynamic_id_19842 = atomic_add_i32_global(&((volatile __global\n                                                    int *) sortBagziid_counter_mem_19779)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_19826)[(int64_t) 0] = dynamic_id_19842;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_19842 = ((__local int32_t *) local_mem_19826)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_19843 = sext_i32_i64(dynamic_id_19842) * (int64_t) 3 *\n            segscan_group_sizze_17680;\n    int64_t sgm_idx_19844 = smod64(blockOff_19843, g_16393);\n    int32_t boundary_19845 = sext_i64_i32(smin64((int64_t) 3 *\n                                                 segscan_group_sizze_17680,\n                                                 g_16393 - sgm_idx_19844));\n    int32_t segsizze_compact_19846 = sext_i64_i32(smin64((int64_t) 3 *\n                                                         segscan_group_sizze_17680,\n                                                         g_16393));\n    int64_t private_mem_19847[(int64_t) 3];\n    int64_t private_mem_19849[(int64_t) 3];\n    int64_t private_mem_19851[(int64_t) 3];\n    int64_t private_mem_19853[(int64_t) 3];\n    \n    // Load and map\n    {\n        for (int64_t i_19855 = 0; i_19855 < (int64_t) 3; i_19855++) {\n            int64_t phys_tid_19856 = blockOff_19843 +\n                    sext_i32_i64(local_tid_19812) + i_19855 *\n           ",
            "         segscan_group_sizze_17680;\n            int64_t slice_19857 = g_16393;\n            int64_t slice_19858 = b_16392 * slice_19857;\n            int64_t gtid_17688 = squot64(phys_tid_19856, slice_19857);\n            int64_t remnant_19859 = phys_tid_19856 - gtid_17688 * slice_19857;\n            int64_t gtid_17689 = remnant_19859;\n            int64_t remnant_19860 = remnant_19859 - gtid_17689;\n            \n            if (slt64(phys_tid_19856, b_16392 * g_16393)) {\n                float x_17704;\n                \n                x_17704 = ((__global float *) mem_param_19331)[gtid_17688 *\n                                                               g_16393 +\n                                                               gtid_17689];\n                \n                int32_t i32_arg_17705;\n                \n                i32_arg_17705 = futrts_to_bits32(x_17704);\n                \n                int32_t unsign_arg_17706 = ashr32(i32_arg_17705,\n                                                  defunc_0_get_bit_arg_17572);\n                int32_t unsign_arg_17707 = 1 & unsign_arg_17706;\n                int32_t unsign_arg_17708 = ashr32(i32_arg_17705, 31);\n                int32_t unsign_arg_17709 = 1 & unsign_arg_17708;\n                bool cond_17710 = unsign_arg_17709 == 1;\n                bool x_17711 = !cond_17710;\n                bool y_17712 = cond_f_res_17573 && x_17711;\n                bool cond_17713 = cond_17710 || y_17712;\n                int32_t defunc_1_get_bit_res_17714;\n                \n                if (cond_17713) {\n                    int32_t defunc_1_get_bit_res_t_res_17715 = 1 ^\n                            unsign_arg_17707;\n                    \n                    defunc_1_get_bit_res_17714 =\n                        defunc_1_get_bit_res_t_res_17715;\n                } else {\n                    defunc_1_get_bit_res_17714 = unsign_arg_17707;\n                }\n                \n                int32_t x_17716 = mul32(2, defunc_1_get_bit_res_17714);\n  ",
            "              int32_t unsign_arg_17717 = ashr32(i32_arg_17705,\n                                                  defunc_2_radix_sort_step_arg_17571);\n                int32_t unsign_arg_17718 = 1 & unsign_arg_17717;\n                bool y_17719 = cond_f_res_17574 && x_17711;\n                bool cond_17720 = cond_17710 || y_17719;\n                int32_t defunc_1_get_bit_res_17721;\n                \n                if (cond_17720) {\n                    int32_t defunc_1_get_bit_res_t_res_17722 = 1 ^\n                            unsign_arg_17718;\n                    \n                    defunc_1_get_bit_res_17721 =\n                        defunc_1_get_bit_res_t_res_17722;\n                } else {\n                    defunc_1_get_bit_res_17721 = unsign_arg_17718;\n                }\n                \n                int32_t defunc_0_f_res_17723 = add32(x_17716,\n                                                     defunc_1_get_bit_res_17721);\n                bool cond_17724 = defunc_0_f_res_17723 == 0;\n                int64_t defunc_0_f_res_17725 = btoi_bool_i64(cond_17724);\n                int64_t defunc_0_f_res_17726;\n                int64_t defunc_0_f_res_17727;\n                int64_t defunc_0_f_res_17728;\n                \n                if (cond_17724) {\n                    defunc_0_f_res_17726 = (int64_t) 0;\n                    defunc_0_f_res_17727 = (int64_t) 0;\n                    defunc_0_f_res_17728 = (int64_t) 0;\n                } else {\n                    bool cond_17729 = defunc_0_f_res_17723 == 1;\n                    int64_t defunc_0_f_res_f_res_17730 =\n                            btoi_bool_i64(cond_17729);\n                    int64_t defunc_0_f_res_f_res_17731;\n                    int64_t defunc_0_f_res_f_res_17732;\n                    \n                    if (cond_17729) {\n                        defunc_0_f_res_f_res_17731 = (int64_t) 0;\n                        defunc_0_f_res_f_res_17732 = (int64_t) 0;\n                    } else {\n                        boo",
            "l cond_17733 = defunc_0_f_res_17723 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_17734 =\n                                btoi_bool_i64(cond_17733);\n                        bool cond_neg_17735 = !cond_17733;\n                        int64_t defunc_0_f_res_f_res_f_res_17736 =\n                                btoi_bool_i64(cond_neg_17735);\n                        \n                        defunc_0_f_res_f_res_17731 =\n                            defunc_0_f_res_f_res_f_res_17734;\n                        defunc_0_f_res_f_res_17732 =\n                            defunc_0_f_res_f_res_f_res_17736;\n                    }\n                    defunc_0_f_res_17726 = defunc_0_f_res_f_res_17730;\n                    defunc_0_f_res_17727 = defunc_0_f_res_f_res_17731;\n                    defunc_0_f_res_17728 = defunc_0_f_res_f_res_17732;\n                }\n                ((__global int32_t *) mem_19404)[gtid_17688 * g_16393 +\n                                                 gtid_17689] =\n                    defunc_0_f_res_17723;\n                private_mem_19847[i_19855] = defunc_0_f_res_17725;\n                private_mem_19849[i_19855] = defunc_0_f_res_17726;\n                private_mem_19851[i_19855] = defunc_0_f_res_17727;\n                private_mem_19853[i_19855] = defunc_0_f_res_17728;\n            } else {\n                private_mem_19847[i_19855] = (int64_t) 0;\n                private_mem_19849[i_19855] = (int64_t) 0;\n                private_mem_19851[i_19855] = (int64_t) 0;\n                private_mem_19853[i_19855] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19861 = 0; i_19861 < (int64_t) 3; i_19861++) {\n            int64_t sharedIdx_19862 = sext_i32_i64(local_tid_19812) + i_19861 *\n                    segscan_group_sizze_17680;\n            int64_t tmp_19863;\n            \n            tmp_19863 = private_mem_19847[i_19861];\n            ((__local int64_t *) local_me",
            "m_19826)[sharedIdx_19862] = tmp_19863;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19864 = 0; i_19864 < 3; i_19864++) {\n            int32_t sharedIdx_19865 = local_tid_19812 * 3 + i_19864;\n            int64_t tmp_19866;\n            \n            tmp_19866 = ((__local\n                          int64_t *) local_mem_19826)[sext_i32_i64(sharedIdx_19865)];\n            private_mem_19847[sext_i32_i64(i_19864)] = tmp_19866;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19867 = 0; i_19867 < (int64_t) 3; i_19867++) {\n            int64_t sharedIdx_19868 = sext_i32_i64(local_tid_19812) + i_19867 *\n                    segscan_group_sizze_17680;\n            int64_t tmp_19869;\n            \n            tmp_19869 = private_mem_19849[i_19867];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_19868] = tmp_19869;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19870 = 0; i_19870 < 3; i_19870++) {\n            int32_t sharedIdx_19871 = local_tid_19812 * 3 + i_19870;\n            int64_t tmp_19872;\n            \n            tmp_19872 = ((__local\n                          int64_t *) local_mem_19826)[sext_i32_i64(sharedIdx_19871)];\n            private_mem_19849[sext_i32_i64(i_19870)] = tmp_19872;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19873 = 0; i_19873 < (int64_t) 3; i_19873++) {\n            int64_t sharedIdx_19874 = sext_i32_i64(local_tid_19812) + i_19873 *\n                    segscan_group_sizze_17680;\n            int64_t tmp_19875;\n            \n            tmp_19875 = private_mem_19851[i_19873];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_19874] = tmp_19875;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19876 = 0; i_19876 < 3; i_19876++) {\n            int32_t sharedIdx_19877 = local_tid_19812 * 3 + i_19876;\n            int64_t tmp_19878;\n            \n            tmp_19878 = ((__local\n                          int64_t *) local_mem_198",
            "26)[sext_i32_i64(sharedIdx_19877)];\n            private_mem_19851[sext_i32_i64(i_19876)] = tmp_19878;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19879 = 0; i_19879 < (int64_t) 3; i_19879++) {\n            int64_t sharedIdx_19880 = sext_i32_i64(local_tid_19812) + i_19879 *\n                    segscan_group_sizze_17680;\n            int64_t tmp_19881;\n            \n            tmp_19881 = private_mem_19853[i_19879];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_19880] = tmp_19881;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19882 = 0; i_19882 < 3; i_19882++) {\n            int32_t sharedIdx_19883 = local_tid_19812 * 3 + i_19882;\n            int64_t tmp_19884;\n            \n            tmp_19884 = ((__local\n                          int64_t *) local_mem_19826)[sext_i32_i64(sharedIdx_19883)];\n            private_mem_19853[sext_i32_i64(i_19882)] = tmp_19884;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        int32_t gidx_19885 = local_tid_19812 * 3 + 1;\n        \n        for (int64_t i_19886 = 0; i_19886 < (int64_t) 2; i_19886++) {\n            bool new_sgm_19887 = smod32(gidx_19885 + sext_i64_i32(i_19886) -\n                                        boundary_19845,\n                                        segsizze_compact_19846) == 0;\n            \n            if (!new_sgm_19887) {\n                int64_t x_17691;\n                int64_t x_17695;\n                \n                x_17691 = private_mem_19847[i_19886];\n                x_17695 = private_mem_19847[i_19886 + (int64_t) 1];\n                \n                int64_t x_17692;\n                int64_t x_17696;\n                \n                x_17692 = private_mem_19849[i_19886];\n                x_17696 = private_mem_19849[i_19886 + (int64_t) 1];\n                \n                int64_t x_17693;\n                int64_t x_17697;\n                \n                x_17693 = private_mem_19851[i_19886];\n                x_17697",
            " = private_mem_19851[i_19886 + (int64_t) 1];\n                \n                int64_t x_17694;\n                int64_t x_17698;\n                \n                x_17694 = private_mem_19853[i_19886];\n                x_17698 = private_mem_19853[i_19886 + (int64_t) 1];\n                \n                int64_t defunc_1_op_res_17699 = add64(x_17691, x_17695);\n                int64_t defunc_1_op_res_17700 = add64(x_17692, x_17696);\n                int64_t defunc_1_op_res_17701 = add64(x_17693, x_17697);\n                int64_t defunc_1_op_res_17702 = add64(x_17694, x_17698);\n                \n                private_mem_19847[i_19886 + (int64_t) 1] =\n                    defunc_1_op_res_17699;\n                private_mem_19849[i_19886 + (int64_t) 1] =\n                    defunc_1_op_res_17700;\n                private_mem_19851[i_19886 + (int64_t) 1] =\n                    defunc_1_op_res_17701;\n                private_mem_19853[i_19886 + (int64_t) 1] =\n                    defunc_1_op_res_17702;\n            }\n        }\n    }\n    // Publish results in shared memory\n    {\n        int64_t tmp_19888;\n        \n        tmp_19888 = private_mem_19847[(int64_t) 2];\n        ((__local int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n            tmp_19888;\n        \n        int64_t tmp_19889;\n        \n        tmp_19889 = private_mem_19849[(int64_t) 2];\n        ((__local int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n            tmp_19889;\n        \n        int64_t tmp_19890;\n        \n        tmp_19890 = private_mem_19851[(int64_t) 2];\n        ((__local int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                      (int64_t) 8) +\n        ",
            "                                      sext_i32_i64(local_tid_19812)] =\n            tmp_19890;\n        \n        int64_t tmp_19891;\n        \n        tmp_19891 = private_mem_19853[(int64_t) 2];\n        ((__local int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n            tmp_19891;\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_19904;\n    int64_t acc_19905;\n    int64_t acc_19906;\n    int64_t acc_19907;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_19892;\n        int64_t x_19893;\n        int64_t x_19894;\n        int64_t x_19895;\n        int64_t x_19896;\n        int64_t x_19897;\n        int64_t x_19898;\n        int64_t x_19899;\n        int64_t x_19908;\n        int64_t x_19909;\n        int64_t x_19910;\n        int64_t x_19911;\n        int64_t x_19912;\n        int64_t x_19913;\n        int64_t x_19914;\n        int64_t x_19915;\n        bool ltid_in_bounds_19920 = slt64(sext_i32_i64(local_tid_19812),\n                                          segscan_group_sizze_17680);\n        int32_t skip_threads_19921;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19920) {\n                x_19896 = ((volatile __local\n                            int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19812)];\n                x_19897 = ((volatile __local\n                            int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19812)];\n                x_19898 = ((volatile __local\n                            int64_t *) local_mem_19826)[squo",
            "t64(byte_offsets_19818,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19812)];\n                x_19899 = ((volatile __local\n                            int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19812)];\n                if ((local_tid_19812 - squot32(local_tid_19812, 32) * 32) ==\n                    0) {\n                    x_19892 = x_19896;\n                    x_19893 = x_19897;\n                    x_19894 = x_19898;\n                    x_19895 = x_19899;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19921 = 1;\n            while (slt32(skip_threads_19921, 32)) {\n                bool thread_active_19922 = sle32(skip_threads_19921,\n                                                 local_tid_19812 -\n                                                 squot32(local_tid_19812, 32) *\n                                                 32) && ltid_in_bounds_19920;\n                \n                if (thread_active_19922) {\n                    // read operands\n                    {\n                        x_19892 = ((volatile __local\n                                    int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19812) -\n                                                                 sext_i32_i64(skip_threads_19921))];\n                        x_19893 = ((volatile __local\n                                    int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                                       ",
            " (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19812) -\n                                                                 sext_i32_i64(skip_threads_19921))];\n                        x_19894 = ((volatile __local\n                                    int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19812) -\n                                                                 sext_i32_i64(skip_threads_19921))];\n                        x_19895 = ((volatile __local\n                                    int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19812) -\n                                                                 sext_i32_i64(skip_threads_19921))];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19923 = slt32(smod32((local_tid_19812 + 1) *\n                                                       3 - 1 +\n                                                       segsizze_compact_19846 -\n                                                       boundary_19845,\n                                                       segsizze_compact_19846),\n                                                (local_tid_19812 + 1) * 3 - 1 -\n                                                ((local_tid_19812 -\n                                                  skip_threads_19921 + 1) * 3 -\n                                                 1));\n                    \n                    if (thread_active_19922 && inactive_19923) {\n                        x_19892 = x_19896;\n                        x_19893 = x_19897;\n    ",
            "                    x_19894 = x_19898;\n                        x_19895 = x_19899;\n                    }\n                    if (thread_active_19922) {\n                        if (!inactive_19923) {\n                            int64_t defunc_1_op_res_19900 = add64(x_19892,\n                                                                  x_19896);\n                            int64_t defunc_1_op_res_19901 = add64(x_19893,\n                                                                  x_19897);\n                            int64_t defunc_1_op_res_19902 = add64(x_19894,\n                                                                  x_19898);\n                            int64_t defunc_1_op_res_19903 = add64(x_19895,\n                                                                  x_19899);\n                            \n                            x_19892 = defunc_1_op_res_19900;\n                            x_19893 = defunc_1_op_res_19901;\n                            x_19894 = defunc_1_op_res_19902;\n                            x_19895 = defunc_1_op_res_19903;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19814, skip_threads_19921)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19922) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19812)] =\n                            x_19892;\n                        x_19896 = x_19892;\n                        ((volatile __local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                              (int64_t) 8) +\n                                                    ",
            "  sext_i32_i64(local_tid_19812)] =\n                            x_19893;\n                        x_19897 = x_19893;\n                        ((volatile __local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19812)] =\n                            x_19894;\n                        x_19898 = x_19894;\n                        ((volatile __local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19812)] =\n                            x_19895;\n                        x_19899 = x_19895;\n                    }\n                }\n                if (sle32(wave_sizze_19814, skip_threads_19921)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19921 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19812 - squot32(local_tid_19812, 32) * 32) == 31 &&\n                ltid_in_bounds_19920) {\n                ((volatile __local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19812,\n                                                                   32))] =\n                    x_19892;\n                ((volatile __local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19812,\n                                            ",
            "                       32))] =\n                    x_19893;\n                ((volatile __local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19812,\n                                                                   32))] =\n                    x_19894;\n                ((volatile __local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19812,\n                                                                   32))] =\n                    x_19895;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19924;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19812, 32) == 0 && ltid_in_bounds_19920) {\n                    x_19912 = ((volatile __local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19812)];\n                    x_19913 = ((volatile __local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19812)];\n                    x_19914 = ((volatile __local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                                    (int64_t) 8) +\n          ",
            "                                                  sext_i32_i64(local_tid_19812)];\n                    x_19915 = ((volatile __local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19812)];\n                    if ((local_tid_19812 - squot32(local_tid_19812, 32) * 32) ==\n                        0) {\n                        x_19908 = x_19912;\n                        x_19909 = x_19913;\n                        x_19910 = x_19914;\n                        x_19911 = x_19915;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19924 = 1;\n                while (slt32(skip_threads_19924, 32)) {\n                    bool thread_active_19925 = sle32(skip_threads_19924,\n                                                     local_tid_19812 -\n                                                     squot32(local_tid_19812,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19812, 32) == 0 &&\n                          ltid_in_bounds_19920);\n                    \n                    if (thread_active_19925) {\n                        // read operands\n                        {\n                            x_19908 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19812) -\n                                                                     sext_i32_i64(skip_threads_19924))];\n                            x_19909 = ((volatile __local\n                                        int64_t *)",
            " local_mem_19826)[squot64(byte_offsets_19817,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19812) -\n                                                                     sext_i32_i64(skip_threads_19924))];\n                            x_19910 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19812) -\n                                                                     sext_i32_i64(skip_threads_19924))];\n                            x_19911 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19812) -\n                                                                     sext_i32_i64(skip_threads_19924))];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19926 = slt32(smod32((local_tid_19812 *\n                                                            32 + 32 - 1 + 1) *\n                                                           3 - 1 +\n                                                           segsizze_compact_19846 -\n                                                           boundary_19845,\n                                                           segsizze_compact_19846),\n                                                    (local_tid_19812 * 32 + 32 -\n                                                     1 + 1) * 3 - 1 -\n                            ",
            "                        (((local_tid_19812 -\n                                                       skip_threads_19924) *\n                                                      32 + 32 - 1 + 1) * 3 -\n                                                     1));\n                        \n                        if (thread_active_19925 && inactive_19926) {\n                            x_19908 = x_19912;\n                            x_19909 = x_19913;\n                            x_19910 = x_19914;\n                            x_19911 = x_19915;\n                        }\n                        if (thread_active_19925) {\n                            if (!inactive_19926) {\n                                int64_t defunc_1_op_res_19916 = add64(x_19908,\n                                                                      x_19912);\n                                int64_t defunc_1_op_res_19917 = add64(x_19909,\n                                                                      x_19913);\n                                int64_t defunc_1_op_res_19918 = add64(x_19910,\n                                                                      x_19914);\n                                int64_t defunc_1_op_res_19919 = add64(x_19911,\n                                                                      x_19915);\n                                \n                                x_19908 = defunc_1_op_res_19916;\n                                x_19909 = defunc_1_op_res_19917;\n                                x_19910 = defunc_1_op_res_19918;\n                                x_19911 = defunc_1_op_res_19919;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19814, skip_threads_19924)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19925) {\n                        // write result\n                        {\n                            ((volatile __local\n                   ",
            "           int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19812)] =\n                                x_19908;\n                            x_19912 = x_19908;\n                            ((volatile __local\n                              int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19812)] =\n                                x_19909;\n                            x_19913 = x_19909;\n                            ((volatile __local\n                              int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19812)] =\n                                x_19910;\n                            x_19914 = x_19910;\n                            ((volatile __local\n                              int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19812)] =\n                                x_19911;\n                            x_19915 = x_19911;\n                        }\n                    }\n                    if (sle32(wave_sizze_19814, skip_threads_19924)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19924 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19927 = squot32(local_tid_19812, 32) == 0 ||\n             !ltid_in_bounds_19920;\n        \n        // carry-in for every block except the fir",
            "st\n        {\n            // read operands\n            {\n                if (!no_carry_in_19927) {\n                    x_19896 = x_19892;\n                    x_19897 = x_19893;\n                    x_19898 = x_19894;\n                    x_19899 = x_19895;\n                    x_19892 = ((__local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19812,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19893 = ((__local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19812,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19894 = ((__local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19812,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19895 = ((__local\n                                int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19812,\n           ",
            "                                                                       32)) -\n                                                             (int64_t) 1)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19928 = slt32(smod32((local_tid_19812 + 1) * 3 -\n                                                   1 + segsizze_compact_19846 -\n                                                   boundary_19845,\n                                                   segsizze_compact_19846),\n                                            (local_tid_19812 + 1) * 3 - 1 -\n                                            ((squot32(local_tid_19812, 32) *\n                                              32 - 1 + 1) * 3 - 1));\n                \n                if (!no_carry_in_19927) {\n                    if (inactive_19928) {\n                        x_19892 = x_19896;\n                        x_19893 = x_19897;\n                        x_19894 = x_19898;\n                        x_19895 = x_19899;\n                    }\n                }\n                if (!no_carry_in_19927) {\n                    if (!inactive_19928) {\n                        int64_t defunc_1_op_res_19900 = add64(x_19892, x_19896);\n                        int64_t defunc_1_op_res_19901 = add64(x_19893, x_19897);\n                        int64_t defunc_1_op_res_19902 = add64(x_19894, x_19898);\n                        int64_t defunc_1_op_res_19903 = add64(x_19895, x_19899);\n                        \n                        x_19892 = defunc_1_op_res_19900;\n                        x_19893 = defunc_1_op_res_19901;\n                        x_19894 = defunc_1_op_res_19902;\n                        x_19895 = defunc_1_op_res_19903;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19927) {\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                ",
            "                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        x_19892;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        x_19893;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        x_19894;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        x_19895;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19812, 32) == 0 && ltid_in_bounds_19920) {\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n                    x_19896;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n                    x_19897;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                      (int64_t) 8",
            ") +\n                                              sext_i32_i64(local_tid_19812)] =\n                    x_19898;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19812)] =\n                    x_19899;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_19812 == 0) {\n            acc_19904 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19816,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17680 -\n                                                       (int64_t) 1)];\n            acc_19905 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17680 -\n                                                       (int64_t) 1)];\n            acc_19906 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17680 -\n                                                       (int64_t) 1)];\n            acc_19907 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_17680 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_19904 = ((__local\n                          int64_t *) loc",
            "al_mem_19826)[squot64(byte_offsets_19816,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19812) -\n                                                       (int64_t) 1)];\n            acc_19905 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19817,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19812) -\n                                                       (int64_t) 1)];\n            acc_19906 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19818,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19812) -\n                                                       (int64_t) 1)];\n            acc_19907 = ((__local\n                          int64_t *) local_mem_19826)[squot64(byte_offsets_19819,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19812) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_19929 = (int64_t) 0;\n    int64_t prefix_19930 = (int64_t) 0;\n    int64_t prefix_19931 = (int64_t) 0;\n    int64_t prefix_19932 = (int64_t) 0;\n    bool block_new_sgm_19933 = sgm_idx_19844 == (int64_t) 0;\n    \n    // Perform lookback\n    {\n        if (block_new_sgm_19933 && local_tid_19812 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_19785)[dynamic_id_19842] = acc_19904;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19789)[dynamic_id_19842] = acc_19905;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19793",
            ")[dynamic_id_19842] = acc_19906;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19797)[dynamic_id_19842] = acc_19907;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_19781)[dynamic_id_19842] = (int8_t) 2;\n            acc_19904 = (int64_t) 0;\n            acc_19905 = (int64_t) 0;\n            acc_19906 = (int64_t) 0;\n            acc_19907 = (int64_t) 0;\n        }\n        if (!block_new_sgm_19933 && slt32(local_tid_19812, wave_sizze_19814)) {\n            if (local_tid_19812 == 0) {\n                if (boundary_19845 == sext_i64_i32(segscan_group_sizze_17680 *\n                    (int64_t) 3)) {\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19783)[dynamic_id_19842] =\n                        acc_19904;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19787)[dynamic_id_19842] =\n                        acc_19905;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19791)[dynamic_id_19842] =\n                        acc_19906;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19795)[dynamic_id_19842] =\n                        acc_19907;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19781)[dynamic_id_19842] =\n                        (int8_t) 1;\n                } else {\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19785)[dynamic_id_19842] =\n                        acc_19904;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19789)[dynamic_id_19842] =\n                        acc_19905;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19793)[dynamic_id_19842] =\n                        acc_19906;\n                    ((volatile __global\n         ",
            "             int64_t *) incprefixes_mem_19797)[dynamic_id_19842] =\n                        acc_19907;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19781)[dynamic_id_19842] =\n                        (int8_t) 2;\n                }\n                \n                int8_t tmp_19934;\n                \n                tmp_19934 = ((volatile __global\n                              int8_t *) status_flags_mem_19781)[dynamic_id_19842 -\n                                                                (int64_t) 1];\n                ((volatile __local int8_t *) local_mem_19826)[(int64_t) 0] =\n                    tmp_19934;\n            }\n            mem_fence_local();\n            \n            int8_t status_19935;\n            \n            status_19935 = ((__local int8_t *) local_mem_19826)[(int64_t) 0];\n            if (status_19935 == (int8_t) 2) {\n                if (local_tid_19812 == 0) {\n                    prefix_19929 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19785)[dynamic_id_19842 -\n                                                                       (int64_t) 1];\n                    prefix_19930 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19789)[dynamic_id_19842 -\n                                                                       (int64_t) 1];\n                    prefix_19931 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19793)[dynamic_id_19842 -\n                                                                       (int64_t) 1];\n                    prefix_19932 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19797)[dynamic_id_19842 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_19936 = dynamic_id_19842 -\n          ",
            "              sext_i32_i64(wave_sizze_19814);\n                \n                while (slt32(wave_sizze_19814 * -1, readOffset_19936)) {\n                    int32_t read_i_19937 = readOffset_19936 + local_tid_19812;\n                    int64_t aggr_19938 = (int64_t) 0;\n                    int64_t aggr_19939 = (int64_t) 0;\n                    int64_t aggr_19940 = (int64_t) 0;\n                    int64_t aggr_19941 = (int64_t) 0;\n                    int8_t flag_19942 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_19937)) {\n                        if (sle64(blockOff_19843 - (sext_i32_i64(read_i_19937 +\n                                                    1) *\n                                                    segscan_group_sizze_17680 *\n                                                    (int64_t) 3 - (int64_t) 1),\n                                  sgm_idx_19844)) {\n                            flag_19942 = ((volatile __global\n                                           int8_t *) status_flags_mem_19781)[sext_i32_i64(read_i_19937)];\n                            if (flag_19942 == (int8_t) 2) {\n                                aggr_19938 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19785)[sext_i32_i64(read_i_19937)];\n                                aggr_19939 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19789)[sext_i32_i64(read_i_19937)];\n                                aggr_19940 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19793)[sext_i32_i64(read_i_19937)];\n                                aggr_19941 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19797)[sext_i32_i64(read_i_19937)];\n                            } else {\n                                if (flag_19942 == (int8_t) 1) {\n                                    aggr_19938 = ((volatile __global\n",
            "                                                   int64_t *) aggregates_mem_19783)[sext_i32_i64(read_i_19937)];\n                                    aggr_19939 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19787)[sext_i32_i64(read_i_19937)];\n                                    aggr_19940 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19791)[sext_i32_i64(read_i_19937)];\n                                    aggr_19941 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19795)[sext_i32_i64(read_i_19937)];\n                                }\n                            }\n                        } else {\n                            flag_19942 = (int8_t) 2;\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        aggr_19938;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        aggr_19939;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19812)] =\n                        aggr_19940;\n                    ((__local\n                      int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                          (int64_t) 8) +\n                                              ",
            "    sext_i32_i64(local_tid_19812)] =\n                        aggr_19941;\n                    ((__local\n                      int8_t *) local_mem_19826)[sext_i32_i64(local_tid_19812)] =\n                        flag_19942;\n                    flag_19942 = ((__local\n                                   int8_t *) local_mem_19826)[sext_i32_i64(wave_sizze_19814) -\n                                                              (int64_t) 1];\n                    if (slt8(flag_19942, (int8_t) 2)) {\n                        int8_t flg_x_19955;\n                        int8_t flg_y_19956;\n                        int64_t x_19943;\n                        int64_t x_19944;\n                        int64_t x_19945;\n                        int64_t x_19946;\n                        int64_t x_19947;\n                        int64_t x_19948;\n                        int64_t x_19949;\n                        int64_t x_19950;\n                        int32_t skip_threads_19957;\n                        \n                        // read input for in-block scan\n                        {\n                            flg_y_19956 = ((volatile __local\n                                            int8_t *) local_mem_19826)[sext_i32_i64(local_tid_19812)];\n                            x_19947 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19812)];\n                            x_19948 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19812)];\n                            x_19949 = ((volatile __local\n                 ",
            "                       int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19812)];\n                            x_19950 = ((volatile __local\n                                        int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19812)];\n                            if ((local_tid_19812 - squot32(local_tid_19812,\n                                                           32) * 32) == 0) {\n                                x_19943 = x_19947;\n                                x_19944 = x_19948;\n                                x_19945 = x_19949;\n                                x_19946 = x_19950;\n                                flg_x_19955 = flg_y_19956;\n                            }\n                        }\n                        // in-block scan (hopefully no barriers needed)\n                        {\n                            skip_threads_19957 = 1;\n                            while (slt32(skip_threads_19957, 32)) {\n                                if (sle32(skip_threads_19957, local_tid_19812 -\n                                          squot32(local_tid_19812, 32) * 32)) {\n                                    // read operands\n                                    {\n                                        flg_x_19955 = ((volatile __local\n                                                        int8_t *) local_mem_19826)[sext_i32_i64(local_tid_19812) -\n                                                                                   sext_i32_i64(skip_threads_19957)];\n                                        x_19943 = ((volatile __local\n                                                    int64_t *)",
            " local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19812) -\n                                                                                 sext_i32_i64(skip_threads_19957))];\n                                        x_19944 = ((volatile __local\n                                                    int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19812) -\n                                                                                 sext_i32_i64(skip_threads_19957))];\n                                        x_19945 = ((volatile __local\n                                                    int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19812) -\n                                                                                 sext_i32_i64(skip_threads_19957))];\n                                        x_19946 = ((volatile __local\n                                                    int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19812) -\n                                                                                 sext_i32_i64(skip_threads_19957))];\n                                    }\n                                    /",
            "/ perform operation\n                                    {\n                                        if (flg_y_19956 == (int8_t) 2 ||\n                                            flg_y_19956 == (int8_t) 0) {\n                                            flg_x_19955 = flg_y_19956;\n                                            x_19943 = x_19947;\n                                            x_19944 = x_19948;\n                                            x_19945 = x_19949;\n                                            x_19946 = x_19950;\n                                        } else {\n                                            int64_t defunc_1_op_res_19951 =\n                                                    add64(x_19943, x_19947);\n                                            int64_t defunc_1_op_res_19952 =\n                                                    add64(x_19944, x_19948);\n                                            int64_t defunc_1_op_res_19953 =\n                                                    add64(x_19945, x_19949);\n                                            int64_t defunc_1_op_res_19954 =\n                                                    add64(x_19946, x_19950);\n                                            \n                                            x_19943 = defunc_1_op_res_19951;\n                                            x_19944 = defunc_1_op_res_19952;\n                                            x_19945 = defunc_1_op_res_19953;\n                                            x_19946 = defunc_1_op_res_19954;\n                                        }\n                                    }\n                                    // write result\n                                    {\n                                        ((volatile __local\n                                          int8_t *) local_mem_19826)[sext_i32_i64(local_tid_19812)] =\n                                            flg_x_19955;\n                                        flg_y_19956 = flg_x_19955;\n    ",
            "                                    ((volatile __local\n                                          int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19812)] =\n                                            x_19943;\n                                        x_19947 = x_19943;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19812)] =\n                                            x_19944;\n                                        x_19948 = x_19944;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19812)] =\n                                            x_19945;\n                                        x_19949 = x_19945;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19812)] =\n                                            x_19946;\n                                        x_19950 = x_19946;\n                                    }\n                                }\n                                skip_threads_19957 *= 2;",
            "\n                            }\n                        }\n                    }\n                    flag_19942 = ((__local\n                                   int8_t *) local_mem_19826)[sext_i32_i64(wave_sizze_19814) -\n                                                              (int64_t) 1];\n                    aggr_19938 = ((__local\n                                   int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19814) -\n                                                                (int64_t) 1)];\n                    aggr_19939 = ((__local\n                                   int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19814) -\n                                                                (int64_t) 1)];\n                    aggr_19940 = ((__local\n                                   int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19814) -\n                                                                (int64_t) 1)];\n                    aggr_19941 = ((__local\n                                   int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19814) -\n                                                                (int64_t) 1)];\n                    if (flag_19942 == (int8_t) 2) {\n                        readOffset_19936 = wave_sizze_1",
            "9814 * -1;\n                    } else {\n                        if (flag_19942 == (int8_t) 1) {\n                            readOffset_19936 -= wave_sizze_19814;\n                        }\n                    }\n                    if (slt8((int8_t) 0, flag_19942)) {\n                        int64_t x_19958 = aggr_19938;\n                        int64_t x_19959 = aggr_19939;\n                        int64_t x_19960 = aggr_19940;\n                        int64_t x_19961 = aggr_19941;\n                        int64_t x_19962 = prefix_19929;\n                        int64_t x_19963 = prefix_19930;\n                        int64_t x_19964 = prefix_19931;\n                        int64_t x_19965 = prefix_19932;\n                        int64_t defunc_1_op_res_19966 = add64(x_19958, x_19962);\n                        int64_t defunc_1_op_res_19967 = add64(x_19959, x_19963);\n                        int64_t defunc_1_op_res_19968 = add64(x_19960, x_19964);\n                        int64_t defunc_1_op_res_19969 = add64(x_19961, x_19965);\n                        \n                        prefix_19929 = defunc_1_op_res_19966;\n                        prefix_19930 = defunc_1_op_res_19967;\n                        prefix_19931 = defunc_1_op_res_19968;\n                        prefix_19932 = defunc_1_op_res_19969;\n                    }\n                    mem_fence_local();\n                }\n            }\n            if (local_tid_19812 == 0) {\n                if (boundary_19845 == sext_i64_i32(segscan_group_sizze_17680 *\n                    (int64_t) 3)) {\n                    int64_t x_19970 = prefix_19929;\n                    int64_t x_19971 = prefix_19930;\n                    int64_t x_19972 = prefix_19931;\n                    int64_t x_19973 = prefix_19932;\n                    int64_t x_19974 = acc_19904;\n                    int64_t x_19975 = acc_19905;\n                    int64_t x_19976 = acc_19906;\n                    int64_t x_19977 = acc_19907;\n                    int64_t defunc_1_op_res_1",
            "9978 = add64(x_19970, x_19974);\n                    int64_t defunc_1_op_res_19979 = add64(x_19971, x_19975);\n                    int64_t defunc_1_op_res_19980 = add64(x_19972, x_19976);\n                    int64_t defunc_1_op_res_19981 = add64(x_19973, x_19977);\n                    \n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19785)[dynamic_id_19842] =\n                        defunc_1_op_res_19978;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19789)[dynamic_id_19842] =\n                        defunc_1_op_res_19979;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19793)[dynamic_id_19842] =\n                        defunc_1_op_res_19980;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19797)[dynamic_id_19842] =\n                        defunc_1_op_res_19981;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19781)[dynamic_id_19842] =\n                        (int8_t) 2;\n                }\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                      (int64_t) 8)] =\n                    prefix_19929;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                      (int64_t) 8)] =\n                    prefix_19930;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                      (int64_t) 8)] =\n                    prefix_19931;\n                ((__local\n                  int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                      (int64_t) 8)] =\n                    prefix_19932;\n                acc_19",
            "904 = (int64_t) 0;\n                acc_19905 = (int64_t) 0;\n                acc_19906 = (int64_t) 0;\n                acc_19907 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_19842 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_19929 = ((__local\n                             int64_t *) local_mem_19826)[squot64(warp_byte_offset_19821,\n                                                                 (int64_t) 8)];\n            prefix_19930 = ((__local\n                             int64_t *) local_mem_19826)[squot64(warp_byte_offset_19822,\n                                                                 (int64_t) 8)];\n            prefix_19931 = ((__local\n                             int64_t *) local_mem_19826)[squot64(warp_byte_offset_19823,\n                                                                 (int64_t) 8)];\n            prefix_19932 = ((__local\n                             int64_t *) local_mem_19826)[squot64(warp_byte_offset_19824,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_19982;\n        int64_t x_19986;\n        int64_t x_19994 = prefix_19929;\n        int64_t x_19998 = acc_19904;\n        int64_t x_19983;\n        int64_t x_19987;\n        int64_t x_19995 = prefix_19930;\n        int64_t x_19999 = acc_19905;\n        int64_t x_19984;\n        int64_t x_19988;\n        int64_t x_19996 = prefix_19931;\n        int64_t x_20000 = acc_19906;\n        int64_t x_19985;\n        int64_t x_19989;\n        int64_t x_19997 = prefix_19932;\n        int64_t x_20001 = acc_19907;\n        \n        if (slt32(local_tid_19812 * 3, boundary_19845) &&\n            !block_new_sgm_19933) {\n            int64_t defunc_1_op_res_20002 = add64(x_19994, x_19998);\n            int64_t defunc_1_op_res_20003 = add64(x_19995, x_19999);\n            int64_t defunc_1_op_res_20004 = add64(x_19996, x_20000);\n          ",
            "  int64_t defunc_1_op_res_20005 = add64(x_19997, x_20001);\n            \n            x_19982 = defunc_1_op_res_20002;\n            x_19983 = defunc_1_op_res_20003;\n            x_19984 = defunc_1_op_res_20004;\n            x_19985 = defunc_1_op_res_20005;\n        } else {\n            x_19982 = acc_19904;\n            x_19983 = acc_19905;\n            x_19984 = acc_19906;\n            x_19985 = acc_19907;\n        }\n        \n        int32_t stopping_point_20006 = segsizze_compact_19846 -\n                srem32(local_tid_19812 * 3 - 1 + segsizze_compact_19846 -\n                       boundary_19845, segsizze_compact_19846);\n        \n        for (int64_t i_20007 = 0; i_20007 < (int64_t) 3; i_20007++) {\n            if (slt32(sext_i64_i32(i_20007), stopping_point_20006 - 1)) {\n                x_19986 = private_mem_19847[i_20007];\n                x_19987 = private_mem_19849[i_20007];\n                x_19988 = private_mem_19851[i_20007];\n                x_19989 = private_mem_19853[i_20007];\n                \n                int64_t defunc_1_op_res_19990 = add64(x_19982, x_19986);\n                int64_t defunc_1_op_res_19991 = add64(x_19983, x_19987);\n                int64_t defunc_1_op_res_19992 = add64(x_19984, x_19988);\n                int64_t defunc_1_op_res_19993 = add64(x_19985, x_19989);\n                \n                private_mem_19847[i_20007] = defunc_1_op_res_19990;\n                private_mem_19849[i_20007] = defunc_1_op_res_19991;\n                private_mem_19851[i_20007] = defunc_1_op_res_19992;\n                private_mem_19853[i_20007] = defunc_1_op_res_19993;\n            }\n        }\n    }\n    // Transpose scan output and Write it to global memory in coalesced fashion\n    {\n        for (int64_t i_20008 = 0; i_20008 < (int64_t) 3; i_20008++) {\n            int64_t sharedIdx_20009 = sext_i32_i64(local_tid_19812 * 3) +\n                    i_20008;\n            int64_t tmp_20010;\n            \n            tmp_20010 = private_mem_19847[i_20008];\n            ((__local int6",
            "4_t *) local_mem_19826)[sharedIdx_20009] = tmp_20010;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20011 = 0; i_20011 < (int64_t) 3; i_20011++) {\n            int64_t flat_idx_20012 = blockOff_19843 +\n                    segscan_group_sizze_17680 * i_20011 +\n                    sext_i32_i64(local_tid_19812);\n            int64_t slice_20013 = g_16393;\n            int64_t slice_20014 = b_16392 * slice_20013;\n            int64_t gtid_17688 = squot64(flat_idx_20012, slice_20013);\n            int64_t remnant_20015 = flat_idx_20012 - gtid_17688 * slice_20013;\n            int64_t gtid_17689 = remnant_20015;\n            int64_t remnant_20016 = remnant_20015 - gtid_17689;\n            \n            if (slt64(flat_idx_20012, b_16392 * g_16393)) {\n                int64_t tmp_20017;\n                \n                tmp_20017 = ((__local\n                              int64_t *) local_mem_19826)[flat_idx_20012 -\n                                                          blockOff_19843];\n                ((__global int64_t *) mem_19388)[gtid_17688 * g_16393 +\n                                                 gtid_17689] = tmp_20017;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20018 = 0; i_20018 < (int64_t) 3; i_20018++) {\n            int64_t sharedIdx_20019 = sext_i32_i64(local_tid_19812 * 3) +\n                    i_20018;\n            int64_t tmp_20020;\n            \n            tmp_20020 = private_mem_19849[i_20018];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_20019] = tmp_20020;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20021 = 0; i_20021 < (int64_t) 3; i_20021++) {\n            int64_t flat_idx_20022 = blockOff_19843 +\n                    segscan_group_sizze_17680 * i_20021 +\n                    sext_i32_i64(local_tid_19812);\n            int64_t slice_20023 = g_16393;\n            int64_t slice_20024 = b_16392 * slice_20023;\n            int64_t gtid_17688 = squot64(flat_idx_20",
            "022, slice_20023);\n            int64_t remnant_20025 = flat_idx_20022 - gtid_17688 * slice_20023;\n            int64_t gtid_17689 = remnant_20025;\n            int64_t remnant_20026 = remnant_20025 - gtid_17689;\n            \n            if (slt64(flat_idx_20022, b_16392 * g_16393)) {\n                int64_t tmp_20027;\n                \n                tmp_20027 = ((__local\n                              int64_t *) local_mem_19826)[flat_idx_20022 -\n                                                          blockOff_19843];\n                ((__global int64_t *) mem_19392)[gtid_17688 * g_16393 +\n                                                 gtid_17689] = tmp_20027;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20028 = 0; i_20028 < (int64_t) 3; i_20028++) {\n            int64_t sharedIdx_20029 = sext_i32_i64(local_tid_19812 * 3) +\n                    i_20028;\n            int64_t tmp_20030;\n            \n            tmp_20030 = private_mem_19851[i_20028];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_20029] = tmp_20030;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20031 = 0; i_20031 < (int64_t) 3; i_20031++) {\n            int64_t flat_idx_20032 = blockOff_19843 +\n                    segscan_group_sizze_17680 * i_20031 +\n                    sext_i32_i64(local_tid_19812);\n            int64_t slice_20033 = g_16393;\n            int64_t slice_20034 = b_16392 * slice_20033;\n            int64_t gtid_17688 = squot64(flat_idx_20032, slice_20033);\n            int64_t remnant_20035 = flat_idx_20032 - gtid_17688 * slice_20033;\n            int64_t gtid_17689 = remnant_20035;\n            int64_t remnant_20036 = remnant_20035 - gtid_17689;\n            \n            if (slt64(flat_idx_20032, b_16392 * g_16393)) {\n                int64_t tmp_20037;\n                \n                tmp_20037 = ((__local\n                              int64_t *) local_mem_19826)[flat_idx_20032 -\n                                       ",
            "                   blockOff_19843];\n                ((__global int64_t *) mem_19396)[gtid_17688 * g_16393 +\n                                                 gtid_17689] = tmp_20037;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20038 = 0; i_20038 < (int64_t) 3; i_20038++) {\n            int64_t sharedIdx_20039 = sext_i32_i64(local_tid_19812 * 3) +\n                    i_20038;\n            int64_t tmp_20040;\n            \n            tmp_20040 = private_mem_19853[i_20038];\n            ((__local int64_t *) local_mem_19826)[sharedIdx_20039] = tmp_20040;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20041 = 0; i_20041 < (int64_t) 3; i_20041++) {\n            int64_t flat_idx_20042 = blockOff_19843 +\n                    segscan_group_sizze_17680 * i_20041 +\n                    sext_i32_i64(local_tid_19812);\n            int64_t slice_20043 = g_16393;\n            int64_t slice_20044 = b_16392 * slice_20043;\n            int64_t gtid_17688 = squot64(flat_idx_20042, slice_20043);\n            int64_t remnant_20045 = flat_idx_20042 - gtid_17688 * slice_20043;\n            int64_t gtid_17689 = remnant_20045;\n            int64_t remnant_20046 = remnant_20045 - gtid_17689;\n            \n            if (slt64(flat_idx_20042, b_16392 * g_16393)) {\n                int64_t tmp_20047;\n                \n                tmp_20047 = ((__local\n                              int64_t *) local_mem_19826)[flat_idx_20042 -\n                                                          blockOff_19843];\n                ((__global int64_t *) mem_19400)[gtid_17688 * g_16393 +\n                                                 gtid_17689] = tmp_20047;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_19842 == sdiv_up64(b_16392 * g_16393,\n                                          segscan_group_sizze_17680 *\n                                          (int",
            "64_t) 3) - (int64_t) 1) {\n            ((__global int32_t *) sortBagziid_counter_mem_19779)[(int64_t) 0] =\n                0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_17680\n}\n__kernel void sortBagAndDoStuffzireplicate_19727(int64_t b_16538,\n                                                 int64_t g_16539, __global\n                                                 unsigned char *mem_19050,\n                                                 __global\n                                                 unsigned char *mem_19325)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_19727;\n    int32_t replicate_ltid_19728;\n    int32_t replicate_gid_19729;\n    \n    replicate_gtid_19727 = get_global_id(0);\n    replicate_ltid_19728 = get_local_id(0);\n    replicate_gid_19729 = get_group_id(0);\n    \n    int64_t slice_19734 = g_16539;\n    int64_t slice_19735 = b_16538 * slice_19734;\n    int64_t rep_i_19732 = squot64(sext_i32_i64(replicate_gtid_19727),\n                                  slice_19734);\n    int64_t remnant_19736 = sext_i32_i64(replicate_gtid_19727) - rep_i_19732 *\n            slice_19734;\n    int64_t rep_i_19733 = remnant_19736;\n    int64_t remnant_19737 = remnant_19736 - rep_i_19733;\n    \n    if (slt64(replicate_gtid_19727, b_16538 * g_16539)) {\n        int64_t tmp_19738;\n        \n        tmp_19738 = ((__global int64_t *) mem_19050)[rep_i_19733];\n        ((__global int64_t *) mem_19325)[rep_i_19732 * g_16539 + rep_i_19733] =\n            tmp_19738;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegmap_17962(__global int *global_failure,\n                                              int failure_is_an_option, __global\n                                              int64_t *global_failure_args,\n                                              int64_t b_16538, int64_t g_16539,\n                                              int32_t iters_16543,\n                   ",
            "                           int64_t i_16546,\n                                              float i64_res_16553,\n                                              int64_t num_groups_17956,\n                                              int64_t num_threads_19566,\n                                              int32_t virt_num_groups_19607,\n                                              __global unsigned char *mem_19053,\n                                              __global unsigned char *mem_19056,\n                                              __global unsigned char *mem_19232,\n                                              __global unsigned char *mem_19235,\n                                              __global unsigned char *mem_19238,\n                                              __global\n                                              unsigned char *color_19515,\n                                              __global\n                                              unsigned char *color_19516,\n                                              __global\n                                              unsigned char *color_19517,\n                                              __global\n                                              unsigned char *color_19518,\n                                              __global\n                                              unsigned char *color_19519,\n                                              __global\n                                              unsigned char *color_19520,\n                                              __global\n                                              unsigned char *color_19521,\n                                              __global\n                                              unsigned char *color_19522,\n                                              __global\n                                              unsigned char *color_19523,\n                                              __global\n                                              ",
            "unsigned char *color_19524,\n                                              __global\n                                              unsigned char *color_19525)\n{\n    #define segmap_group_sizze_17955 (sortBagAndDoStuffzisegmap_group_sizze_17839)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19608;\n    int32_t local_tid_19609;\n    int64_t group_sizze_19612;\n    int32_t wave_sizze_19611;\n    int32_t group_tid_19610;\n    \n    global_tid_19608 = get_global_id(0);\n    local_tid_19609 = get_local_id(0);\n    group_sizze_19612 = get_local_size(0);\n    wave_sizze_19611 = LOCKSTEP_WIDTH;\n    group_tid_19610 = get_group_id(0);\n    \n    int32_t phys_tid_17962 = global_tid_19608;\n    int32_t phys_group_id_19613;\n    \n    phys_group_id_19613 = get_group_id(0);\n    \n    int32_t iterations_19614 = sdiv_up32(virt_num_groups_19607 -\n                                         phys_group_id_19613,\n                                         sext_i64_i32(num_groups_17956));\n    \n    for (int32_t i_19615 = 0; i_19615 < iterations_19614; i_19615++) {\n        int32_t virt_group_id_19616 = phys_group_id_19613 + i_19615 *\n                sext_i64_i32(num_groups_17956);\n        int64_t global_tid_19617 = sext_i32_i64(virt_group_id_19616) *\n                segmap_group_sizze_17955 + sext_i32_i64(local_tid_19609);\n        int64_t slice_19618 = b_16538;\n        int64_t gtid_17961 = global_tid_19617;\n        int64_t remnant_19619 = global_tid_19617 - gtid_17961;\n        \n        if (slt64(gtid_17961, b_16538)) {\n            for (int64_t i_18994 = 0; i_18994 < g_16539; i_18994++) {\n                float x_17966;\n                \n                x_17966 = ((__global float *) mem_19053)[i_18994 * b_1",
            "6538 +\n                                                         gtid_17961];\n                \n                float defunc_0_f_res_17967 = fmax32(0.0F, x_17966);\n                \n                ((__global float *) color_19525)[phys_tid_17962 + i_18994 *\n                                                 num_threads_19566] =\n                    defunc_0_f_res_17967;\n            }\n            for (int64_t i_19621 = 0; i_19621 < g_16539; i_19621++) {\n                float tmp_19622;\n                \n                tmp_19622 = ((__global float *) color_19525)[phys_tid_17962 +\n                                                             i_19621 *\n                                                             num_threads_19566];\n                ((__global float *) color_19516)[phys_tid_17962 + i_19621 *\n                                                 num_threads_19566] = tmp_19622;\n            }\n            for (int64_t i_19623 = 0; i_19623 < g_16539; i_19623++) {\n                int64_t x_19624 = (int64_t) 0 + i_19623 * (int64_t) 1;\n                \n                ((__global int64_t *) color_19515)[phys_tid_17962 + i_19623 *\n                                                   num_threads_19566] = x_19624;\n            }\n            \n            __global unsigned char *ext_mem_19191;\n            __global unsigned char *ext_mem_unused_19497;\n            __global unsigned char *ext_mem_19190;\n            __global unsigned char *ext_mem_unused_19501;\n            __global unsigned char *mem_param_19077;\n            __global unsigned char *mem_param_19082;\n            __global unsigned char *mem_param_out_19498;\n            __global unsigned char *mem_param_out_19502;\n            \n            mem_param_19077 = color_19516;\n            mem_param_out_19498 = color_19520;\n            mem_param_19082 = color_19515;\n            mem_param_out_19502 = color_19519;\n            for (int32_t i_17970 = 0; i_17970 < iters_16543; i_17970++) {\n                int32_t defunc_2_radix_sort_step_",
            "arg_17973 = mul32(2, i_17970);\n                int32_t defunc_0_get_bit_arg_17974 = add32(1,\n                                                           defunc_2_radix_sort_step_arg_17973);\n                bool cond_f_res_17975 = defunc_0_get_bit_arg_17974 == 31;\n                bool cond_f_res_17976 = defunc_2_radix_sort_step_arg_17973 ==\n                     31;\n                int64_t discard_19016;\n                int64_t discard_19017;\n                int64_t discard_19018;\n                int64_t discard_19019;\n                int64_t scanacc_19001;\n                int64_t scanacc_19002;\n                int64_t scanacc_19003;\n                int64_t scanacc_19004;\n                \n                scanacc_19001 = (int64_t) 0;\n                scanacc_19002 = (int64_t) 0;\n                scanacc_19003 = (int64_t) 0;\n                scanacc_19004 = (int64_t) 0;\n                for (int64_t i_19010 = 0; i_19010 < g_16539; i_19010++) {\n                    float x_17994;\n                    \n                    x_17994 = ((__global\n                                float *) mem_param_19077)[phys_tid_17962 +\n                                                          i_19010 *\n                                                          num_threads_19566];\n                    \n                    int32_t i32_arg_17995;\n                    \n                    i32_arg_17995 = futrts_to_bits32(x_17994);\n                    \n                    int32_t unsign_arg_17996 = ashr32(i32_arg_17995,\n                                                      defunc_0_get_bit_arg_17974);\n                    int32_t unsign_arg_17997 = 1 & unsign_arg_17996;\n                    int32_t unsign_arg_17998 = ashr32(i32_arg_17995, 31);\n                    int32_t unsign_arg_17999 = 1 & unsign_arg_17998;\n                    bool cond_18000 = unsign_arg_17999 == 1;\n                    bool x_18001 = !cond_18000;\n                    bool y_18002 = cond_f_res_17975 && x_18001;\n                    bool co",
            "nd_18003 = cond_18000 || y_18002;\n                    int32_t defunc_1_get_bit_res_18004;\n                    \n                    if (cond_18003) {\n                        int32_t defunc_1_get_bit_res_t_res_18005 = 1 ^\n                                unsign_arg_17997;\n                        \n                        defunc_1_get_bit_res_18004 =\n                            defunc_1_get_bit_res_t_res_18005;\n                    } else {\n                        defunc_1_get_bit_res_18004 = unsign_arg_17997;\n                    }\n                    \n                    int32_t x_18006 = mul32(2, defunc_1_get_bit_res_18004);\n                    int32_t unsign_arg_18007 = ashr32(i32_arg_17995,\n                                                      defunc_2_radix_sort_step_arg_17973);\n                    int32_t unsign_arg_18008 = 1 & unsign_arg_18007;\n                    bool y_18009 = cond_f_res_17976 && x_18001;\n                    bool cond_18010 = cond_18000 || y_18009;\n                    int32_t defunc_1_get_bit_res_18011;\n                    \n                    if (cond_18010) {\n                        int32_t defunc_1_get_bit_res_t_res_18012 = 1 ^\n                                unsign_arg_18008;\n                        \n                        defunc_1_get_bit_res_18011 =\n                            defunc_1_get_bit_res_t_res_18012;\n                    } else {\n                        defunc_1_get_bit_res_18011 = unsign_arg_18008;\n                    }\n                    \n                    int32_t defunc_0_f_res_18013 = add32(x_18006,\n                                                         defunc_1_get_bit_res_18011);\n                    bool cond_18014 = defunc_0_f_res_18013 == 0;\n                    int64_t defunc_0_f_res_18015 = btoi_bool_i64(cond_18014);\n                    int64_t defunc_0_f_res_18016;\n                    int64_t defunc_0_f_res_18017;\n                    int64_t defunc_0_f_res_18018;\n                    \n                    if (cond_180",
            "14) {\n                        defunc_0_f_res_18016 = (int64_t) 0;\n                        defunc_0_f_res_18017 = (int64_t) 0;\n                        defunc_0_f_res_18018 = (int64_t) 0;\n                    } else {\n                        bool cond_18019 = defunc_0_f_res_18013 == 1;\n                        int64_t defunc_0_f_res_f_res_18020 =\n                                btoi_bool_i64(cond_18019);\n                        int64_t defunc_0_f_res_f_res_18021;\n                        int64_t defunc_0_f_res_f_res_18022;\n                        \n                        if (cond_18019) {\n                            defunc_0_f_res_f_res_18021 = (int64_t) 0;\n                            defunc_0_f_res_f_res_18022 = (int64_t) 0;\n                        } else {\n                            bool cond_18023 = defunc_0_f_res_18013 == 2;\n                            int64_t defunc_0_f_res_f_res_f_res_18024 =\n                                    btoi_bool_i64(cond_18023);\n                            bool cond_neg_18025 = !cond_18023;\n                            int64_t defunc_0_f_res_f_res_f_res_18026 =\n                                    btoi_bool_i64(cond_neg_18025);\n                            \n                            defunc_0_f_res_f_res_18021 =\n                                defunc_0_f_res_f_res_f_res_18024;\n                            defunc_0_f_res_f_res_18022 =\n                                defunc_0_f_res_f_res_f_res_18026;\n                        }\n                        defunc_0_f_res_18016 = defunc_0_f_res_f_res_18020;\n                        defunc_0_f_res_18017 = defunc_0_f_res_f_res_18021;\n                        defunc_0_f_res_18018 = defunc_0_f_res_f_res_18022;\n                    }\n                    \n                    int64_t defunc_1_op_res_17990 = add64(defunc_0_f_res_18015,\n                                                          scanacc_19001);\n                    int64_t defunc_1_op_res_17991 = add64(defunc_0_f_res_18016,\n                         ",
            "                                 scanacc_19002);\n                    int64_t defunc_1_op_res_17992 = add64(defunc_0_f_res_18017,\n                                                          scanacc_19003);\n                    int64_t defunc_1_op_res_17993 = add64(defunc_0_f_res_18018,\n                                                          scanacc_19004);\n                    \n                    ((__global int64_t *) color_19524)[phys_tid_17962 +\n                                                       i_19010 *\n                                                       num_threads_19566] =\n                        defunc_1_op_res_17990;\n                    ((__global int64_t *) color_19523)[phys_tid_17962 +\n                                                       i_19010 *\n                                                       num_threads_19566] =\n                        defunc_1_op_res_17991;\n                    ((__global int64_t *) color_19522)[phys_tid_17962 +\n                                                       i_19010 *\n                                                       num_threads_19566] =\n                        defunc_1_op_res_17992;\n                    ((__global int64_t *) color_19521)[phys_tid_17962 +\n                                                       i_19010 *\n                                                       num_threads_19566] =\n                        defunc_1_op_res_17993;\n                    ((__global int32_t *) color_19517)[phys_tid_17962 +\n                                                       i_19010 *\n                                                       num_threads_19566] =\n                        defunc_0_f_res_18013;\n                    \n                    int64_t scanacc_tmp_19631 = defunc_1_op_res_17990;\n                    int64_t scanacc_tmp_19632 = defunc_1_op_res_17991;\n                    int64_t scanacc_tmp_19633 = defunc_1_op_res_17992;\n                    int64_t scanacc_tmp_19634 = defunc_1_op_res_17993;\n                  ",
            "  \n                    scanacc_19001 = scanacc_tmp_19631;\n                    scanacc_19002 = scanacc_tmp_19632;\n                    scanacc_19003 = scanacc_tmp_19633;\n                    scanacc_19004 = scanacc_tmp_19634;\n                }\n                discard_19016 = scanacc_19001;\n                discard_19017 = scanacc_19002;\n                discard_19018 = scanacc_19003;\n                discard_19019 = scanacc_19004;\n                \n                int64_t last_res_18027;\n                \n                last_res_18027 = ((__global\n                                   int64_t *) color_19524)[phys_tid_17962 +\n                                                           i_16546 *\n                                                           num_threads_19566];\n                \n                int64_t last_res_18028;\n                \n                last_res_18028 = ((__global\n                                   int64_t *) color_19523)[phys_tid_17962 +\n                                                           i_16546 *\n                                                           num_threads_19566];\n                \n                int64_t last_res_18029;\n                \n                last_res_18029 = ((__global\n                                   int64_t *) color_19522)[phys_tid_17962 +\n                                                           i_16546 *\n                                                           num_threads_19566];\n                for (int64_t i_19640 = 0; i_19640 < g_16539; i_19640++) {\n                    float tmp_19641;\n                    \n                    tmp_19641 = ((__global\n                                  float *) mem_param_19077)[phys_tid_17962 +\n                                                            i_19640 *\n                                                            num_threads_19566];\n                    ((__global float *) mem_param_out_19498)[phys_tid_17962 +\n                                                             i_19",
            "640 *\n                                                             num_threads_19566] =\n                        tmp_19641;\n                }\n                for (int64_t i_19642 = 0; i_19642 < g_16539; i_19642++) {\n                    int64_t tmp_19643;\n                    \n                    tmp_19643 = ((__global\n                                  int64_t *) mem_param_19082)[phys_tid_17962 +\n                                                              i_19642 *\n                                                              num_threads_19566];\n                    ((__global int64_t *) mem_param_out_19502)[phys_tid_17962 +\n                                                               i_19642 *\n                                                               num_threads_19566] =\n                        tmp_19643;\n                }\n                for (int64_t write_iter_19020 = 0; write_iter_19020 < g_16539;\n                     write_iter_19020++) {\n                    int32_t write_iv_19023;\n                    \n                    write_iv_19023 = ((__global\n                                       int32_t *) color_19517)[phys_tid_17962 +\n                                                               write_iter_19020 *\n                                                               num_threads_19566];\n                    \n                    bool match_lit_18041 = 0 == write_iv_19023;\n                    int64_t defunc_1_f_res_18042;\n                    \n                    if (match_lit_18041) {\n                        int64_t write_iv_19024;\n                        \n                        write_iv_19024 = ((__global\n                                           int64_t *) color_19524)[phys_tid_17962 +\n                                                                   write_iter_19020 *\n                                                                   num_threads_19566];\n                        \n                        int64_t case_res_18043 = sub64(write_iv_19024,\n  ",
            "                                                     (int64_t) 1);\n                        \n                        defunc_1_f_res_18042 = case_res_18043;\n                    } else {\n                        bool match_lit_18044 = 1 == write_iv_19023;\n                        int64_t x_18045;\n                        \n                        if (match_lit_18044) {\n                            int64_t write_iv_19025;\n                            \n                            write_iv_19025 = ((__global\n                                               int64_t *) color_19523)[phys_tid_17962 +\n                                                                       write_iter_19020 *\n                                                                       num_threads_19566];\n                            \n                            int64_t x_18046 = add64(last_res_18027,\n                                                    write_iv_19025);\n                            int64_t case_res_18047 = sub64(x_18046,\n                                                           (int64_t) 1);\n                            \n                            x_18045 = case_res_18047;\n                        } else {\n                            bool match_lit_18048 = 2 == write_iv_19023;\n                            int64_t x_18049;\n                            \n                            if (match_lit_18048) {\n                                int64_t write_iv_19026;\n                                \n                                write_iv_19026 = ((__global\n                                                   int64_t *) color_19522)[phys_tid_17962 +\n                                                                           write_iter_19020 *\n                                                                           num_threads_19566];\n                                \n                                int64_t x_18050 = add64(last_res_18027,\n                                                        last_res_18028);\n ",
            "                               int64_t x_18051 = add64(x_18050,\n                                                        write_iv_19026);\n                                int64_t case_res_18052 = sub64(x_18051,\n                                                               (int64_t) 1);\n                                \n                                x_18049 = case_res_18052;\n                            } else {\n                                int64_t write_iv_19027;\n                                \n                                write_iv_19027 = ((__global\n                                                   int64_t *) color_19521)[phys_tid_17962 +\n                                                                           write_iter_19020 *\n                                                                           num_threads_19566];\n                                \n                                int64_t x_18053 = add64(last_res_18027,\n                                                        last_res_18028);\n                                int64_t x_18054 = add64(last_res_18029,\n                                                        x_18053);\n                                int64_t x_18055 = add64(x_18054,\n                                                        write_iv_19027);\n                                int64_t defunc_1_f_res_res_18056 =\n                                        sub64(x_18055, (int64_t) 1);\n                                \n                                x_18049 = defunc_1_f_res_res_18056;\n                            }\n                            x_18045 = x_18049;\n                        }\n                        defunc_1_f_res_18042 = x_18045;\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_18042) &&\n                        slt64(defunc_1_f_res_18042, g_16539)) {\n                        for (int64_t i_19646 = 0; i_19646 < (int64_t) 1;\n                             i_19646++) {\n                            float tmp",
            "_19647;\n                            \n                            tmp_19647 = ((__global\n                                          float *) mem_param_19077)[phys_tid_17962 +\n                                                                    num_threads_19566 *\n                                                                    write_iter_19020 +\n                                                                    i_19646 *\n                                                                    num_threads_19566];\n                            ((__global\n                              float *) mem_param_out_19498)[phys_tid_17962 +\n                                                            num_threads_19566 *\n                                                            defunc_1_f_res_18042 +\n                                                            i_19646 *\n                                                            num_threads_19566] =\n                                tmp_19647;\n                        }\n                    }\n                    if (sle64((int64_t) 0, defunc_1_f_res_18042) &&\n                        slt64(defunc_1_f_res_18042, g_16539)) {\n                        for (int64_t i_19648 = 0; i_19648 < (int64_t) 1;\n                             i_19648++) {\n                            int64_t tmp_19649;\n                            \n                            tmp_19649 = ((__global\n                                          int64_t *) mem_param_19082)[phys_tid_17962 +\n                                                                      num_threads_19566 *\n                                                                      write_iter_19020 +\n                                                                      i_19648 *\n                                                                      num_threads_19566];\n                            ((__global\n                              int64_t *) mem_param_out_19502)[phys_tid_17962 +\n                                     ",
            "                         num_threads_19566 *\n                                                              defunc_1_f_res_18042 +\n                                                              i_19648 *\n                                                              num_threads_19566] =\n                                tmp_19649;\n                        }\n                    }\n                }\n                \n                __global unsigned char *mem_param_tmp_19625;\n                \n                mem_param_tmp_19625 = mem_param_out_19498;\n                \n                __global unsigned char *mem_param_out_tmp_19626;\n                \n                mem_param_out_tmp_19626 = mem_param_19077;\n                \n                __global unsigned char *mem_param_tmp_19627;\n                \n                mem_param_tmp_19627 = mem_param_out_19502;\n                \n                __global unsigned char *mem_param_out_tmp_19628;\n                \n                mem_param_out_tmp_19628 = mem_param_19082;\n                mem_param_19077 = mem_param_tmp_19625;\n                mem_param_out_19498 = mem_param_out_tmp_19626;\n                mem_param_19082 = mem_param_tmp_19627;\n                mem_param_out_19502 = mem_param_out_tmp_19628;\n            }\n            ext_mem_19191 = mem_param_19077;\n            ext_mem_unused_19497 = mem_param_out_19498;\n            ext_mem_19190 = mem_param_19082;\n            ext_mem_unused_19501 = mem_param_out_19502;\n            \n            float defunc_2_reduce_res_18057;\n            float redout_19034 = 0.0F;\n            \n            for (int64_t i_19037 = 0; i_19037 < g_16539; i_19037++) {\n                int64_t x_18063;\n                \n                x_18063 = ((__global int64_t *) ext_mem_19190)[phys_tid_17962 +\n                                                               i_19037 *\n                                                               num_threads_19566];\n                \n                bool x_18064 = sle64((int64_t) ",
            "0, x_18063);\n                bool y_18065 = slt64(x_18063, g_16539);\n                bool bounds_check_18066 = x_18064 && y_18065;\n                bool index_certs_18067;\n                \n                if (!bounds_check_18066) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 3) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18063;\n                            global_failure_args[1] = (int64_t) g_16539;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18068;\n                \n                defunc_0_f_res_18068 = ((__global float *) mem_19056)[x_18063 *\n                                                                      b_16538 +\n                                                                      gtid_17961];\n                \n                float defunc_1_op_res_18062 = defunc_0_f_res_18068 +\n                      redout_19034;\n                \n                for (int64_t i_19653 = 0; i_19653 < (int64_t) 1; i_19653++) {\n                    float tmp_19654;\n                    \n                    tmp_19654 = ((__global float *) mem_19056)[b_16538 *\n                                                               x_18063 +\n                                                               gtid_17961 +\n                                                               i_19653 *\n                                                               b_16538];\n                    ((__global float *) color_19518)[phys_tid_17962 +\n                                                     num_threads_19566 *\n                                                     i_19037 + i_19653 *\n                                                     num_threads_19566] =\n                        tmp_19654;\n                }\n  ",
            "              for (int64_t i_19655 = 0; i_19655 < (int64_t) 1; i_19655++) {\n                    float tmp_19656;\n                    \n                    tmp_19656 = ((__global\n                                  float *) color_19525)[phys_tid_17962 +\n                                                        num_threads_19566 *\n                                                        x_18063 + i_19655 *\n                                                        num_threads_19566];\n                    ((__global float *) color_19517)[phys_tid_17962 +\n                                                     num_threads_19566 *\n                                                     i_19037 + i_19655 *\n                                                     num_threads_19566] =\n                        tmp_19656;\n                }\n                \n                float redout_tmp_19650 = defunc_1_op_res_18062;\n                \n                redout_19034 = redout_tmp_19650;\n            }\n            defunc_2_reduce_res_18057 = redout_19034;\n            \n            float defunc_0_g_res_18070 = defunc_2_reduce_res_18057 /\n                  i64_res_16553;\n            \n            ((__global float *) mem_19232)[gtid_17961] = defunc_0_g_res_18070;\n            for (int64_t i_19657 = 0; i_19657 < g_16539; i_19657++) {\n                float tmp_19658;\n                \n                tmp_19658 = ((__global float *) color_19518)[phys_tid_17962 +\n                                                             i_19657 *\n                                                             num_threads_19566];\n                ((__global float *) mem_19235)[gtid_17961 + i_19657 * b_16538] =\n                    tmp_19658;\n            }\n            for (int64_t i_19659 = 0; i_19659 < g_16539; i_19659++) {\n                float tmp_19660;\n                \n                tmp_19660 = ((__global float *) color_19517)[phys_tid_17962 +\n                                                             i_19659 *\n            ",
            "                                                 num_threads_19566];\n                ((__global float *) mem_19238)[gtid_17961 + i_19659 * b_16538] =\n                    tmp_19660;\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_17955\n}\n__kernel void sortBagAndDoStuffzisegmap_18628(__global int *global_failure,\n                                              int64_t b_16538, int64_t g_16539,\n                                              __global\n                                              unsigned char *keys_mem_19046,\n                                              __global unsigned char *mem_19321)\n{\n    #define segmap_group_sizze_18623 (sortBagAndDoStuffzisegmap_group_sizze_18599)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19717;\n    int32_t local_tid_19718;\n    int64_t group_sizze_19721;\n    int32_t wave_sizze_19720;\n    int32_t group_tid_19719;\n    \n    global_tid_19717 = get_global_id(0);\n    local_tid_19718 = get_local_id(0);\n    group_sizze_19721 = get_local_size(0);\n    wave_sizze_19720 = LOCKSTEP_WIDTH;\n    group_tid_19719 = get_group_id(0);\n    \n    int32_t phys_tid_18628 = global_tid_19717;\n    int64_t global_tid_19722 = sext_i32_i64(group_tid_19719) *\n            segmap_group_sizze_18623 + sext_i32_i64(local_tid_19718);\n    int64_t slice_19723 = g_16539;\n    int64_t slice_19724 = b_16538 * slice_19723;\n    int64_t gtid_18626 = squot64(global_tid_19722, slice_19723);\n    int64_t remnant_19725 = global_tid_19722 - gtid_18626 * slice_19723;\n    int64_t gtid_18627 = remnant_19725;\n    int64_t remnant_19726 = remnant_19725 - gtid_18627;\n    \n    if (slt64(gtid_18626, b_16538) && slt64(gtid_18627, g_16539)) {\n        float x_18629;\n        \n        x_18629 = ((__global float *) keys_mem_19046)[gtid_18626 * g_16539 +\n                 ",
            "                                     gtid_18627];\n        \n        float defunc_0_f_res_18630 = fmax32(0.0F, x_18629);\n        \n        ((__global float *) mem_19321)[gtid_18626 * g_16539 + gtid_18627] =\n            defunc_0_f_res_18630;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18623\n}\n__kernel void sortBagAndDoStuffzisegmap_18829(__global int *global_failure,\n                                              int64_t b_16538, int64_t g_16539,\n                                              int64_t i_16546, __global\n                                              unsigned char *mem_param_19337,\n                                              __global\n                                              unsigned char *mem_param_19345,\n                                              __global unsigned char *mem_19353,\n                                              __global unsigned char *mem_19357,\n                                              __global unsigned char *mem_19394,\n                                              __global unsigned char *mem_19398,\n                                              __global unsigned char *mem_19402,\n                                              __global unsigned char *mem_19406,\n                                              __global unsigned char *mem_19410)\n{\n    #define segmap_group_sizze_18823 (sortBagAndDoStuffzisegmap_group_sizze_18371)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20057;\n    int32_t local_tid_20058;\n    int64_t group_sizze_20061;\n    int32_t wave_sizze_20060;\n    int32_t group_tid_20059;\n    \n    global_tid_20057 = get_global_id(0);\n    local_tid_20058 = get_local_id(0);\n    group_sizze_20061 = get_local_size(0);\n    wave_sizze_20060 = LOCKSTEP_WIDTH;\n    group_tid_20059 = get_group_id(0);\n    \n    int32_t phys_tid_18829 = global_tid_20057;\n    int64_t global_tid_20062 = sext_i32_i",
            "64(group_tid_20059) *\n            segmap_group_sizze_18823 + sext_i32_i64(local_tid_20058);\n    int64_t slice_20063 = g_16539;\n    int64_t slice_20064 = b_16538 * slice_20063;\n    int64_t gtid_18827 = squot64(global_tid_20062, slice_20063);\n    int64_t remnant_20065 = global_tid_20062 - gtid_18827 * slice_20063;\n    int64_t gtid_18828 = remnant_20065;\n    int64_t remnant_20066 = remnant_20065 - gtid_18828;\n    \n    if (slt64(gtid_18827, b_16538) && slt64(gtid_18828, g_16539)) {\n        int32_t x_18833;\n        \n        x_18833 = ((__global int32_t *) mem_19410)[gtid_18827 * g_16539 +\n                                                   gtid_18828];\n        \n        float write_value_18838;\n        \n        write_value_18838 = ((__global float *) mem_param_19337)[gtid_18827 *\n                                                                 g_16539 +\n                                                                 gtid_18828];\n        \n        int64_t write_value_18839;\n        \n        write_value_18839 = ((__global int64_t *) mem_param_19345)[gtid_18827 *\n                                                                   g_16539 +\n                                                                   gtid_18828];\n        \n        bool match_lit_18840 = 0 == x_18833;\n        int64_t defunc_1_f_res_18841;\n        \n        if (match_lit_18840) {\n            int64_t x_18834;\n            \n            x_18834 = ((__global int64_t *) mem_19394)[gtid_18827 * g_16539 +\n                                                       gtid_18828];\n            \n            int64_t case_res_18842 = sub64(x_18834, (int64_t) 1);\n            \n            defunc_1_f_res_18841 = case_res_18842;\n        } else {\n            int64_t last_res_18830;\n            \n            last_res_18830 = ((__global int64_t *) mem_19394)[gtid_18827 *\n                                                              g_16539 +\n                                                              i_16546];\n            \n            ",
            "bool match_lit_18843 = 1 == x_18833;\n            int64_t x_18844;\n            \n            if (match_lit_18843) {\n                int64_t x_18835;\n                \n                x_18835 = ((__global int64_t *) mem_19398)[gtid_18827 *\n                                                           g_16539 +\n                                                           gtid_18828];\n                \n                int64_t x_18845 = add64(last_res_18830, x_18835);\n                int64_t case_res_18846 = sub64(x_18845, (int64_t) 1);\n                \n                x_18844 = case_res_18846;\n            } else {\n                int64_t last_res_18831;\n                \n                last_res_18831 = ((__global int64_t *) mem_19398)[gtid_18827 *\n                                                                  g_16539 +\n                                                                  i_16546];\n                \n                bool match_lit_18847 = 2 == x_18833;\n                int64_t x_18848;\n                \n                if (match_lit_18847) {\n                    int64_t x_18836;\n                    \n                    x_18836 = ((__global int64_t *) mem_19402)[gtid_18827 *\n                                                               g_16539 +\n                                                               gtid_18828];\n                    \n                    int64_t x_18849 = add64(last_res_18830, last_res_18831);\n                    int64_t x_18850 = add64(x_18836, x_18849);\n                    int64_t case_res_18851 = sub64(x_18850, (int64_t) 1);\n                    \n                    x_18848 = case_res_18851;\n                } else {\n                    int64_t last_res_18832;\n                    \n                    last_res_18832 = ((__global\n                                       int64_t *) mem_19402)[gtid_18827 *\n                                                             g_16539 + i_16546];\n                    \n                    int64_t x_18837;\n       ",
            "             \n                    x_18837 = ((__global int64_t *) mem_19406)[gtid_18827 *\n                                                               g_16539 +\n                                                               gtid_18828];\n                    \n                    int64_t x_18852 = add64(last_res_18830, last_res_18831);\n                    int64_t x_18853 = add64(last_res_18832, x_18852);\n                    int64_t x_18854 = add64(x_18837, x_18853);\n                    int64_t defunc_1_f_res_res_18855 = sub64(x_18854,\n                                                             (int64_t) 1);\n                    \n                    x_18848 = defunc_1_f_res_res_18855;\n                }\n                x_18844 = x_18848;\n            }\n            defunc_1_f_res_18841 = x_18844;\n        }\n        if ((sle64((int64_t) 0, gtid_18827) && slt64(gtid_18827, b_16538)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_18841) &&\n             slt64(defunc_1_f_res_18841, g_16539))) {\n            ((__global float *) mem_19353)[gtid_18827 * g_16539 +\n                                           defunc_1_f_res_18841] =\n                write_value_18838;\n        }\n        if ((sle64((int64_t) 0, gtid_18827) && slt64(gtid_18827, b_16538)) &&\n            (sle64((int64_t) 0, defunc_1_f_res_18841) &&\n             slt64(defunc_1_f_res_18841, g_16539))) {\n            ((__global int64_t *) mem_19357)[gtid_18827 * g_16539 +\n                                             defunc_1_f_res_18841] =\n                write_value_18839;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18823\n}\n__kernel void sortBagAndDoStuffzisegmap_18887(__global int *global_failure,\n                                              int64_t b_16538,\n                                              float i64_res_16553, __global\n                                              unsigned char *mem_19437, __global\n                                              unsigned char *mem_19449)\n{\n    #de",
            "fine segmap_group_sizze_18883 (sortBagAndDoStuffzisegmap_group_sizze_18203)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20139;\n    int32_t local_tid_20140;\n    int64_t group_sizze_20143;\n    int32_t wave_sizze_20142;\n    int32_t group_tid_20141;\n    \n    global_tid_20139 = get_global_id(0);\n    local_tid_20140 = get_local_id(0);\n    group_sizze_20143 = get_local_size(0);\n    wave_sizze_20142 = LOCKSTEP_WIDTH;\n    group_tid_20141 = get_group_id(0);\n    \n    int32_t phys_tid_18887 = global_tid_20139;\n    int64_t global_tid_20144 = sext_i32_i64(group_tid_20141) *\n            segmap_group_sizze_18883 + sext_i32_i64(local_tid_20140);\n    int64_t slice_20145 = b_16538;\n    int64_t gtid_18886 = global_tid_20144;\n    int64_t remnant_20146 = global_tid_20144 - gtid_18886;\n    \n    if (slt64(gtid_18886, b_16538)) {\n        float defunc_2_reduce_res_18888;\n        \n        defunc_2_reduce_res_18888 = ((__global float *) mem_19437)[gtid_18886];\n        \n        float defunc_0_g_res_18889 = defunc_2_reduce_res_18888 / i64_res_16553;\n        \n        ((__global float *) mem_19449)[gtid_18886] = defunc_0_g_res_18889;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18883\n}\n__kernel void sortBagAndDoStuffzisegmap_18918(__global int *global_failure,\n                                              int64_t b_16538, int64_t g_16539,\n                                              float i64_res_16692, __global\n                                              unsigned char *ext_mem_19464,\n                                              __global unsigned char *mem_19469)\n{\n    #define segmap_group_sizze_18914 (sortBagAndDoStuffzisegmap_group_sizze_18901)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20151;\n    int32_t local_tid_2",
            "0152;\n    int64_t group_sizze_20155;\n    int32_t wave_sizze_20154;\n    int32_t group_tid_20153;\n    \n    global_tid_20151 = get_global_id(0);\n    local_tid_20152 = get_local_id(0);\n    group_sizze_20155 = get_local_size(0);\n    wave_sizze_20154 = LOCKSTEP_WIDTH;\n    group_tid_20153 = get_group_id(0);\n    \n    int32_t phys_tid_18918 = global_tid_20151;\n    int64_t global_tid_20156 = sext_i32_i64(group_tid_20153) *\n            segmap_group_sizze_18914 + sext_i32_i64(local_tid_20152);\n    int64_t slice_20157 = g_16539;\n    int64_t gtid_18917 = global_tid_20156;\n    int64_t remnant_20158 = global_tid_20156 - gtid_18917;\n    \n    if (slt64(gtid_18917, g_16539)) {\n        float defunc_2_reduce_res_18920;\n        float redout_19040 = 0.0F;\n        \n        for (int64_t i_19041 = 0; i_19041 < b_16538; i_19041++) {\n            float x_18924;\n            \n            x_18924 = ((__global float *) ext_mem_19464)[i_19041 * g_16539 +\n                                                         gtid_18917];\n            \n            float defunc_1_op_res_18923 = x_18924 + redout_19040;\n            float redout_tmp_20159 = defunc_1_op_res_18923;\n            \n            redout_19040 = redout_tmp_20159;\n        }\n        defunc_2_reduce_res_18920 = redout_19040;\n        \n        float defunc_0_g_res_18925 = defunc_2_reduce_res_18920 / i64_res_16692;\n        \n        ((__global float *) mem_19469)[gtid_18917] = defunc_0_g_res_18925;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18914\n}\n__kernel void sortBagAndDoStuffzisegmap_18974(__global int *global_failure,\n                                              int64_t g_16539,\n                                              float i64_res_16692, __global\n                                              unsigned char *mem_19476, __global\n                                              unsigned char *mem_19480)\n{\n    #define segmap_group_sizze_18970 (sortBagAndDoStuffzisegmap_group_sizze_18930)\n    \n    const int block_dim0 = 0;\n    c",
            "onst int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20231;\n    int32_t local_tid_20232;\n    int64_t group_sizze_20235;\n    int32_t wave_sizze_20234;\n    int32_t group_tid_20233;\n    \n    global_tid_20231 = get_global_id(0);\n    local_tid_20232 = get_local_id(0);\n    group_sizze_20235 = get_local_size(0);\n    wave_sizze_20234 = LOCKSTEP_WIDTH;\n    group_tid_20233 = get_group_id(0);\n    \n    int32_t phys_tid_18974 = global_tid_20231;\n    int64_t global_tid_20236 = sext_i32_i64(group_tid_20233) *\n            segmap_group_sizze_18970 + sext_i32_i64(local_tid_20232);\n    int64_t slice_20237 = g_16539;\n    int64_t gtid_18973 = global_tid_20236;\n    int64_t remnant_20238 = global_tid_20236 - gtid_18973;\n    \n    if (slt64(gtid_18973, g_16539)) {\n        float defunc_2_reduce_res_18975;\n        \n        defunc_2_reduce_res_18975 = ((__global float *) mem_19476)[gtid_18973];\n        \n        float defunc_0_g_res_18976 = defunc_2_reduce_res_18975 / i64_res_16692;\n        \n        ((__global float *) mem_19480)[gtid_18973] = defunc_0_g_res_18976;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_18970\n}\n__kernel void sortBagAndDoStuffzisegmap_intragroup_18080(__global\n                                                         int *global_failure,\n                                                         int failure_is_an_option,\n                                                         __global\n                                                         int64_t *global_failure_args,\n                                                         uint red_arr_mem_19710_backing_offset_0,\n                                                         uint color_19537_backing_offset_1,\n                                                         uint color_19536_backing_offset_2,\n                                                         uint color_19535_backing_offset_3,\n                                        ",
            "                 uint color_19534_backing_offset_4,\n                                                         uint color_19533_backing_offset_5,\n                                                         uint color_19532_backing_offset_6,\n                                                         uint color_19530_backing_offset_7,\n                                                         uint color_19529_backing_offset_8,\n                                                         uint color_19528_backing_offset_9,\n                                                         int64_t b_16538,\n                                                         int64_t g_16539,\n                                                         int32_t iters_16543,\n                                                         int64_t i_16546,\n                                                         float i64_res_16553,\n                                                         __global\n                                                         unsigned char *keys_mem_19046,\n                                                         __global\n                                                         unsigned char *values_mem_19047,\n                                                         __global\n                                                         unsigned char *mem_19308,\n                                                         __global\n                                                         unsigned char *mem_19312,\n                                                         __global\n                                                         unsigned char *mem_19316,\n                                                         __global\n                                                         unsigned char *color_19527,\n                                                         __global\n                                                         unsigned char *color_19531)\n{\n    const int block_dim0 = 0;\n    const int block",
            "_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *red_arr_mem_19710_backing_9 =\n                           &shared_mem[red_arr_mem_19710_backing_offset_0];\n    volatile unsigned char *color_19537_backing_8 =\n                           &shared_mem[color_19537_backing_offset_1];\n    volatile unsigned char *color_19536_backing_7 =\n                           &shared_mem[color_19536_backing_offset_2];\n    volatile unsigned char *color_19535_backing_6 =\n                           &shared_mem[color_19535_backing_offset_3];\n    volatile unsigned char *color_19534_backing_5 =\n                           &shared_mem[color_19534_backing_offset_4];\n    volatile unsigned char *color_19533_backing_4 =\n                           &shared_mem[color_19533_backing_offset_5];\n    volatile unsigned char *color_19532_backing_3 =\n                           &shared_mem[color_19532_backing_offset_6];\n    volatile unsigned char *color_19530_backing_2 =\n                           &shared_mem[color_19530_backing_offset_7];\n    volatile unsigned char *color_19529_backing_1 =\n                           &shared_mem[color_19529_backing_offset_8];\n    volatile unsigned char *color_19528_backing_0 =\n                           &shared_mem[color_19528_backing_offset_9];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_19663;\n    int32_t local_tid_19664;\n    int64_t group_sizze_19667;\n    int32_t wave_sizze_19666;\n    int32_t group_tid_19665;\n    \n    global_tid_19663 = get_global_id(0);\n    local_tid_19664 = get_local_id(0);\n    group_sizze_19667 = get_local_size(0);\n    wave_sizze_19666 = LOCKSTEP_WIDTH;\n    group_tid_19665 = get_group_id(0);\n    \n    int32_t phys_tid_18080 = group_tid_19665;\n    int64_t slice_19669 = g_16539;\n    int64_t ltid_pre_19668 = sext_i32_i64(lo",
            "cal_tid_19664);\n    int64_t remnant_19670 = sext_i32_i64(local_tid_19664) - ltid_pre_19668;\n    int64_t slice_19671 = b_16538;\n    int64_t gtid_18079 = sext_i32_i64(group_tid_19665);\n    int64_t remnant_19672 = sext_i32_i64(group_tid_19665) - gtid_18079;\n    __local unsigned char *color_19528;\n    \n    color_19528 = (__local unsigned char *) color_19528_backing_0;\n    \n    __local unsigned char *color_19529;\n    \n    color_19529 = (__local unsigned char *) color_19529_backing_1;\n    \n    __local unsigned char *color_19530;\n    \n    color_19530 = (__local unsigned char *) color_19530_backing_2;\n    \n    __local unsigned char *color_19532;\n    \n    color_19532 = (__local unsigned char *) color_19532_backing_3;\n    \n    __local unsigned char *color_19533;\n    \n    color_19533 = (__local unsigned char *) color_19533_backing_4;\n    \n    __local unsigned char *color_19534;\n    \n    color_19534 = (__local unsigned char *) color_19534_backing_5;\n    \n    __local unsigned char *color_19535;\n    \n    color_19535 = (__local unsigned char *) color_19535_backing_6;\n    \n    __local unsigned char *color_19536;\n    \n    color_19536 = (__local unsigned char *) color_19536_backing_7;\n    \n    __local unsigned char *color_19537;\n    \n    color_19537 = (__local unsigned char *) color_19537_backing_8;\n    \n    int32_t phys_tid_18087 = local_tid_19664;\n    int64_t gtid_18086 = sext_i32_i64(sext_i64_i32(ltid_pre_19668));\n    float x_18088;\n    \n    x_18088 = ((__global float *) keys_mem_19046)[gtid_18079 * g_16539 +\n                                                  gtid_18086];\n    \n    float defunc_0_f_res_18089 = fmax32(0.0F, x_18088);\n    \n    ((__local float *) color_19537)[gtid_18086] = defunc_0_f_res_18089;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19673;\n    \n    tmp_19673 = ((__local float *) color_19537)[sext_i32_i64(local_tid_19664)];\n    ((__local float *) color_19528)[sext_i32_i64(local_tid_19664)] = tmp_19673;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t x_1",
            "9674 = (int64_t) 0 + sext_i32_i64(local_tid_19664) * (int64_t) 1;\n    \n    ((__global int64_t *) color_19527)[phys_tid_18080 * g_16539 +\n                                       sext_i32_i64(local_tid_19664)] = x_19674;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    __local unsigned char *ext_mem_19290;\n    __local unsigned char *ext_mem_unused_19507;\n    __global unsigned char *ext_mem_19289;\n    __global unsigned char *ext_mem_unused_19511;\n    __local unsigned char *mem_param_19248;\n    __global unsigned char *mem_param_19253;\n    __local unsigned char *mem_param_out_19508;\n    __global unsigned char *mem_param_out_19512;\n    \n    mem_param_19248 = color_19528;\n    mem_param_out_19508 = color_19530;\n    mem_param_19253 = color_19527;\n    mem_param_out_19512 = color_19531;\n    for (int32_t i_18092 = 0; i_18092 < iters_16543; i_18092++) {\n        int32_t defunc_2_radix_sort_step_arg_18095 = mul32(2, i_18092);\n        int32_t defunc_0_get_bit_arg_18096 = add32(1,\n                                                   defunc_2_radix_sort_step_arg_18095);\n        bool cond_f_res_18097 = defunc_0_get_bit_arg_18096 == 31;\n        bool cond_f_res_18098 = defunc_2_radix_sort_step_arg_18095 == 31;\n        int32_t phys_tid_18105 = local_tid_19664;\n        int64_t gtid_18104 = sext_i32_i64(sext_i64_i32(ltid_pre_19668));\n        float x_18118;\n        \n        x_18118 = ((__local float *) mem_param_19248)[gtid_18104];\n        \n        int32_t i32_arg_18119;\n        \n        i32_arg_18119 = futrts_to_bits32(x_18118);\n        \n        int32_t unsign_arg_18120 = ashr32(i32_arg_18119,\n                                          defunc_0_get_bit_arg_18096);\n        int32_t unsign_arg_18121 = 1 & unsign_arg_18120;\n        int32_t unsign_arg_18122 = ashr32(i32_arg_18119, 31);\n        int32_t unsign_arg_18123 = 1 & unsign_arg_18122;\n        bool cond_18124 = unsign_arg_18123 == 1;\n        bool x_18125 = !cond_18124;\n        bool y_18126 = cond_f_res_18097 && x_18125;\n        bool cond_18127 = co",
            "nd_18124 || y_18126;\n        int32_t defunc_1_get_bit_res_18128;\n        \n        if (cond_18127) {\n            int32_t defunc_1_get_bit_res_t_res_18129 = 1 ^ unsign_arg_18121;\n            \n            defunc_1_get_bit_res_18128 = defunc_1_get_bit_res_t_res_18129;\n        } else {\n            defunc_1_get_bit_res_18128 = unsign_arg_18121;\n        }\n        \n        int32_t x_18130 = mul32(2, defunc_1_get_bit_res_18128);\n        int32_t unsign_arg_18131 = ashr32(i32_arg_18119,\n                                          defunc_2_radix_sort_step_arg_18095);\n        int32_t unsign_arg_18132 = 1 & unsign_arg_18131;\n        bool y_18133 = cond_f_res_18098 && x_18125;\n        bool cond_18134 = cond_18124 || y_18133;\n        int32_t defunc_1_get_bit_res_18135;\n        \n        if (cond_18134) {\n            int32_t defunc_1_get_bit_res_t_res_18136 = 1 ^ unsign_arg_18132;\n            \n            defunc_1_get_bit_res_18135 = defunc_1_get_bit_res_t_res_18136;\n        } else {\n            defunc_1_get_bit_res_18135 = unsign_arg_18132;\n        }\n        \n        int32_t defunc_0_f_res_18137 = add32(x_18130,\n                                             defunc_1_get_bit_res_18135);\n        bool cond_18138 = defunc_0_f_res_18137 == 0;\n        int64_t defunc_0_f_res_18139 = btoi_bool_i64(cond_18138);\n        int64_t defunc_0_f_res_18140;\n        int64_t defunc_0_f_res_18141;\n        int64_t defunc_0_f_res_18142;\n        \n        if (cond_18138) {\n            defunc_0_f_res_18140 = (int64_t) 0;\n            defunc_0_f_res_18141 = (int64_t) 0;\n            defunc_0_f_res_18142 = (int64_t) 0;\n        } else {\n            bool cond_18143 = defunc_0_f_res_18137 == 1;\n            int64_t defunc_0_f_res_f_res_18144 = btoi_bool_i64(cond_18143);\n            int64_t defunc_0_f_res_f_res_18145;\n            int64_t defunc_0_f_res_f_res_18146;\n            \n            if (cond_18143) {\n                defunc_0_f_res_f_res_18145 = (int64_t) 0;\n                defunc_0_f_res_f_res_18146 = (int64_t) 0",
            ";\n            } else {\n                bool cond_18147 = defunc_0_f_res_18137 == 2;\n                int64_t defunc_0_f_res_f_res_f_res_18148 =\n                        btoi_bool_i64(cond_18147);\n                bool cond_neg_18149 = !cond_18147;\n                int64_t defunc_0_f_res_f_res_f_res_18150 =\n                        btoi_bool_i64(cond_neg_18149);\n                \n                defunc_0_f_res_f_res_18145 = defunc_0_f_res_f_res_f_res_18148;\n                defunc_0_f_res_f_res_18146 = defunc_0_f_res_f_res_f_res_18150;\n            }\n            defunc_0_f_res_18140 = defunc_0_f_res_f_res_18144;\n            defunc_0_f_res_18141 = defunc_0_f_res_f_res_18145;\n            defunc_0_f_res_18142 = defunc_0_f_res_f_res_18146;\n        }\n        ((__local int64_t *) color_19536)[gtid_18104] = defunc_0_f_res_18139;\n        ((__local int64_t *) color_19535)[gtid_18104] = defunc_0_f_res_18140;\n        ((__local int64_t *) color_19534)[gtid_18104] = defunc_0_f_res_18141;\n        ((__local int64_t *) color_19533)[gtid_18104] = defunc_0_f_res_18142;\n        ((__local int32_t *) color_19532)[gtid_18104] = defunc_0_f_res_18137;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t dims_flat_19681 = g_16539;\n        int64_t x_18106;\n        int64_t x_18107;\n        int64_t x_18108;\n        int64_t x_18109;\n        int64_t x_18110;\n        int64_t x_18111;\n        int64_t x_18112;\n        int64_t x_18113;\n        int64_t x_19686;\n        int64_t x_19687;\n        int64_t x_19688;\n        int64_t x_19689;\n        int64_t x_19690;\n        int64_t x_19691;\n        int64_t x_19692;\n        int64_t x_19693;\n        bool ltid_in_bounds_19698 = slt64(sext_i32_i64(local_tid_19664),\n                                          g_16539);\n        int32_t skip_threads_19699;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19698) {\n                x_18110 = ((volatile __local\n                            int64_t *) color_19536)[sext_i32_i64(loc",
            "al_tid_19664)];\n                x_18111 = ((volatile __local\n                            int64_t *) color_19535)[sext_i32_i64(local_tid_19664)];\n                x_18112 = ((volatile __local\n                            int64_t *) color_19534)[sext_i32_i64(local_tid_19664)];\n                x_18113 = ((volatile __local\n                            int64_t *) color_19533)[sext_i32_i64(local_tid_19664)];\n                if ((local_tid_19664 - squot32(local_tid_19664, 32) * 32) ==\n                    0) {\n                    x_18106 = x_18110;\n                    x_18107 = x_18111;\n                    x_18108 = x_18112;\n                    x_18109 = x_18113;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19699 = 1;\n            while (slt32(skip_threads_19699, 32)) {\n                bool thread_active_19700 = sle32(skip_threads_19699,\n                                                 local_tid_19664 -\n                                                 squot32(local_tid_19664, 32) *\n                                                 32) && ltid_in_bounds_19698;\n                \n                if (thread_active_19700) {\n                    // read operands\n                    {\n                        x_18106 = ((volatile __local\n                                    int64_t *) color_19536)[sext_i32_i64(local_tid_19664) -\n                                                            sext_i32_i64(skip_threads_19699)];\n                        x_18107 = ((volatile __local\n                                    int64_t *) color_19535)[sext_i32_i64(local_tid_19664) -\n                                                            sext_i32_i64(skip_threads_19699)];\n                        x_18108 = ((volatile __local\n                                    int64_t *) color_19534)[sext_i32_i64(local_tid_19664) -\n                                                            sext_i32_i64(skip_threads_19699)];\n          ",
            "              x_18109 = ((volatile __local\n                                    int64_t *) color_19533)[sext_i32_i64(local_tid_19664) -\n                                                            sext_i32_i64(skip_threads_19699)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19701 =\n                         slt64(srem64(sext_i32_i64(local_tid_19664), g_16539),\n                               sext_i32_i64(local_tid_19664) -\n                               sext_i32_i64(local_tid_19664 -\n                               skip_threads_19699));\n                    \n                    if (thread_active_19700 && inactive_19701) {\n                        x_18106 = x_18110;\n                        x_18107 = x_18111;\n                        x_18108 = x_18112;\n                        x_18109 = x_18113;\n                    }\n                    if (thread_active_19700) {\n                        if (!inactive_19701) {\n                            int64_t defunc_1_op_res_18114 = add64(x_18106,\n                                                                  x_18110);\n                            int64_t defunc_1_op_res_18115 = add64(x_18107,\n                                                                  x_18111);\n                            int64_t defunc_1_op_res_18116 = add64(x_18108,\n                                                                  x_18112);\n                            int64_t defunc_1_op_res_18117 = add64(x_18109,\n                                                                  x_18113);\n                            \n                            x_18106 = defunc_1_op_res_18114;\n                            x_18107 = defunc_1_op_res_18115;\n                            x_18108 = defunc_1_op_res_18116;\n                            x_18109 = defunc_1_op_res_18117;\n                        }\n                    }\n                }\n                if (sle32(wave_sizze_19666, skip_threads_19",
            "699)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19700) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19536)[sext_i32_i64(local_tid_19664)] =\n                            x_18106;\n                        x_18110 = x_18106;\n                        ((volatile __local\n                          int64_t *) color_19535)[sext_i32_i64(local_tid_19664)] =\n                            x_18107;\n                        x_18111 = x_18107;\n                        ((volatile __local\n                          int64_t *) color_19534)[sext_i32_i64(local_tid_19664)] =\n                            x_18108;\n                        x_18112 = x_18108;\n                        ((volatile __local\n                          int64_t *) color_19533)[sext_i32_i64(local_tid_19664)] =\n                            x_18109;\n                        x_18113 = x_18109;\n                    }\n                }\n                if (sle32(wave_sizze_19666, skip_threads_19699)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19699 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19664 - squot32(local_tid_19664, 32) * 32) == 31 &&\n                ltid_in_bounds_19698) {\n                ((volatile __local\n                  int64_t *) color_19536)[sext_i32_i64(squot32(local_tid_19664,\n                                                               32))] = x_18106;\n                ((volatile __local\n                  int64_t *) color_19535)[sext_i32_i64(squot32(local_tid_19664,\n                                                               32))] = x_18107;\n                ((volatile __local\n                  int64_t *) color_19534)[sext_i32_i64(squot32(local_tid_19664,\n                   ",
            "                                            32))] = x_18108;\n                ((volatile __local\n                  int64_t *) color_19533)[sext_i32_i64(squot32(local_tid_19664,\n                                                               32))] = x_18109;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19702;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19664, 32) == 0 && ltid_in_bounds_19698) {\n                    x_19690 = ((volatile __local\n                                int64_t *) color_19536)[sext_i32_i64(local_tid_19664)];\n                    x_19691 = ((volatile __local\n                                int64_t *) color_19535)[sext_i32_i64(local_tid_19664)];\n                    x_19692 = ((volatile __local\n                                int64_t *) color_19534)[sext_i32_i64(local_tid_19664)];\n                    x_19693 = ((volatile __local\n                                int64_t *) color_19533)[sext_i32_i64(local_tid_19664)];\n                    if ((local_tid_19664 - squot32(local_tid_19664, 32) * 32) ==\n                        0) {\n                        x_19686 = x_19690;\n                        x_19687 = x_19691;\n                        x_19688 = x_19692;\n                        x_19689 = x_19693;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19702 = 1;\n                while (slt32(skip_threads_19702, 32)) {\n                    bool thread_active_19703 = sle32(skip_threads_19702,\n                                                     local_tid_19664 -\n                                                     squot32(local_tid_19664,\n                                                             32) * 32) &&\n                         (squot32(local_",
            "tid_19664, 32) == 0 &&\n                          ltid_in_bounds_19698);\n                    \n                    if (thread_active_19703) {\n                        // read operands\n                        {\n                            x_19686 = ((volatile __local\n                                        int64_t *) color_19536)[sext_i32_i64(local_tid_19664) -\n                                                                sext_i32_i64(skip_threads_19702)];\n                            x_19687 = ((volatile __local\n                                        int64_t *) color_19535)[sext_i32_i64(local_tid_19664) -\n                                                                sext_i32_i64(skip_threads_19702)];\n                            x_19688 = ((volatile __local\n                                        int64_t *) color_19534)[sext_i32_i64(local_tid_19664) -\n                                                                sext_i32_i64(skip_threads_19702)];\n                            x_19689 = ((volatile __local\n                                        int64_t *) color_19533)[sext_i32_i64(local_tid_19664) -\n                                                                sext_i32_i64(skip_threads_19702)];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19704 =\n                             slt64(srem64(sext_i32_i64(local_tid_19664 * 32 +\n                                          32 - 1), g_16539),\n                                   sext_i32_i64(local_tid_19664 * 32 + 32 - 1) -\n                                   sext_i32_i64((local_tid_19664 -\n                                                 skip_threads_19702) * 32 + 32 -\n                                   1));\n                        \n                        if (thread_active_19703 && inactive_19704) {\n                            x_19686 = x_19690;\n                            x_19687 = x_19691;\n                            x_19",
            "688 = x_19692;\n                            x_19689 = x_19693;\n                        }\n                        if (thread_active_19703) {\n                            if (!inactive_19704) {\n                                int64_t defunc_1_op_res_19694 = add64(x_19686,\n                                                                      x_19690);\n                                int64_t defunc_1_op_res_19695 = add64(x_19687,\n                                                                      x_19691);\n                                int64_t defunc_1_op_res_19696 = add64(x_19688,\n                                                                      x_19692);\n                                int64_t defunc_1_op_res_19697 = add64(x_19689,\n                                                                      x_19693);\n                                \n                                x_19686 = defunc_1_op_res_19694;\n                                x_19687 = defunc_1_op_res_19695;\n                                x_19688 = defunc_1_op_res_19696;\n                                x_19689 = defunc_1_op_res_19697;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19666, skip_threads_19702)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19703) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) color_19536)[sext_i32_i64(local_tid_19664)] =\n                                x_19686;\n                            x_19690 = x_19686;\n                            ((volatile __local\n                              int64_t *) color_19535)[sext_i32_i64(local_tid_19664)] =\n                                x_19687;\n                            x_19691 = x_19687;\n                            ((volatile __local\n                              int64_t *) color_19534",
            ")[sext_i32_i64(local_tid_19664)] =\n                                x_19688;\n                            x_19692 = x_19688;\n                            ((volatile __local\n                              int64_t *) color_19533)[sext_i32_i64(local_tid_19664)] =\n                                x_19689;\n                            x_19693 = x_19689;\n                        }\n                    }\n                    if (sle32(wave_sizze_19666, skip_threads_19702)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19702 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19705 = squot32(local_tid_19664, 32) == 0 ||\n             !ltid_in_bounds_19698;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19705) {\n                    x_18110 = x_18106;\n                    x_18111 = x_18107;\n                    x_18112 = x_18108;\n                    x_18113 = x_18109;\n                    x_18106 = ((__local\n                                int64_t *) color_19536)[sext_i32_i64(squot32(local_tid_19664,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18107 = ((__local\n                                int64_t *) color_19535)[sext_i32_i64(squot32(local_tid_19664,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18108 = ((__local\n                                int64_t *) color_19534)[sext_i32_i64(squot32(local_tid_19664,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                    x_18109 = ((__local\n   ",
            "                             int64_t *) color_19533)[sext_i32_i64(squot32(local_tid_19664,\n                                                                             32)) -\n                                                        (int64_t) 1];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19706 =\n                     slt64(srem64(sext_i32_i64(local_tid_19664), g_16539),\n                           sext_i32_i64(local_tid_19664) -\n                           sext_i32_i64(squot32(local_tid_19664, 32) * 32 - 1));\n                \n                if (!no_carry_in_19705) {\n                    if (inactive_19706) {\n                        x_18106 = x_18110;\n                        x_18107 = x_18111;\n                        x_18108 = x_18112;\n                        x_18109 = x_18113;\n                    }\n                }\n                if (!no_carry_in_19705) {\n                    if (!inactive_19706) {\n                        int64_t defunc_1_op_res_18114 = add64(x_18106, x_18110);\n                        int64_t defunc_1_op_res_18115 = add64(x_18107, x_18111);\n                        int64_t defunc_1_op_res_18116 = add64(x_18108, x_18112);\n                        int64_t defunc_1_op_res_18117 = add64(x_18109, x_18113);\n                        \n                        x_18106 = defunc_1_op_res_18114;\n                        x_18107 = defunc_1_op_res_18115;\n                        x_18108 = defunc_1_op_res_18116;\n                        x_18109 = defunc_1_op_res_18117;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19705) {\n                    ((__local\n                      int64_t *) color_19536)[sext_i32_i64(local_tid_19664)] =\n                        x_18106;\n                    ((__local\n                      int64_t *) color_19535)[sext_i32_i64(local_tid_19664)] =\n                        x_18107;\n                    ",
            "((__local\n                      int64_t *) color_19534)[sext_i32_i64(local_tid_19664)] =\n                        x_18108;\n                    ((__local\n                      int64_t *) color_19533)[sext_i32_i64(local_tid_19664)] =\n                        x_18109;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19664, 32) == 0 && ltid_in_bounds_19698) {\n                ((__local\n                  int64_t *) color_19536)[sext_i32_i64(local_tid_19664)] =\n                    x_18110;\n                ((__local\n                  int64_t *) color_19535)[sext_i32_i64(local_tid_19664)] =\n                    x_18111;\n                ((__local\n                  int64_t *) color_19534)[sext_i32_i64(local_tid_19664)] =\n                    x_18112;\n                ((__local\n                  int64_t *) color_19533)[sext_i32_i64(local_tid_19664)] =\n                    x_18113;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t last_res_18151;\n        \n        last_res_18151 = ((__local int64_t *) color_19536)[i_16546];\n        \n        int64_t last_res_18152;\n        \n        last_res_18152 = ((__local int64_t *) color_19535)[i_16546];\n        \n        int64_t last_res_18153;\n        \n        last_res_18153 = ((__local int64_t *) color_19534)[i_16546];\n        \n        float tmp_19707;\n        \n        tmp_19707 = ((__local\n                      float *) mem_param_19248)[sext_i32_i64(local_tid_19664)];\n        ((__local float *) mem_param_out_19508)[sext_i32_i64(local_tid_19664)] =\n            tmp_19707;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19708;\n        \n        tmp_19708 = ((__global int64_t *) mem_param_19253)[phys_tid_18080 *\n                                                           g_16539 +\n                                                           sext_i32_i64(local_tid_19664)];\n    ",
            "    ((__local int64_t *) color_19529)[sext_i32_i64(local_tid_19664)] =\n            tmp_19708;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t phys_tid_18159 = local_tid_19664;\n        int64_t write_i_18158 = sext_i32_i64(sext_i64_i32(ltid_pre_19668));\n        int32_t x_18160;\n        \n        x_18160 = ((__local int32_t *) color_19532)[write_i_18158];\n        \n        float write_value_18165;\n        \n        write_value_18165 = ((__local float *) mem_param_19248)[write_i_18158];\n        \n        int64_t write_value_18166;\n        \n        write_value_18166 = ((__global\n                              int64_t *) mem_param_19253)[phys_tid_18080 *\n                                                          g_16539 +\n                                                          write_i_18158];\n        \n        bool match_lit_18167 = 0 == x_18160;\n        int64_t defunc_1_f_res_18168;\n        \n        if (match_lit_18167) {\n            int64_t x_18161;\n            \n            x_18161 = ((__local int64_t *) color_19536)[write_i_18158];\n            \n            int64_t case_res_18169 = sub64(x_18161, (int64_t) 1);\n            \n            defunc_1_f_res_18168 = case_res_18169;\n        } else {\n            bool match_lit_18170 = 1 == x_18160;\n            int64_t x_18171;\n            \n            if (match_lit_18170) {\n                int64_t x_18162;\n                \n                x_18162 = ((__local int64_t *) color_19535)[write_i_18158];\n                \n                int64_t x_18172 = add64(last_res_18151, x_18162);\n                int64_t case_res_18173 = sub64(x_18172, (int64_t) 1);\n                \n                x_18171 = case_res_18173;\n            } else {\n                bool match_lit_18174 = 2 == x_18160;\n                int64_t x_18175;\n                \n                if (match_lit_18174) {\n                    int64_t x_18163;\n                    \n                    x_18163 = ((__local int64_t *) color_19534)[write_i_18158];\n                    ",
            "\n                    int64_t x_18176 = add64(last_res_18151, last_res_18152);\n                    int64_t x_18177 = add64(x_18163, x_18176);\n                    int64_t case_res_18178 = sub64(x_18177, (int64_t) 1);\n                    \n                    x_18175 = case_res_18178;\n                } else {\n                    int64_t x_18164;\n                    \n                    x_18164 = ((__local int64_t *) color_19533)[write_i_18158];\n                    \n                    int64_t x_18179 = add64(last_res_18151, last_res_18152);\n                    int64_t x_18180 = add64(last_res_18153, x_18179);\n                    int64_t x_18181 = add64(x_18164, x_18180);\n                    int64_t defunc_1_f_res_res_18182 = sub64(x_18181,\n                                                             (int64_t) 1);\n                    \n                    x_18175 = defunc_1_f_res_res_18182;\n                }\n                x_18171 = x_18175;\n            }\n            defunc_1_f_res_18168 = x_18171;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_18168) &&\n            slt64(defunc_1_f_res_18168, g_16539)) {\n            ((__local float *) mem_param_out_19508)[defunc_1_f_res_18168] =\n                write_value_18165;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_18168) &&\n            slt64(defunc_1_f_res_18168, g_16539)) {\n            ((__local int64_t *) color_19529)[defunc_1_f_res_18168] =\n                write_value_18166;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int64_t tmp_19709;\n        \n        tmp_19709 = ((__local\n                      int64_t *) color_19529)[sext_i32_i64(local_tid_19664)];\n        ((__global int64_t *) mem_param_out_19512)[phys_tid_18080 * g_16539 +\n                                                   sext_i32_i64(local_tid_19664)] =\n            tmp_19709;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        __local unsigned char *mem_param_tmp_19675;\n        \n        mem_param_tmp_19675 = mem_param_out_1",
            "9508;\n        \n        __local unsigned char *mem_param_out_tmp_19676;\n        \n        mem_param_out_tmp_19676 = mem_param_19248;\n        \n        __global unsigned char *mem_param_tmp_19677;\n        \n        mem_param_tmp_19677 = mem_param_out_19512;\n        \n        __global unsigned char *mem_param_out_tmp_19678;\n        \n        mem_param_out_tmp_19678 = mem_param_19253;\n        mem_param_19248 = mem_param_tmp_19675;\n        mem_param_out_19508 = mem_param_out_tmp_19676;\n        mem_param_19253 = mem_param_tmp_19677;\n        mem_param_out_19512 = mem_param_out_tmp_19678;\n    }\n    ext_mem_19290 = mem_param_19248;\n    ext_mem_unused_19507 = mem_param_out_19508;\n    ext_mem_19289 = mem_param_19253;\n    ext_mem_unused_19511 = mem_param_out_19512;\n    \n    float defunc_2_reduce_res_18183;\n    int32_t phys_tid_18187 = local_tid_19664;\n    __local unsigned char *red_arr_mem_19710;\n    \n    red_arr_mem_19710 = (__local unsigned char *) red_arr_mem_19710_backing_9;\n    \n    int64_t gtid_18186 = sext_i32_i64(sext_i64_i32(ltid_pre_19668));\n    int64_t x_18191;\n    \n    x_18191 = ((__global int64_t *) ext_mem_19289)[phys_tid_18080 * g_16539 +\n                                                   gtid_18186];\n    \n    bool x_18192 = sle64((int64_t) 0, x_18191);\n    bool y_18193 = slt64(x_18191, g_16539);\n    bool bounds_check_18194 = x_18192 && y_18193;\n    bool index_certs_18195;\n    \n    if (!bounds_check_18194) {\n        {\n            if (atomic_cmpxchg_i32_global(global_failure, -1, 4) == -1) {\n                global_failure_args[0] = (int64_t) x_18191;\n                global_failure_args[1] = (int64_t) g_16539;\n                ;\n            }\n            local_failure = true;\n            goto error_3;\n        }\n    }\n    \n    float defunc_0_f_res_18196;\n    \n    defunc_0_f_res_18196 = ((__global float *) values_mem_19047)[gtid_18079 *\n                                                                 g_16539 +\n                                                               ",
            "  x_18191];\n    \n    float defunc_0_f_res_18197;\n    \n    defunc_0_f_res_18197 = ((__local float *) color_19537)[x_18191];\n    ((__local float *) red_arr_mem_19710)[gtid_18186] = defunc_0_f_res_18196;\n    ((__local float *) color_19530)[gtid_18186] = defunc_0_f_res_18196;\n    ((__local float *) color_19529)[gtid_18186] = defunc_0_f_res_18197;\n    \n  error_3:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_19712;\n    int32_t skip_waves_19713 = 1;\n    float x_18188;\n    float x_18189;\n    \n    offset_19712 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_19664, sext_i64_i32(g_16539))) {\n            x_18188 = ((__local\n                        float *) red_arr_mem_19710)[sext_i32_i64(local_tid_19664 +\n                                                    offset_19712)];\n        }\n    }\n    offset_19712 = 1;\n    while (slt32(offset_19712, wave_sizze_19666)) {\n        if (slt32(local_tid_19664 + offset_19712, sext_i64_i32(g_16539)) &&\n            ((local_tid_19664 - squot32(local_tid_19664, wave_sizze_19666) *\n              wave_sizze_19666) & (2 * offset_19712 - 1)) == 0) {\n            // read array element\n            {\n                x_18189 = ((volatile __local\n                            float *) red_arr_mem_19710)[sext_i32_i64(local_tid_19664 +\n                                                        offset_19712)];\n            }\n            // apply reduction operation\n            {\n                float defunc_1_op_res_18190 = x_18188 + x_18189;\n                \n                x_18188 = defunc_1_op_res_18190;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_19710)[sext_i32_i64(local_tid_19664)] =\n                    x_18188;\n            }\n        }\n        offset_19712 *= 2;\n    }\n    while (slt32(skip_waves_19713, squot32(sext_i64_i32(g_16539) +\n ",
            "                                          wave_sizze_19666 - 1,\n                                           wave_sizze_19666))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_19712 = skip_waves_19713 * wave_sizze_19666;\n        if (slt32(local_tid_19664 + offset_19712, sext_i64_i32(g_16539)) &&\n            ((local_tid_19664 - squot32(local_tid_19664, wave_sizze_19666) *\n              wave_sizze_19666) == 0 && (squot32(local_tid_19664,\n                                                 wave_sizze_19666) & (2 *\n                                                                      skip_waves_19713 -\n                                                                      1)) ==\n             0)) {\n            // read array element\n            {\n                x_18189 = ((__local\n                            float *) red_arr_mem_19710)[sext_i32_i64(local_tid_19664 +\n                                                        offset_19712)];\n            }\n            // apply reduction operation\n            {\n                float defunc_1_op_res_18190 = x_18188 + x_18189;\n                \n                x_18188 = defunc_1_op_res_18190;\n            }\n            // write result of operation\n            {\n                ((__local\n                  float *) red_arr_mem_19710)[sext_i32_i64(local_tid_19664)] =\n                    x_18188;\n            }\n        }\n        skip_waves_19713 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    defunc_2_reduce_res_18183 = ((__local\n                                  float *) red_arr_mem_19710)[(int64_t) 0];\n    \n    float defunc_0_g_res_18198 = defunc_2_reduce_res_18183 / i64_res_16553;\n    \n    if (local_tid_19664 == 0) {\n        ((__global float *) mem_19308)[gtid_18079] = defunc_0_g_res_18198;\n    }\n    \n    float tmp_19714;\n    \n    tmp_19714 = ((__local float *) color_19530)[sext_i32_i64(local_tid_19664)];\n    ((__global float *) mem_19312)[gtid_18079 * g_16539 +\n                                   sext_i32_i64(local_tid_19664)] = ",
            "tmp_19714;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19715;\n    \n    tmp_19715 = ((__local float *) color_19529)[sext_i32_i64(local_tid_19664)];\n    ((__global float *) mem_19316)[gtid_18079 * g_16539 +\n                                   sext_i32_i64(local_tid_19664)] = tmp_19715;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_5:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegmap_intragroup_18657(__global\n                                                         int *global_failure,\n                                                         uint color_19544_backing_offset_0,\n                                                         uint color_19543_backing_offset_1,\n                                                         uint color_19542_backing_offset_2,\n                                                         uint color_19541_backing_offset_3,\n                                                         uint color_19540_backing_offset_4,\n                                                         uint color_19539_backing_offset_5,\n                                                         uint color_19538_backing_offset_6,\n                                                         int64_t b_16538,\n                                                         int64_t g_16539,\n                                                         int64_t i_16546,\n                                                         int32_t defunc_2_radix_sort_step_arg_18641,\n                                                         int32_t defunc_0_get_bit_arg_18642,\n                                                         unsigned char cond_f_res_18643_bits,\n                                                         unsigned char cond_f_res_18644_bits,\n                                                         __global\n                                                         unsigned char *mem_param_19337,\n                                                         __global\n                              ",
            "                           unsigned char *mem_param_19345,\n                                                         __global\n                                                         unsigned char *mem_19385,\n                                                         __global\n                                                         unsigned char *mem_19389)\n{\n    bool cond_f_res_18643 = cond_f_res_18643_bits;\n    bool cond_f_res_18644 = cond_f_res_18644_bits;\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *color_19544_backing_6 =\n                           &shared_mem[color_19544_backing_offset_0];\n    volatile unsigned char *color_19543_backing_5 =\n                           &shared_mem[color_19543_backing_offset_1];\n    volatile unsigned char *color_19542_backing_4 =\n                           &shared_mem[color_19542_backing_offset_2];\n    volatile unsigned char *color_19541_backing_3 =\n                           &shared_mem[color_19541_backing_offset_3];\n    volatile unsigned char *color_19540_backing_2 =\n                           &shared_mem[color_19540_backing_offset_4];\n    volatile unsigned char *color_19539_backing_1 =\n                           &shared_mem[color_19539_backing_offset_5];\n    volatile unsigned char *color_19538_backing_0 =\n                           &shared_mem[color_19538_backing_offset_6];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19745;\n    int32_t local_tid_19746;\n    int64_t group_sizze_19749;\n    int32_t wave_sizze_19748;\n    int32_t group_tid_19747;\n    \n    global_tid_19745 = get_global_id(0);\n    local_tid_19746 = get_local_id(0);\n    group_sizze_19749 = get_local_size(0);\n    wave_sizze_19748 = LOCKSTEP_WIDTH;\n    group_tid_19747 = get_group_id(0);\n    \n    int32_t phys_tid_18657 = group_tid_19747;\n    int64_t slice_19751 = g_16539;\n    int64_t ltid_pre_19750 = sext_i32_i64(local_tid_19746);\n    int64_t remnant_19752 = sext_i32_i",
            "64(local_tid_19746) - ltid_pre_19750;\n    int64_t slice_19753 = b_16538;\n    int64_t gtid_18656 = sext_i32_i64(group_tid_19747);\n    int64_t remnant_19754 = sext_i32_i64(group_tid_19747) - gtid_18656;\n    __local unsigned char *color_19538;\n    \n    color_19538 = (__local unsigned char *) color_19538_backing_0;\n    \n    __local unsigned char *color_19539;\n    \n    color_19539 = (__local unsigned char *) color_19539_backing_1;\n    \n    __local unsigned char *color_19540;\n    \n    color_19540 = (__local unsigned char *) color_19540_backing_2;\n    \n    __local unsigned char *color_19541;\n    \n    color_19541 = (__local unsigned char *) color_19541_backing_3;\n    \n    __local unsigned char *color_19542;\n    \n    color_19542 = (__local unsigned char *) color_19542_backing_4;\n    \n    __local unsigned char *color_19543;\n    \n    color_19543 = (__local unsigned char *) color_19543_backing_5;\n    \n    __local unsigned char *color_19544;\n    \n    color_19544 = (__local unsigned char *) color_19544_backing_6;\n    \n    float tmp_19755;\n    \n    tmp_19755 = ((__global float *) mem_param_19337)[gtid_18656 * g_16539 +\n                                                     sext_i32_i64(local_tid_19746)];\n    ((__local float *) color_19544)[sext_i32_i64(local_tid_19746)] = tmp_19755;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19756;\n    \n    tmp_19756 = ((__global int64_t *) mem_param_19345)[gtid_18656 * g_16539 +\n                                                       sext_i32_i64(local_tid_19746)];\n    ((__local int64_t *) color_19543)[sext_i32_i64(local_tid_19746)] =\n        tmp_19756;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t phys_tid_18672 = local_tid_19746;\n    int64_t gtid_18671 = sext_i32_i64(sext_i64_i32(ltid_pre_19750));\n    float x_18685;\n    \n    x_18685 = ((__global float *) mem_param_19337)[gtid_18656 * g_16539 +\n                                                   gtid_18671];\n    \n    int32_t i32_arg_18686;\n    \n    i32_arg_18686 = futrts_to_bits32(x",
            "_18685);\n    \n    int32_t unsign_arg_18687 = ashr32(i32_arg_18686,\n                                      defunc_0_get_bit_arg_18642);\n    int32_t unsign_arg_18688 = 1 & unsign_arg_18687;\n    int32_t unsign_arg_18689 = ashr32(i32_arg_18686, 31);\n    int32_t unsign_arg_18690 = 1 & unsign_arg_18689;\n    bool cond_18691 = unsign_arg_18690 == 1;\n    bool x_18692 = !cond_18691;\n    bool y_18693 = cond_f_res_18643 && x_18692;\n    bool cond_18694 = cond_18691 || y_18693;\n    int32_t defunc_1_get_bit_res_18695;\n    \n    if (cond_18694) {\n        int32_t defunc_1_get_bit_res_t_res_18696 = 1 ^ unsign_arg_18688;\n        \n        defunc_1_get_bit_res_18695 = defunc_1_get_bit_res_t_res_18696;\n    } else {\n        defunc_1_get_bit_res_18695 = unsign_arg_18688;\n    }\n    \n    int32_t x_18697 = mul32(2, defunc_1_get_bit_res_18695);\n    int32_t unsign_arg_18698 = ashr32(i32_arg_18686,\n                                      defunc_2_radix_sort_step_arg_18641);\n    int32_t unsign_arg_18699 = 1 & unsign_arg_18698;\n    bool y_18700 = cond_f_res_18644 && x_18692;\n    bool cond_18701 = cond_18691 || y_18700;\n    int32_t defunc_1_get_bit_res_18702;\n    \n    if (cond_18701) {\n        int32_t defunc_1_get_bit_res_t_res_18703 = 1 ^ unsign_arg_18699;\n        \n        defunc_1_get_bit_res_18702 = defunc_1_get_bit_res_t_res_18703;\n    } else {\n        defunc_1_get_bit_res_18702 = unsign_arg_18699;\n    }\n    \n    int32_t defunc_0_f_res_18704 = add32(x_18697, defunc_1_get_bit_res_18702);\n    bool cond_18705 = defunc_0_f_res_18704 == 0;\n    int64_t defunc_0_f_res_18706 = btoi_bool_i64(cond_18705);\n    int64_t defunc_0_f_res_18707;\n    int64_t defunc_0_f_res_18708;\n    int64_t defunc_0_f_res_18709;\n    \n    if (cond_18705) {\n        defunc_0_f_res_18707 = (int64_t) 0;\n        defunc_0_f_res_18708 = (int64_t) 0;\n        defunc_0_f_res_18709 = (int64_t) 0;\n    } else {\n        bool cond_18710 = defunc_0_f_res_18704 == 1;\n        int64_t defunc_0_f_res_f_res_18711 = btoi_bool_i64(cond_18710);\n        int",
            "64_t defunc_0_f_res_f_res_18712;\n        int64_t defunc_0_f_res_f_res_18713;\n        \n        if (cond_18710) {\n            defunc_0_f_res_f_res_18712 = (int64_t) 0;\n            defunc_0_f_res_f_res_18713 = (int64_t) 0;\n        } else {\n            bool cond_18714 = defunc_0_f_res_18704 == 2;\n            int64_t defunc_0_f_res_f_res_f_res_18715 =\n                    btoi_bool_i64(cond_18714);\n            bool cond_neg_18716 = !cond_18714;\n            int64_t defunc_0_f_res_f_res_f_res_18717 =\n                    btoi_bool_i64(cond_neg_18716);\n            \n            defunc_0_f_res_f_res_18712 = defunc_0_f_res_f_res_f_res_18715;\n            defunc_0_f_res_f_res_18713 = defunc_0_f_res_f_res_f_res_18717;\n        }\n        defunc_0_f_res_18707 = defunc_0_f_res_f_res_18711;\n        defunc_0_f_res_18708 = defunc_0_f_res_f_res_18712;\n        defunc_0_f_res_18709 = defunc_0_f_res_f_res_18713;\n    }\n    ((__local int64_t *) color_19542)[gtid_18671] = defunc_0_f_res_18706;\n    ((__local int64_t *) color_19541)[gtid_18671] = defunc_0_f_res_18707;\n    ((__local int64_t *) color_19540)[gtid_18671] = defunc_0_f_res_18708;\n    ((__local int64_t *) color_19539)[gtid_18671] = defunc_0_f_res_18709;\n    ((__local int32_t *) color_19538)[gtid_18671] = defunc_0_f_res_18704;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t dims_flat_19757 = g_16539;\n    int64_t x_18673;\n    int64_t x_18674;\n    int64_t x_18675;\n    int64_t x_18676;\n    int64_t x_18677;\n    int64_t x_18678;\n    int64_t x_18679;\n    int64_t x_18680;\n    int64_t x_19762;\n    int64_t x_19763;\n    int64_t x_19764;\n    int64_t x_19765;\n    int64_t x_19766;\n    int64_t x_19767;\n    int64_t x_19768;\n    int64_t x_19769;\n    bool ltid_in_bounds_19774 = slt64(sext_i32_i64(local_tid_19746), g_16539);\n    int32_t skip_threads_19775;\n    \n    // read input for in-block scan\n    {\n        if (ltid_in_bounds_19774) {\n            x_18677 = ((volatile __local\n                        int64_t *) color_19542)[sext_i32_i64(local_tid_19746",
            ")];\n            x_18678 = ((volatile __local\n                        int64_t *) color_19541)[sext_i32_i64(local_tid_19746)];\n            x_18679 = ((volatile __local\n                        int64_t *) color_19540)[sext_i32_i64(local_tid_19746)];\n            x_18680 = ((volatile __local\n                        int64_t *) color_19539)[sext_i32_i64(local_tid_19746)];\n            if ((local_tid_19746 - squot32(local_tid_19746, 32) * 32) == 0) {\n                x_18673 = x_18677;\n                x_18674 = x_18678;\n                x_18675 = x_18679;\n                x_18676 = x_18680;\n            }\n        }\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_19775 = 1;\n        while (slt32(skip_threads_19775, 32)) {\n            bool thread_active_19776 = sle32(skip_threads_19775,\n                                             local_tid_19746 -\n                                             squot32(local_tid_19746, 32) *\n                                             32) && ltid_in_bounds_19774;\n            \n            if (thread_active_19776) {\n                // read operands\n                {\n                    x_18673 = ((volatile __local\n                                int64_t *) color_19542)[sext_i32_i64(local_tid_19746) -\n                                                        sext_i32_i64(skip_threads_19775)];\n                    x_18674 = ((volatile __local\n                                int64_t *) color_19541)[sext_i32_i64(local_tid_19746) -\n                                                        sext_i32_i64(skip_threads_19775)];\n                    x_18675 = ((volatile __local\n                                int64_t *) color_19540)[sext_i32_i64(local_tid_19746) -\n                                                        sext_i32_i64(skip_threads_19775)];\n                    x_18676 = ((volatile __local\n                                int64_t *) color_19539)[sext_i32_i64(local_tid_19746) -\n                                             ",
            "           sext_i32_i64(skip_threads_19775)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19777 =\n                     slt64(srem64(sext_i32_i64(local_tid_19746), g_16539),\n                           sext_i32_i64(local_tid_19746) -\n                           sext_i32_i64(local_tid_19746 - skip_threads_19775));\n                \n                if (thread_active_19776 && inactive_19777) {\n                    x_18673 = x_18677;\n                    x_18674 = x_18678;\n                    x_18675 = x_18679;\n                    x_18676 = x_18680;\n                }\n                if (thread_active_19776) {\n                    if (!inactive_19777) {\n                        int64_t defunc_1_op_res_18681 = add64(x_18673, x_18677);\n                        int64_t defunc_1_op_res_18682 = add64(x_18674, x_18678);\n                        int64_t defunc_1_op_res_18683 = add64(x_18675, x_18679);\n                        int64_t defunc_1_op_res_18684 = add64(x_18676, x_18680);\n                        \n                        x_18673 = defunc_1_op_res_18681;\n                        x_18674 = defunc_1_op_res_18682;\n                        x_18675 = defunc_1_op_res_18683;\n                        x_18676 = defunc_1_op_res_18684;\n                    }\n                }\n            }\n            if (sle32(wave_sizze_19748, skip_threads_19775)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (thread_active_19776) {\n                // write result\n                {\n                    ((volatile __local\n                      int64_t *) color_19542)[sext_i32_i64(local_tid_19746)] =\n                        x_18673;\n                    x_18677 = x_18673;\n                    ((volatile __local\n                      int64_t *) color_19541)[sext_i32_i64(local_tid_19746)] =\n                        x_18674;\n                    x_18678 = x_18674;\n                    ((volatile __local\n                      i",
            "nt64_t *) color_19540)[sext_i32_i64(local_tid_19746)] =\n                        x_18675;\n                    x_18679 = x_18675;\n                    ((volatile __local\n                      int64_t *) color_19539)[sext_i32_i64(local_tid_19746)] =\n                        x_18676;\n                    x_18680 = x_18676;\n                }\n            }\n            if (sle32(wave_sizze_19748, skip_threads_19775)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_19775 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if ((local_tid_19746 - squot32(local_tid_19746, 32) * 32) == 31 &&\n            ltid_in_bounds_19774) {\n            ((volatile __local\n              int64_t *) color_19542)[sext_i32_i64(squot32(local_tid_19746,\n                                                           32))] = x_18673;\n            ((volatile __local\n              int64_t *) color_19541)[sext_i32_i64(squot32(local_tid_19746,\n                                                           32))] = x_18674;\n            ((volatile __local\n              int64_t *) color_19540)[sext_i32_i64(squot32(local_tid_19746,\n                                                           32))] = x_18675;\n            ((volatile __local\n              int64_t *) color_19539)[sext_i32_i64(squot32(local_tid_19746,\n                                                           32))] = x_18676;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n    {\n        int32_t skip_threads_19778;\n        \n        // read input for in-block scan\n        {\n            if (squot32(local_tid_19746, 32) == 0 && ltid_in_bounds_19774) {\n                x_19766 = ((volatile __local\n                            int64_t *) color_19542)[sext_i32_i64(local_tid_19746)];\n                x_19767 = ((volatile __local\n                            int64_t *) ",
            "color_19541)[sext_i32_i64(local_tid_19746)];\n                x_19768 = ((volatile __local\n                            int64_t *) color_19540)[sext_i32_i64(local_tid_19746)];\n                x_19769 = ((volatile __local\n                            int64_t *) color_19539)[sext_i32_i64(local_tid_19746)];\n                if ((local_tid_19746 - squot32(local_tid_19746, 32) * 32) ==\n                    0) {\n                    x_19762 = x_19766;\n                    x_19763 = x_19767;\n                    x_19764 = x_19768;\n                    x_19765 = x_19769;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19778 = 1;\n            while (slt32(skip_threads_19778, 32)) {\n                bool thread_active_19779 = sle32(skip_threads_19778,\n                                                 local_tid_19746 -\n                                                 squot32(local_tid_19746, 32) *\n                                                 32) &&\n                     (squot32(local_tid_19746, 32) == 0 &&\n                      ltid_in_bounds_19774);\n                \n                if (thread_active_19779) {\n                    // read operands\n                    {\n                        x_19762 = ((volatile __local\n                                    int64_t *) color_19542)[sext_i32_i64(local_tid_19746) -\n                                                            sext_i32_i64(skip_threads_19778)];\n                        x_19763 = ((volatile __local\n                                    int64_t *) color_19541)[sext_i32_i64(local_tid_19746) -\n                                                            sext_i32_i64(skip_threads_19778)];\n                        x_19764 = ((volatile __local\n                                    int64_t *) color_19540)[sext_i32_i64(local_tid_19746) -\n                                                            sext_i32_i64(skip_threads_19778)];\n                        x_19",
            "765 = ((volatile __local\n                                    int64_t *) color_19539)[sext_i32_i64(local_tid_19746) -\n                                                            sext_i32_i64(skip_threads_19778)];\n                    }\n                }\n                // perform operation\n                {\n                    bool inactive_19780 =\n                         slt64(srem64(sext_i32_i64(local_tid_19746 * 32 + 32 -\n                                      1), g_16539),\n                               sext_i32_i64(local_tid_19746 * 32 + 32 - 1) -\n                               sext_i32_i64((local_tid_19746 -\n                                             skip_threads_19778) * 32 + 32 -\n                               1));\n                    \n                    if (thread_active_19779 && inactive_19780) {\n                        x_19762 = x_19766;\n                        x_19763 = x_19767;\n                        x_19764 = x_19768;\n                        x_19765 = x_19769;\n                    }\n                    if (thread_active_19779) {\n                        if (!inactive_19780) {\n                            int64_t defunc_1_op_res_19770 = add64(x_19762,\n                                                                  x_19766);\n                            int64_t defunc_1_op_res_19771 = add64(x_19763,\n                                                                  x_19767);\n                            int64_t defunc_1_op_res_19772 = add64(x_19764,\n                                                                  x_19768);\n                            int64_t defunc_1_op_res_19773 = add64(x_19765,\n                                                                  x_19769);\n                            \n                            x_19762 = defunc_1_op_res_19770;\n                            x_19763 = defunc_1_op_res_19771;\n                            x_19764 = defunc_1_op_res_19772;\n                            x_19765 = defunc_1_op_res_19773;\n                ",
            "        }\n                    }\n                }\n                if (sle32(wave_sizze_19748, skip_threads_19778)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19779) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) color_19542)[sext_i32_i64(local_tid_19746)] =\n                            x_19762;\n                        x_19766 = x_19762;\n                        ((volatile __local\n                          int64_t *) color_19541)[sext_i32_i64(local_tid_19746)] =\n                            x_19763;\n                        x_19767 = x_19763;\n                        ((volatile __local\n                          int64_t *) color_19540)[sext_i32_i64(local_tid_19746)] =\n                            x_19764;\n                        x_19768 = x_19764;\n                        ((volatile __local\n                          int64_t *) color_19539)[sext_i32_i64(local_tid_19746)] =\n                            x_19765;\n                        x_19769 = x_19765;\n                    }\n                }\n                if (sle32(wave_sizze_19748, skip_threads_19778)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19778 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    bool no_carry_in_19781 = squot32(local_tid_19746, 32) == 0 ||\n         !ltid_in_bounds_19774;\n    \n    // carry-in for every block except the first\n    {\n        // read operands\n        {\n            if (!no_carry_in_19781) {\n                x_18677 = x_18673;\n                x_18678 = x_18674;\n                x_18679 = x_18675;\n                x_18680 = x_18676;\n                x_18673 = ((__local\n                            int64_t *) color_19542)[sext_i32_i64(squot32(local_tid_19746,\n                                                                         32)) -\n                            ",
            "                        (int64_t) 1];\n                x_18674 = ((__local\n                            int64_t *) color_19541)[sext_i32_i64(squot32(local_tid_19746,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_18675 = ((__local\n                            int64_t *) color_19540)[sext_i32_i64(squot32(local_tid_19746,\n                                                                         32)) -\n                                                    (int64_t) 1];\n                x_18676 = ((__local\n                            int64_t *) color_19539)[sext_i32_i64(squot32(local_tid_19746,\n                                                                         32)) -\n                                                    (int64_t) 1];\n            }\n        }\n        // perform operation\n        {\n            bool inactive_19782 = slt64(srem64(sext_i32_i64(local_tid_19746),\n                                               g_16539),\n                                        sext_i32_i64(local_tid_19746) -\n                                        sext_i32_i64(squot32(local_tid_19746,\n                                                             32) * 32 - 1));\n            \n            if (!no_carry_in_19781) {\n                if (inactive_19782) {\n                    x_18673 = x_18677;\n                    x_18674 = x_18678;\n                    x_18675 = x_18679;\n                    x_18676 = x_18680;\n                }\n            }\n            if (!no_carry_in_19781) {\n                if (!inactive_19782) {\n                    int64_t defunc_1_op_res_18681 = add64(x_18673, x_18677);\n                    int64_t defunc_1_op_res_18682 = add64(x_18674, x_18678);\n                    int64_t defunc_1_op_res_18683 = add64(x_18675, x_18679);\n                    int64_t defunc_1_op_res_18684 = add64(x_18676, x_18680);\n                    \n                    x_18673 = defunc_1",
            "_op_res_18681;\n                    x_18674 = defunc_1_op_res_18682;\n                    x_18675 = defunc_1_op_res_18683;\n                    x_18676 = defunc_1_op_res_18684;\n                }\n            }\n        }\n        // write final result\n        {\n            if (!no_carry_in_19781) {\n                ((__local\n                  int64_t *) color_19542)[sext_i32_i64(local_tid_19746)] =\n                    x_18673;\n                ((__local\n                  int64_t *) color_19541)[sext_i32_i64(local_tid_19746)] =\n                    x_18674;\n                ((__local\n                  int64_t *) color_19540)[sext_i32_i64(local_tid_19746)] =\n                    x_18675;\n                ((__local\n                  int64_t *) color_19539)[sext_i32_i64(local_tid_19746)] =\n                    x_18676;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_19746, 32) == 0 && ltid_in_bounds_19774) {\n            ((__local int64_t *) color_19542)[sext_i32_i64(local_tid_19746)] =\n                x_18677;\n            ((__local int64_t *) color_19541)[sext_i32_i64(local_tid_19746)] =\n                x_18678;\n            ((__local int64_t *) color_19540)[sext_i32_i64(local_tid_19746)] =\n                x_18679;\n            ((__local int64_t *) color_19539)[sext_i32_i64(local_tid_19746)] =\n                x_18680;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t last_res_18718;\n    \n    last_res_18718 = ((__local int64_t *) color_19542)[i_16546];\n    \n    int64_t last_res_18719;\n    \n    last_res_18719 = ((__local int64_t *) color_19541)[i_16546];\n    \n    int64_t last_res_18720;\n    \n    last_res_18720 = ((__local int64_t *) color_19540)[i_16546];\n    \n    int32_t phys_tid_18724 = local_tid_19746;\n    int64_t write_i_18723 = sext_i32_i64(sext_i64_i32(ltid_pre_19750));\n    int32_t x_18725;\n    \n    x_18725 = ((__local int32_t *) color_19538)[write_i_18723];\n    \n    ",
            "float write_value_18730;\n    \n    write_value_18730 = ((__global float *) mem_param_19337)[gtid_18656 *\n                                                             g_16539 +\n                                                             write_i_18723];\n    \n    int64_t write_value_18731;\n    \n    write_value_18731 = ((__global int64_t *) mem_param_19345)[gtid_18656 *\n                                                               g_16539 +\n                                                               write_i_18723];\n    \n    bool match_lit_18732 = 0 == x_18725;\n    int64_t defunc_1_f_res_18733;\n    \n    if (match_lit_18732) {\n        int64_t x_18726;\n        \n        x_18726 = ((__local int64_t *) color_19542)[write_i_18723];\n        \n        int64_t case_res_18734 = sub64(x_18726, (int64_t) 1);\n        \n        defunc_1_f_res_18733 = case_res_18734;\n    } else {\n        bool match_lit_18735 = 1 == x_18725;\n        int64_t x_18736;\n        \n        if (match_lit_18735) {\n            int64_t x_18727;\n            \n            x_18727 = ((__local int64_t *) color_19541)[write_i_18723];\n            \n            int64_t x_18737 = add64(last_res_18718, x_18727);\n            int64_t case_res_18738 = sub64(x_18737, (int64_t) 1);\n            \n            x_18736 = case_res_18738;\n        } else {\n            bool match_lit_18739 = 2 == x_18725;\n            int64_t x_18740;\n            \n            if (match_lit_18739) {\n                int64_t x_18728;\n                \n                x_18728 = ((__local int64_t *) color_19540)[write_i_18723];\n                \n                int64_t x_18741 = add64(last_res_18718, last_res_18719);\n                int64_t x_18742 = add64(x_18728, x_18741);\n                int64_t case_res_18743 = sub64(x_18742, (int64_t) 1);\n                \n                x_18740 = case_res_18743;\n            } else {\n                int64_t x_18729;\n                \n                x_18729 = ((__local int64_t *) color_19539)[write_i_18723];\n               ",
            " \n                int64_t x_18744 = add64(last_res_18718, last_res_18719);\n                int64_t x_18745 = add64(last_res_18720, x_18744);\n                int64_t x_18746 = add64(x_18729, x_18745);\n                int64_t defunc_1_f_res_res_18747 = sub64(x_18746, (int64_t) 1);\n                \n                x_18740 = defunc_1_f_res_res_18747;\n            }\n            x_18736 = x_18740;\n        }\n        defunc_1_f_res_18733 = x_18736;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_18733) && slt64(defunc_1_f_res_18733,\n                                                          g_16539)) {\n        ((__local float *) color_19544)[defunc_1_f_res_18733] =\n            write_value_18730;\n    }\n    if (sle64((int64_t) 0, defunc_1_f_res_18733) && slt64(defunc_1_f_res_18733,\n                                                          g_16539)) {\n        ((__local int64_t *) color_19543)[defunc_1_f_res_18733] =\n            write_value_18731;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    float tmp_19783;\n    \n    tmp_19783 = ((__local float *) color_19544)[sext_i32_i64(local_tid_19746)];\n    ((__global float *) mem_19385)[gtid_18656 * g_16539 +\n                                   sext_i32_i64(local_tid_19746)] = tmp_19783;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t tmp_19784;\n    \n    tmp_19784 = ((__local\n                  int64_t *) color_19543)[sext_i32_i64(local_tid_19746)];\n    ((__global int64_t *) mem_19389)[gtid_18656 * g_16539 +\n                                     sext_i32_i64(local_tid_19746)] = tmp_19784;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n  error_2:\n    return;\n}\n__kernel void sortBagAndDoStuffzisegred_large_18868(__global\n                                                    int *global_failure,\n                                                    int failure_is_an_option,\n                                                    __global\n                                                    int64_t *global_failure_args,\n                                     ",
            "               uint sync_arr_mem_20112_backing_offset_0,\n                                                    uint red_arr_mem_20110_backing_offset_1,\n                                                    int64_t b_16538,\n                                                    int64_t g_16539,\n                                                    int64_t num_groups_18861,\n                                                    int64_t groups_per_segment_20096,\n                                                    int64_t elements_per_thread_20097,\n                                                    int64_t virt_num_groups_20098,\n                                                    int64_t threads_per_segment_20100,\n                                                    __global\n                                                    unsigned char *values_mem_19047,\n                                                    __global\n                                                    unsigned char *mem_19321,\n                                                    __global\n                                                    unsigned char *ext_mem_19418,\n                                                    __global\n                                                    unsigned char *mem_19437,\n                                                    __global\n                                                    unsigned char *mem_19441,\n                                                    __global\n                                                    unsigned char *mem_19445,\n                                                    __global\n                                                    unsigned char *segred_tmp_mem_20101,\n                                                    __global\n                                                    unsigned char *sortBagAndDoStuffzicounter_mem_20103)\n{\n    #define segred_group_sizze_18860 (sortBagAndDoStuffzisegred_group_sizze_18215)\n    \n    const int block_dim0 = 0;\n    const ",
            "int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *sync_arr_mem_20112_backing_1 =\n                           &shared_mem[sync_arr_mem_20112_backing_offset_0];\n    volatile unsigned char *red_arr_mem_20110_backing_0 =\n                           &shared_mem[red_arr_mem_20110_backing_offset_1];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_20105;\n    int32_t local_tid_20106;\n    int64_t group_sizze_20109;\n    int32_t wave_sizze_20108;\n    int32_t group_tid_20107;\n    \n    global_tid_20105 = get_global_id(0);\n    local_tid_20106 = get_local_id(0);\n    group_sizze_20109 = get_local_size(0);\n    wave_sizze_20108 = LOCKSTEP_WIDTH;\n    group_tid_20107 = get_group_id(0);\n    \n    int32_t phys_tid_18868 = global_tid_20105;\n    __local unsigned char *red_arr_mem_20110;\n    \n    red_arr_mem_20110 = (__local unsigned char *) red_arr_mem_20110_backing_0;\n    \n    __local unsigned char *sync_arr_mem_20112;\n    \n    sync_arr_mem_20112 = (__local unsigned char *) sync_arr_mem_20112_backing_1;\n    \n    int32_t phys_group_id_20114;\n    \n    phys_group_id_20114 = get_group_id(0);\n    \n    int32_t iterations_20115 = sdiv_up32(sext_i64_i32(virt_num_groups_20098) -\n                                         phys_group_id_20114,\n                                         sext_i64_i32(num_groups_18861));\n    \n    for (int32_t i_20116 = 0; i_20116 < iterations_20115; i_20116++) {\n        int32_t virt_group_id_20117 = phys_group_id_20114 + i_20116 *\n                sext_i64_i32(num_groups_18861);\n        int32_t flat_segment_id_20118 = squot32(virt_group_id_20117,\n                                                sext_i64_i32(groups_per_segment_20096));\n        int64_t global_tid_20119 = srem64(sext_i32_i64(virt_group_id_20117) *\n                           ",
            "               segred_group_sizze_18860 +\n                                          sext_i32_i64(local_tid_20106),\n                                          segred_group_sizze_18860 *\n                                          groups_per_segment_20096);\n        int64_t slice_20120 = b_16538;\n        int64_t gtid_18866 = sext_i32_i64(flat_segment_id_20118);\n        int64_t remnant_20121 = sext_i32_i64(flat_segment_id_20118) -\n                gtid_18866;\n        int64_t gtid_18867;\n        float x_acc_20122;\n        int64_t chunk_sizze_20123 = smin64(elements_per_thread_20097,\n                                           sdiv_up64(g_16539 - global_tid_20119,\n                                                     threads_per_segment_20100));\n        float x_18869;\n        float x_18870;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_20122 = 0.0F;\n        }\n        for (int64_t i_20127 = 0; i_20127 < chunk_sizze_20123; i_20127++) {\n            gtid_18867 = global_tid_20119 + threads_per_segment_20100 * i_20127;\n            // apply map function\n            {\n                int64_t x_18875;\n                \n                x_18875 = ((__global int64_t *) ext_mem_19418)[gtid_18866 *\n                                                               g_16539 +\n                                                               gtid_18867];\n                \n                bool x_18876 = sle64((int64_t) 0, x_18875);\n                bool y_18877 = slt64(x_18875, g_16539);\n                bool bounds_check_18878 = x_18876 && y_18877;\n                bool index_certs_18879;\n                \n                if (!bounds_check_18878) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 6) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18875;\n                            global_failure_args[1] = (int64_t) g_16539;\n                            ;\n                 ",
            "       }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18880;\n                \n                defunc_0_f_res_18880 = ((__global\n                                         float *) values_mem_19047)[gtid_18866 *\n                                                                    g_16539 +\n                                                                    x_18875];\n                \n                float defunc_0_f_res_18881;\n                \n                defunc_0_f_res_18881 = ((__global\n                                         float *) mem_19321)[gtid_18866 *\n                                                             g_16539 + x_18875];\n                // save map-out results\n                {\n                    ((__global float *) mem_19441)[gtid_18866 * g_16539 +\n                                                   gtid_18867] =\n                        defunc_0_f_res_18880;\n                    ((__global float *) mem_19445)[gtid_18866 * g_16539 +\n                                                   gtid_18867] =\n                        defunc_0_f_res_18881;\n                }\n                // load accumulator\n                {\n                    x_18869 = x_acc_20122;\n                }\n                // load new values\n                {\n                    x_18870 = defunc_0_f_res_18880;\n                }\n                // apply reduction operator\n                {\n                    float defunc_1_op_res_18871 = x_18869 + x_18870;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_20122 = defunc_1_op_res_18871;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_18869 = x_acc_20122;\n            ((__local\n              float *) red_arr_mem_20110)[sext_i32_i64(l",
            "ocal_tid_20106)] =\n                x_18869;\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_20128;\n        int32_t skip_waves_20129 = 1;\n        float x_20124;\n        float x_20125;\n        \n        offset_20128 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_20106,\n                      sext_i64_i32(segred_group_sizze_18860))) {\n                x_20124 = ((__local\n                            float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                        offset_20128)];\n            }\n        }\n        offset_20128 = 1;\n        while (slt32(offset_20128, wave_sizze_20108)) {\n            if (slt32(local_tid_20106 + offset_20128,\n                      sext_i64_i32(segred_group_sizze_18860)) &&\n                ((local_tid_20106 - squot32(local_tid_20106, wave_sizze_20108) *\n                  wave_sizze_20108) & (2 * offset_20128 - 1)) == 0) {\n                // read array element\n                {\n                    x_20125 = ((volatile __local\n                                float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                            offset_20128)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20126 = x_20124 + x_20125;\n                    \n                    x_20124 = defunc_1_op_res_20126;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106)] =\n                        x_20124;\n                }\n            }\n            offset_20128 *= 2;\n        }\n        while (slt32(skip_waves_20129,\n                     squot32(sext_i64_i32(segred_group",
            "_sizze_18860) +\n                             wave_sizze_20108 - 1, wave_sizze_20108))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_20128 = skip_waves_20129 * wave_sizze_20108;\n            if (slt32(local_tid_20106 + offset_20128,\n                      sext_i64_i32(segred_group_sizze_18860)) &&\n                ((local_tid_20106 - squot32(local_tid_20106, wave_sizze_20108) *\n                  wave_sizze_20108) == 0 && (squot32(local_tid_20106,\n                                                     wave_sizze_20108) & (2 *\n                                                                          skip_waves_20129 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_20125 = ((__local\n                                float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                            offset_20128)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20126 = x_20124 + x_20125;\n                    \n                    x_20124 = defunc_1_op_res_20126;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106)] =\n                        x_20124;\n                }\n            }\n            skip_waves_20129 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_20106) == (int64_t) 0) {\n                x_acc_20122 = x_20124;\n            }\n        }\n        if (groups_per_segment_20096 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_20106 == 0) {\n                    ((__global float *) mem_19437)[gtid_188",
            "66] = x_acc_20122;\n                }\n            }\n        } else {\n            int32_t old_counter_20130;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_20106 == 0) {\n                    ((__global\n                      float *) segred_tmp_mem_20101)[sext_i32_i64(virt_group_id_20117)] =\n                        x_acc_20122;\n                    mem_fence_global();\n                    old_counter_20130 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20103)[sext_i32_i64(srem32(flat_segment_id_20118,\n                                                                                                                  10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_20112)[(int64_t) 0] =\n                        old_counter_20130 == groups_per_segment_20096 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_20131;\n            \n            is_last_group_20131 = ((__local\n                                    bool *) sync_arr_mem_20112)[(int64_t) 0];\n            if (is_last_group_20131) {\n                if (local_tid_20106 == 0) {\n                    old_counter_20130 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20103)[sext_i32_i64(srem32(flat_segment_id_20118,\n                                                                                                                  10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_20096));\n                }\n                // read in the per-group-resu",
            "lts\n                {\n                    int64_t read_per_thread_20132 =\n                            sdiv_up64(groups_per_segment_20096,\n                                      segred_group_sizze_18860);\n                    \n                    x_18869 = 0.0F;\n                    for (int64_t i_20133 = 0; i_20133 < read_per_thread_20132;\n                         i_20133++) {\n                        int64_t group_res_id_20134 =\n                                sext_i32_i64(local_tid_20106) *\n                                read_per_thread_20132 + i_20133;\n                        int64_t index_of_group_res_20135 =\n                                sext_i32_i64(flat_segment_id_20118) *\n                                groups_per_segment_20096 + group_res_id_20134;\n                        \n                        if (slt64(group_res_id_20134,\n                                  groups_per_segment_20096)) {\n                            x_18870 = ((__global\n                                        float *) segred_tmp_mem_20101)[index_of_group_res_20135];\n                            \n                            float defunc_1_op_res_18871 = x_18869 + x_18870;\n                            \n                            x_18869 = defunc_1_op_res_18871;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106)] =\n                    x_18869;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_20136;\n                    int32_t skip_waves_20137 = 1;\n                    float x_20124;\n                    float x_20125;\n                    \n                    offset_20136 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_20106,\n                                  sext_i64_i32(segred_group_sizze_18860)",
            ")) {\n                            x_20124 = ((__local\n                                        float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                                    offset_20136)];\n                        }\n                    }\n                    offset_20136 = 1;\n                    while (slt32(offset_20136, wave_sizze_20108)) {\n                        if (slt32(local_tid_20106 + offset_20136,\n                                  sext_i64_i32(segred_group_sizze_18860)) &&\n                            ((local_tid_20106 - squot32(local_tid_20106,\n                                                        wave_sizze_20108) *\n                              wave_sizze_20108) & (2 * offset_20136 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_20125 = ((volatile __local\n                                            float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                                        offset_20136)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20126 = x_20124 + x_20125;\n                                \n                                x_20124 = defunc_1_op_res_20126;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106)] =\n                                    x_20124;\n                            }\n                        }\n                        offset_20136 *= 2;\n                    }\n                    while (slt32(skip_waves_20137,\n                                 squot32(sext_i64_i32(segred_group_sizze_18860) +\n                  ",
            "                       wave_sizze_20108 - 1,\n                                         wave_sizze_20108))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_20136 = skip_waves_20137 * wave_sizze_20108;\n                        if (slt32(local_tid_20106 + offset_20136,\n                                  sext_i64_i32(segred_group_sizze_18860)) &&\n                            ((local_tid_20106 - squot32(local_tid_20106,\n                                                        wave_sizze_20108) *\n                              wave_sizze_20108) == 0 &&\n                             (squot32(local_tid_20106, wave_sizze_20108) & (2 *\n                                                                            skip_waves_20137 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_20125 = ((__local\n                                            float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106 +\n                                                                        offset_20136)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20126 = x_20124 + x_20125;\n                                \n                                x_20124 = defunc_1_op_res_20126;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_20110)[sext_i32_i64(local_tid_20106)] =\n                                    x_20124;\n                            }\n                        }\n                        skip_waves_20137 *= 2;\n                    }\n                    // and back to memory with the final result\n              ",
            "      {\n                        if (local_tid_20106 == 0) {\n                            ((__global float *) mem_19437)[gtid_18866] =\n                                x_20124;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18860\n}\n__kernel void sortBagAndDoStuffzisegred_large_18963(__global\n                                                    int *global_failure,\n                                                    uint sync_arr_mem_20204_backing_offset_0,\n                                                    uint red_arr_mem_20202_backing_offset_1,\n                                                    int64_t b_16538,\n                                                    int64_t g_16539,\n                                                    int64_t num_groups_18958,\n                                                    int64_t groups_per_segment_20188,\n                                                    int64_t elements_per_thread_20189,\n                                                    int64_t virt_num_groups_20190,\n                                                    int64_t threads_per_segment_20192,\n                                                    __global\n                                                    unsigned char *mem_19472,\n                                                    __global\n                                                    unsigned char *mem_19476,\n                                                    __global\n                                                    unsigned char *segred_tmp_mem_20193,\n                                                    __global\n                                                    unsigned char *sortBagAndDoStuffzicounter_mem_20195)\n{\n    #define segred_group_sizze_18957 (sortBagAndDoStuffzisegred_group_sizze_18940)\n    \n    const int block_dim0 = 0;\n    const",
            " int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *sync_arr_mem_20204_backing_1 =\n                           &shared_mem[sync_arr_mem_20204_backing_offset_0];\n    volatile unsigned char *red_arr_mem_20202_backing_0 =\n                           &shared_mem[red_arr_mem_20202_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20197;\n    int32_t local_tid_20198;\n    int64_t group_sizze_20201;\n    int32_t wave_sizze_20200;\n    int32_t group_tid_20199;\n    \n    global_tid_20197 = get_global_id(0);\n    local_tid_20198 = get_local_id(0);\n    group_sizze_20201 = get_local_size(0);\n    wave_sizze_20200 = LOCKSTEP_WIDTH;\n    group_tid_20199 = get_group_id(0);\n    \n    int32_t phys_tid_18963 = global_tid_20197;\n    __local unsigned char *red_arr_mem_20202;\n    \n    red_arr_mem_20202 = (__local unsigned char *) red_arr_mem_20202_backing_0;\n    \n    __local unsigned char *sync_arr_mem_20204;\n    \n    sync_arr_mem_20204 = (__local unsigned char *) sync_arr_mem_20204_backing_1;\n    \n    int32_t phys_group_id_20206;\n    \n    phys_group_id_20206 = get_group_id(0);\n    \n    int32_t iterations_20207 = sdiv_up32(sext_i64_i32(virt_num_groups_20190) -\n                                         phys_group_id_20206,\n                                         sext_i64_i32(num_groups_18958));\n    \n    for (int32_t i_20208 = 0; i_20208 < iterations_20207; i_20208++) {\n        int32_t virt_group_id_20209 = phys_group_id_20206 + i_20208 *\n                sext_i64_i32(num_groups_18958);\n        int32_t flat_segment_id_20210 = squot32(virt_group_id_20209,\n                                                sext_i64_i32(groups_per_segment_20188));\n        int64_t global_tid_20211 = srem64(sext_i32_i64(virt_group_id_20209) *\n                                          segred_group_sizze_18957 +\n                                          sext_i32_i64(local_tid_20198),\n                                          segred_group_sizze_18957 *\n ",
            "                                         groups_per_segment_20188);\n        int64_t slice_20212 = g_16539;\n        int64_t gtid_18961 = sext_i32_i64(flat_segment_id_20210);\n        int64_t remnant_20213 = sext_i32_i64(flat_segment_id_20210) -\n                gtid_18961;\n        int64_t gtid_18962;\n        float x_acc_20214;\n        int64_t chunk_sizze_20215 = smin64(elements_per_thread_20189,\n                                           sdiv_up64(b_16538 - global_tid_20211,\n                                                     threads_per_segment_20192));\n        float x_18964;\n        float x_18965;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_20214 = 0.0F;\n        }\n        for (int64_t i_20219 = 0; i_20219 < chunk_sizze_20215; i_20219++) {\n            gtid_18962 = global_tid_20211 + threads_per_segment_20192 * i_20219;\n            // apply map function\n            {\n                float x_18968;\n                \n                x_18968 = ((__global float *) mem_19472)[gtid_18961 * b_16538 +\n                                                         gtid_18962];\n                // save map-out results\n                { }\n                // load accumulator\n                {\n                    x_18964 = x_acc_20214;\n                }\n                // load new values\n                {\n                    x_18965 = x_18968;\n                }\n                // apply reduction operator\n                {\n                    float defunc_1_op_res_18966 = x_18964 + x_18965;\n                    \n                    // store in accumulator\n                    {\n                        x_acc_20214 = defunc_1_op_res_18966;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_18964 = x_acc_20214;\n            ((__local\n              float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                x_18964;\n        }\n        ba",
            "rrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_20220;\n        int32_t skip_waves_20221 = 1;\n        float x_20216;\n        float x_20217;\n        \n        offset_20220 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_20198,\n                      sext_i64_i32(segred_group_sizze_18957))) {\n                x_20216 = ((__local\n                            float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                                                        offset_20220)];\n            }\n        }\n        offset_20220 = 1;\n        while (slt32(offset_20220, wave_sizze_20200)) {\n            if (slt32(local_tid_20198 + offset_20220,\n                      sext_i64_i32(segred_group_sizze_18957)) &&\n                ((local_tid_20198 - squot32(local_tid_20198, wave_sizze_20200) *\n                  wave_sizze_20200) & (2 * offset_20220 - 1)) == 0) {\n                // read array element\n                {\n                    x_20217 = ((volatile __local\n                                float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                                                            offset_20220)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20218 = x_20216 + x_20217;\n                    \n                    x_20216 = defunc_1_op_res_20218;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                        x_20216;\n                }\n            }\n            offset_20220 *= 2;\n        }\n        while (slt32(skip_waves_20221,\n                     squot32(sext_i64_i32(segred_group_sizze_18957) +\n                             wave_sizze_20200 - 1, wave_sizze_20200))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_20220 = skip_waves_2022",
            "1 * wave_sizze_20200;\n            if (slt32(local_tid_20198 + offset_20220,\n                      sext_i64_i32(segred_group_sizze_18957)) &&\n                ((local_tid_20198 - squot32(local_tid_20198, wave_sizze_20200) *\n                  wave_sizze_20200) == 0 && (squot32(local_tid_20198,\n                                                     wave_sizze_20200) & (2 *\n                                                                          skip_waves_20221 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_20217 = ((__local\n                                float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                                                            offset_20220)];\n                }\n                // apply reduction operation\n                {\n                    float defunc_1_op_res_20218 = x_20216 + x_20217;\n                    \n                    x_20216 = defunc_1_op_res_20218;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                        x_20216;\n                }\n            }\n            skip_waves_20221 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_20198) == (int64_t) 0) {\n                x_acc_20214 = x_20216;\n            }\n        }\n        if (groups_per_segment_20188 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_20198 == 0) {\n                    ((__global float *) mem_19476)[gtid_18961] = x_acc_20214;\n                }\n            }\n        } else {\n            int32_t old_counter_20222;\n            \n            // first thread in group saves group resu",
            "lt to global memory\n            {\n                if (local_tid_20198 == 0) {\n                    ((__global\n                      float *) segred_tmp_mem_20193)[sext_i32_i64(virt_group_id_20209)] =\n                        x_acc_20214;\n                    mem_fence_global();\n                    old_counter_20222 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20195)[sext_i32_i64(srem32(flat_segment_id_20210,\n                                                                                                                  10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_20204)[(int64_t) 0] =\n                        old_counter_20222 == groups_per_segment_20188 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_20223;\n            \n            is_last_group_20223 = ((__local\n                                    bool *) sync_arr_mem_20204)[(int64_t) 0];\n            if (is_last_group_20223) {\n                if (local_tid_20198 == 0) {\n                    old_counter_20222 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) sortBagAndDoStuffzicounter_mem_20195)[sext_i32_i64(srem32(flat_segment_id_20210,\n                                                                                                                  10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_20188));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_20224 =\n                            sdiv_up64(groups_per_segment_20188,\n                                   ",
            "   segred_group_sizze_18957);\n                    \n                    x_18964 = 0.0F;\n                    for (int64_t i_20225 = 0; i_20225 < read_per_thread_20224;\n                         i_20225++) {\n                        int64_t group_res_id_20226 =\n                                sext_i32_i64(local_tid_20198) *\n                                read_per_thread_20224 + i_20225;\n                        int64_t index_of_group_res_20227 =\n                                sext_i32_i64(flat_segment_id_20210) *\n                                groups_per_segment_20188 + group_res_id_20226;\n                        \n                        if (slt64(group_res_id_20226,\n                                  groups_per_segment_20188)) {\n                            x_18965 = ((__global\n                                        float *) segred_tmp_mem_20193)[index_of_group_res_20227];\n                            \n                            float defunc_1_op_res_18966 = x_18964 + x_18965;\n                            \n                            x_18964 = defunc_1_op_res_18966;\n                        }\n                    }\n                }\n                ((__local\n                  float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                    x_18964;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_20228;\n                    int32_t skip_waves_20229 = 1;\n                    float x_20216;\n                    float x_20217;\n                    \n                    offset_20228 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_20198,\n                                  sext_i64_i32(segred_group_sizze_18957))) {\n                            x_20216 = ((__local\n                                        float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                     ",
            "                                               offset_20228)];\n                        }\n                    }\n                    offset_20228 = 1;\n                    while (slt32(offset_20228, wave_sizze_20200)) {\n                        if (slt32(local_tid_20198 + offset_20228,\n                                  sext_i64_i32(segred_group_sizze_18957)) &&\n                            ((local_tid_20198 - squot32(local_tid_20198,\n                                                        wave_sizze_20200) *\n                              wave_sizze_20200) & (2 * offset_20228 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_20217 = ((volatile __local\n                                            float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                                                                        offset_20228)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20218 = x_20216 + x_20217;\n                                \n                                x_20216 = defunc_1_op_res_20218;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                                    x_20216;\n                            }\n                        }\n                        offset_20228 *= 2;\n                    }\n                    while (slt32(skip_waves_20229,\n                                 squot32(sext_i64_i32(segred_group_sizze_18957) +\n                                         wave_sizze_20200 - 1,\n                                         wave_sizze_20200))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n           ",
            "             offset_20228 = skip_waves_20229 * wave_sizze_20200;\n                        if (slt32(local_tid_20198 + offset_20228,\n                                  sext_i64_i32(segred_group_sizze_18957)) &&\n                            ((local_tid_20198 - squot32(local_tid_20198,\n                                                        wave_sizze_20200) *\n                              wave_sizze_20200) == 0 &&\n                             (squot32(local_tid_20198, wave_sizze_20200) & (2 *\n                                                                            skip_waves_20229 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_20217 = ((__local\n                                            float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198 +\n                                                                        offset_20228)];\n                            }\n                            // apply reduction operation\n                            {\n                                float defunc_1_op_res_20218 = x_20216 + x_20217;\n                                \n                                x_20216 = defunc_1_op_res_20218;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  float *) red_arr_mem_20202)[sext_i32_i64(local_tid_20198)] =\n                                    x_20216;\n                            }\n                        }\n                        skip_waves_20229 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_20198 == 0) {\n                            ((__global float *) mem_19476)[gtid_18961] =\n                                x_20216;",
            "\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18957\n}\n__kernel void sortBagAndDoStuffzisegred_small_18868(__global\n                                                    int *global_failure,\n                                                    int failure_is_an_option,\n                                                    __global\n                                                    int64_t *global_failure_args,\n                                                    uint red_arr_mem_20075_backing_offset_0,\n                                                    int64_t b_16538,\n                                                    int64_t g_16539,\n                                                    int64_t num_groups_18861,\n                                                    int64_t segment_sizze_nonzzero_20068,\n                                                    __global\n                                                    unsigned char *values_mem_19047,\n                                                    __global\n                                                    unsigned char *mem_19321,\n                                                    __global\n                                                    unsigned char *ext_mem_19418,\n                                                    __global\n                                                    unsigned char *mem_19437,\n                                                    __global\n                                                    unsigned char *mem_19441,\n                                                    __global\n                                                    unsigned char *mem_19445)\n{\n    #define segred_group_sizze_18860 (sortBagAndDoStuffzisegred_group_sizze_18215)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = ",
            "2;\n    volatile unsigned char *red_arr_mem_20075_backing_0 =\n                           &shared_mem[red_arr_mem_20075_backing_offset_0];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_20070;\n    int32_t local_tid_20071;\n    int64_t group_sizze_20074;\n    int32_t wave_sizze_20073;\n    int32_t group_tid_20072;\n    \n    global_tid_20070 = get_global_id(0);\n    local_tid_20071 = get_local_id(0);\n    group_sizze_20074 = get_local_size(0);\n    wave_sizze_20073 = LOCKSTEP_WIDTH;\n    group_tid_20072 = get_group_id(0);\n    \n    int32_t phys_tid_18868 = global_tid_20070;\n    __local unsigned char *red_arr_mem_20075;\n    \n    red_arr_mem_20075 = (__local unsigned char *) red_arr_mem_20075_backing_0;\n    \n    int32_t phys_group_id_20077;\n    \n    phys_group_id_20077 = get_group_id(0);\n    \n    int32_t iterations_20078 = sdiv_up32(sext_i64_i32(sdiv_up64(b_16538,\n                                                                squot64(segred_group_sizze_18860,\n                                                                        segment_sizze_nonzzero_20068))) -\n                                         phys_group_id_20077,\n                                         sext_i64_i32(num_groups_18861));\n    \n    for (int32_t i_20079 = 0; i_20079 < iterations_20078; i_20079++) {\n        int32_t virt_group_id_20080 = phys_group_id_20077 + i_20079 *\n                sext_i64_i32(num_groups_18861);\n        int64_t slice_20081 = b_16538;\n        int64_t gtid_18866 = squot64(sext_i32_i64(local_tid_20071),\n                                     segment_sizze_nonzzero_20068) +\n                sext_i32_i64(virt_group_id_20080) *\n                squot64(segred_group_sizze_18860, segment_sizze_nonzzero_20068);\n        int64_t remnant_20082 = squot64(sext_i32_i64(local_tid_20071),\n      ",
            "                                  segment_sizze_nonzzero_20068) +\n                sext_i32_i64(virt_group_id_20080) *\n                squot64(segred_group_sizze_18860,\n                        segment_sizze_nonzzero_20068) - gtid_18866;\n        int64_t gtid_18867 = srem64(sext_i32_i64(local_tid_20071), g_16539);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, g_16539) && (slt64(gtid_18866, b_16538) &&\n                                                slt64(sext_i32_i64(local_tid_20071),\n                                                      g_16539 *\n                                                      squot64(segred_group_sizze_18860,\n                                                              segment_sizze_nonzzero_20068)))) {\n                int64_t x_18875;\n                \n                x_18875 = ((__global int64_t *) ext_mem_19418)[gtid_18866 *\n                                                               g_16539 +\n                                                               gtid_18867];\n                \n                bool x_18876 = sle64((int64_t) 0, x_18875);\n                bool y_18877 = slt64(x_18875, g_16539);\n                bool bounds_check_18878 = x_18876 && y_18877;\n                bool index_certs_18879;\n                \n                if (!bounds_check_18878) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 5) ==\n                            -1) {\n                            global_failure_args[0] = (int64_t) x_18875;\n                            global_failure_args[1] = (int64_t) g_16539;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                float defunc_0_f_res_18880;\n                \n                defunc_0_f_res_18880 = ((__global\n                                         float *) value",
            "s_mem_19047)[gtid_18866 *\n                                                                    g_16539 +\n                                                                    x_18875];\n                \n                float defunc_0_f_res_18881;\n                \n                defunc_0_f_res_18881 = ((__global\n                                         float *) mem_19321)[gtid_18866 *\n                                                             g_16539 + x_18875];\n                // save map-out results\n                {\n                    ((__global float *) mem_19441)[gtid_18866 * g_16539 +\n                                                   gtid_18867] =\n                        defunc_0_f_res_18880;\n                    ((__global float *) mem_19445)[gtid_18866 * g_16539 +\n                                                   gtid_18867] =\n                        defunc_0_f_res_18881;\n                }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                        defunc_0_f_res_18880;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                    0.0F;\n            }\n        }\n        \n      error_0:\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_failure)\n            return;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, g_16539)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_18869;\n                float x_18870;\n                float x_20083;\n                float x_20084;\n                bool ltid_in_bounds_20086 = slt64(sext_i32_i64(local_tid_20071),\n                                                  g_16539 *\n                                                  squot64(segred_group_sizze_18860,\n                                                          se",
            "gment_sizze_nonzzero_20068));\n                int32_t skip_threads_20087;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_20086) {\n                        x_18870 = ((volatile __local\n                                    float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)];\n                        if ((local_tid_20071 - squot32(local_tid_20071, 32) *\n                             32) == 0) {\n                            x_18869 = x_18870;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_20087 = 1;\n                    while (slt32(skip_threads_20087, 32)) {\n                        bool thread_active_20088 = sle32(skip_threads_20087,\n                                                         local_tid_20071 -\n                                                         squot32(local_tid_20071,\n                                                                 32) * 32) &&\n                             ltid_in_bounds_20086;\n                        \n                        if (thread_active_20088) {\n                            // read operands\n                            {\n                                x_18869 = ((volatile __local\n                                            float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071) -\n                                                                        sext_i32_i64(skip_threads_20087)];\n                            }\n                        }\n                        // perform operation\n                        {\n                            bool inactive_20089 =\n                                 slt64(srem64(sext_i32_i64(local_tid_20071),\n                                              g_16539),\n                                       sext_i32_i64(local_tid_20071) -\n                                       sext_i32_i64(local_tid",
            "_20071 -\n                                       skip_threads_20087));\n                            \n                            if (thread_active_20088 && inactive_20089) {\n                                x_18869 = x_18870;\n                            }\n                            if (thread_active_20088) {\n                                if (!inactive_20089) {\n                                    float defunc_1_op_res_18871 = x_18869 +\n                                          x_18870;\n                                    \n                                    x_18869 = defunc_1_op_res_18871;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_20073, skip_threads_20087)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (thread_active_20088) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                                    x_18869;\n                                x_18870 = x_18869;\n                            }\n                        }\n                        if (sle32(wave_sizze_20073, skip_threads_20087)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_20087 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_20071 - squot32(local_tid_20071, 32) * 32) ==\n                        31 && ltid_in_bounds_20086) {\n                        ((volatile __local\n                          float *) red_arr_mem_20075)[sext_i32_i64(squot32(local_tid_20071,\n                                                                          ",
            " 32))] =\n                            x_18869;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_20090;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_20071, 32) == 0 &&\n                            ltid_in_bounds_20086) {\n                            x_20084 = ((volatile __local\n                                        float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)];\n                            if ((local_tid_20071 - squot32(local_tid_20071,\n                                                           32) * 32) == 0) {\n                                x_20083 = x_20084;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_20090 = 1;\n                        while (slt32(skip_threads_20090, 32)) {\n                            bool thread_active_20091 = sle32(skip_threads_20090,\n                                                             local_tid_20071 -\n                                                             squot32(local_tid_20071,\n                                                                     32) *\n                                                             32) &&\n                                 (squot32(local_tid_20071, 32) == 0 &&\n                                  ltid_in_bounds_20086);\n                            \n                            if (thread_active_20091) {\n                                // read operands\n                                {\n                                    x_20083 = ((volatile __local\n                                                float *) red_arr_mem_20075)[sext_i32_i64(local_tid_200",
            "71) -\n                                                                            sext_i32_i64(skip_threads_20090)];\n                                }\n                            }\n                            // perform operation\n                            {\n                                bool inactive_20092 =\n                                     slt64(srem64(sext_i32_i64(local_tid_20071 *\n                                                  32 + 32 - 1), g_16539),\n                                           sext_i32_i64(local_tid_20071 * 32 +\n                                           32 - 1) -\n                                           sext_i32_i64((local_tid_20071 -\n                                                         skip_threads_20090) *\n                                           32 + 32 - 1));\n                                \n                                if (thread_active_20091 && inactive_20092) {\n                                    x_20083 = x_20084;\n                                }\n                                if (thread_active_20091) {\n                                    if (!inactive_20092) {\n                                        float defunc_1_op_res_20085 = x_20083 +\n                                              x_20084;\n                                        \n                                        x_20083 = defunc_1_op_res_20085;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_20073, skip_threads_20090)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (thread_active_20091) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                                        x_20083;\n        ",
            "                            x_20084 = x_20083;\n                                }\n                            }\n                            if (sle32(wave_sizze_20073, skip_threads_20090)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_20090 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                \n                bool no_carry_in_20093 = squot32(local_tid_20071, 32) == 0 ||\n                     !ltid_in_bounds_20086;\n                \n                // carry-in for every block except the first\n                {\n                    // read operands\n                    {\n                        if (!no_carry_in_20093) {\n                            x_18870 = x_18869;\n                            x_18869 = ((__local\n                                        float *) red_arr_mem_20075)[sext_i32_i64(squot32(local_tid_20071,\n                                                                                         32)) -\n                                                                    (int64_t) 1];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_20094 =\n                             slt64(srem64(sext_i32_i64(local_tid_20071),\n                                          g_16539),\n                                   sext_i32_i64(local_tid_20071) -\n                                   sext_i32_i64(squot32(local_tid_20071, 32) *\n                                   32 - 1));\n                        \n                        if (!no_carry_in_20093) {\n                            if (inactive_20094) {\n                                x_18869 = x_18870;\n                            }\n                        }\n                        if (!no_carry_in_20093) {\n                            if (!inactive_20094) {\n                        ",
            "        float defunc_1_op_res_18871 = x_18869 + x_18870;\n                                \n                                x_18869 = defunc_1_op_res_18871;\n                            }\n                        }\n                    }\n                    // write final result\n                    {\n                        if (!no_carry_in_20093) {\n                            ((__local\n                              float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                                x_18869;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_20071, 32) == 0 &&\n                        ltid_in_bounds_20086) {\n                        ((__local\n                          float *) red_arr_mem_20075)[sext_i32_i64(local_tid_20071)] =\n                            x_18870;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_20080) *\n                      squot64(segred_group_sizze_18860,\n                              segment_sizze_nonzzero_20068) +\n                      sext_i32_i64(local_tid_20071), b_16538) &&\n                slt64(sext_i32_i64(local_tid_20071),\n                      squot64(segred_group_sizze_18860,\n                              segment_sizze_nonzzero_20068))) {\n                float tmp_20095;\n                \n                tmp_20095 = ((__local\n                              float *) red_arr_mem_20075)[(sext_i32_i64(local_tid_20071) +\n                                                           (int64_t) 1) *\n                                                          segment_sizze_nonzzero_20068 -\n                                                          (int64_t) 1];\n ",
            "               ((__global\n                  float *) mem_19437)[sext_i32_i64(virt_group_id_20080) *\n                                      squot64(segred_group_sizze_18860,\n                                              segment_sizze_nonzzero_20068) +\n                                      sext_i32_i64(local_tid_20071)] =\n                    tmp_20095;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18860\n}\n__kernel void sortBagAndDoStuffzisegred_small_18963(__global\n                                                    int *global_failure,\n                                                    uint red_arr_mem_20167_backing_offset_0,\n                                                    int64_t b_16538,\n                                                    int64_t g_16539,\n                                                    int64_t num_groups_18958,\n                                                    int64_t segment_sizze_nonzzero_20160,\n                                                    __global\n                                                    unsigned char *mem_19472,\n                                                    __global\n                                                    unsigned char *mem_19476)\n{\n    #define segred_group_sizze_18957 (sortBagAndDoStuffzisegred_group_sizze_18940)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *red_arr_mem_20167_backing_0 =\n                           &shared_mem[red_arr_mem_20167_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_20162;\n    int32_t local_tid_20163;\n    int64_t group_sizze_20166;\n    int32_t wave_sizze_20165;\n    int32_t group_tid_20164;\n    \n    global_tid_20162 = get_global_id(0);\n    local_tid_20163 = get_local_id(0);\n    group_sizze_20166 = get_local_size",
            "(0);\n    wave_sizze_20165 = LOCKSTEP_WIDTH;\n    group_tid_20164 = get_group_id(0);\n    \n    int32_t phys_tid_18963 = global_tid_20162;\n    __local unsigned char *red_arr_mem_20167;\n    \n    red_arr_mem_20167 = (__local unsigned char *) red_arr_mem_20167_backing_0;\n    \n    int32_t phys_group_id_20169;\n    \n    phys_group_id_20169 = get_group_id(0);\n    \n    int32_t iterations_20170 = sdiv_up32(sext_i64_i32(sdiv_up64(g_16539,\n                                                                squot64(segred_group_sizze_18957,\n                                                                        segment_sizze_nonzzero_20160))) -\n                                         phys_group_id_20169,\n                                         sext_i64_i32(num_groups_18958));\n    \n    for (int32_t i_20171 = 0; i_20171 < iterations_20170; i_20171++) {\n        int32_t virt_group_id_20172 = phys_group_id_20169 + i_20171 *\n                sext_i64_i32(num_groups_18958);\n        int64_t slice_20173 = g_16539;\n        int64_t gtid_18961 = squot64(sext_i32_i64(local_tid_20163),\n                                     segment_sizze_nonzzero_20160) +\n                sext_i32_i64(virt_group_id_20172) *\n                squot64(segred_group_sizze_18957, segment_sizze_nonzzero_20160);\n        int64_t remnant_20174 = squot64(sext_i32_i64(local_tid_20163),\n                                        segment_sizze_nonzzero_20160) +\n                sext_i32_i64(virt_group_id_20172) *\n                squot64(segred_group_sizze_18957,\n                        segment_sizze_nonzzero_20160) - gtid_18961;\n        int64_t gtid_18962 = srem64(sext_i32_i64(local_tid_20163), b_16538);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, b_16538) && (slt64(gtid_18961, g_16539) &&\n                                                slt64(sext_i32_i64(local_tid_20163),\n                                                      b_16538 *\n                                                 ",
            "     squot64(segred_group_sizze_18957,\n                                                              segment_sizze_nonzzero_20160)))) {\n                float x_18968;\n                \n                x_18968 = ((__global float *) mem_19472)[gtid_18961 * b_16538 +\n                                                         gtid_18962];\n                // save map-out results\n                { }\n                // save results to be reduced\n                {\n                    ((__local\n                      float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                        x_18968;\n                }\n            } else {\n                ((__local\n                  float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                    0.0F;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, b_16538)) {\n            // perform segmented scan to imitate reduction\n            {\n                float x_18964;\n                float x_18965;\n                float x_20175;\n                float x_20176;\n                bool ltid_in_bounds_20178 = slt64(sext_i32_i64(local_tid_20163),\n                                                  b_16538 *\n                                                  squot64(segred_group_sizze_18957,\n                                                          segment_sizze_nonzzero_20160));\n                int32_t skip_threads_20179;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_20178) {\n                        x_18965 = ((volatile __local\n                                    float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)];\n                        if ((local_tid_20163 - squot32(local_tid_20163, 32) *\n                             32) == 0) {\n                            x_18964 = x_18965;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barrie",
            "rs needed)\n                {\n                    skip_threads_20179 = 1;\n                    while (slt32(skip_threads_20179, 32)) {\n                        bool thread_active_20180 = sle32(skip_threads_20179,\n                                                         local_tid_20163 -\n                                                         squot32(local_tid_20163,\n                                                                 32) * 32) &&\n                             ltid_in_bounds_20178;\n                        \n                        if (thread_active_20180) {\n                            // read operands\n                            {\n                                x_18964 = ((volatile __local\n                                            float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163) -\n                                                                        sext_i32_i64(skip_threads_20179)];\n                            }\n                        }\n                        // perform operation\n                        {\n                            bool inactive_20181 =\n                                 slt64(srem64(sext_i32_i64(local_tid_20163),\n                                              b_16538),\n                                       sext_i32_i64(local_tid_20163) -\n                                       sext_i32_i64(local_tid_20163 -\n                                       skip_threads_20179));\n                            \n                            if (thread_active_20180 && inactive_20181) {\n                                x_18964 = x_18965;\n                            }\n                            if (thread_active_20180) {\n                                if (!inactive_20181) {\n                                    float defunc_1_op_res_18966 = x_18964 +\n                                          x_18965;\n                                    \n                                    x_18964 = defunc_1_op_res_18966;\n                                }\n         ",
            "                   }\n                        }\n                        if (sle32(wave_sizze_20165, skip_threads_20179)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (thread_active_20180) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                                    x_18964;\n                                x_18965 = x_18964;\n                            }\n                        }\n                        if (sle32(wave_sizze_20165, skip_threads_20179)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_20179 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_20163 - squot32(local_tid_20163, 32) * 32) ==\n                        31 && ltid_in_bounds_20178) {\n                        ((volatile __local\n                          float *) red_arr_mem_20167)[sext_i32_i64(squot32(local_tid_20163,\n                                                                           32))] =\n                            x_18964;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_20182;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_20163, 32) == 0 &&\n                            ltid_in_bounds_20178) {\n                            x_20176 = ((volatile __local\n                                        float *) red_arr_mem_20167)[sext_i",
            "32_i64(local_tid_20163)];\n                            if ((local_tid_20163 - squot32(local_tid_20163,\n                                                           32) * 32) == 0) {\n                                x_20175 = x_20176;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_20182 = 1;\n                        while (slt32(skip_threads_20182, 32)) {\n                            bool thread_active_20183 = sle32(skip_threads_20182,\n                                                             local_tid_20163 -\n                                                             squot32(local_tid_20163,\n                                                                     32) *\n                                                             32) &&\n                                 (squot32(local_tid_20163, 32) == 0 &&\n                                  ltid_in_bounds_20178);\n                            \n                            if (thread_active_20183) {\n                                // read operands\n                                {\n                                    x_20175 = ((volatile __local\n                                                float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163) -\n                                                                            sext_i32_i64(skip_threads_20182)];\n                                }\n                            }\n                            // perform operation\n                            {\n                                bool inactive_20184 =\n                                     slt64(srem64(sext_i32_i64(local_tid_20163 *\n                                                  32 + 32 - 1), b_16538),\n                                           sext_i32_i64(local_tid_20163 * 32 +\n                                           32 - 1) -\n                                      ",
            "     sext_i32_i64((local_tid_20163 -\n                                                         skip_threads_20182) *\n                                           32 + 32 - 1));\n                                \n                                if (thread_active_20183 && inactive_20184) {\n                                    x_20175 = x_20176;\n                                }\n                                if (thread_active_20183) {\n                                    if (!inactive_20184) {\n                                        float defunc_1_op_res_20177 = x_20175 +\n                                              x_20176;\n                                        \n                                        x_20175 = defunc_1_op_res_20177;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_20165, skip_threads_20182)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (thread_active_20183) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                                        x_20175;\n                                    x_20176 = x_20175;\n                                }\n                            }\n                            if (sle32(wave_sizze_20165, skip_threads_20182)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_20182 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                \n                bool no_carry_in_20185 = squot32(local_tid_20163, 32) == 0 ||\n                     !ltid_in_bounds_20178;\n                \n                // carry-in for ever",
            "y block except the first\n                {\n                    // read operands\n                    {\n                        if (!no_carry_in_20185) {\n                            x_18965 = x_18964;\n                            x_18964 = ((__local\n                                        float *) red_arr_mem_20167)[sext_i32_i64(squot32(local_tid_20163,\n                                                                                         32)) -\n                                                                    (int64_t) 1];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_20186 =\n                             slt64(srem64(sext_i32_i64(local_tid_20163),\n                                          b_16538),\n                                   sext_i32_i64(local_tid_20163) -\n                                   sext_i32_i64(squot32(local_tid_20163, 32) *\n                                   32 - 1));\n                        \n                        if (!no_carry_in_20185) {\n                            if (inactive_20186) {\n                                x_18964 = x_18965;\n                            }\n                        }\n                        if (!no_carry_in_20185) {\n                            if (!inactive_20186) {\n                                float defunc_1_op_res_18966 = x_18964 + x_18965;\n                                \n                                x_18964 = defunc_1_op_res_18966;\n                            }\n                        }\n                    }\n                    // write final result\n                    {\n                        if (!no_carry_in_20185) {\n                            ((__local\n                              float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                                x_18964;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n          ",
            "      // restore correct values for first block\n                {\n                    if (squot32(local_tid_20163, 32) == 0 &&\n                        ltid_in_bounds_20178) {\n                        ((__local\n                          float *) red_arr_mem_20167)[sext_i32_i64(local_tid_20163)] =\n                            x_18965;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_20172) *\n                      squot64(segred_group_sizze_18957,\n                              segment_sizze_nonzzero_20160) +\n                      sext_i32_i64(local_tid_20163), g_16539) &&\n                slt64(sext_i32_i64(local_tid_20163),\n                      squot64(segred_group_sizze_18957,\n                              segment_sizze_nonzzero_20160))) {\n                float tmp_20187;\n                \n                tmp_20187 = ((__local\n                              float *) red_arr_mem_20167)[(sext_i32_i64(local_tid_20163) +\n                                                           (int64_t) 1) *\n                                                          segment_sizze_nonzzero_20160 -\n                                                          (int64_t) 1];\n                ((__global\n                  float *) mem_19476)[sext_i32_i64(virt_group_id_20172) *\n                                      squot64(segred_group_sizze_18957,\n                                              segment_sizze_nonzzero_20160) +\n                                      sext_i32_i64(local_tid_20163)] =\n                    tmp_20187;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_18957\n}\n__kernel void sortBagAndDoStuffzisegscan_18760(__global int *global_failure,\n               ",
            "                                uint local_mem_19834_backing_offset_0,\n                                               int64_t b_16538, int64_t g_16539,\n                                               int32_t defunc_2_radix_sort_step_arg_18641,\n                                               int32_t defunc_0_get_bit_arg_18642,\n                                               unsigned char cond_f_res_18643_bits,\n                                               unsigned char cond_f_res_18644_bits,\n                                               __global\n                                               unsigned char *mem_param_19337,\n                                               __global\n                                               unsigned char *mem_19394,\n                                               __global\n                                               unsigned char *mem_19398,\n                                               __global\n                                               unsigned char *mem_19402,\n                                               __global\n                                               unsigned char *mem_19406,\n                                               __global\n                                               unsigned char *mem_19410,\n                                               __global\n                                               unsigned char *sortBagAndDoStuffziid_counter_mem_19787,\n                                               __global\n                                               unsigned char *status_flags_mem_19789,\n                                               __global\n                                               unsigned char *aggregates_mem_19791,\n                                               __global\n                                               unsigned char *incprefixes_mem_19793,\n                                               __global\n                                               unsigned char *aggregates_mem_19795,\n    ",
            "                                           __global\n                                               unsigned char *incprefixes_mem_19797,\n                                               __global\n                                               unsigned char *aggregates_mem_19799,\n                                               __global\n                                               unsigned char *incprefixes_mem_19801,\n                                               __global\n                                               unsigned char *aggregates_mem_19803,\n                                               __global\n                                               unsigned char *incprefixes_mem_19805)\n{\n    bool cond_f_res_18643 = cond_f_res_18643_bits;\n    bool cond_f_res_18644 = cond_f_res_18644_bits;\n    \n    #define segscan_group_sizze_18750 (sortBagAndDoStuffzisegscan_group_sizze_18420)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile unsigned char *local_mem_19834_backing_0 =\n                           &shared_mem[local_mem_19834_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_19819;\n    int32_t local_tid_19820;\n    int64_t group_sizze_19823;\n    int32_t wave_sizze_19822;\n    int32_t group_tid_19821;\n    \n    global_tid_19819 = get_global_id(0);\n    local_tid_19820 = get_local_id(0);\n    group_sizze_19823 = get_local_size(0);\n    wave_sizze_19822 = LOCKSTEP_WIDTH;\n    group_tid_19821 = get_group_id(0);\n    \n    int32_t phys_tid_18760 = global_tid_19819;\n    int64_t byte_offsets_19824 = (int64_t) 0;\n    int64_t byte_offsets_19825 = segscan_group_sizze_18750 * (int64_t) 8;\n    int64_t byte_offsets_19826 = sdiv_up64(segscan_group_sizze_18750 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18750 * (int64_t) 8;\n    int64_t byte_offsets_19827 = sdiv_up64(sdiv_up64(segscan_group_sizze_18750 *\n         ",
            "                                            (int64_t) 8, (int64_t) 8) *\n                                           (int64_t) 8 +\n                                           segscan_group_sizze_18750 *\n                                           (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18750 * (int64_t) 8;\n    int64_t byte_offsets_19828 =\n            sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_18750 *\n                                          (int64_t) 8, (int64_t) 8) *\n                                (int64_t) 8 + segscan_group_sizze_18750 *\n                                (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n                      segscan_group_sizze_18750 * (int64_t) 8, (int64_t) 8) *\n            (int64_t) 8 + segscan_group_sizze_18750 * (int64_t) 8;\n    int64_t warp_byte_offset_19829 = (int64_t) 32;\n    int64_t warp_byte_offset_19830 = (int64_t) 288;\n    int64_t warp_byte_offset_19831 = (int64_t) 544;\n    int64_t warp_byte_offset_19832 = (int64_t) 800;\n    int64_t warp_byte_offset_19833 = (int64_t) 1056;\n    \n    // Allocate reused shared memeory\n    { }\n    \n    __local unsigned char *local_mem_19834;\n    \n    local_mem_19834 = (__local unsigned char *) local_mem_19834_backing_0;\n    \n    int64_t trans_arr_len_19835 = (int64_t) 3 * segscan_group_sizze_18750;\n    int32_t dynamic_id_19850;\n    \n    if (local_tid_19820 == 0) {\n        dynamic_id_19850 = atomic_add_i32_global(&((volatile __global\n                                                    int *) sortBagAndDoStuffziid_counter_mem_19787)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_19834)[(int64_t) 0] = dynamic_id_19850;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_19850 = ((__local int32_t *) local_mem_19834)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_19851 = sext_i32_i64(dynamic_id_19850) * (int64_t) 3 *\n            segscan_group_sizze_18750;\n    int64_t sgm_id",
            "x_19852 = smod64(blockOff_19851, g_16539);\n    int32_t boundary_19853 = sext_i64_i32(smin64((int64_t) 3 *\n                                                 segscan_group_sizze_18750,\n                                                 g_16539 - sgm_idx_19852));\n    int32_t segsizze_compact_19854 = sext_i64_i32(smin64((int64_t) 3 *\n                                                         segscan_group_sizze_18750,\n                                                         g_16539));\n    int64_t private_mem_19855[(int64_t) 3];\n    int64_t private_mem_19857[(int64_t) 3];\n    int64_t private_mem_19859[(int64_t) 3];\n    int64_t private_mem_19861[(int64_t) 3];\n    \n    // Load and map\n    {\n        for (int64_t i_19863 = 0; i_19863 < (int64_t) 3; i_19863++) {\n            int64_t phys_tid_19864 = blockOff_19851 +\n                    sext_i32_i64(local_tid_19820) + i_19863 *\n                    segscan_group_sizze_18750;\n            int64_t slice_19865 = g_16539;\n            int64_t slice_19866 = b_16538 * slice_19865;\n            int64_t gtid_18758 = squot64(phys_tid_19864, slice_19865);\n            int64_t remnant_19867 = phys_tid_19864 - gtid_18758 * slice_19865;\n            int64_t gtid_18759 = remnant_19867;\n            int64_t remnant_19868 = remnant_19867 - gtid_18759;\n            \n            if (slt64(phys_tid_19864, b_16538 * g_16539)) {\n                float x_18774;\n                \n                x_18774 = ((__global float *) mem_param_19337)[gtid_18758 *\n                                                               g_16539 +\n                                                               gtid_18759];\n                \n                int32_t i32_arg_18775;\n                \n                i32_arg_18775 = futrts_to_bits32(x_18774);\n                \n                int32_t unsign_arg_18776 = ashr32(i32_arg_18775,\n                                                  defunc_0_get_bit_arg_18642);\n                int32_t unsign_arg_18777 = 1 & unsign_arg_18776;\n             ",
            "   int32_t unsign_arg_18778 = ashr32(i32_arg_18775, 31);\n                int32_t unsign_arg_18779 = 1 & unsign_arg_18778;\n                bool cond_18780 = unsign_arg_18779 == 1;\n                bool x_18781 = !cond_18780;\n                bool y_18782 = cond_f_res_18643 && x_18781;\n                bool cond_18783 = cond_18780 || y_18782;\n                int32_t defunc_1_get_bit_res_18784;\n                \n                if (cond_18783) {\n                    int32_t defunc_1_get_bit_res_t_res_18785 = 1 ^\n                            unsign_arg_18777;\n                    \n                    defunc_1_get_bit_res_18784 =\n                        defunc_1_get_bit_res_t_res_18785;\n                } else {\n                    defunc_1_get_bit_res_18784 = unsign_arg_18777;\n                }\n                \n                int32_t x_18786 = mul32(2, defunc_1_get_bit_res_18784);\n                int32_t unsign_arg_18787 = ashr32(i32_arg_18775,\n                                                  defunc_2_radix_sort_step_arg_18641);\n                int32_t unsign_arg_18788 = 1 & unsign_arg_18787;\n                bool y_18789 = cond_f_res_18644 && x_18781;\n                bool cond_18790 = cond_18780 || y_18789;\n                int32_t defunc_1_get_bit_res_18791;\n                \n                if (cond_18790) {\n                    int32_t defunc_1_get_bit_res_t_res_18792 = 1 ^\n                            unsign_arg_18788;\n                    \n                    defunc_1_get_bit_res_18791 =\n                        defunc_1_get_bit_res_t_res_18792;\n                } else {\n                    defunc_1_get_bit_res_18791 = unsign_arg_18788;\n                }\n                \n                int32_t defunc_0_f_res_18793 = add32(x_18786,\n                                                     defunc_1_get_bit_res_18791);\n                bool cond_18794 = defunc_0_f_res_18793 == 0;\n                int64_t defunc_0_f_res_18795 = btoi_bool_i64(cond_18794);\n                int64_t defunc_0_",
            "f_res_18796;\n                int64_t defunc_0_f_res_18797;\n                int64_t defunc_0_f_res_18798;\n                \n                if (cond_18794) {\n                    defunc_0_f_res_18796 = (int64_t) 0;\n                    defunc_0_f_res_18797 = (int64_t) 0;\n                    defunc_0_f_res_18798 = (int64_t) 0;\n                } else {\n                    bool cond_18799 = defunc_0_f_res_18793 == 1;\n                    int64_t defunc_0_f_res_f_res_18800 =\n                            btoi_bool_i64(cond_18799);\n                    int64_t defunc_0_f_res_f_res_18801;\n                    int64_t defunc_0_f_res_f_res_18802;\n                    \n                    if (cond_18799) {\n                        defunc_0_f_res_f_res_18801 = (int64_t) 0;\n                        defunc_0_f_res_f_res_18802 = (int64_t) 0;\n                    } else {\n                        bool cond_18803 = defunc_0_f_res_18793 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_18804 =\n                                btoi_bool_i64(cond_18803);\n                        bool cond_neg_18805 = !cond_18803;\n                        int64_t defunc_0_f_res_f_res_f_res_18806 =\n                                btoi_bool_i64(cond_neg_18805);\n                        \n                        defunc_0_f_res_f_res_18801 =\n                            defunc_0_f_res_f_res_f_res_18804;\n                        defunc_0_f_res_f_res_18802 =\n                            defunc_0_f_res_f_res_f_res_18806;\n                    }\n                    defunc_0_f_res_18796 = defunc_0_f_res_f_res_18800;\n                    defunc_0_f_res_18797 = defunc_0_f_res_f_res_18801;\n                    defunc_0_f_res_18798 = defunc_0_f_res_f_res_18802;\n                }\n                ((__global int32_t *) mem_19410)[gtid_18758 * g_16539 +\n                                                 gtid_18759] =\n                    defunc_0_f_res_18793;\n                private_mem_19855[i_19863] = defunc_0_f_res_18795;\n      ",
            "          private_mem_19857[i_19863] = defunc_0_f_res_18796;\n                private_mem_19859[i_19863] = defunc_0_f_res_18797;\n                private_mem_19861[i_19863] = defunc_0_f_res_18798;\n            } else {\n                private_mem_19855[i_19863] = (int64_t) 0;\n                private_mem_19857[i_19863] = (int64_t) 0;\n                private_mem_19859[i_19863] = (int64_t) 0;\n                private_mem_19861[i_19863] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19869 = 0; i_19869 < (int64_t) 3; i_19869++) {\n            int64_t sharedIdx_19870 = sext_i32_i64(local_tid_19820) + i_19869 *\n                    segscan_group_sizze_18750;\n            int64_t tmp_19871;\n            \n            tmp_19871 = private_mem_19855[i_19869];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_19870] = tmp_19871;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19872 = 0; i_19872 < 3; i_19872++) {\n            int32_t sharedIdx_19873 = local_tid_19820 * 3 + i_19872;\n            int64_t tmp_19874;\n            \n            tmp_19874 = ((__local\n                          int64_t *) local_mem_19834)[sext_i32_i64(sharedIdx_19873)];\n            private_mem_19855[sext_i32_i64(i_19872)] = tmp_19874;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19875 = 0; i_19875 < (int64_t) 3; i_19875++) {\n            int64_t sharedIdx_19876 = sext_i32_i64(local_tid_19820) + i_19875 *\n                    segscan_group_sizze_18750;\n            int64_t tmp_19877;\n            \n            tmp_19877 = private_mem_19857[i_19875];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_19876] = tmp_19877;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19878 = 0; i_19878 < 3; i_19878++) {\n            int32_t sharedIdx_19879 = local_tid_19820 * 3 + i_19878;\n            int64_t tmp_19880;\n            \n            tmp_19880 = ((_",
            "_local\n                          int64_t *) local_mem_19834)[sext_i32_i64(sharedIdx_19879)];\n            private_mem_19857[sext_i32_i64(i_19878)] = tmp_19880;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19881 = 0; i_19881 < (int64_t) 3; i_19881++) {\n            int64_t sharedIdx_19882 = sext_i32_i64(local_tid_19820) + i_19881 *\n                    segscan_group_sizze_18750;\n            int64_t tmp_19883;\n            \n            tmp_19883 = private_mem_19859[i_19881];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_19882] = tmp_19883;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19884 = 0; i_19884 < 3; i_19884++) {\n            int32_t sharedIdx_19885 = local_tid_19820 * 3 + i_19884;\n            int64_t tmp_19886;\n            \n            tmp_19886 = ((__local\n                          int64_t *) local_mem_19834)[sext_i32_i64(sharedIdx_19885)];\n            private_mem_19859[sext_i32_i64(i_19884)] = tmp_19886;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_19887 = 0; i_19887 < (int64_t) 3; i_19887++) {\n            int64_t sharedIdx_19888 = sext_i32_i64(local_tid_19820) + i_19887 *\n                    segscan_group_sizze_18750;\n            int64_t tmp_19889;\n            \n            tmp_19889 = private_mem_19861[i_19887];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_19888] = tmp_19889;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_19890 = 0; i_19890 < 3; i_19890++) {\n            int32_t sharedIdx_19891 = local_tid_19820 * 3 + i_19890;\n            int64_t tmp_19892;\n            \n            tmp_19892 = ((__local\n                          int64_t *) local_mem_19834)[sext_i32_i64(sharedIdx_19891)];\n            private_mem_19861[sext_i32_i64(i_19890)] = tmp_19892;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        int32_t gidx_19893 = local_tid_19820 * 3 + 1;\n        \n        for (int64_t i_19894 = 0; i_198",
            "94 < (int64_t) 2; i_19894++) {\n            bool new_sgm_19895 = smod32(gidx_19893 + sext_i64_i32(i_19894) -\n                                        boundary_19853,\n                                        segsizze_compact_19854) == 0;\n            \n            if (!new_sgm_19895) {\n                int64_t x_18761;\n                int64_t x_18765;\n                \n                x_18761 = private_mem_19855[i_19894];\n                x_18765 = private_mem_19855[i_19894 + (int64_t) 1];\n                \n                int64_t x_18762;\n                int64_t x_18766;\n                \n                x_18762 = private_mem_19857[i_19894];\n                x_18766 = private_mem_19857[i_19894 + (int64_t) 1];\n                \n                int64_t x_18763;\n                int64_t x_18767;\n                \n                x_18763 = private_mem_19859[i_19894];\n                x_18767 = private_mem_19859[i_19894 + (int64_t) 1];\n                \n                int64_t x_18764;\n                int64_t x_18768;\n                \n                x_18764 = private_mem_19861[i_19894];\n                x_18768 = private_mem_19861[i_19894 + (int64_t) 1];\n                \n                int64_t defunc_1_op_res_18769 = add64(x_18761, x_18765);\n                int64_t defunc_1_op_res_18770 = add64(x_18762, x_18766);\n                int64_t defunc_1_op_res_18771 = add64(x_18763, x_18767);\n                int64_t defunc_1_op_res_18772 = add64(x_18764, x_18768);\n                \n                private_mem_19855[i_19894 + (int64_t) 1] =\n                    defunc_1_op_res_18769;\n                private_mem_19857[i_19894 + (int64_t) 1] =\n                    defunc_1_op_res_18770;\n                private_mem_19859[i_19894 + (int64_t) 1] =\n                    defunc_1_op_res_18771;\n                private_mem_19861[i_19894 + (int64_t) 1] =\n                    defunc_1_op_res_18772;\n            }\n        }\n    }\n    // Publish results in shared memory\n    {\n        int64_t tmp_19896;\n        \n  ",
            "      tmp_19896 = private_mem_19855[(int64_t) 2];\n        ((__local int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n            tmp_19896;\n        \n        int64_t tmp_19897;\n        \n        tmp_19897 = private_mem_19857[(int64_t) 2];\n        ((__local int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n            tmp_19897;\n        \n        int64_t tmp_19898;\n        \n        tmp_19898 = private_mem_19859[(int64_t) 2];\n        ((__local int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n            tmp_19898;\n        \n        int64_t tmp_19899;\n        \n        tmp_19899 = private_mem_19861[(int64_t) 2];\n        ((__local int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n            tmp_19899;\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_19912;\n    int64_t acc_19913;\n    int64_t acc_19914;\n    int64_t acc_19915;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_19900;\n        int64_t x_19901;\n        int64_t x_19902;\n        int64_t x_19903;\n        int64_t x_19904;\n        int64_t x_19905;\n        int64_t x_19906;\n        int64_t x_19907;\n        int64_t x_19916;\n        int64_t x_19917;\n        int64_t x_19918;\n        int64_t x_19919;\n        int64_t x_19920;\n        int64_t x_19921;\n        int64_t x_19922;\n        int64_t x_19923;\n        bool ltid_in_bounds_19928 = slt64(sext_i32_i64(local_tid_19820),\n                 ",
            "                         segscan_group_sizze_18750);\n        int32_t skip_threads_19929;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_19928) {\n                x_19904 = ((volatile __local\n                            int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19820)];\n                x_19905 = ((volatile __local\n                            int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19820)];\n                x_19906 = ((volatile __local\n                            int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19820)];\n                x_19907 = ((volatile __local\n                            int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_19820)];\n                if ((local_tid_19820 - squot32(local_tid_19820, 32) * 32) ==\n                    0) {\n                    x_19900 = x_19904;\n                    x_19901 = x_19905;\n                    x_19902 = x_19906;\n                    x_19903 = x_19907;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_19929 = 1;\n            while (slt32(skip_threads_19929, 32)) {\n                bool thread_active_19930 = sle32(skip_threads_19929,\n                                                 local_tid_19820 -\n                                      ",
            "           squot32(local_tid_19820, 32) *\n                                                 32) && ltid_in_bounds_19928;\n                \n                if (thread_active_19930) {\n                    // read operands\n                    {\n                        x_19900 = ((volatile __local\n                                    int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19820) -\n                                                                 sext_i32_i64(skip_threads_19929))];\n                        x_19901 = ((volatile __local\n                                    int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19820) -\n                                                                 sext_i32_i64(skip_threads_19929))];\n                        x_19902 = ((volatile __local\n                                    int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19820) -\n                                                                 sext_i32_i64(skip_threads_19929))];\n                        x_19903 = ((volatile __local\n                                    int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_19820) -\n                                                                 sext_i32_i64(skip_threads_19929))];\n                    }\n                }\n ",
            "               // perform operation\n                {\n                    bool inactive_19931 = slt32(smod32((local_tid_19820 + 1) *\n                                                       3 - 1 +\n                                                       segsizze_compact_19854 -\n                                                       boundary_19853,\n                                                       segsizze_compact_19854),\n                                                (local_tid_19820 + 1) * 3 - 1 -\n                                                ((local_tid_19820 -\n                                                  skip_threads_19929 + 1) * 3 -\n                                                 1));\n                    \n                    if (thread_active_19930 && inactive_19931) {\n                        x_19900 = x_19904;\n                        x_19901 = x_19905;\n                        x_19902 = x_19906;\n                        x_19903 = x_19907;\n                    }\n                    if (thread_active_19930) {\n                        if (!inactive_19931) {\n                            int64_t defunc_1_op_res_19908 = add64(x_19900,\n                                                                  x_19904);\n                            int64_t defunc_1_op_res_19909 = add64(x_19901,\n                                                                  x_19905);\n                            int64_t defunc_1_op_res_19910 = add64(x_19902,\n                                                                  x_19906);\n                            int64_t defunc_1_op_res_19911 = add64(x_19903,\n                                                                  x_19907);\n                            \n                            x_19900 = defunc_1_op_res_19908;\n                            x_19901 = defunc_1_op_res_19909;\n                            x_19902 = defunc_1_op_res_19910;\n                            x_19903 = defunc_1_op_res_19911;\n                        }\n              ",
            "      }\n                }\n                if (sle32(wave_sizze_19822, skip_threads_19929)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (thread_active_19930) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19820)] =\n                            x_19900;\n                        x_19904 = x_19900;\n                        ((volatile __local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19820)] =\n                            x_19901;\n                        x_19905 = x_19901;\n                        ((volatile __local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19820)] =\n                            x_19902;\n                        x_19906 = x_19902;\n                        ((volatile __local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_19820)] =\n                            x_19903;\n                        x_19907 = x_19903;\n                    }\n                }\n                if (sle32(wave_sizze_19822, skip_threads_19929)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_19929 *= 2;\n            }\n        }\n        barrier(CLK_LO",
            "CAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_19820 - squot32(local_tid_19820, 32) * 32) == 31 &&\n                ltid_in_bounds_19928) {\n                ((volatile __local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19820,\n                                                                   32))] =\n                    x_19900;\n                ((volatile __local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19820,\n                                                                   32))] =\n                    x_19901;\n                ((volatile __local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19820,\n                                                                   32))] =\n                    x_19902;\n                ((volatile __local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_19820,\n                                                                   32))] =\n                    x_19903;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_19932;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_19820, 32) =",
            "= 0 && ltid_in_bounds_19928) {\n                    x_19920 = ((volatile __local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19820)];\n                    x_19921 = ((volatile __local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19820)];\n                    x_19922 = ((volatile __local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19820)];\n                    x_19923 = ((volatile __local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_19820)];\n                    if ((local_tid_19820 - squot32(local_tid_19820, 32) * 32) ==\n                        0) {\n                        x_19916 = x_19920;\n                        x_19917 = x_19921;\n                        x_19918 = x_19922;\n                        x_19919 = x_19923;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_19932 = 1;\n                while (slt32(skip_threads_19932, 32)) {\n                    bool thread_active_19933 = sle32(skip_threads_19932,\n                                                     local_tid_19820 -\n                                                     squot32(local_tid_",
            "19820,\n                                                             32) * 32) &&\n                         (squot32(local_tid_19820, 32) == 0 &&\n                          ltid_in_bounds_19928);\n                    \n                    if (thread_active_19933) {\n                        // read operands\n                        {\n                            x_19916 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19820) -\n                                                                     sext_i32_i64(skip_threads_19932))];\n                            x_19917 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19820) -\n                                                                     sext_i32_i64(skip_threads_19932))];\n                            x_19918 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_19820) -\n                                                                     sext_i32_i64(skip_threads_19932))];\n                            x_19919 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_",
            "i64(local_tid_19820) -\n                                                                     sext_i32_i64(skip_threads_19932))];\n                        }\n                    }\n                    // perform operation\n                    {\n                        bool inactive_19934 = slt32(smod32((local_tid_19820 *\n                                                            32 + 32 - 1 + 1) *\n                                                           3 - 1 +\n                                                           segsizze_compact_19854 -\n                                                           boundary_19853,\n                                                           segsizze_compact_19854),\n                                                    (local_tid_19820 * 32 + 32 -\n                                                     1 + 1) * 3 - 1 -\n                                                    (((local_tid_19820 -\n                                                       skip_threads_19932) *\n                                                      32 + 32 - 1 + 1) * 3 -\n                                                     1));\n                        \n                        if (thread_active_19933 && inactive_19934) {\n                            x_19916 = x_19920;\n                            x_19917 = x_19921;\n                            x_19918 = x_19922;\n                            x_19919 = x_19923;\n                        }\n                        if (thread_active_19933) {\n                            if (!inactive_19934) {\n                                int64_t defunc_1_op_res_19924 = add64(x_19916,\n                                                                      x_19920);\n                                int64_t defunc_1_op_res_19925 = add64(x_19917,\n                                                                      x_19921);\n                                int64_t defunc_1_op_res_19926 = add64(x_19918,\n                                                   ",
            "                   x_19922);\n                                int64_t defunc_1_op_res_19927 = add64(x_19919,\n                                                                      x_19923);\n                                \n                                x_19916 = defunc_1_op_res_19924;\n                                x_19917 = defunc_1_op_res_19925;\n                                x_19918 = defunc_1_op_res_19926;\n                                x_19919 = defunc_1_op_res_19927;\n                            }\n                        }\n                    }\n                    if (sle32(wave_sizze_19822, skip_threads_19932)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (thread_active_19933) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19820)] =\n                                x_19916;\n                            x_19920 = x_19916;\n                            ((volatile __local\n                              int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19820)] =\n                                x_19917;\n                            x_19921 = x_19917;\n                            ((volatile __local\n                              int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19820)] =\n                                x_19918;\n                            x_19922 = x_19918;\n  ",
            "                          ((volatile __local\n                              int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_19820)] =\n                                x_19919;\n                            x_19923 = x_19919;\n                        }\n                    }\n                    if (sle32(wave_sizze_19822, skip_threads_19932)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_19932 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        bool no_carry_in_19935 = squot32(local_tid_19820, 32) == 0 ||\n             !ltid_in_bounds_19928;\n        \n        // carry-in for every block except the first\n        {\n            // read operands\n            {\n                if (!no_carry_in_19935) {\n                    x_19904 = x_19900;\n                    x_19905 = x_19901;\n                    x_19906 = x_19902;\n                    x_19907 = x_19903;\n                    x_19900 = ((__local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19820,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19901 = ((__local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19820,\n                                                                            ",
            "      32)) -\n                                                             (int64_t) 1)];\n                    x_19902 = ((__local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19820,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_19903 = ((__local\n                                int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_19820,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n            }\n            // perform operation\n            {\n                bool inactive_19936 = slt32(smod32((local_tid_19820 + 1) * 3 -\n                                                   1 + segsizze_compact_19854 -\n                                                   boundary_19853,\n                                                   segsizze_compact_19854),\n                                            (local_tid_19820 + 1) * 3 - 1 -\n                                            ((squot32(local_tid_19820, 32) *\n                                              32 - 1 + 1) * 3 - 1));\n                \n                if (!no_carry_in_19935) {\n                    if (inactive_19936) {\n                        x_19900 = x_19904;\n                        x_19901 = x_19905;\n                        x_19902 = x_19906;\n                        x_19903 = x_19907;\n                    }\n                }\n                if (!no_carry_in_19935) {\n   ",
            "                 if (!inactive_19936) {\n                        int64_t defunc_1_op_res_19908 = add64(x_19900, x_19904);\n                        int64_t defunc_1_op_res_19909 = add64(x_19901, x_19905);\n                        int64_t defunc_1_op_res_19910 = add64(x_19902, x_19906);\n                        int64_t defunc_1_op_res_19911 = add64(x_19903, x_19907);\n                        \n                        x_19900 = defunc_1_op_res_19908;\n                        x_19901 = defunc_1_op_res_19909;\n                        x_19902 = defunc_1_op_res_19910;\n                        x_19903 = defunc_1_op_res_19911;\n                    }\n                }\n            }\n            // write final result\n            {\n                if (!no_carry_in_19935) {\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        x_19900;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        x_19901;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        x_19902;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        x_19903;\n                }\n            }\n        }\n        b",
            "arrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_19820, 32) == 0 && ltid_in_bounds_19928) {\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n                    x_19904;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n                    x_19905;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n                    x_19906;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_19820)] =\n                    x_19907;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_19820 == 0) {\n            acc_19912 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18750 -\n                                                       (int64_t) 1)];\n            acc_19913 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                              (int64_t) 8) +\n                                                   ",
            "   (segscan_group_sizze_18750 -\n                                                       (int64_t) 1)];\n            acc_19914 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18750 -\n                                                       (int64_t) 1)];\n            acc_19915 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_18750 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_19912 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19824,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19820) -\n                                                       (int64_t) 1)];\n            acc_19913 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19825,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19820) -\n                                                       (int64_t) 1)];\n            acc_19914 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19826,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19820) -\n                                                       (int64_t) 1)];\n            acc_19915 = ((__local\n                          int64_t *) local_mem_19834)[squot64(byte_offsets_19827,\n                       ",
            "                                       (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_19820) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_19937 = (int64_t) 0;\n    int64_t prefix_19938 = (int64_t) 0;\n    int64_t prefix_19939 = (int64_t) 0;\n    int64_t prefix_19940 = (int64_t) 0;\n    bool block_new_sgm_19941 = sgm_idx_19852 == (int64_t) 0;\n    \n    // Perform lookback\n    {\n        if (block_new_sgm_19941 && local_tid_19820 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_19793)[dynamic_id_19850] = acc_19912;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19797)[dynamic_id_19850] = acc_19913;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19801)[dynamic_id_19850] = acc_19914;\n            ((volatile __global\n              int64_t *) incprefixes_mem_19805)[dynamic_id_19850] = acc_19915;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_19789)[dynamic_id_19850] = (int8_t) 2;\n            acc_19912 = (int64_t) 0;\n            acc_19913 = (int64_t) 0;\n            acc_19914 = (int64_t) 0;\n            acc_19915 = (int64_t) 0;\n        }\n        if (!block_new_sgm_19941 && slt32(local_tid_19820, wave_sizze_19822)) {\n            if (local_tid_19820 == 0) {\n                if (boundary_19853 == sext_i64_i32(segscan_group_sizze_18750 *\n                    (int64_t) 3)) {\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19791)[dynamic_id_19850] =\n                        acc_19912;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19795)[dynamic_id_19850] =\n                        acc_19913;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19799)[dynamic_id_19850] =\n                   ",
            "     acc_19914;\n                    ((volatile __global\n                      int64_t *) aggregates_mem_19803)[dynamic_id_19850] =\n                        acc_19915;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19789)[dynamic_id_19850] =\n                        (int8_t) 1;\n                } else {\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19793)[dynamic_id_19850] =\n                        acc_19912;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19797)[dynamic_id_19850] =\n                        acc_19913;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19801)[dynamic_id_19850] =\n                        acc_19914;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19805)[dynamic_id_19850] =\n                        acc_19915;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19789)[dynamic_id_19850] =\n                        (int8_t) 2;\n                }\n                \n                int8_t tmp_19942;\n                \n                tmp_19942 = ((volatile __global\n                              int8_t *) status_flags_mem_19789)[dynamic_id_19850 -\n                                                                (int64_t) 1];\n                ((volatile __local int8_t *) local_mem_19834)[(int64_t) 0] =\n                    tmp_19942;\n            }\n            mem_fence_local();\n            \n            int8_t status_19943;\n            \n            status_19943 = ((__local int8_t *) local_mem_19834)[(int64_t) 0];\n            if (status_19943 == (int8_t) 2) {\n                if (local_tid_19820 == 0) {\n                    prefix_19937 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19793)[dynamic_id_19850 -\n ",
            "                                                                      (int64_t) 1];\n                    prefix_19938 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19797)[dynamic_id_19850 -\n                                                                       (int64_t) 1];\n                    prefix_19939 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19801)[dynamic_id_19850 -\n                                                                       (int64_t) 1];\n                    prefix_19940 = ((volatile __global\n                                     int64_t *) incprefixes_mem_19805)[dynamic_id_19850 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_19944 = dynamic_id_19850 -\n                        sext_i32_i64(wave_sizze_19822);\n                \n                while (slt32(wave_sizze_19822 * -1, readOffset_19944)) {\n                    int32_t read_i_19945 = readOffset_19944 + local_tid_19820;\n                    int64_t aggr_19946 = (int64_t) 0;\n                    int64_t aggr_19947 = (int64_t) 0;\n                    int64_t aggr_19948 = (int64_t) 0;\n                    int64_t aggr_19949 = (int64_t) 0;\n                    int8_t flag_19950 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_19945)) {\n                        if (sle64(blockOff_19851 - (sext_i32_i64(read_i_19945 +\n                                                    1) *\n                                                    segscan_group_sizze_18750 *\n                                                    (int64_t) 3 - (int64_t) 1),\n                                  sgm_idx_19852)) {\n                            flag_19950 = ((volatile __global\n                                           int8_t *) status_flags_mem_19789)[sext_i32_i64(read_i_19945)];\n                            if (flag_19950 ==",
            " (int8_t) 2) {\n                                aggr_19946 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19793)[sext_i32_i64(read_i_19945)];\n                                aggr_19947 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19797)[sext_i32_i64(read_i_19945)];\n                                aggr_19948 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19801)[sext_i32_i64(read_i_19945)];\n                                aggr_19949 = ((volatile __global\n                                               int64_t *) incprefixes_mem_19805)[sext_i32_i64(read_i_19945)];\n                            } else {\n                                if (flag_19950 == (int8_t) 1) {\n                                    aggr_19946 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19791)[sext_i32_i64(read_i_19945)];\n                                    aggr_19947 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19795)[sext_i32_i64(read_i_19945)];\n                                    aggr_19948 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19799)[sext_i32_i64(read_i_19945)];\n                                    aggr_19949 = ((volatile __global\n                                                   int64_t *) aggregates_mem_19803)[sext_i32_i64(read_i_19945)];\n                                }\n                            }\n                        } else {\n                            flag_19950 = (int8_t) 2;\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_",
            "19820)] =\n                        aggr_19946;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        aggr_19947;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        aggr_19948;\n                    ((__local\n                      int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_19820)] =\n                        aggr_19949;\n                    ((__local\n                      int8_t *) local_mem_19834)[sext_i32_i64(local_tid_19820)] =\n                        flag_19950;\n                    flag_19950 = ((__local\n                                   int8_t *) local_mem_19834)[sext_i32_i64(wave_sizze_19822) -\n                                                              (int64_t) 1];\n                    if (slt8(flag_19950, (int8_t) 2)) {\n                        int8_t flg_x_19963;\n                        int8_t flg_y_19964;\n                        int64_t x_19951;\n                        int64_t x_19952;\n                        int64_t x_19953;\n                        int64_t x_19954;\n                        int64_t x_19955;\n                        int64_t x_19956;\n                        int64_t x_19957;\n                        int64_t x_19958;\n                        int32_t skip_threads_19965;\n                        \n                        // read input for in-block scan\n                        {\n                            flg_y_19964 = ((volat",
            "ile __local\n                                            int8_t *) local_mem_19834)[sext_i32_i64(local_tid_19820)];\n                            x_19955 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19820)];\n                            x_19956 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19820)];\n                            x_19957 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19820)];\n                            x_19958 = ((volatile __local\n                                        int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                                            (int64_t) 8) +\n                                                                    sext_i32_i64(local_tid_19820)];\n                            if ((local_tid_19820 - squot32(local_tid_19820,\n                                                           32) * 32) == 0) {\n                                x_19951 = x_19955;\n                                x_19952 = x_19956;\n                                x_19953 = x_19957;\n                                x_19954 = x_19958;\n                                flg_x_19963 = flg_y_19964;\n                            }\n                        }\n                     ",
            "   // in-block scan (hopefully no barriers needed)\n                        {\n                            skip_threads_19965 = 1;\n                            while (slt32(skip_threads_19965, 32)) {\n                                if (sle32(skip_threads_19965, local_tid_19820 -\n                                          squot32(local_tid_19820, 32) * 32)) {\n                                    // read operands\n                                    {\n                                        flg_x_19963 = ((volatile __local\n                                                        int8_t *) local_mem_19834)[sext_i32_i64(local_tid_19820) -\n                                                                                   sext_i32_i64(skip_threads_19965)];\n                                        x_19951 = ((volatile __local\n                                                    int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19820) -\n                                                                                 sext_i32_i64(skip_threads_19965))];\n                                        x_19952 = ((volatile __local\n                                                    int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19820) -\n                                                                                 sext_i32_i64(skip_threads_19965))];\n                                        x_19953 = ((volatile __local\n                                                    int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                     ",
            "                                                   (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19820) -\n                                                                                 sext_i32_i64(skip_threads_19965))];\n                                        x_19954 = ((volatile __local\n                                                    int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                                                        (int64_t) 8) +\n                                                                                (sext_i32_i64(local_tid_19820) -\n                                                                                 sext_i32_i64(skip_threads_19965))];\n                                    }\n                                    // perform operation\n                                    {\n                                        if (flg_y_19964 == (int8_t) 2 ||\n                                            flg_y_19964 == (int8_t) 0) {\n                                            flg_x_19963 = flg_y_19964;\n                                            x_19951 = x_19955;\n                                            x_19952 = x_19956;\n                                            x_19953 = x_19957;\n                                            x_19954 = x_19958;\n                                        } else {\n                                            int64_t defunc_1_op_res_19959 =\n                                                    add64(x_19951, x_19955);\n                                            int64_t defunc_1_op_res_19960 =\n                                                    add64(x_19952, x_19956);\n                                            int64_t defunc_1_op_res_19961 =\n                                                    add64(x_19953, x_19957);\n                                            int64_t defunc_1_op_res_19962 =\n    ",
            "                                                add64(x_19954, x_19958);\n                                            \n                                            x_19951 = defunc_1_op_res_19959;\n                                            x_19952 = defunc_1_op_res_19960;\n                                            x_19953 = defunc_1_op_res_19961;\n                                            x_19954 = defunc_1_op_res_19962;\n                                        }\n                                    }\n                                    // write result\n                                    {\n                                        ((volatile __local\n                                          int8_t *) local_mem_19834)[sext_i32_i64(local_tid_19820)] =\n                                            flg_x_19963;\n                                        flg_y_19964 = flg_x_19963;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19820)] =\n                                            x_19951;\n                                        x_19955 = x_19951;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19820)] =\n                                            x_19952;\n                                        x_19956 = x_19952;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                    ",
            "                                                          (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19820)] =\n                                            x_19953;\n                                        x_19957 = x_19953;\n                                        ((volatile __local\n                                          int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                                              (int64_t) 8) +\n                                                                      sext_i32_i64(local_tid_19820)] =\n                                            x_19954;\n                                        x_19958 = x_19954;\n                                    }\n                                }\n                                skip_threads_19965 *= 2;\n                            }\n                        }\n                    }\n                    flag_19950 = ((__local\n                                   int8_t *) local_mem_19834)[sext_i32_i64(wave_sizze_19822) -\n                                                              (int64_t) 1];\n                    aggr_19946 = ((__local\n                                   int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19822) -\n                                                                (int64_t) 1)];\n                    aggr_19947 = ((__local\n                                   int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19822) -\n                                                                (int64_t) 1)];\n                    ag",
            "gr_19948 = ((__local\n                                   int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19822) -\n                                                                (int64_t) 1)];\n                    aggr_19949 = ((__local\n                                   int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                                       (int64_t) 8) +\n                                                               (sext_i32_i64(wave_sizze_19822) -\n                                                                (int64_t) 1)];\n                    if (flag_19950 == (int8_t) 2) {\n                        readOffset_19944 = wave_sizze_19822 * -1;\n                    } else {\n                        if (flag_19950 == (int8_t) 1) {\n                            readOffset_19944 -= wave_sizze_19822;\n                        }\n                    }\n                    if (slt8((int8_t) 0, flag_19950)) {\n                        int64_t x_19966 = aggr_19946;\n                        int64_t x_19967 = aggr_19947;\n                        int64_t x_19968 = aggr_19948;\n                        int64_t x_19969 = aggr_19949;\n                        int64_t x_19970 = prefix_19937;\n                        int64_t x_19971 = prefix_19938;\n                        int64_t x_19972 = prefix_19939;\n                        int64_t x_19973 = prefix_19940;\n                        int64_t defunc_1_op_res_19974 = add64(x_19966, x_19970);\n                        int64_t defunc_1_op_res_19975 = add64(x_19967, x_19971);\n                        int64_t defunc_1_op_res_19976 = add64(x_19968, x_19972);\n                        int64_t defunc_1_op_res_19977 = add64(x_19969, x_19973);\n                        \n                        prefix_19937 = defunc_1_op_res_19974",
            ";\n                        prefix_19938 = defunc_1_op_res_19975;\n                        prefix_19939 = defunc_1_op_res_19976;\n                        prefix_19940 = defunc_1_op_res_19977;\n                    }\n                    mem_fence_local();\n                }\n            }\n            if (local_tid_19820 == 0) {\n                if (boundary_19853 == sext_i64_i32(segscan_group_sizze_18750 *\n                    (int64_t) 3)) {\n                    int64_t x_19978 = prefix_19937;\n                    int64_t x_19979 = prefix_19938;\n                    int64_t x_19980 = prefix_19939;\n                    int64_t x_19981 = prefix_19940;\n                    int64_t x_19982 = acc_19912;\n                    int64_t x_19983 = acc_19913;\n                    int64_t x_19984 = acc_19914;\n                    int64_t x_19985 = acc_19915;\n                    int64_t defunc_1_op_res_19986 = add64(x_19978, x_19982);\n                    int64_t defunc_1_op_res_19987 = add64(x_19979, x_19983);\n                    int64_t defunc_1_op_res_19988 = add64(x_19980, x_19984);\n                    int64_t defunc_1_op_res_19989 = add64(x_19981, x_19985);\n                    \n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19793)[dynamic_id_19850] =\n                        defunc_1_op_res_19986;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19797)[dynamic_id_19850] =\n                        defunc_1_op_res_19987;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19801)[dynamic_id_19850] =\n                        defunc_1_op_res_19988;\n                    ((volatile __global\n                      int64_t *) incprefixes_mem_19805)[dynamic_id_19850] =\n                        defunc_1_op_res_19989;\n                    mem_fence_global();\n                    ((volatile __global\n                      int8_t *) status_flags_mem_19789)[dynamic_id_19850] =\n                       ",
            " (int8_t) 2;\n                }\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                      (int64_t) 8)] =\n                    prefix_19937;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                      (int64_t) 8)] =\n                    prefix_19938;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                                      (int64_t) 8)] =\n                    prefix_19939;\n                ((__local\n                  int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                      (int64_t) 8)] =\n                    prefix_19940;\n                acc_19912 = (int64_t) 0;\n                acc_19913 = (int64_t) 0;\n                acc_19914 = (int64_t) 0;\n                acc_19915 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_19850 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_19937 = ((__local\n                             int64_t *) local_mem_19834)[squot64(warp_byte_offset_19829,\n                                                                 (int64_t) 8)];\n            prefix_19938 = ((__local\n                             int64_t *) local_mem_19834)[squot64(warp_byte_offset_19830,\n                                                                 (int64_t) 8)];\n            prefix_19939 = ((__local\n                             int64_t *) local_mem_19834)[squot64(warp_byte_offset_19831,\n                                                                 (int64_t) 8)];\n            prefix_19940 = ((__local\n                             int64_t *) local_mem_19834)[squot64(warp_byte_offset_19832,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM",
            "_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_19990;\n        int64_t x_19994;\n        int64_t x_20002 = prefix_19937;\n        int64_t x_20006 = acc_19912;\n        int64_t x_19991;\n        int64_t x_19995;\n        int64_t x_20003 = prefix_19938;\n        int64_t x_20007 = acc_19913;\n        int64_t x_19992;\n        int64_t x_19996;\n        int64_t x_20004 = prefix_19939;\n        int64_t x_20008 = acc_19914;\n        int64_t x_19993;\n        int64_t x_19997;\n        int64_t x_20005 = prefix_19940;\n        int64_t x_20009 = acc_19915;\n        \n        if (slt32(local_tid_19820 * 3, boundary_19853) &&\n            !block_new_sgm_19941) {\n            int64_t defunc_1_op_res_20010 = add64(x_20002, x_20006);\n            int64_t defunc_1_op_res_20011 = add64(x_20003, x_20007);\n            int64_t defunc_1_op_res_20012 = add64(x_20004, x_20008);\n            int64_t defunc_1_op_res_20013 = add64(x_20005, x_20009);\n            \n            x_19990 = defunc_1_op_res_20010;\n            x_19991 = defunc_1_op_res_20011;\n            x_19992 = defunc_1_op_res_20012;\n            x_19993 = defunc_1_op_res_20013;\n        } else {\n            x_19990 = acc_19912;\n            x_19991 = acc_19913;\n            x_19992 = acc_19914;\n            x_19993 = acc_19915;\n        }\n        \n        int32_t stopping_point_20014 = segsizze_compact_19854 -\n                srem32(local_tid_19820 * 3 - 1 + segsizze_compact_19854 -\n                       boundary_19853, segsizze_compact_19854);\n        \n        for (int64_t i_20015 = 0; i_20015 < (int64_t) 3; i_20015++) {\n            if (slt32(sext_i64_i32(i_20015), stopping_point_20014 - 1)) {\n                x_19994 = private_mem_19855[i_20015];\n                x_19995 = private_mem_19857[i_20015];\n                x_19996 = private_mem_19859[i_20015];\n                x_19997 = private_mem_19861[i_20015];\n                \n                int64_t defunc_1_op_res_19998 = add64(x_19990, x_19994);\n                int64_t defunc_1_o",
            "p_res_19999 = add64(x_19991, x_19995);\n                int64_t defunc_1_op_res_20000 = add64(x_19992, x_19996);\n                int64_t defunc_1_op_res_20001 = add64(x_19993, x_19997);\n                \n                private_mem_19855[i_20015] = defunc_1_op_res_19998;\n                private_mem_19857[i_20015] = defunc_1_op_res_19999;\n                private_mem_19859[i_20015] = defunc_1_op_res_20000;\n                private_mem_19861[i_20015] = defunc_1_op_res_20001;\n            }\n        }\n    }\n    // Transpose scan output and Write it to global memory in coalesced fashion\n    {\n        for (int64_t i_20016 = 0; i_20016 < (int64_t) 3; i_20016++) {\n            int64_t sharedIdx_20017 = sext_i32_i64(local_tid_19820 * 3) +\n                    i_20016;\n            int64_t tmp_20018;\n            \n            tmp_20018 = private_mem_19855[i_20016];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_20017] = tmp_20018;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20019 = 0; i_20019 < (int64_t) 3; i_20019++) {\n            int64_t flat_idx_20020 = blockOff_19851 +\n                    segscan_group_sizze_18750 * i_20019 +\n                    sext_i32_i64(local_tid_19820);\n            int64_t slice_20021 = g_16539;\n            int64_t slice_20022 = b_16538 * slice_20021;\n            int64_t gtid_18758 = squot64(flat_idx_20020, slice_20021);\n            int64_t remnant_20023 = flat_idx_20020 - gtid_18758 * slice_20021;\n            int64_t gtid_18759 = remnant_20023;\n            int64_t remnant_20024 = remnant_20023 - gtid_18759;\n            \n            if (slt64(flat_idx_20020, b_16538 * g_16539)) {\n                int64_t tmp_20025;\n                \n                tmp_20025 = ((__local\n                              int64_t *) local_mem_19834)[flat_idx_20020 -\n                                                          blockOff_19851];\n                ((__global int64_t *) mem_19394)[gtid_18758 * g_16539 +\n                                 ",
            "                gtid_18759] = tmp_20025;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20026 = 0; i_20026 < (int64_t) 3; i_20026++) {\n            int64_t sharedIdx_20027 = sext_i32_i64(local_tid_19820 * 3) +\n                    i_20026;\n            int64_t tmp_20028;\n            \n            tmp_20028 = private_mem_19857[i_20026];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_20027] = tmp_20028;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20029 = 0; i_20029 < (int64_t) 3; i_20029++) {\n            int64_t flat_idx_20030 = blockOff_19851 +\n                    segscan_group_sizze_18750 * i_20029 +\n                    sext_i32_i64(local_tid_19820);\n            int64_t slice_20031 = g_16539;\n            int64_t slice_20032 = b_16538 * slice_20031;\n            int64_t gtid_18758 = squot64(flat_idx_20030, slice_20031);\n            int64_t remnant_20033 = flat_idx_20030 - gtid_18758 * slice_20031;\n            int64_t gtid_18759 = remnant_20033;\n            int64_t remnant_20034 = remnant_20033 - gtid_18759;\n            \n            if (slt64(flat_idx_20030, b_16538 * g_16539)) {\n                int64_t tmp_20035;\n                \n                tmp_20035 = ((__local\n                              int64_t *) local_mem_19834)[flat_idx_20030 -\n                                                          blockOff_19851];\n                ((__global int64_t *) mem_19398)[gtid_18758 * g_16539 +\n                                                 gtid_18759] = tmp_20035;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20036 = 0; i_20036 < (int64_t) 3; i_20036++) {\n            int64_t sharedIdx_20037 = sext_i32_i64(local_tid_19820 * 3) +\n                    i_20036;\n            int64_t tmp_20038;\n            \n            tmp_20038 = private_mem_19859[i_20036];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_20037] = tmp_20038;\n        }\n        barrier(CLK_LOCAL",
            "_MEM_FENCE);\n        for (int64_t i_20039 = 0; i_20039 < (int64_t) 3; i_20039++) {\n            int64_t flat_idx_20040 = blockOff_19851 +\n                    segscan_group_sizze_18750 * i_20039 +\n                    sext_i32_i64(local_tid_19820);\n            int64_t slice_20041 = g_16539;\n            int64_t slice_20042 = b_16538 * slice_20041;\n            int64_t gtid_18758 = squot64(flat_idx_20040, slice_20041);\n            int64_t remnant_20043 = flat_idx_20040 - gtid_18758 * slice_20041;\n            int64_t gtid_18759 = remnant_20043;\n            int64_t remnant_20044 = remnant_20043 - gtid_18759;\n            \n            if (slt64(flat_idx_20040, b_16538 * g_16539)) {\n                int64_t tmp_20045;\n                \n                tmp_20045 = ((__local\n                              int64_t *) local_mem_19834)[flat_idx_20040 -\n                                                          blockOff_19851];\n                ((__global int64_t *) mem_19402)[gtid_18758 * g_16539 +\n                                                 gtid_18759] = tmp_20045;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20046 = 0; i_20046 < (int64_t) 3; i_20046++) {\n            int64_t sharedIdx_20047 = sext_i32_i64(local_tid_19820 * 3) +\n                    i_20046;\n            int64_t tmp_20048;\n            \n            tmp_20048 = private_mem_19861[i_20046];\n            ((__local int64_t *) local_mem_19834)[sharedIdx_20047] = tmp_20048;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_20049 = 0; i_20049 < (int64_t) 3; i_20049++) {\n            int64_t flat_idx_20050 = blockOff_19851 +\n                    segscan_group_sizze_18750 * i_20049 +\n                    sext_i32_i64(local_tid_19820);\n            int64_t slice_20051 = g_16539;\n            int64_t slice_20052 = b_16538 * slice_20051;\n            int64_t gtid_18758 = squot64(flat_idx_20050, slice_20051);\n            int64_t remnant_20053 = flat_idx_20050 - gtid_18758 * slic",
            "e_20051;\n            int64_t gtid_18759 = remnant_20053;\n            int64_t remnant_20054 = remnant_20053 - gtid_18759;\n            \n            if (slt64(flat_idx_20050, b_16538 * g_16539)) {\n                int64_t tmp_20055;\n                \n                tmp_20055 = ((__local\n                              int64_t *) local_mem_19834)[flat_idx_20050 -\n                                                          blockOff_19851];\n                ((__global int64_t *) mem_19406)[gtid_18758 * g_16539 +\n                                                 gtid_18759] = tmp_20055;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_19850 == sdiv_up64(b_16538 * g_16539,\n                                          segscan_group_sizze_18750 *\n                                          (int64_t) 3) - (int64_t) 1) {\n            ((__global\n              int32_t *) sortBagAndDoStuffziid_counter_mem_19787)[(int64_t) 0] =\n                0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_18750\n}\n",
            NULL};
static const char *tuning_param_names[] = {"builtin#iota_i64.group_size_19602",
                                           "builtin#replicate_i8.group_size_19814",
                                           "randomField.segmap_group_size_16704",
                                           "sortBag.group_size_19722",
                                           "sortBag.segmap_group_size_16777",
                                           "sortBag.segmap_group_size_17135",
                                           "sortBag.segmap_group_size_17301",
                                           "sortBag.segmap_group_size_17529",
                                           "sortBag.segmap_num_groups_16779",
                                           "sortBag.segscan_group_size_17350",
                                           "sortBag.segscan_num_groups_17352",
                                           "sortBag.suff_intra_par_1",
                                           "sortBag.suff_intra_par_2",
                                           "sortBag.suff_outer_par_0",
                                           "sortBagAndDoStuff.group_size_19730",
                                           "sortBagAndDoStuff.segmap_group_size_17839",
                                           "sortBagAndDoStuff.segmap_group_size_18203",
                                           "sortBagAndDoStuff.segmap_group_size_18371",
                                           "sortBagAndDoStuff.segmap_group_size_18599",
                                           "sortBagAndDoStuff.segmap_group_size_18901",
                                           "sortBagAndDoStuff.segmap_group_size_18930",
                                           "sortBagAndDoStuff.segmap_num_groups_17841",
                                           "sortBagAndDoStuff.segred_group_size_18215",
                                           "sortBagAndDoStuff.segred_group_size_18940",
                                           "sortBagAndDoStuff.segred_num_groups_18217",
                                           "sortBagAndDoStuff.segred_num_groups_18942",
                                           "sortBagAndDoStuff.segscan_group_size_18420",
                                           "sortBagAndDoStuff.segscan_num_groups_18422",
                                           "sortBagAndDoStuff.suff_intra_par_1",
                                           "sortBagAndDoStuff.suff_intra_par_2",
                                           "sortBagAndDoStuff.suff_outer_par_0",
                                           "sortBagAndDoStuff.suff_outer_par_3"};
static const char *tuning_param_vars[] =
                  {"builtinzhiota_i64zigroup_sizze_19602",
                   "builtinzhreplicate_i8zigroup_sizze_19814",
                   "randomFieldzisegmap_group_sizze_16704",
                   "sortBagzigroup_sizze_19722",
                   "sortBagzisegmap_group_sizze_16777",
                   "sortBagzisegmap_group_sizze_17135",
                   "sortBagzisegmap_group_sizze_17301",
                   "sortBagzisegmap_group_sizze_17529",
                   "sortBagzisegmap_num_groups_16779",
                   "sortBagzisegscan_group_sizze_17350",
                   "sortBagzisegscan_num_groups_17352",
                   "sortBagzisuff_intra_par_1", "sortBagzisuff_intra_par_2",
                   "sortBagzisuff_outer_par_0",
                   "sortBagAndDoStuffzigroup_sizze_19730",
                   "sortBagAndDoStuffzisegmap_group_sizze_17839",
                   "sortBagAndDoStuffzisegmap_group_sizze_18203",
                   "sortBagAndDoStuffzisegmap_group_sizze_18371",
                   "sortBagAndDoStuffzisegmap_group_sizze_18599",
                   "sortBagAndDoStuffzisegmap_group_sizze_18901",
                   "sortBagAndDoStuffzisegmap_group_sizze_18930",
                   "sortBagAndDoStuffzisegmap_num_groups_17841",
                   "sortBagAndDoStuffzisegred_group_sizze_18215",
                   "sortBagAndDoStuffzisegred_group_sizze_18940",
                   "sortBagAndDoStuffzisegred_num_groups_18217",
                   "sortBagAndDoStuffzisegred_num_groups_18942",
                   "sortBagAndDoStuffzisegscan_group_sizze_18420",
                   "sortBagAndDoStuffzisegscan_num_groups_18422",
                   "sortBagAndDoStuffzisuff_intra_par_1",
                   "sortBagAndDoStuffzisuff_intra_par_2",
                   "sortBagAndDoStuffzisuff_outer_par_0",
                   "sortBagAndDoStuffzisuff_outer_par_3"};
static const char *tuning_param_classes[] = {"group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "num_groups", "group_size",
                                             "num_groups",
                                             "threshold(32, !sortBag.suff_outer_par_0)",
                                             "threshold(32, !sortBag.suff_outer_par_0 !sortBag.suff_intra_par_1)",
                                             "threshold(def,)", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "group_size", "group_size",
                                             "num_groups", "group_size",
                                             "group_size", "num_groups",
                                             "num_groups", "group_size",
                                             "num_groups",
                                             "threshold(32, !sortBagAndDoStuff.suff_outer_par_0)",
                                             "threshold(32, !sortBagAndDoStuff.suff_outer_par_0 !sortBagAndDoStuff.suff_intra_par_1)",
                                             "threshold(def,)",
                                             "threshold(def,)"};
struct tuning_params {
    int64_t *builtinzhiota_i64zigroup_sizze_19602;
    int64_t *builtinzhreplicate_i8zigroup_sizze_19814;
    int64_t *randomFieldzisegmap_group_sizze_16704;
    int64_t *sortBagzigroup_sizze_19722;
    int64_t *sortBagzisegmap_group_sizze_16777;
    int64_t *sortBagzisegmap_group_sizze_17135;
    int64_t *sortBagzisegmap_group_sizze_17301;
    int64_t *sortBagzisegmap_group_sizze_17529;
    int64_t *sortBagzisegmap_num_groups_16779;
    int64_t *sortBagzisegscan_group_sizze_17350;
    int64_t *sortBagzisegscan_num_groups_17352;
    int64_t *sortBagzisuff_intra_par_1;
    int64_t *sortBagzisuff_intra_par_2;
    int64_t *sortBagzisuff_outer_par_0;
    int64_t *sortBagAndDoStuffzigroup_sizze_19730;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_17839;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18203;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18371;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18599;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18901;
    int64_t *sortBagAndDoStuffzisegmap_group_sizze_18930;
    int64_t *sortBagAndDoStuffzisegmap_num_groups_17841;
    int64_t *sortBagAndDoStuffzisegred_group_sizze_18215;
    int64_t *sortBagAndDoStuffzisegred_group_sizze_18940;
    int64_t *sortBagAndDoStuffzisegred_num_groups_18217;
    int64_t *sortBagAndDoStuffzisegred_num_groups_18942;
    int64_t *sortBagAndDoStuffzisegscan_group_sizze_18420;
    int64_t *sortBagAndDoStuffzisegscan_num_groups_18422;
    int64_t *sortBagAndDoStuffzisuff_intra_par_1;
    int64_t *sortBagAndDoStuffzisuff_intra_par_2;
    int64_t *sortBagAndDoStuffzisuff_outer_par_0;
    int64_t *sortBagAndDoStuffzisuff_outer_par_3;
};
struct futhark_context_config {
    int in_use;
    struct cuda_config cu_cfg;
    int profiling;
    int64_t tuning_params[32];
    int num_nvrtc_opts;
    const char **nvrtc_opts;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->profiling = 0;
    cfg->num_nvrtc_opts = 0;
    cfg->nvrtc_opts = (const char **) malloc(sizeof(const char *));
    cfg->nvrtc_opts[0] = NULL;
    cfg->tuning_params[0] = 0;
    cfg->tuning_params[1] = 0;
    cfg->tuning_params[2] = 0;
    cfg->tuning_params[3] = 0;
    cfg->tuning_params[4] = 0;
    cfg->tuning_params[5] = 0;
    cfg->tuning_params[6] = 0;
    cfg->tuning_params[7] = 0;
    cfg->tuning_params[8] = 0;
    cfg->tuning_params[9] = 0;
    cfg->tuning_params[10] = 0;
    cfg->tuning_params[11] = 32;
    cfg->tuning_params[12] = 32;
    cfg->tuning_params[13] = 0;
    cfg->tuning_params[14] = 0;
    cfg->tuning_params[15] = 0;
    cfg->tuning_params[16] = 0;
    cfg->tuning_params[17] = 0;
    cfg->tuning_params[18] = 0;
    cfg->tuning_params[19] = 0;
    cfg->tuning_params[20] = 0;
    cfg->tuning_params[21] = 0;
    cfg->tuning_params[22] = 0;
    cfg->tuning_params[23] = 0;
    cfg->tuning_params[24] = 0;
    cfg->tuning_params[25] = 0;
    cfg->tuning_params[26] = 0;
    cfg->tuning_params[27] = 0;
    cfg->tuning_params[28] = 32;
    cfg->tuning_params[29] = 32;
    cfg->tuning_params[30] = 0;
    cfg->tuning_params[31] = 0;
    cuda_config_init(&cfg->cu_cfg, 32, tuning_param_names, tuning_param_vars,
                     cfg->tuning_params, tuning_param_classes);
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg->nvrtc_opts);
    free(cfg);
}
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt)
{
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = opt;
    cfg->num_nvrtc_opts++;
    cfg->nvrtc_opts = (const char **) realloc(cfg->nvrtc_opts,
                                              (cfg->num_nvrtc_opts + 1) *
                                              sizeof(const char *));
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = NULL;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->cu_cfg.logging = cfg->cu_cfg.debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag)
{
    cfg->cu_cfg.logging = flag;
}
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s)
{
    set_preferred_device(&cfg->cu_cfg, s);
}
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path)
{
    cfg->cu_cfg.dump_program_to = path;
}
void futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                              const char *path)
{
    cfg->cu_cfg.load_program_from = path;
}
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path)
{
    cfg->cu_cfg.dump_ptx_to = path;
}
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path)
{
    cfg->cu_cfg.load_ptx_from = path;
}
void futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                                   int size)
{
    cfg->cu_cfg.default_block_size = size;
    cfg->cu_cfg.default_block_size_changed = 1;
}
void futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                                   int num)
{
    cfg->cu_cfg.default_grid_size = num;
    cfg->cu_cfg.default_grid_size_changed = 1;
}
void futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_tile_size = size;
    cfg->cu_cfg.default_tile_size_changed = 1;
}
void futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                      int size)
{
    cfg->cu_cfg.default_reg_tile_size = size;
}
void futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_threshold = size;
}
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t new_value)
{
    for (int i = 0; i < 32; i++) {
        if (strcmp(param_name, tuning_param_names[i]) == 0) {
            cfg->tuning_params[i] = new_value;
            return 0;
        }
    }
    if (strcmp(param_name, "default_group_size") == 0) {
        cfg->cu_cfg.default_block_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_num_groups") == 0) {
        cfg->cu_cfg.default_grid_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_threshold") == 0) {
        cfg->cu_cfg.default_threshold = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_tile_size") == 0) {
        cfg->cu_cfg.default_tile_size = new_value;
        return 0;
    }
    if (strcmp(param_name, "default_reg_tile_size") == 0) {
        cfg->cu_cfg.default_reg_tile_size = new_value;
        return 0;
    }
    return 1;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int64_t peak_mem_usage_device;
    int64_t cur_mem_usage_device;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    struct memblock_device sortBagziid_counter_mem_19779;
    struct memblock_device sortBagAndDoStuffziid_counter_mem_19787;
    struct memblock_device sortBagAndDoStuffzicounter_mem_20103;
    struct memblock_device sortBagAndDoStuffzicounter_mem_20195;
    CUfunction builtinzhiota_i64ziiota_i64_19599;
    int64_t builtinzhiota_i64ziiota_i64_19599_total_runtime;
    int builtinzhiota_i64ziiota_i64_19599_runs;
    CUfunction builtinzhreplicate_i8zireplicate_19811;
    int64_t builtinzhreplicate_i8zireplicate_19811_total_runtime;
    int builtinzhreplicate_i8zireplicate_19811_runs;
    CUfunction gpu_map_transpose_f32;
    int64_t gpu_map_transpose_f32_total_runtime;
    int gpu_map_transpose_f32_runs;
    CUfunction gpu_map_transpose_f32_low_height;
    int64_t gpu_map_transpose_f32_low_height_total_runtime;
    int gpu_map_transpose_f32_low_height_runs;
    CUfunction gpu_map_transpose_f32_low_width;
    int64_t gpu_map_transpose_f32_low_width_total_runtime;
    int gpu_map_transpose_f32_low_width_runs;
    CUfunction gpu_map_transpose_f32_small;
    int64_t gpu_map_transpose_f32_small_total_runtime;
    int gpu_map_transpose_f32_small_runs;
    CUfunction randomFieldzisegmap_16729;
    int64_t randomFieldzisegmap_16729_total_runtime;
    int randomFieldzisegmap_16729_runs;
    CUfunction sortBagzireplicate_19719;
    int64_t sortBagzireplicate_19719_total_runtime;
    int sortBagzireplicate_19719_runs;
    CUfunction sortBagzisegmap_16894;
    int64_t sortBagzisegmap_16894_total_runtime;
    int sortBagzisegmap_16894_runs;
    CUfunction sortBagzisegmap_17558;
    int64_t sortBagzisegmap_17558_total_runtime;
    int sortBagzisegmap_17558_runs;
    CUfunction sortBagzisegmap_17759;
    int64_t sortBagzisegmap_17759_total_runtime;
    int sortBagzisegmap_17759_runs;
    CUfunction sortBagzisegmap_17800;
    int64_t sortBagzisegmap_17800_total_runtime;
    int sortBagzisegmap_17800_runs;
    CUfunction sortBagzisegmap_intragroup_17006;
    int64_t sortBagzisegmap_intragroup_17006_total_runtime;
    int sortBagzisegmap_intragroup_17006_runs;
    CUfunction sortBagzisegmap_intragroup_17587;
    int64_t sortBagzisegmap_intragroup_17587_total_runtime;
    int sortBagzisegmap_intragroup_17587_runs;
    CUfunction sortBagzisegscan_17690;
    int64_t sortBagzisegscan_17690_total_runtime;
    int sortBagzisegscan_17690_runs;
    CUfunction sortBagAndDoStuffzireplicate_19727;
    int64_t sortBagAndDoStuffzireplicate_19727_total_runtime;
    int sortBagAndDoStuffzireplicate_19727_runs;
    CUfunction sortBagAndDoStuffzisegmap_17962;
    int64_t sortBagAndDoStuffzisegmap_17962_total_runtime;
    int sortBagAndDoStuffzisegmap_17962_runs;
    CUfunction sortBagAndDoStuffzisegmap_18628;
    int64_t sortBagAndDoStuffzisegmap_18628_total_runtime;
    int sortBagAndDoStuffzisegmap_18628_runs;
    CUfunction sortBagAndDoStuffzisegmap_18829;
    int64_t sortBagAndDoStuffzisegmap_18829_total_runtime;
    int sortBagAndDoStuffzisegmap_18829_runs;
    CUfunction sortBagAndDoStuffzisegmap_18887;
    int64_t sortBagAndDoStuffzisegmap_18887_total_runtime;
    int sortBagAndDoStuffzisegmap_18887_runs;
    CUfunction sortBagAndDoStuffzisegmap_18918;
    int64_t sortBagAndDoStuffzisegmap_18918_total_runtime;
    int sortBagAndDoStuffzisegmap_18918_runs;
    CUfunction sortBagAndDoStuffzisegmap_18974;
    int64_t sortBagAndDoStuffzisegmap_18974_total_runtime;
    int sortBagAndDoStuffzisegmap_18974_runs;
    CUfunction sortBagAndDoStuffzisegmap_intragroup_18080;
    int64_t sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime;
    int sortBagAndDoStuffzisegmap_intragroup_18080_runs;
    CUfunction sortBagAndDoStuffzisegmap_intragroup_18657;
    int64_t sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime;
    int sortBagAndDoStuffzisegmap_intragroup_18657_runs;
    CUfunction sortBagAndDoStuffzisegred_large_18868;
    int64_t sortBagAndDoStuffzisegred_large_18868_total_runtime;
    int sortBagAndDoStuffzisegred_large_18868_runs;
    CUfunction sortBagAndDoStuffzisegred_large_18963;
    int64_t sortBagAndDoStuffzisegred_large_18963_total_runtime;
    int sortBagAndDoStuffzisegred_large_18963_runs;
    CUfunction sortBagAndDoStuffzisegred_small_18868;
    int64_t sortBagAndDoStuffzisegred_small_18868_total_runtime;
    int sortBagAndDoStuffzisegred_small_18868_runs;
    CUfunction sortBagAndDoStuffzisegred_small_18963;
    int64_t sortBagAndDoStuffzisegred_small_18963_total_runtime;
    int sortBagAndDoStuffzisegred_small_18963_runs;
    CUfunction sortBagAndDoStuffzisegscan_18760;
    int64_t sortBagAndDoStuffzisegscan_18760_total_runtime;
    int sortBagAndDoStuffzisegscan_18760_runs;
    int64_t copy_dev_to_dev_total_runtime;
    int copy_dev_to_dev_runs;
    int64_t copy_dev_to_host_total_runtime;
    int copy_dev_to_host_runs;
    int64_t copy_host_to_dev_total_runtime;
    int copy_host_to_dev_runs;
    int64_t copy_scalar_to_dev_total_runtime;
    int copy_scalar_to_dev_runs;
    int64_t copy_scalar_from_dev_total_runtime;
    int copy_scalar_from_dev_runs;
    CUdeviceptr global_failure;
    CUdeviceptr global_failure_args;
    struct cuda_context cuda;
    struct tuning_params tuning_params;
    int32_t failure_is_an_option;
    int total_runs;
    long total_runtime;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->debugging = ctx->detail_memory = cfg->cu_cfg.debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = cfg->cu_cfg.logging;
    ctx->error = NULL;
    ctx->log = stderr;
    ctx->cuda.profiling_records_capacity = 200;
    ctx->cuda.profiling_records_used = 0;
    ctx->cuda.profiling_records = malloc(ctx->cuda.profiling_records_capacity *
        sizeof(struct profiling_record));
    ctx->cuda.cfg = cfg->cu_cfg;
    create_lock(&ctx->lock);
    ctx->failure_is_an_option = 0;
    ctx->total_runs = 0;
    ctx->total_runtime = 0;
    ctx->peak_mem_usage_device = 0;
    ctx->cur_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->error = cuda_setup(&ctx->cuda, cuda_program, cfg->nvrtc_opts);
    if (ctx->error != NULL)
        futhark_panic(1, "%s\n", ctx->error);
    
    int32_t no_error = -1;
    
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure, sizeof(no_error)));
    CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->global_failure, &no_error,
                                    sizeof(no_error)));
    // The +1 is to avoid zero-byte allocations.
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure_args, sizeof(int64_t) *
                                  (2 + 1)));
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhiota_i64ziiota_i64_19599,
                                           ctx->cuda.module,
                                           "builtinzhiota_i64ziiota_i64_19599"));
    ctx->builtinzhiota_i64ziiota_i64_19599_total_runtime = 0;
    ctx->builtinzhiota_i64ziiota_i64_19599_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhreplicate_i8zireplicate_19811,
                                           ctx->cuda.module,
                                           "builtinzhreplicate_i8zireplicate_19811"));
    ctx->builtinzhreplicate_i8zireplicate_19811_total_runtime = 0;
    ctx->builtinzhreplicate_i8zireplicate_19811_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32"));
    ctx->gpu_map_transpose_f32_total_runtime = 0;
    ctx->gpu_map_transpose_f32_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_low_height,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_low_height"));
    ctx->gpu_map_transpose_f32_low_height_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_height_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_low_width,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_low_width"));
    ctx->gpu_map_transpose_f32_low_width_total_runtime = 0;
    ctx->gpu_map_transpose_f32_low_width_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_f32_small,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_f32_small"));
    ctx->gpu_map_transpose_f32_small_total_runtime = 0;
    ctx->gpu_map_transpose_f32_small_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->randomFieldzisegmap_16729,
                                           ctx->cuda.module,
                                           "randomFieldzisegmap_16729"));
    ctx->randomFieldzisegmap_16729_total_runtime = 0;
    ctx->randomFieldzisegmap_16729_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzireplicate_19719,
                                           ctx->cuda.module,
                                           "sortBagzireplicate_19719"));
    ctx->sortBagzireplicate_19719_total_runtime = 0;
    ctx->sortBagzireplicate_19719_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_16894,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_16894"));
    ctx->sortBagzisegmap_16894_total_runtime = 0;
    ctx->sortBagzisegmap_16894_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17558,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17558"));
    ctx->sortBagzisegmap_17558_total_runtime = 0;
    ctx->sortBagzisegmap_17558_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17759,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17759"));
    ctx->sortBagzisegmap_17759_total_runtime = 0;
    ctx->sortBagzisegmap_17759_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_17800,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_17800"));
    ctx->sortBagzisegmap_17800_total_runtime = 0;
    ctx->sortBagzisegmap_17800_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_intragroup_17006,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_intragroup_17006"));
    ctx->sortBagzisegmap_intragroup_17006_total_runtime = 0;
    ctx->sortBagzisegmap_intragroup_17006_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegmap_intragroup_17587,
                                           ctx->cuda.module,
                                           "sortBagzisegmap_intragroup_17587"));
    ctx->sortBagzisegmap_intragroup_17587_total_runtime = 0;
    ctx->sortBagzisegmap_intragroup_17587_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagzisegscan_17690,
                                           ctx->cuda.module,
                                           "sortBagzisegscan_17690"));
    ctx->sortBagzisegscan_17690_total_runtime = 0;
    ctx->sortBagzisegscan_17690_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzireplicate_19727,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzireplicate_19727"));
    ctx->sortBagAndDoStuffzireplicate_19727_total_runtime = 0;
    ctx->sortBagAndDoStuffzireplicate_19727_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_17962,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_17962"));
    ctx->sortBagAndDoStuffzisegmap_17962_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_17962_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18628,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18628"));
    ctx->sortBagAndDoStuffzisegmap_18628_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18628_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18829,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18829"));
    ctx->sortBagAndDoStuffzisegmap_18829_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18829_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18887,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18887"));
    ctx->sortBagAndDoStuffzisegmap_18887_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18887_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18918,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18918"));
    ctx->sortBagAndDoStuffzisegmap_18918_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18918_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_18974,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_18974"));
    ctx->sortBagAndDoStuffzisegmap_18974_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_18974_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_intragroup_18080,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_intragroup_18080"));
    ctx->sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegmap_intragroup_18657,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegmap_intragroup_18657"));
    ctx->sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_large_18868,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_large_18868"));
    ctx->sortBagAndDoStuffzisegred_large_18868_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_large_18868_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_large_18963,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_large_18963"));
    ctx->sortBagAndDoStuffzisegred_large_18963_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_large_18963_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_small_18868,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_small_18868"));
    ctx->sortBagAndDoStuffzisegred_small_18868_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_small_18868_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegred_small_18963,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegred_small_18963"));
    ctx->sortBagAndDoStuffzisegred_small_18963_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegred_small_18963_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->sortBagAndDoStuffzisegscan_18760,
                                           ctx->cuda.module,
                                           "sortBagAndDoStuffzisegscan_18760"));
    ctx->sortBagAndDoStuffzisegscan_18760_total_runtime = 0;
    ctx->sortBagAndDoStuffzisegscan_18760_runs = 0;
    ctx->copy_dev_to_dev_total_runtime = 0;
    ctx->copy_dev_to_dev_runs = 0;
    ctx->copy_dev_to_host_total_runtime = 0;
    ctx->copy_dev_to_host_runs = 0;
    ctx->copy_host_to_dev_total_runtime = 0;
    ctx->copy_host_to_dev_runs = 0;
    ctx->copy_scalar_to_dev_total_runtime = 0;
    ctx->copy_scalar_to_dev_runs = 0;
    ctx->copy_scalar_from_dev_total_runtime = 0;
    ctx->copy_scalar_from_dev_runs = 0;
    {
        ctx->sortBagziid_counter_mem_19779.references = NULL;
        ctx->sortBagziid_counter_mem_19779.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagziid_counter_mem_19779.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagziid_counter_mem_19779.mem,
                                            sortBagziid_counter_mem_realtype_20359,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffziid_counter_mem_19787.references = NULL;
        ctx->sortBagAndDoStuffziid_counter_mem_19787.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffziid_counter_mem_19787.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffziid_counter_mem_19787.mem,
                                            sortBagAndDoStuffziid_counter_mem_realtype_20485,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffzicounter_mem_20103.references = NULL;
        ctx->sortBagAndDoStuffzicounter_mem_20103.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffzicounter_mem_20103.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffzicounter_mem_20103.mem,
                                            sortBagAndDoStuffzicounter_mem_realtype_20530,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->sortBagAndDoStuffzicounter_mem_20195.references = NULL;
        ctx->sortBagAndDoStuffzicounter_mem_20195.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->sortBagAndDoStuffzicounter_mem_20195.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->sortBagAndDoStuffzicounter_mem_20195.mem,
                                            sortBagAndDoStuffzicounter_mem_realtype_20563,
                                            10240 * sizeof(int32_t)));
    }
    ctx->tuning_params.builtinzhiota_i64zigroup_sizze_19602 =
        &cfg->tuning_params[0];
    ctx->tuning_params.builtinzhreplicate_i8zigroup_sizze_19814 =
        &cfg->tuning_params[1];
    ctx->tuning_params.randomFieldzisegmap_group_sizze_16704 =
        &cfg->tuning_params[2];
    ctx->tuning_params.sortBagzigroup_sizze_19722 = &cfg->tuning_params[3];
    ctx->tuning_params.sortBagzisegmap_group_sizze_16777 =
        &cfg->tuning_params[4];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17135 =
        &cfg->tuning_params[5];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17301 =
        &cfg->tuning_params[6];
    ctx->tuning_params.sortBagzisegmap_group_sizze_17529 =
        &cfg->tuning_params[7];
    ctx->tuning_params.sortBagzisegmap_num_groups_16779 =
        &cfg->tuning_params[8];
    ctx->tuning_params.sortBagzisegscan_group_sizze_17350 =
        &cfg->tuning_params[9];
    ctx->tuning_params.sortBagzisegscan_num_groups_17352 =
        &cfg->tuning_params[10];
    ctx->tuning_params.sortBagzisuff_intra_par_1 = &cfg->tuning_params[11];
    ctx->tuning_params.sortBagzisuff_intra_par_2 = &cfg->tuning_params[12];
    ctx->tuning_params.sortBagzisuff_outer_par_0 = &cfg->tuning_params[13];
    ctx->tuning_params.sortBagAndDoStuffzigroup_sizze_19730 =
        &cfg->tuning_params[14];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_17839 =
        &cfg->tuning_params[15];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18203 =
        &cfg->tuning_params[16];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18371 =
        &cfg->tuning_params[17];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18599 =
        &cfg->tuning_params[18];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18901 =
        &cfg->tuning_params[19];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18930 =
        &cfg->tuning_params[20];
    ctx->tuning_params.sortBagAndDoStuffzisegmap_num_groups_17841 =
        &cfg->tuning_params[21];
    ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18215 =
        &cfg->tuning_params[22];
    ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18940 =
        &cfg->tuning_params[23];
    ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18217 =
        &cfg->tuning_params[24];
    ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18942 =
        &cfg->tuning_params[25];
    ctx->tuning_params.sortBagAndDoStuffzisegscan_group_sizze_18420 =
        &cfg->tuning_params[26];
    ctx->tuning_params.sortBagAndDoStuffzisegscan_num_groups_18422 =
        &cfg->tuning_params[27];
    ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_1 =
        &cfg->tuning_params[28];
    ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_2 =
        &cfg->tuning_params[29];
    ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_0 =
        &cfg->tuning_params[30];
    ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_3 =
        &cfg->tuning_params[31];
    init_constants(ctx);
    // Clear the free list of any deallocations that occurred while initialising constants.
    CUDA_SUCCEED_FATAL(cuda_free_all(&ctx->cuda));
    futhark_context_sync(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    cuMemFree(ctx->global_failure);
    cuMemFree(ctx->global_failure_args);
    cuda_cleanup(&ctx->cuda);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    CUDA_SUCCEED_OR_RETURN(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    CUDA_SUCCEED_OR_RETURN(cuCtxSynchronize());
    if (ctx->failure_is_an_option) {
        int32_t failure_idx;
        
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&failure_idx, ctx->global_failure,
                                            sizeof(int32_t)));
        ctx->failure_is_an_option = 0;
        if (failure_idx >= 0) {
            int32_t no_failure = -1;
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(ctx->global_failure,
                                                &no_failure, sizeof(int32_t)));
            
            int64_t args[2 + 1];
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&args, ctx->global_failure_args,
                                                sizeof(args)));
            switch (failure_idx) {
                
              case 0:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 1:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 2:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:19:16-88\n   #5  fut/entries.fut:14:1-22:22\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 3:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 4:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 5:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 6:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  fut/manifut/util/radix_sort.fut:68:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  fut/manifut/util/radix_sort.fut:65:3-68:33\n   #3  fut/manifut/util/radix_sort.fut:121:3-57\n   #4  fut/entries.fut:29:16-88\n   #5  fut/entries.fut:24:1-34:52\n",
                                  args[0], args[1]);
                    break;
                }
            }
            return FUTHARK_PROGRAM_ERROR;
        }
    }
    CUDA_SUCCEED_OR_RETURN(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    return 0;
}
static int memblock_unref_device(struct futhark_context *ctx,
                                 struct memblock_device *block, const
                                 char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "space 'device'", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_device -= block->size;
            CUDA_SUCCEED_OR_RETURN(cuda_free(&ctx->cuda, block->mem, desc));
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_device);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc_device(struct futhark_context *ctx,
                                 struct memblock_device *block, int64_t size,
                                 const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "space 'device'",
                      ctx->cur_mem_usage_device);
    
    int ret = memblock_unref_device(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "space 'device'",
                (long long) ctx->cur_mem_usage_device + size);
    if (ctx->cur_mem_usage_device > ctx->peak_mem_usage_device) {
        ctx->peak_mem_usage_device = ctx->cur_mem_usage_device;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    ctx->error = CUDA_SUCCEED_NONFATAL(cuda_alloc(&ctx->cuda, ctx->log,
                                                  (size_t) size, desc,
                                                  &block->mem));
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_device += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "space 'device'", (long long) size,
                      (long long) ctx->cur_mem_usage_device, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set_device(struct futhark_context *ctx,
                               struct memblock_device *lhs,
                               struct memblock_device *rhs, const
                               char *lhs_desc)
{
    int ret = memblock_unref_device(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        str_builder(&builder,
                    "Peak memory usage for space 'device': %lld bytes.\n",
                    (long long) ctx->peak_mem_usage_device);
        { }
    }
    if (ctx->profiling) {
        CUDA_SUCCEED_FATAL(cuda_tally_profiling_records(&ctx->cuda));
        str_builder(&builder,
                    "copy_dev_to_dev                           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_dev_runs,
                    (long) ctx->copy_dev_to_dev_total_runtime /
                    (ctx->copy_dev_to_dev_runs !=
                     0 ? ctx->copy_dev_to_dev_runs : 1),
                    (long) ctx->copy_dev_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_dev_runs;
        str_builder(&builder,
                    "copy_dev_to_host                          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_host_runs,
                    (long) ctx->copy_dev_to_host_total_runtime /
                    (ctx->copy_dev_to_host_runs !=
                     0 ? ctx->copy_dev_to_host_runs : 1),
                    (long) ctx->copy_dev_to_host_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_host_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_host_runs;
        str_builder(&builder,
                    "copy_host_to_dev                          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_host_to_dev_runs,
                    (long) ctx->copy_host_to_dev_total_runtime /
                    (ctx->copy_host_to_dev_runs !=
                     0 ? ctx->copy_host_to_dev_runs : 1),
                    (long) ctx->copy_host_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_host_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_host_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_to_dev                        ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_to_dev_runs,
                    (long) ctx->copy_scalar_to_dev_total_runtime /
                    (ctx->copy_scalar_to_dev_runs !=
                     0 ? ctx->copy_scalar_to_dev_runs : 1),
                    (long) ctx->copy_scalar_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_from_dev                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_from_dev_runs,
                    (long) ctx->copy_scalar_from_dev_total_runtime /
                    (ctx->copy_scalar_from_dev_runs !=
                     0 ? ctx->copy_scalar_from_dev_runs : 1),
                    (long) ctx->copy_scalar_from_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_from_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_from_dev_runs;
        str_builder(&builder,
                    "builtin#iota_i64.iota_i64_19599           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhiota_i64ziiota_i64_19599_runs,
                    (long) ctx->builtinzhiota_i64ziiota_i64_19599_total_runtime /
                    (ctx->builtinzhiota_i64ziiota_i64_19599_runs !=
                     0 ? ctx->builtinzhiota_i64ziiota_i64_19599_runs : 1),
                    (long) ctx->builtinzhiota_i64ziiota_i64_19599_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhiota_i64ziiota_i64_19599_total_runtime;
        ctx->total_runs += ctx->builtinzhiota_i64ziiota_i64_19599_runs;
        str_builder(&builder,
                    "builtin#replicate_i8.replicate_19811      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhreplicate_i8zireplicate_19811_runs,
                    (long) ctx->builtinzhreplicate_i8zireplicate_19811_total_runtime /
                    (ctx->builtinzhreplicate_i8zireplicate_19811_runs !=
                     0 ? ctx->builtinzhreplicate_i8zireplicate_19811_runs : 1),
                    (long) ctx->builtinzhreplicate_i8zireplicate_19811_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhreplicate_i8zireplicate_19811_total_runtime;
        ctx->total_runs += ctx->builtinzhreplicate_i8zireplicate_19811_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32                     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_runs,
                    (long) ctx->gpu_map_transpose_f32_total_runtime /
                    (ctx->gpu_map_transpose_f32_runs !=
                     0 ? ctx->gpu_map_transpose_f32_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_height          ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_height_runs,
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_height_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_height_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_height_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_height_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_height_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_low_width           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_low_width_runs,
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime /
                    (ctx->gpu_map_transpose_f32_low_width_runs !=
                     0 ? ctx->gpu_map_transpose_f32_low_width_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_low_width_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_f32_low_width_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_low_width_runs;
        str_builder(&builder,
                    "gpu_map_transpose_f32_small               ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_f32_small_runs,
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime /
                    (ctx->gpu_map_transpose_f32_small_runs !=
                     0 ? ctx->gpu_map_transpose_f32_small_runs : 1),
                    (long) ctx->gpu_map_transpose_f32_small_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_f32_small_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_f32_small_runs;
        str_builder(&builder,
                    "randomField.segmap_16729                  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->randomFieldzisegmap_16729_runs,
                    (long) ctx->randomFieldzisegmap_16729_total_runtime /
                    (ctx->randomFieldzisegmap_16729_runs !=
                     0 ? ctx->randomFieldzisegmap_16729_runs : 1),
                    (long) ctx->randomFieldzisegmap_16729_total_runtime);
        ctx->total_runtime += ctx->randomFieldzisegmap_16729_total_runtime;
        ctx->total_runs += ctx->randomFieldzisegmap_16729_runs;
        str_builder(&builder,
                    "sortBag.replicate_19719                   ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzireplicate_19719_runs,
                    (long) ctx->sortBagzireplicate_19719_total_runtime /
                    (ctx->sortBagzireplicate_19719_runs !=
                     0 ? ctx->sortBagzireplicate_19719_runs : 1),
                    (long) ctx->sortBagzireplicate_19719_total_runtime);
        ctx->total_runtime += ctx->sortBagzireplicate_19719_total_runtime;
        ctx->total_runs += ctx->sortBagzireplicate_19719_runs;
        str_builder(&builder,
                    "sortBag.segmap_16894                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_16894_runs,
                    (long) ctx->sortBagzisegmap_16894_total_runtime /
                    (ctx->sortBagzisegmap_16894_runs !=
                     0 ? ctx->sortBagzisegmap_16894_runs : 1),
                    (long) ctx->sortBagzisegmap_16894_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_16894_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_16894_runs;
        str_builder(&builder,
                    "sortBag.segmap_17558                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17558_runs,
                    (long) ctx->sortBagzisegmap_17558_total_runtime /
                    (ctx->sortBagzisegmap_17558_runs !=
                     0 ? ctx->sortBagzisegmap_17558_runs : 1),
                    (long) ctx->sortBagzisegmap_17558_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17558_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17558_runs;
        str_builder(&builder,
                    "sortBag.segmap_17759                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17759_runs,
                    (long) ctx->sortBagzisegmap_17759_total_runtime /
                    (ctx->sortBagzisegmap_17759_runs !=
                     0 ? ctx->sortBagzisegmap_17759_runs : 1),
                    (long) ctx->sortBagzisegmap_17759_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17759_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17759_runs;
        str_builder(&builder,
                    "sortBag.segmap_17800                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_17800_runs,
                    (long) ctx->sortBagzisegmap_17800_total_runtime /
                    (ctx->sortBagzisegmap_17800_runs !=
                     0 ? ctx->sortBagzisegmap_17800_runs : 1),
                    (long) ctx->sortBagzisegmap_17800_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegmap_17800_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_17800_runs;
        str_builder(&builder,
                    "sortBag.segmap_intragroup_17006           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_intragroup_17006_runs,
                    (long) ctx->sortBagzisegmap_intragroup_17006_total_runtime /
                    (ctx->sortBagzisegmap_intragroup_17006_runs !=
                     0 ? ctx->sortBagzisegmap_intragroup_17006_runs : 1),
                    (long) ctx->sortBagzisegmap_intragroup_17006_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagzisegmap_intragroup_17006_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_intragroup_17006_runs;
        str_builder(&builder,
                    "sortBag.segmap_intragroup_17587           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegmap_intragroup_17587_runs,
                    (long) ctx->sortBagzisegmap_intragroup_17587_total_runtime /
                    (ctx->sortBagzisegmap_intragroup_17587_runs !=
                     0 ? ctx->sortBagzisegmap_intragroup_17587_runs : 1),
                    (long) ctx->sortBagzisegmap_intragroup_17587_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagzisegmap_intragroup_17587_total_runtime;
        ctx->total_runs += ctx->sortBagzisegmap_intragroup_17587_runs;
        str_builder(&builder,
                    "sortBag.segscan_17690                     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagzisegscan_17690_runs,
                    (long) ctx->sortBagzisegscan_17690_total_runtime /
                    (ctx->sortBagzisegscan_17690_runs !=
                     0 ? ctx->sortBagzisegscan_17690_runs : 1),
                    (long) ctx->sortBagzisegscan_17690_total_runtime);
        ctx->total_runtime += ctx->sortBagzisegscan_17690_total_runtime;
        ctx->total_runs += ctx->sortBagzisegscan_17690_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.replicate_19727         ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzireplicate_19727_runs,
                    (long) ctx->sortBagAndDoStuffzireplicate_19727_total_runtime /
                    (ctx->sortBagAndDoStuffzireplicate_19727_runs !=
                     0 ? ctx->sortBagAndDoStuffzireplicate_19727_runs : 1),
                    (long) ctx->sortBagAndDoStuffzireplicate_19727_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzireplicate_19727_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzireplicate_19727_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_17962            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_17962_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_17962_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_17962_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_17962_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_17962_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_17962_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_17962_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18628            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18628_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18628_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18628_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18628_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18628_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18628_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18628_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18829            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18829_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18829_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18829_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18829_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18829_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18829_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18829_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18887            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18887_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18887_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18887_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18887_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18887_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18887_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18887_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18918            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18918_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18918_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18918_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18918_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18918_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18918_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18918_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_18974            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_18974_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_18974_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_18974_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_18974_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_18974_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_18974_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_18974_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_intragroup_18080 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segmap_intragroup_18657 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs,
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime /
                    (ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_large_18868      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_large_18868_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_large_18868_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_large_18868_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_large_18868_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_large_18868_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_large_18868_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_large_18868_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_large_18963      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_large_18963_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_large_18963_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_large_18963_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_large_18963_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_large_18963_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_large_18963_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_large_18963_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_small_18868      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_small_18868_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_small_18868_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_small_18868_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_small_18868_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_small_18868_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_small_18868_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_small_18868_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segred_small_18963      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegred_small_18963_runs,
                    (long) ctx->sortBagAndDoStuffzisegred_small_18963_total_runtime /
                    (ctx->sortBagAndDoStuffzisegred_small_18963_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegred_small_18963_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegred_small_18963_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegred_small_18963_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegred_small_18963_runs;
        str_builder(&builder,
                    "sortBagAndDoStuff.segscan_18760           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->sortBagAndDoStuffzisegscan_18760_runs,
                    (long) ctx->sortBagAndDoStuffzisegscan_18760_total_runtime /
                    (ctx->sortBagAndDoStuffzisegscan_18760_runs !=
                     0 ? ctx->sortBagAndDoStuffzisegscan_18760_runs : 1),
                    (long) ctx->sortBagAndDoStuffzisegscan_18760_total_runtime);
        ctx->total_runtime +=
            ctx->sortBagAndDoStuffzisegscan_18760_total_runtime;
        ctx->total_runs += ctx->sortBagAndDoStuffzisegscan_18760_runs;
        str_builder(&builder, "%d operations with cumulative runtime: %6ldus\n",
                    ctx->total_runs, ctx->total_runtime);
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    ctx->peak_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    if (ctx->error == NULL)
        CUDA_SUCCEED_NONFATAL(cuda_free_all(&ctx->cuda));
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6);
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_19594,
                                    int32_t n_19595, int64_t x_19596,
                                    int64_t s_19597);
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_19807,
                                        int32_t num_elems_19808,
                                        int8_t val_19809);
static int futrts_entry_randomField(struct futhark_context *ctx,
                                    struct memblock_device *mem_out_p_20276,
                                    int64_t seed_16361, int64_t b_16362,
                                    int64_t g_16363);
static int futrts_entry_sortBag(struct futhark_context *ctx,
                                struct memblock_device *mem_out_p_20281,
                                struct memblock_device *mem_out_p_20282,
                                struct memblock_device keys_mem_19046,
                                struct memblock_device values_mem_19047,
                                int64_t b_16392, int64_t g_16393);
static int futrts_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                          struct memblock_device *mem_out_p_20401,
                                          struct memblock_device *mem_out_p_20402,
                                          struct memblock_device *mem_out_p_20403,
                                          struct memblock_device *mem_out_p_20404,
                                          struct memblock_device keys_mem_19046,
                                          struct memblock_device values_mem_19047,
                                          int64_t b_16538, int64_t g_16539);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock_device mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) arr->shape[0] * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                      struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock_device mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int64_t offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_builtinzhgpu_map_transpose_f32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6)
{
    (void) ctx;
    
    int err = 0;
    
    if (!(num_arrays_4 == 0 || (x_elems_5 == 0 || y_elems_6 == 0))) {
        int32_t muly_8 = squot32(16, x_elems_5);
        int32_t mulx_7 = squot32(16, y_elems_6);
        
        if (num_arrays_4 == 1 && (x_elems_5 == 1 || y_elems_6 == 1)) {
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(destmem_0.mem +
                                                sext_i32_i64(destoffset_1),
                                                srcmem_2.mem +
                                                sext_i32_i64(srcoffset_3),
                                                sext_i32_i64(x_elems_5 *
                                                y_elems_6 * 4)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
        } else {
            if (sle32(x_elems_5, 8) && slt32(16, y_elems_6)) {
                unsigned int shared_sizze_20243 = (int64_t) 1088;
                CUdeviceptr kernel_arg_20245 = destmem_0.mem;
                CUdeviceptr kernel_arg_20246 = srcmem_2.mem;
                unsigned int shared_offset_20244 = 0;
                
                if ((((((1 && sdiv_up32(x_elems_5, 16) != 0) &&
                        sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) != 0) &&
                       num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) >= 1 <<
                        16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (num_arrays_4 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up32(x_elems_5, 16);
                    grid[perm[1]] = sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16);
                    grid[perm[2]] = num_arrays_4;
                    
                    void *kernel_args_20240[] = {&perm[0], &perm[1], &perm[2],
                                                 &shared_offset_20244,
                                                 &destoffset_1, &srcoffset_3,
                                                 &num_arrays_4, &x_elems_5,
                                                 &y_elems_6, &mulx_7, &muly_8,
                                                 &kernel_arg_20245,
                                                 &kernel_arg_20246};
                    int64_t time_start_20241 = 0, time_end_20242 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "gpu_map_transpose_f32_low_width",
                                (long) sdiv_up32(x_elems_5, 16),
                                (long) sdiv_up32(sdiv_up32(y_elems_6, muly_8),
                                                 16), (long) num_arrays_4,
                                (long) 16, (long) 16, (long) 1, (int) (0 +
                                                                       (shared_sizze_20243 +
                                                                        (8 -
                                                                         shared_sizze_20243 %
                                                                         8) %
                                                                        8)));
                        time_start_20241 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->gpu_map_transpose_f32_low_width_runs,
                                                  &ctx->gpu_map_transpose_f32_low_width_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_low_width,
                                                          grid[0], grid[1],
                                                          grid[2], 16, 16, 1,
                                                          0 +
                                                          (shared_sizze_20243 +
                                                           (8 -
                                                            shared_sizze_20243 %
                                                            8) % 8), NULL,
                                                          kernel_args_20240,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20242 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "gpu_map_transpose_f32_low_width",
                                time_end_20242 - time_start_20241);
                    }
                }
            } else {
                if (sle32(y_elems_6, 8) && slt32(16, x_elems_5)) {
                    unsigned int shared_sizze_20250 = (int64_t) 1088;
                    CUdeviceptr kernel_arg_20252 = destmem_0.mem;
                    CUdeviceptr kernel_arg_20253 = srcmem_2.mem;
                    unsigned int shared_offset_20251 = 0;
                    
                    if ((((((1 && sdiv_up32(sdiv_up32(x_elems_5, mulx_7), 16) !=
                             0) && sdiv_up32(y_elems_6, 16) != 0) &&
                           num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 !=
                        0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (sdiv_up32(y_elems_6, 16) >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (num_arrays_4 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = sdiv_up32(sdiv_up32(x_elems_5, mulx_7),
                                                  16);
                        grid[perm[1]] = sdiv_up32(y_elems_6, 16);
                        grid[perm[2]] = num_arrays_4;
                        
                        void *kernel_args_20247[] = {&perm[0], &perm[1],
                                                     &perm[2],
                                                     &shared_offset_20251,
                                                     &destoffset_1,
                                                     &srcoffset_3,
                                                     &num_arrays_4, &x_elems_5,
                                                     &y_elems_6, &mulx_7,
                                                     &muly_8, &kernel_arg_20252,
                                                     &kernel_arg_20253};
                        int64_t time_start_20248 = 0, time_end_20249 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "gpu_map_transpose_f32_low_height",
                                    (long) sdiv_up32(sdiv_up32(x_elems_5,
                                                               mulx_7), 16),
                                    (long) sdiv_up32(y_elems_6, 16),
                                    (long) num_arrays_4, (long) 16, (long) 16,
                                    (long) 1, (int) (0 + (shared_sizze_20250 +
                                                          (8 -
                                                           shared_sizze_20250 %
                                                           8) % 8)));
                            time_start_20248 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->gpu_map_transpose_f32_low_height_runs,
                                                      &ctx->gpu_map_transpose_f32_low_height_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_low_height,
                                                              grid[0], grid[1],
                                                              grid[2], 16, 16,
                                                              1, 0 +
                                                              (shared_sizze_20250 +
                                                               (8 -
                                                                shared_sizze_20250 %
                                                                8) % 8), NULL,
                                                              kernel_args_20247,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20249 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "gpu_map_transpose_f32_low_height",
                                    time_end_20249 - time_start_20248);
                        }
                    }
                } else {
                    if (sle32(x_elems_5, 8) && sle32(y_elems_6, 8)) {
                        unsigned int shared_sizze_20257 = (int64_t) 1;
                        CUdeviceptr kernel_arg_20259 = destmem_0.mem;
                        CUdeviceptr kernel_arg_20260 = srcmem_2.mem;
                        unsigned int shared_offset_20258 = 0;
                        
                        if ((((((1 && sdiv_up32(num_arrays_4 * x_elems_5 *
                                                y_elems_6, 256) != 0) && 1 !=
                                0) && 1 != 0) && 256 != 0) && 1 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(num_arrays_4 * x_elems_5 *
                                                      y_elems_6, 256);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20254[] = {&shared_offset_20258,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_20259,
                                                         &kernel_arg_20260};
                            int64_t time_start_20255 = 0, time_end_20256 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "gpu_map_transpose_f32_small",
                                        (long) sdiv_up32(num_arrays_4 *
                                                         x_elems_5 * y_elems_6,
                                                         256), (long) 1,
                                        (long) 1, (long) 256, (long) 1,
                                        (long) 1, (int) (0 +
                                                         (shared_sizze_20257 +
                                                          (8 -
                                                           shared_sizze_20257 %
                                                           8) % 8)));
                                time_start_20255 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_f32_small_runs,
                                                          &ctx->gpu_map_transpose_f32_small_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32_small,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 256,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20257 +
                                                                   (8 -
                                                                    shared_sizze_20257 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20254,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20256 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32_small",
                                        time_end_20256 - time_start_20255);
                            }
                        }
                    } else {
                        unsigned int shared_sizze_20264 = (int64_t) 4224;
                        CUdeviceptr kernel_arg_20266 = destmem_0.mem;
                        CUdeviceptr kernel_arg_20267 = srcmem_2.mem;
                        unsigned int shared_offset_20265 = 0;
                        
                        if ((((((1 && sdiv_up32(x_elems_5, 32) != 0) &&
                                sdiv_up32(y_elems_6, 32) != 0) &&
                               num_arrays_4 != 0) && 32 != 0) && 8 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (sdiv_up32(y_elems_6, 32) >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (num_arrays_4 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(x_elems_5, 32);
                            grid[perm[1]] = sdiv_up32(y_elems_6, 32);
                            grid[perm[2]] = num_arrays_4;
                            
                            void *kernel_args_20261[] = {&perm[0], &perm[1],
                                                         &perm[2],
                                                         &shared_offset_20265,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_20266,
                                                         &kernel_arg_20267};
                            int64_t time_start_20262 = 0, time_end_20263 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "gpu_map_transpose_f32",
                                        (long) sdiv_up32(x_elems_5, 32),
                                        (long) sdiv_up32(y_elems_6, 32),
                                        (long) num_arrays_4, (long) 32,
                                        (long) 8, (long) 1, (int) (0 +
                                                                   (shared_sizze_20264 +
                                                                    (8 -
                                                                     shared_sizze_20264 %
                                                                     8) % 8)));
                                time_start_20262 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_f32_runs,
                                                          &ctx->gpu_map_transpose_f32_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_f32,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 32,
                                                                  8, 1, 0 +
                                                                  (shared_sizze_20264 +
                                                                   (8 -
                                                                    shared_sizze_20264 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20261,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20263 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_f32",
                                        time_end_20263 - time_start_20262);
                            }
                        }
                    }
                }
            }
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_19594,
                                    int32_t n_19595, int64_t x_19596,
                                    int64_t s_19597)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_19602;
    
    group_sizze_19602 =
        *ctx->tuning_params.builtinzhiota_i64zigroup_sizze_19602;
    
    int64_t num_groups_19603 = sdiv_up64(n_19595, group_sizze_19602);
    CUdeviceptr kernel_arg_20271 = mem_19594.mem;
    
    if ((((((1 && num_groups_19603 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_19602 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_19603;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20268[] = {&n_19595, &x_19596, &s_19597,
                                     &kernel_arg_20271};
        int64_t time_start_20269 = 0, time_end_20270 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "builtin#iota_i64.iota_i64_19599", (long) num_groups_19603,
                    (long) 1, (long) 1, (long) group_sizze_19602, (long) 1,
                    (long) 1, (int) 0);
            time_start_20269 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhiota_i64ziiota_i64_19599_runs,
                                      &ctx->builtinzhiota_i64ziiota_i64_19599_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhiota_i64ziiota_i64_19599,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_19602, 1, 1, 0, NULL,
                                              kernel_args_20268, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20270 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#iota_i64.iota_i64_19599", time_end_20270 -
                    time_start_20269);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_19807,
                                        int32_t num_elems_19808,
                                        int8_t val_19809)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_19814;
    
    group_sizze_19814 =
        *ctx->tuning_params.builtinzhreplicate_i8zigroup_sizze_19814;
    
    int64_t num_groups_19815 = sdiv_up64(num_elems_19808, group_sizze_19814);
    CUdeviceptr kernel_arg_20275 = mem_19807.mem;
    
    if ((((((1 && num_groups_19815 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_19814 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_19815;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20272[] = {&num_elems_19808, &val_19809,
                                     &kernel_arg_20275};
        int64_t time_start_20273 = 0, time_end_20274 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "builtin#replicate_i8.replicate_19811",
                    (long) num_groups_19815, (long) 1, (long) 1,
                    (long) group_sizze_19814, (long) 1, (long) 1, (int) 0);
            time_start_20273 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhreplicate_i8zireplicate_19811_runs,
                                      &ctx->builtinzhreplicate_i8zireplicate_19811_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhreplicate_i8zireplicate_19811,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_19814, 1, 1, 0, NULL,
                                              kernel_args_20272, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20274 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#replicate_i8.replicate_19811", time_end_20274 -
                    time_start_20273);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_entry_randomField(struct futhark_context *ctx,
                                    struct memblock_device *mem_out_p_20276,
                                    int64_t seed_16361, int64_t b_16362,
                                    int64_t g_16363)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19053;
    
    mem_19053.references = NULL;
    
    struct memblock_device mem_19049;
    
    mem_19049.references = NULL;
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    
    int32_t i64_res_16364 = sext_i64_i32(seed_16361);
    int32_t unsign_arg_16365 = 5460 ^ i64_res_16364;
    int32_t unsign_arg_16366 = mul32(48271, unsign_arg_16365);
    int32_t unsign_arg_16367 = umod32(unsign_arg_16366, 2147483647);
    int64_t randomField_1d_arg_16368 = mul64(b_16362, g_16363);
    int32_t unsign_arg_16369 = mul32(48271, unsign_arg_16367);
    int32_t unsign_arg_16370 = umod32(unsign_arg_16369, 2147483647);
    bool bounds_invalid_upwards_16371 = slt64(randomField_1d_arg_16368,
                                              (int64_t) 0);
    bool valid_16372 = !bounds_invalid_upwards_16371;
    bool range_valid_c_16373;
    
    if (!valid_16372) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) randomField_1d_arg_16368,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  fut/manifut/util/cpprandom.fut:176:8-56\n   #3  fut/manifut/util/random.fut:17:16-42\n   #4  fut/manifut/util/random.fut:25:22-45\n   #5  fut/entries.fut:11:24-46\n   #6  fut/entries.fut:6:1-12:11\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_16725;
    
    segmap_group_sizze_16725 =
        *ctx->tuning_params.randomFieldzisegmap_group_sizze_16704;
    
    int64_t segmap_usable_groups_16726 = sdiv_up64(randomField_1d_arg_16368,
                                                   segmap_group_sizze_16725);
    int64_t binop_y_19047 = (int64_t) 4 * randomField_1d_arg_16368;
    int64_t bytes_19048 = smax64((int64_t) 0, binop_y_19047);
    
    if (memblock_alloc_device(ctx, &mem_19049, bytes_19048, "mem_19049")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    int32_t virt_num_groups_19591 =
            sext_i64_i32(sdiv_up64(randomField_1d_arg_16368,
                                   segmap_group_sizze_16725));
    CUdeviceptr kernel_arg_20280 = mem_19049.mem;
    
    if ((((((1 && segmap_usable_groups_16726 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_16725 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_16726;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_20277[] = {&ctx->global_failure,
                                     &randomField_1d_arg_16368,
                                     &unsign_arg_16370, &kernel_arg_20280};
        int64_t time_start_20278 = 0, time_end_20279 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log,
                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                    "randomField.segmap_16729",
                    (long) segmap_usable_groups_16726, (long) 1, (long) 1,
                    (long) segmap_group_sizze_16725, (long) 1, (long) 1,
                    (int) 0);
            time_start_20278 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->randomFieldzisegmap_16729_runs,
                                      &ctx->randomFieldzisegmap_16729_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->randomFieldzisegmap_16729,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_16725, 1, 1, 0,
                                              NULL, kernel_args_20277, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_20279 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "randomField.segmap_16729", time_end_20279 -
                    time_start_20278);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_alloc_device(ctx, &mem_19053, bytes_19048, "mem_19053")) {
        err = 1;
        goto cleanup;
    }
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19053.mem + (int64_t) 0,
                                        mem_19049.mem + (int64_t) 0, b_16362 *
                                        g_16363 * (int64_t) 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (memblock_unref_device(ctx, &mem_19049, "mem_19049") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19590, &mem_19053, "mem_19053") != 0)
        return 1;
    (*mem_out_p_20276).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20276, &mem_out_19590,
                            "mem_out_19590") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19053, "mem_19053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19049, "mem_19049") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19590, "mem_out_19590") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_sortBag(struct futhark_context *ctx,
                                struct memblock_device *mem_out_p_20281,
                                struct memblock_device *mem_out_p_20282,
                                struct memblock_device keys_mem_19046,
                                struct memblock_device values_mem_19047,
                                int64_t b_16392, int64_t g_16393)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19436;
    
    mem_19436.references = NULL;
    
    struct memblock_device mem_19432;
    
    mem_19432.references = NULL;
    
    struct memblock_device mem_param_tmp_19732;
    
    mem_param_tmp_19732.references = NULL;
    
    struct memblock_device mem_param_tmp_19731;
    
    mem_param_tmp_19731.references = NULL;
    
    struct memblock_device incprefixes_mem_19797;
    
    incprefixes_mem_19797.references = NULL;
    
    struct memblock_device aggregates_mem_19795;
    
    aggregates_mem_19795.references = NULL;
    
    struct memblock_device incprefixes_mem_19793;
    
    incprefixes_mem_19793.references = NULL;
    
    struct memblock_device aggregates_mem_19791;
    
    aggregates_mem_19791.references = NULL;
    
    struct memblock_device incprefixes_mem_19789;
    
    incprefixes_mem_19789.references = NULL;
    
    struct memblock_device aggregates_mem_19787;
    
    aggregates_mem_19787.references = NULL;
    
    struct memblock_device incprefixes_mem_19785;
    
    incprefixes_mem_19785.references = NULL;
    
    struct memblock_device aggregates_mem_19783;
    
    aggregates_mem_19783.references = NULL;
    
    struct memblock_device status_flags_mem_19781;
    
    status_flags_mem_19781.references = NULL;
    
    struct memblock_device mem_19404;
    
    mem_19404.references = NULL;
    
    struct memblock_device mem_19400;
    
    mem_19400.references = NULL;
    
    struct memblock_device mem_19396;
    
    mem_19396.references = NULL;
    
    struct memblock_device mem_19392;
    
    mem_19392.references = NULL;
    
    struct memblock_device mem_19388;
    
    mem_19388.references = NULL;
    
    struct memblock_device mem_19383;
    
    mem_19383.references = NULL;
    
    struct memblock_device mem_19379;
    
    mem_19379.references = NULL;
    
    struct memblock_device ext_mem_19406;
    
    ext_mem_19406.references = NULL;
    
    struct memblock_device ext_mem_19407;
    
    ext_mem_19407.references = NULL;
    
    struct memblock_device mem_19351;
    
    mem_19351.references = NULL;
    
    struct memblock_device mem_19347;
    
    mem_19347.references = NULL;
    
    struct memblock_device mem_param_19339;
    
    mem_param_19339.references = NULL;
    
    struct memblock_device mem_param_19331;
    
    mem_param_19331.references = NULL;
    
    struct memblock_device ext_mem_19412;
    
    ext_mem_19412.references = NULL;
    
    struct memblock_device ext_mem_19413;
    
    ext_mem_19413.references = NULL;
    
    struct memblock_device mem_19323;
    
    mem_19323.references = NULL;
    
    struct memblock_device mem_19319;
    
    mem_19319.references = NULL;
    
    struct memblock_device mem_19315;
    
    mem_19315.references = NULL;
    
    struct memblock_device color_19531;
    
    color_19531.references = NULL;
    
    struct memblock_device color_19527;
    
    color_19527.references = NULL;
    
    struct memblock_device mem_19310;
    
    mem_19310.references = NULL;
    
    struct memblock_device mem_19306;
    
    mem_19306.references = NULL;
    
    struct memblock_device ext_mem_19437;
    
    ext_mem_19437.references = NULL;
    
    struct memblock_device ext_mem_19438;
    
    ext_mem_19438.references = NULL;
    
    struct memblock_device mem_19447;
    
    mem_19447.references = NULL;
    
    struct memblock_device mem_19442;
    
    mem_19442.references = NULL;
    
    struct memblock_device color_19525;
    
    color_19525.references = NULL;
    
    struct memblock_device color_19524;
    
    color_19524.references = NULL;
    
    struct memblock_device color_19523;
    
    color_19523.references = NULL;
    
    struct memblock_device color_19522;
    
    color_19522.references = NULL;
    
    struct memblock_device color_19521;
    
    color_19521.references = NULL;
    
    struct memblock_device color_19520;
    
    color_19520.references = NULL;
    
    struct memblock_device color_19519;
    
    color_19519.references = NULL;
    
    struct memblock_device color_19518;
    
    color_19518.references = NULL;
    
    struct memblock_device color_19517;
    
    color_19517.references = NULL;
    
    struct memblock_device color_19516;
    
    color_19516.references = NULL;
    
    struct memblock_device color_19515;
    
    color_19515.references = NULL;
    
    struct memblock_device mem_19235;
    
    mem_19235.references = NULL;
    
    struct memblock_device mem_19232;
    
    mem_19232.references = NULL;
    
    struct memblock_device mem_19056;
    
    mem_19056.references = NULL;
    
    struct memblock_device mem_19053;
    
    mem_19053.references = NULL;
    
    struct memblock_device ext_mem_19449;
    
    ext_mem_19449.references = NULL;
    
    struct memblock_device ext_mem_19450;
    
    ext_mem_19450.references = NULL;
    
    struct memblock_device mem_19050;
    
    mem_19050.references = NULL;
    
    struct memblock_device mem_out_19591;
    
    mem_out_19591.references = NULL;
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    
    bool cond_16396 = g_16393 == (int64_t) 0;
    int32_t iters_16397;
    
    if (cond_16396) {
        iters_16397 = 0;
    } else {
        iters_16397 = 16;
    }
    
    int64_t binop_y_19048 = (int64_t) 8 * g_16393;
    int64_t bytes_19049 = smax64((int64_t) 0, binop_y_19048);
    
    if (memblock_alloc_device(ctx, &mem_19050, bytes_19049, "mem_19050")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_19050, g_16393, (int64_t) 0,
                                 (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool loop_nonempty_16399 = slt32(0, iters_16397);
    int64_t i_16400 = sub64(g_16393, (int64_t) 1);
    bool x_16401 = sle64((int64_t) 0, i_16400);
    bool y_16402 = slt64(i_16400, g_16393);
    bool bounds_check_16403 = x_16401 && y_16402;
    bool loop_not_taken_16404 = !loop_nonempty_16399;
    bool protect_assert_disj_16405 = bounds_check_16403 || loop_not_taken_16404;
    bool index_certs_16406;
    
    if (!protect_assert_disj_16405) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_16400,
                               "] out of bounds for array of shape [",
                               (long long) g_16393, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  fut/manifut/util/radix_sort.fut:25:24-35\n   #2  fut/manifut/util/radix_sort.fut:53:31-62\n   #3  fut/manifut/util/radix_sort.fut:115:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  fut/manifut/util/radix_sort.fut:65:3-67:47\n   #6  fut/manifut/util/radix_sort.fut:121:3-57\n   #7  fut/entries.fut:19:16-88\n   #8  fut/entries.fut:14:1-22:22\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool suff_outer_par_16773;
    
    suff_outer_par_16773 = *ctx->tuning_params.sortBagzisuff_outer_par_0 <=
        b_16392;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_outer_par_0", (long) b_16392,
                suff_outer_par_16773 ? "true" : "false");
    
    int64_t max_group_sizze_17000;
    
    max_group_sizze_17000 = ctx->cuda.max_block_size;
    
    bool fits_17001 = sle64(g_16393, max_group_sizze_17000);
    bool suff_intra_par_16999;
    
    suff_intra_par_16999 = *ctx->tuning_params.sortBagzisuff_intra_par_1 <=
        g_16393;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_intra_par_1", (long) g_16393,
                suff_intra_par_16999 ? "true" : "false");
    
    bool intra_suff_and_fits_17002 = suff_intra_par_16999 && fits_17001;
    int64_t segmap_group_sizze_16888;
    
    segmap_group_sizze_16888 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_16777;
    
    int64_t num_groups_16889;
    int32_t max_num_groups_19602;
    
    max_num_groups_19602 = *ctx->tuning_params.sortBagzisegmap_num_groups_16779;
    num_groups_16889 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(b_16392,
                                                            segmap_group_sizze_16888),
                                                  sext_i32_i64(max_num_groups_19602))));
    
    int64_t nest_sizze_17552 = b_16392 * g_16393;
    int64_t segmap_group_sizze_17553;
    
    segmap_group_sizze_17553 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17529;
    
    bool suff_intra_par_17580;
    
    suff_intra_par_17580 = *ctx->tuning_params.sortBagzisuff_intra_par_2 <=
        g_16393;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBag.suff_intra_par_2", (long) g_16393,
                suff_intra_par_17580 ? "true" : "false");
    
    bool intra_suff_and_fits_17581 = fits_17001 && suff_intra_par_17580;
    int64_t segscan_group_sizze_17680;
    
    segscan_group_sizze_17680 =
        *ctx->tuning_params.sortBagzisegscan_group_sizze_17350;
    
    int64_t num_groups_17681;
    int32_t max_num_groups_19603;
    
    max_num_groups_19603 =
        *ctx->tuning_params.sortBagzisegscan_num_groups_17352;
    num_groups_17681 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_17552,
                                                            segscan_group_sizze_17680),
                                                  sext_i32_i64(max_num_groups_19603))));
    
    int64_t segmap_group_sizze_17753;
    
    segmap_group_sizze_17753 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17301;
    
    int64_t segmap_group_sizze_17794;
    
    segmap_group_sizze_17794 =
        *ctx->tuning_params.sortBagzisegmap_group_sizze_17135;
    
    int64_t segmap_usable_groups_17754 = sdiv_up_safe64(nest_sizze_17552,
                                                        segmap_group_sizze_17753);
    int64_t bytes_19052 = (int64_t) 4 * nest_sizze_17552;
    int64_t binop_y_19058 = (int64_t) 4 * g_16393;
    int64_t bytes_19059 = smax64((int64_t) 0, binop_y_19058);
    int64_t bytes_19441 = smax64((int64_t) 0, bytes_19052);
    int64_t binop_y_19317 = (int64_t) 8 * nest_sizze_17552;
    int64_t bytes_19318 = smax64((int64_t) 0, binop_y_19317);
    int64_t num_bytes_19495 = (int64_t) 4 * g_16393;
    int64_t num_bytes_19499 = (int64_t) 8 * g_16393;
    int64_t num_bytes_19505 = (int64_t) 4 * g_16393;
    int64_t num_bytes_19509 = (int64_t) 8 * g_16393;
    int64_t maxSubHelper_19526 = umax64(bytes_19049, bytes_19059);
    int64_t num_threads_19546 = segmap_group_sizze_16888 * num_groups_16889;
    int64_t total_sizze_19547 = num_bytes_19499 * num_threads_19546;
    int64_t total_sizze_19548 = num_bytes_19495 * num_threads_19546;
    int64_t total_sizze_19549 = bytes_19059 * num_threads_19546;
    int64_t total_sizze_19550 = bytes_19059 * num_threads_19546;
    int64_t total_sizze_19551 = bytes_19049 * num_threads_19546;
    int64_t total_sizze_19552 = bytes_19059 * num_threads_19546;
    int64_t total_sizze_19553 = bytes_19049 * num_threads_19546;
    int64_t total_sizze_19554 = bytes_19049 * num_threads_19546;
    int64_t total_sizze_19555 = bytes_19049 * num_threads_19546;
    int64_t total_sizze_19556 = bytes_19049 * num_threads_19546;
    int64_t total_sizze_19557 = bytes_19059 * num_threads_19546;
    int64_t total_sizze_19559 = b_16392 * num_bytes_19509;
    int64_t total_sizze_19560 = b_16392 * bytes_19049;
    int32_t local_memory_capacity_20072;
    
    local_memory_capacity_20072 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20072)) &&
        suff_outer_par_16773) {
        if (memblock_alloc_device(ctx, &mem_19053, bytes_19052, "mem_19053")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19053, (int64_t) 0,
                                                  keys_mem_19046, (int64_t) 0,
                                                  (int64_t) 1, g_16393,
                                                  b_16392) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19056, bytes_19052, "mem_19056")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19056, (int64_t) 0,
                                                  values_mem_19047, (int64_t) 0,
                                                  (int64_t) 1, g_16393,
                                                  b_16392) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19232, bytes_19052, "mem_19232")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19235, bytes_19052, "mem_19235")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19515, total_sizze_19547,
                                  "color_19515")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19516, total_sizze_19548,
                                  "color_19516")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19517, total_sizze_19549,
                                  "color_19517")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19518, total_sizze_19550,
                                  "color_19518")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19519, total_sizze_19551,
                                  "color_19519")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19520, total_sizze_19552,
                                  "color_19520")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19521, total_sizze_19553,
                                  "color_19521")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19522, total_sizze_19554,
                                  "color_19522")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19523, total_sizze_19555,
                                  "color_19523")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19524, total_sizze_19556,
                                  "color_19524")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19525, total_sizze_19557,
                                  "color_19525")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_19604 = sext_i64_i32(sdiv_up64(b_16392,
                                                               segmap_group_sizze_16888));
        CUdeviceptr kernel_arg_20286 = mem_19053.mem;
        CUdeviceptr kernel_arg_20287 = mem_19056.mem;
        CUdeviceptr kernel_arg_20288 = mem_19232.mem;
        CUdeviceptr kernel_arg_20289 = mem_19235.mem;
        CUdeviceptr kernel_arg_20290 = color_19515.mem;
        CUdeviceptr kernel_arg_20291 = color_19516.mem;
        CUdeviceptr kernel_arg_20292 = color_19517.mem;
        CUdeviceptr kernel_arg_20293 = color_19518.mem;
        CUdeviceptr kernel_arg_20294 = color_19519.mem;
        CUdeviceptr kernel_arg_20295 = color_19520.mem;
        CUdeviceptr kernel_arg_20296 = color_19521.mem;
        CUdeviceptr kernel_arg_20297 = color_19522.mem;
        CUdeviceptr kernel_arg_20298 = color_19523.mem;
        CUdeviceptr kernel_arg_20299 = color_19524.mem;
        CUdeviceptr kernel_arg_20300 = color_19525.mem;
        
        if ((((((1 && num_groups_16889 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_16888 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_16889;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20283[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args, &b_16392,
                                         &g_16393, &iters_16397, &i_16400,
                                         &num_groups_16889, &num_threads_19546,
                                         &virt_num_groups_19604,
                                         &kernel_arg_20286, &kernel_arg_20287,
                                         &kernel_arg_20288, &kernel_arg_20289,
                                         &kernel_arg_20290, &kernel_arg_20291,
                                         &kernel_arg_20292, &kernel_arg_20293,
                                         &kernel_arg_20294, &kernel_arg_20295,
                                         &kernel_arg_20296, &kernel_arg_20297,
                                         &kernel_arg_20298, &kernel_arg_20299,
                                         &kernel_arg_20300};
            int64_t time_start_20284 = 0, time_end_20285 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBag.segmap_16894", (long) num_groups_16889,
                        (long) 1, (long) 1, (long) segmap_group_sizze_16888,
                        (long) 1, (long) 1, (int) 0);
                time_start_20284 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagzisegmap_16894_runs,
                                          &ctx->sortBagzisegmap_16894_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_16894,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_16888, 1,
                                                  1, 0, NULL, kernel_args_20283,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20285 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBag.segmap_16894", time_end_20285 -
                        time_start_20284);
            }
        }
        ctx->failure_is_an_option = 1;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19053, "mem_19053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19056, "mem_19056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19515, "color_19515") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19516, "color_19516") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19517, "color_19517") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19518, "color_19518") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19519, "color_19519") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19520, "color_19520") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19521, "color_19521") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19522, "color_19522") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19523, "color_19523") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19524, "color_19524") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19525, "color_19525") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19442, bytes_19441, "mem_19442")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19442, (int64_t) 0,
                                                  mem_19232, (int64_t) 0,
                                                  (int64_t) 1, b_16392,
                                                  g_16393) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19232, "mem_19232") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19447, bytes_19441, "mem_19447")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19447, (int64_t) 0,
                                                  mem_19235, (int64_t) 0,
                                                  (int64_t) 1, b_16392,
                                                  g_16393) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19235, "mem_19235") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19450, &mem_19442, "mem_19442") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19449, &mem_19447, "mem_19447") !=
            0)
            return 1;
    } else {
        int32_t local_memory_capacity_20071;
        
        local_memory_capacity_20071 = ctx->cuda.max_shared_memory;
        if (sle64(num_bytes_19505 + srem64((int64_t) 8 - srem64(num_bytes_19505,
                                                                (int64_t) 8),
                                           (int64_t) 8) + (maxSubHelper_19526 +
                                                           srem64((int64_t) 8 -
                                                                  srem64(maxSubHelper_19526,
                                                                         (int64_t) 8),
                                                                  (int64_t) 8)) +
                  (bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19059 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19059,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19049 + srem64((int64_t) 8 - srem64(bytes_19049,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19049 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19049,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19049 + srem64((int64_t) 8 - srem64(bytes_19049,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19049 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19049,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                             (int64_t) 8),
                                        (int64_t) 8)),
                  sext_i32_i64(local_memory_capacity_20071)) &&
            intra_suff_and_fits_17002) {
            if (memblock_alloc_device(ctx, &mem_19306, bytes_19441,
                                      "mem_19306")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19310, bytes_19441,
                                      "mem_19310")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19527, total_sizze_19559,
                                      "color_19527")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19531, total_sizze_19560,
                                      "color_19531")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t num_chunks_19657 = sext_i64_i32(sdiv_up64(g_16393,
                                                              g_16393));
            int32_t virt_num_groups_19658 = sext_i64_i32(b_16392);
            unsigned int shared_sizze_20304 = bytes_19059;
            unsigned int shared_sizze_20306 = bytes_19049;
            unsigned int shared_sizze_20308 = bytes_19049;
            unsigned int shared_sizze_20310 = bytes_19049;
            unsigned int shared_sizze_20312 = bytes_19049;
            unsigned int shared_sizze_20314 = bytes_19059;
            unsigned int shared_sizze_20316 = bytes_19059;
            unsigned int shared_sizze_20318 = maxSubHelper_19526;
            unsigned int shared_sizze_20320 = num_bytes_19505;
            CUdeviceptr kernel_arg_20322 = keys_mem_19046.mem;
            CUdeviceptr kernel_arg_20323 = values_mem_19047.mem;
            CUdeviceptr kernel_arg_20324 = mem_19306.mem;
            CUdeviceptr kernel_arg_20325 = mem_19310.mem;
            CUdeviceptr kernel_arg_20326 = color_19527.mem;
            CUdeviceptr kernel_arg_20327 = color_19531.mem;
            unsigned int shared_offset_20305 = 0;
            unsigned int shared_offset_20307 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8);
            unsigned int shared_offset_20309 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8);
            unsigned int shared_offset_20311 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8);
            unsigned int shared_offset_20313 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8) + (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                      8) % 8);
            unsigned int shared_offset_20315 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8) + (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                      8) % 8) +
                         (shared_sizze_20312 + (8 - shared_sizze_20312 % 8) %
                          8);
            unsigned int shared_offset_20317 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8) + (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                      8) % 8) +
                         (shared_sizze_20312 + (8 - shared_sizze_20312 % 8) %
                          8) + (shared_sizze_20314 + (8 - shared_sizze_20314 %
                                                      8) % 8);
            unsigned int shared_offset_20319 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8) + (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                      8) % 8) +
                         (shared_sizze_20312 + (8 - shared_sizze_20312 % 8) %
                          8) + (shared_sizze_20314 + (8 - shared_sizze_20314 %
                                                      8) % 8) +
                         (shared_sizze_20316 + (8 - shared_sizze_20316 % 8) %
                          8);
            unsigned int shared_offset_20321 = 0 + (shared_sizze_20304 + (8 -
                                                                          shared_sizze_20304 %
                                                                          8) %
                                                    8) + (shared_sizze_20306 +
                                                          (8 -
                                                           shared_sizze_20306 %
                                                           8) % 8) +
                         (shared_sizze_20308 + (8 - shared_sizze_20308 % 8) %
                          8) + (shared_sizze_20310 + (8 - shared_sizze_20310 %
                                                      8) % 8) +
                         (shared_sizze_20312 + (8 - shared_sizze_20312 % 8) %
                          8) + (shared_sizze_20314 + (8 - shared_sizze_20314 %
                                                      8) % 8) +
                         (shared_sizze_20316 + (8 - shared_sizze_20316 % 8) %
                          8) + (shared_sizze_20318 + (8 - shared_sizze_20318 %
                                                      8) % 8);
            
            if ((((((1 && b_16392 != 0) && 1 != 0) && 1 != 0) && g_16393 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = b_16392;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20301[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &shared_offset_20305,
                                             &shared_offset_20307,
                                             &shared_offset_20309,
                                             &shared_offset_20311,
                                             &shared_offset_20313,
                                             &shared_offset_20315,
                                             &shared_offset_20317,
                                             &shared_offset_20319,
                                             &shared_offset_20321, &b_16392,
                                             &g_16393, &iters_16397, &i_16400,
                                             &kernel_arg_20322,
                                             &kernel_arg_20323,
                                             &kernel_arg_20324,
                                             &kernel_arg_20325,
                                             &kernel_arg_20326,
                                             &kernel_arg_20327};
                int64_t time_start_20302 = 0, time_end_20303 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_intragroup_17006", (long) b_16392,
                            (long) 1, (long) 1, (long) g_16393, (long) 1,
                            (long) 1, (int) (0 + (shared_sizze_20304 + (8 -
                                                                        shared_sizze_20304 %
                                                                        8) %
                                                  8) + (shared_sizze_20306 +
                                                        (8 -
                                                         shared_sizze_20306 %
                                                         8) % 8) +
                                             (shared_sizze_20308 + (8 -
                                                                    shared_sizze_20308 %
                                                                    8) % 8) +
                                             (shared_sizze_20310 + (8 -
                                                                    shared_sizze_20310 %
                                                                    8) % 8) +
                                             (shared_sizze_20312 + (8 -
                                                                    shared_sizze_20312 %
                                                                    8) % 8) +
                                             (shared_sizze_20314 + (8 -
                                                                    shared_sizze_20314 %
                                                                    8) % 8) +
                                             (shared_sizze_20316 + (8 -
                                                                    shared_sizze_20316 %
                                                                    8) % 8) +
                                             (shared_sizze_20318 + (8 -
                                                                    shared_sizze_20318 %
                                                                    8) % 8) +
                                             (shared_sizze_20320 + (8 -
                                                                    shared_sizze_20320 %
                                                                    8) % 8)));
                    time_start_20302 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_intragroup_17006_runs,
                                              &ctx->sortBagzisegmap_intragroup_17006_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_intragroup_17006,
                                                      grid[0], grid[1], grid[2],
                                                      g_16393, 1, 1, 0 +
                                                      (shared_sizze_20304 + (8 -
                                                                             shared_sizze_20304 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20306 + (8 -
                                                                             shared_sizze_20306 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20308 + (8 -
                                                                             shared_sizze_20308 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20310 + (8 -
                                                                             shared_sizze_20310 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20312 + (8 -
                                                                             shared_sizze_20312 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20314 + (8 -
                                                                             shared_sizze_20314 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20316 + (8 -
                                                                             shared_sizze_20316 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20318 + (8 -
                                                                             shared_sizze_20318 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20320 + (8 -
                                                                             shared_sizze_20320 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20301, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20303 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_intragroup_17006", time_end_20303 -
                            time_start_20302);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &color_19527, "color_19527") != 0)
                return 1;
            if (memblock_unref_device(ctx, &color_19531, "color_19531") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19438, &mem_19306,
                                    "mem_19306") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19437, &mem_19310,
                                    "mem_19310") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_17554 = sdiv_up64(nest_sizze_17552,
                                                           segmap_group_sizze_17553);
            
            if (memblock_alloc_device(ctx, &mem_19315, bytes_19441,
                                      "mem_19315")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_19708 = sext_i64_i32(sdiv_up64(b_16392 *
                                                                   g_16393,
                                                                   segmap_group_sizze_17553));
            CUdeviceptr kernel_arg_20331 = keys_mem_19046.mem;
            CUdeviceptr kernel_arg_20332 = mem_19315.mem;
            
            if ((((((1 && segmap_usable_groups_17554 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_17553 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_17554;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20328[] = {&ctx->global_failure, &b_16392,
                                             &g_16393, &kernel_arg_20331,
                                             &kernel_arg_20332};
                int64_t time_start_20329 = 0, time_end_20330 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_17558",
                            (long) segmap_usable_groups_17554, (long) 1,
                            (long) 1, (long) segmap_group_sizze_17553, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20329 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_17558_runs,
                                              &ctx->sortBagzisegmap_17558_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17558,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_17553,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20328, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20330 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_17558", time_end_20330 -
                            time_start_20329);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_alloc_device(ctx, &mem_19319, bytes_19318,
                                      "mem_19319")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_19722;
            
            group_sizze_19722 = *ctx->tuning_params.sortBagzigroup_sizze_19722;
            
            int64_t num_groups_19723 = sdiv_up64(b_16392 * g_16393,
                                                 group_sizze_19722);
            CUdeviceptr kernel_arg_20336 = mem_19050.mem;
            CUdeviceptr kernel_arg_20337 = mem_19319.mem;
            
            if ((((((1 && num_groups_19723 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_19722 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_19723;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20333[] = {&b_16392, &g_16393,
                                             &kernel_arg_20336,
                                             &kernel_arg_20337};
                int64_t time_start_20334 = 0, time_end_20335 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.replicate_19719", (long) num_groups_19723,
                            (long) 1, (long) 1, (long) group_sizze_19722,
                            (long) 1, (long) 1, (int) 0);
                    time_start_20334 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzireplicate_19719_runs,
                                              &ctx->sortBagzireplicate_19719_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzireplicate_19719,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_19722, 1, 1,
                                                      0, NULL,
                                                      kernel_args_20333, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20335 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.replicate_19719", time_end_20335 -
                            time_start_20334);
                }
            }
            if (memblock_alloc_device(ctx, &mem_19323, bytes_19441,
                                      "mem_19323")) {
                err = 1;
                goto cleanup;
            }
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19323.mem + (int64_t) 0,
                                                mem_19315.mem + (int64_t) 0,
                                                b_16392 * g_16393 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (memblock_set_device(ctx, &mem_param_19331, &mem_19323,
                                    "mem_19323") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_19339, &mem_19319,
                                    "mem_19319") != 0)
                return 1;
            for (int32_t i_17566 = 0; i_17566 < iters_16397; i_17566++) {
                if (memblock_alloc_device(ctx, &mem_19347, bytes_19441,
                                          "mem_19347")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19347.mem + (int64_t) 0,
                                                    mem_param_19331.mem +
                                                    (int64_t) 0, b_16392 *
                                                    g_16393 * (int64_t) 4));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (memblock_alloc_device(ctx, &mem_19351, bytes_19318,
                                          "mem_19351")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19351.mem + (int64_t) 0,
                                                    mem_param_19339.mem +
                                                    (int64_t) 0, b_16392 *
                                                    g_16393 * (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                
                int32_t defunc_2_radix_sort_step_arg_17571 = mul32(2, i_17566);
                int32_t defunc_0_get_bit_arg_17572 = add32(1,
                                                           defunc_2_radix_sort_step_arg_17571);
                bool cond_f_res_17573 = defunc_0_get_bit_arg_17572 == 31;
                bool cond_f_res_17574 = defunc_2_radix_sort_step_arg_17571 ==
                     31;
                int32_t local_memory_capacity_20059;
                
                local_memory_capacity_20059 = ctx->cuda.max_shared_memory;
                if (sle64(bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                                    (int64_t) 8),
                                               (int64_t) 8) + (bytes_19049 +
                                                               srem64((int64_t) 8 -
                                                                      srem64(bytes_19049,
                                                                             (int64_t) 8),
                                                                      (int64_t) 8)) +
                          (bytes_19049 + srem64((int64_t) 8 -
                                                srem64(bytes_19049,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19049 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19049,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19049 + srem64((int64_t) 8 -
                                                srem64(bytes_19049,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19049 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19049,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19059 + srem64((int64_t) 8 -
                                                srem64(bytes_19059,
                                                       (int64_t) 8),
                                                (int64_t) 8)),
                          sext_i32_i64(local_memory_capacity_20059)) &&
                    intra_suff_and_fits_17581) {
                    if (memblock_alloc_device(ctx, &mem_19379, bytes_19441,
                                              "mem_19379")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19383, bytes_19318,
                                              "mem_19383")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t num_chunks_19735 = sext_i64_i32(sdiv_up64(g_16393,
                                                                      g_16393));
                    int32_t virt_num_groups_19736 = sext_i64_i32(b_16392);
                    unsigned int shared_sizze_20341 = bytes_19059;
                    unsigned int shared_sizze_20343 = bytes_19049;
                    unsigned int shared_sizze_20345 = bytes_19049;
                    unsigned int shared_sizze_20347 = bytes_19049;
                    unsigned int shared_sizze_20349 = bytes_19049;
                    unsigned int shared_sizze_20351 = bytes_19049;
                    unsigned int shared_sizze_20353 = bytes_19059;
                    CUdeviceptr kernel_arg_20355 = mem_param_19331.mem;
                    CUdeviceptr kernel_arg_20356 = mem_param_19339.mem;
                    CUdeviceptr kernel_arg_20357 = mem_19379.mem;
                    CUdeviceptr kernel_arg_20358 = mem_19383.mem;
                    unsigned int shared_offset_20342 = 0;
                    unsigned int shared_offset_20344 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8);
                    unsigned int shared_offset_20346 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8) +
                                 (shared_sizze_20343 + (8 - shared_sizze_20343 %
                                                        8) % 8);
                    unsigned int shared_offset_20348 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8) +
                                 (shared_sizze_20343 + (8 - shared_sizze_20343 %
                                                        8) % 8) +
                                 (shared_sizze_20345 + (8 - shared_sizze_20345 %
                                                        8) % 8);
                    unsigned int shared_offset_20350 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8) +
                                 (shared_sizze_20343 + (8 - shared_sizze_20343 %
                                                        8) % 8) +
                                 (shared_sizze_20345 + (8 - shared_sizze_20345 %
                                                        8) % 8) +
                                 (shared_sizze_20347 + (8 - shared_sizze_20347 %
                                                        8) % 8);
                    unsigned int shared_offset_20352 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8) +
                                 (shared_sizze_20343 + (8 - shared_sizze_20343 %
                                                        8) % 8) +
                                 (shared_sizze_20345 + (8 - shared_sizze_20345 %
                                                        8) % 8) +
                                 (shared_sizze_20347 + (8 - shared_sizze_20347 %
                                                        8) % 8) +
                                 (shared_sizze_20349 + (8 - shared_sizze_20349 %
                                                        8) % 8);
                    unsigned int shared_offset_20354 = 0 + (shared_sizze_20341 +
                                                            (8 -
                                                             shared_sizze_20341 %
                                                             8) % 8) +
                                 (shared_sizze_20343 + (8 - shared_sizze_20343 %
                                                        8) % 8) +
                                 (shared_sizze_20345 + (8 - shared_sizze_20345 %
                                                        8) % 8) +
                                 (shared_sizze_20347 + (8 - shared_sizze_20347 %
                                                        8) % 8) +
                                 (shared_sizze_20349 + (8 - shared_sizze_20349 %
                                                        8) % 8) +
                                 (shared_sizze_20351 + (8 - shared_sizze_20351 %
                                                        8) % 8);
                    
                    if ((((((1 && b_16392 != 0) && 1 != 0) && 1 != 0) &&
                          g_16393 != 0) && 1 != 0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = b_16392;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20338[] = {&ctx->global_failure,
                                                     &shared_offset_20342,
                                                     &shared_offset_20344,
                                                     &shared_offset_20346,
                                                     &shared_offset_20348,
                                                     &shared_offset_20350,
                                                     &shared_offset_20352,
                                                     &shared_offset_20354,
                                                     &b_16392, &g_16393,
                                                     &i_16400,
                                                     &defunc_2_radix_sort_step_arg_17571,
                                                     &defunc_0_get_bit_arg_17572,
                                                     &cond_f_res_17573,
                                                     &cond_f_res_17574,
                                                     &kernel_arg_20355,
                                                     &kernel_arg_20356,
                                                     &kernel_arg_20357,
                                                     &kernel_arg_20358};
                        int64_t time_start_20339 = 0, time_end_20340 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBag.segmap_intragroup_17587",
                                    (long) b_16392, (long) 1, (long) 1,
                                    (long) g_16393, (long) 1, (long) 1,
                                    (int) (0 + (shared_sizze_20341 + (8 -
                                                                      shared_sizze_20341 %
                                                                      8) % 8) +
                                           (shared_sizze_20343 + (8 -
                                                                  shared_sizze_20343 %
                                                                  8) % 8) +
                                           (shared_sizze_20345 + (8 -
                                                                  shared_sizze_20345 %
                                                                  8) % 8) +
                                           (shared_sizze_20347 + (8 -
                                                                  shared_sizze_20347 %
                                                                  8) % 8) +
                                           (shared_sizze_20349 + (8 -
                                                                  shared_sizze_20349 %
                                                                  8) % 8) +
                                           (shared_sizze_20351 + (8 -
                                                                  shared_sizze_20351 %
                                                                  8) % 8) +
                                           (shared_sizze_20353 + (8 -
                                                                  shared_sizze_20353 %
                                                                  8) % 8)));
                            time_start_20339 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagzisegmap_intragroup_17587_runs,
                                                      &ctx->sortBagzisegmap_intragroup_17587_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_intragroup_17587,
                                                              grid[0], grid[1],
                                                              grid[2], g_16393,
                                                              1, 1, 0 +
                                                              (shared_sizze_20341 +
                                                               (8 -
                                                                shared_sizze_20341 %
                                                                8) % 8) +
                                                              (shared_sizze_20343 +
                                                               (8 -
                                                                shared_sizze_20343 %
                                                                8) % 8) +
                                                              (shared_sizze_20345 +
                                                               (8 -
                                                                shared_sizze_20345 %
                                                                8) % 8) +
                                                              (shared_sizze_20347 +
                                                               (8 -
                                                                shared_sizze_20347 %
                                                                8) % 8) +
                                                              (shared_sizze_20349 +
                                                               (8 -
                                                                shared_sizze_20349 %
                                                                8) % 8) +
                                                              (shared_sizze_20351 +
                                                               (8 -
                                                                shared_sizze_20351 %
                                                                8) % 8) +
                                                              (shared_sizze_20353 +
                                                               (8 -
                                                                shared_sizze_20353 %
                                                                8) % 8), NULL,
                                                              kernel_args_20338,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20340 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBag.segmap_intragroup_17587",
                                    time_end_20340 - time_start_20339);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_set_device(ctx, &ext_mem_19407, &mem_19379,
                                            "mem_19379") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19406, &mem_19383,
                                            "mem_19383") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx, &mem_19388, bytes_19318,
                                              "mem_19388")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19392, bytes_19318,
                                              "mem_19392")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19396, bytes_19318,
                                              "mem_19396")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19400, bytes_19318,
                                              "mem_19400")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19404, bytes_19441,
                                              "mem_19404")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64((int64_t) 0, b_16392 * g_16393)) {
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegScan");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: number of elements processed sequentially per thread is m:",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: memory constraints is: ",
                                    (long long) 11, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: register constraints is: ",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: sumT' is: ", (long long) 8, '\n');
                        
                        int64_t numThreads_19777 = sdiv_up64(b_16392 * g_16393,
                                                             segscan_group_sizze_17680 *
                                                             (int64_t) 3) *
                                segscan_group_sizze_17680;
                        int64_t numGroups_19778 = sdiv_up64(b_16392 * g_16393,
                                                            segscan_group_sizze_17680 *
                                                            (int64_t) 3);
                        struct memblock_device sortBagziid_counter_mem_19779 =
                                               ctx->sortBagziid_counter_mem_19779;
                        
                        if (memblock_alloc_device(ctx, &status_flags_mem_19781,
                                                  numGroups_19778,
                                                  "status_flags_mem_19781")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19783,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "aggregates_mem_19783")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19785,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "incprefixes_mem_19785")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19787,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "aggregates_mem_19787")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19789,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "incprefixes_mem_19789")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19791,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "aggregates_mem_19791")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19793,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "incprefixes_mem_19793")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19795,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "aggregates_mem_19795")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19797,
                                                  (int64_t) 8 * numGroups_19778,
                                                  "incprefixes_mem_19797")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i8(ctx,
                                                         status_flags_mem_19781,
                                                         numGroups_19778,
                                                         (int8_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        unsigned int shared_sizze_20363 =
                                     smax64(smax64((int64_t) 1056,
                                                   sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                 segscan_group_sizze_17680,
                                                                                 (int64_t) 8) *
                                                                       (int64_t) 8 +
                                                                       (int64_t) 8 *
                                                                       segscan_group_sizze_17680,
                                                                       (int64_t) 8) *
                                                             (int64_t) 8 +
                                                             (int64_t) 8 *
                                                             segscan_group_sizze_17680,
                                                             (int64_t) 8) *
                                                   (int64_t) 8 + (int64_t) 8 *
                                                   segscan_group_sizze_17680),
                                            smax64(smax64(smax64((int64_t) 3 *
                                                                 segscan_group_sizze_17680 *
                                                                 (int64_t) 8,
                                                                 (int64_t) 3 *
                                                                 segscan_group_sizze_17680 *
                                                                 (int64_t) 8),
                                                          (int64_t) 3 *
                                                          segscan_group_sizze_17680 *
                                                          (int64_t) 8),
                                                   (int64_t) 3 *
                                                   segscan_group_sizze_17680 *
                                                   (int64_t) 8));
                        CUdeviceptr kernel_arg_20365 = mem_param_19331.mem;
                        CUdeviceptr kernel_arg_20366 = mem_19388.mem;
                        CUdeviceptr kernel_arg_20367 = mem_19392.mem;
                        CUdeviceptr kernel_arg_20368 = mem_19396.mem;
                        CUdeviceptr kernel_arg_20369 = mem_19400.mem;
                        CUdeviceptr kernel_arg_20370 = mem_19404.mem;
                        CUdeviceptr kernel_arg_20371 =
                                    sortBagziid_counter_mem_19779.mem;
                        CUdeviceptr kernel_arg_20372 =
                                    status_flags_mem_19781.mem;
                        CUdeviceptr kernel_arg_20373 = aggregates_mem_19783.mem;
                        CUdeviceptr kernel_arg_20374 =
                                    incprefixes_mem_19785.mem;
                        CUdeviceptr kernel_arg_20375 = aggregates_mem_19787.mem;
                        CUdeviceptr kernel_arg_20376 =
                                    incprefixes_mem_19789.mem;
                        CUdeviceptr kernel_arg_20377 = aggregates_mem_19791.mem;
                        CUdeviceptr kernel_arg_20378 =
                                    incprefixes_mem_19793.mem;
                        CUdeviceptr kernel_arg_20379 = aggregates_mem_19795.mem;
                        CUdeviceptr kernel_arg_20380 =
                                    incprefixes_mem_19797.mem;
                        unsigned int shared_offset_20364 = 0;
                        
                        if ((((((1 && sdiv_up64(b_16392 * g_16393,
                                                segscan_group_sizze_17680 *
                                                (int64_t) 3) != 0) && 1 != 0) &&
                               1 != 0) && segscan_group_sizze_17680 != 0) &&
                             1 != 0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up64(b_16392 * g_16393,
                                                      segscan_group_sizze_17680 *
                                                      (int64_t) 3);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20360[] = {&ctx->global_failure,
                                                         &shared_offset_20364,
                                                         &b_16392, &g_16393,
                                                         &defunc_2_radix_sort_step_arg_17571,
                                                         &defunc_0_get_bit_arg_17572,
                                                         &cond_f_res_17573,
                                                         &cond_f_res_17574,
                                                         &kernel_arg_20365,
                                                         &kernel_arg_20366,
                                                         &kernel_arg_20367,
                                                         &kernel_arg_20368,
                                                         &kernel_arg_20369,
                                                         &kernel_arg_20370,
                                                         &kernel_arg_20371,
                                                         &kernel_arg_20372,
                                                         &kernel_arg_20373,
                                                         &kernel_arg_20374,
                                                         &kernel_arg_20375,
                                                         &kernel_arg_20376,
                                                         &kernel_arg_20377,
                                                         &kernel_arg_20378,
                                                         &kernel_arg_20379,
                                                         &kernel_arg_20380};
                            int64_t time_start_20361 = 0, time_end_20362 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "sortBag.segscan_17690",
                                        (long) sdiv_up64(b_16392 * g_16393,
                                                         segscan_group_sizze_17680 *
                                                         (int64_t) 3), (long) 1,
                                        (long) 1,
                                        (long) segscan_group_sizze_17680,
                                        (long) 1, (long) 1, (int) (0 +
                                                                   (shared_sizze_20363 +
                                                                    (8 -
                                                                     shared_sizze_20363 %
                                                                     8) % 8)));
                                time_start_20361 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->sortBagzisegscan_17690_runs,
                                                          &ctx->sortBagzisegscan_17690_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegscan_17690,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  segscan_group_sizze_17680,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20363 +
                                                                   (8 -
                                                                    shared_sizze_20363 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20360,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20362 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "sortBag.segscan_17690",
                                        time_end_20362 - time_start_20361);
                            }
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t virt_num_groups_20048 =
                            sext_i64_i32(sdiv_up64(b_16392 * g_16393,
                                                   segmap_group_sizze_17753));
                    CUdeviceptr kernel_arg_20384 = mem_param_19331.mem;
                    CUdeviceptr kernel_arg_20385 = mem_param_19339.mem;
                    CUdeviceptr kernel_arg_20386 = mem_19347.mem;
                    CUdeviceptr kernel_arg_20387 = mem_19351.mem;
                    CUdeviceptr kernel_arg_20388 = mem_19388.mem;
                    CUdeviceptr kernel_arg_20389 = mem_19392.mem;
                    CUdeviceptr kernel_arg_20390 = mem_19396.mem;
                    CUdeviceptr kernel_arg_20391 = mem_19400.mem;
                    CUdeviceptr kernel_arg_20392 = mem_19404.mem;
                    
                    if ((((((1 && segmap_usable_groups_17754 != 0) && 1 != 0) &&
                           1 != 0) && segmap_group_sizze_17753 != 0) && 1 !=
                         0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = segmap_usable_groups_17754;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20381[] = {&ctx->global_failure,
                                                     &b_16392, &g_16393,
                                                     &i_16400,
                                                     &kernel_arg_20384,
                                                     &kernel_arg_20385,
                                                     &kernel_arg_20386,
                                                     &kernel_arg_20387,
                                                     &kernel_arg_20388,
                                                     &kernel_arg_20389,
                                                     &kernel_arg_20390,
                                                     &kernel_arg_20391,
                                                     &kernel_arg_20392};
                        int64_t time_start_20382 = 0, time_end_20383 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBag.segmap_17759",
                                    (long) segmap_usable_groups_17754, (long) 1,
                                    (long) 1, (long) segmap_group_sizze_17753,
                                    (long) 1, (long) 1, (int) 0);
                            time_start_20382 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagzisegmap_17759_runs,
                                                      &ctx->sortBagzisegmap_17759_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17759,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              segmap_group_sizze_17753,
                                                              1, 1, 0, NULL,
                                                              kernel_args_20381,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20383 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBag.segmap_17759", time_end_20383 -
                                    time_start_20382);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_unref_device(ctx, &mem_19388, "mem_19388") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19392, "mem_19392") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19396, "mem_19396") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19400, "mem_19400") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19404, "mem_19404") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19407, &mem_19347,
                                            "mem_19347") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19406, &mem_19351,
                                            "mem_19351") != 0)
                        return 1;
                }
                if (memblock_unref_device(ctx, &mem_19347, "mem_19347") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_19351, "mem_19351") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19731,
                                        &ext_mem_19407, "ext_mem_19407") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19732,
                                        &ext_mem_19406, "ext_mem_19406") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19331,
                                        &mem_param_tmp_19731,
                                        "mem_param_tmp_19731") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19339,
                                        &mem_param_tmp_19732,
                                        "mem_param_tmp_19732") != 0)
                    return 1;
            }
            if (memblock_set_device(ctx, &ext_mem_19413, &mem_param_19331,
                                    "mem_param_19331") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19412, &mem_param_19339,
                                    "mem_param_19339") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19319, "mem_19319") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19323, "mem_19323") != 0)
                return 1;
            
            int64_t segmap_usable_groups_17795 = sdiv_up64(nest_sizze_17552,
                                                           segmap_group_sizze_17794);
            
            if (memblock_alloc_device(ctx, &mem_19432, bytes_19441,
                                      "mem_19432")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19436, bytes_19441,
                                      "mem_19436")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_20060 = sext_i64_i32(sdiv_up64(b_16392 *
                                                                   g_16393,
                                                                   segmap_group_sizze_17794));
            CUdeviceptr kernel_arg_20396 = values_mem_19047.mem;
            CUdeviceptr kernel_arg_20397 = mem_19315.mem;
            CUdeviceptr kernel_arg_20398 = ext_mem_19412.mem;
            CUdeviceptr kernel_arg_20399 = mem_19432.mem;
            CUdeviceptr kernel_arg_20400 = mem_19436.mem;
            
            if ((((((1 && segmap_usable_groups_17795 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_17794 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_17795;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20393[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &b_16392, &g_16393,
                                             &kernel_arg_20396,
                                             &kernel_arg_20397,
                                             &kernel_arg_20398,
                                             &kernel_arg_20399,
                                             &kernel_arg_20400};
                int64_t time_start_20394 = 0, time_end_20395 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBag.segmap_17800",
                            (long) segmap_usable_groups_17795, (long) 1,
                            (long) 1, (long) segmap_group_sizze_17794, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20394 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagzisegmap_17800_runs,
                                              &ctx->sortBagzisegmap_17800_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagzisegmap_17800,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_17794,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20393, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20395 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBag.segmap_17800", time_end_20395 -
                            time_start_20394);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_19315, "mem_19315") != 0)
                return 1;
            if (memblock_unref_device(ctx, &ext_mem_19412, "ext_mem_19412") !=
                0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19438, &mem_19432,
                                    "mem_19432") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19437, &mem_19436,
                                    "mem_19436") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &ext_mem_19450, &ext_mem_19438,
                                "ext_mem_19438") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19449, &ext_mem_19437,
                                "ext_mem_19437") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_19050, "mem_19050") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19590, &ext_mem_19450,
                            "ext_mem_19450") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19591, &ext_mem_19449,
                            "ext_mem_19449") != 0)
        return 1;
    (*mem_out_p_20281).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20281, &mem_out_19590,
                            "mem_out_19590") != 0)
        return 1;
    (*mem_out_p_20282).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20282, &mem_out_19591,
                            "mem_out_19591") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19436, "mem_19436") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19432, "mem_19432") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19732,
                                  "mem_param_tmp_19732") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19731,
                                  "mem_param_tmp_19731") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19797,
                                  "incprefixes_mem_19797") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19795,
                                  "aggregates_mem_19795") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19793,
                                  "incprefixes_mem_19793") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19791,
                                  "aggregates_mem_19791") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19789,
                                  "incprefixes_mem_19789") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19787,
                                  "aggregates_mem_19787") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19785,
                                  "incprefixes_mem_19785") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19783,
                                  "aggregates_mem_19783") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_19781,
                                  "status_flags_mem_19781") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19404, "mem_19404") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19400, "mem_19400") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19396, "mem_19396") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19392, "mem_19392") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19388, "mem_19388") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19383, "mem_19383") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19379, "mem_19379") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19406, "ext_mem_19406") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19407, "ext_mem_19407") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19351, "mem_19351") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19347, "mem_19347") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19339, "mem_param_19339") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19331, "mem_param_19331") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19412, "ext_mem_19412") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19413, "ext_mem_19413") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19323, "mem_19323") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19319, "mem_19319") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19315, "mem_19315") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19531, "color_19531") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19527, "color_19527") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19310, "mem_19310") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19306, "mem_19306") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19437, "ext_mem_19437") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19438, "ext_mem_19438") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19447, "mem_19447") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19442, "mem_19442") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19525, "color_19525") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19524, "color_19524") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19523, "color_19523") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19522, "color_19522") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19521, "color_19521") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19520, "color_19520") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19519, "color_19519") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19518, "color_19518") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19517, "color_19517") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19516, "color_19516") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19515, "color_19515") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19235, "mem_19235") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19232, "mem_19232") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19056, "mem_19056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19053, "mem_19053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19449, "ext_mem_19449") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19450, "ext_mem_19450") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19050, "mem_19050") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19591, "mem_out_19591") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19590, "mem_out_19590") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                          struct memblock_device *mem_out_p_20401,
                                          struct memblock_device *mem_out_p_20402,
                                          struct memblock_device *mem_out_p_20403,
                                          struct memblock_device *mem_out_p_20404,
                                          struct memblock_device keys_mem_19046,
                                          struct memblock_device values_mem_19047,
                                          int64_t b_16538, int64_t g_16539)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device mem_19480;
    
    mem_19480.references = NULL;
    
    struct memblock_device segred_tmp_mem_20193;
    
    segred_tmp_mem_20193.references = NULL;
    
    struct memblock_device mem_19476;
    
    mem_19476.references = NULL;
    
    struct memblock_device mem_19472;
    
    mem_19472.references = NULL;
    
    struct memblock_device mem_19469;
    
    mem_19469.references = NULL;
    
    struct memblock_device ext_mem_19481;
    
    ext_mem_19481.references = NULL;
    
    struct memblock_device mem_19449;
    
    mem_19449.references = NULL;
    
    struct memblock_device segred_tmp_mem_20101;
    
    segred_tmp_mem_20101.references = NULL;
    
    struct memblock_device mem_19445;
    
    mem_19445.references = NULL;
    
    struct memblock_device mem_19441;
    
    mem_19441.references = NULL;
    
    struct memblock_device mem_19437;
    
    mem_19437.references = NULL;
    
    struct memblock_device mem_param_tmp_19740;
    
    mem_param_tmp_19740.references = NULL;
    
    struct memblock_device mem_param_tmp_19739;
    
    mem_param_tmp_19739.references = NULL;
    
    struct memblock_device incprefixes_mem_19805;
    
    incprefixes_mem_19805.references = NULL;
    
    struct memblock_device aggregates_mem_19803;
    
    aggregates_mem_19803.references = NULL;
    
    struct memblock_device incprefixes_mem_19801;
    
    incprefixes_mem_19801.references = NULL;
    
    struct memblock_device aggregates_mem_19799;
    
    aggregates_mem_19799.references = NULL;
    
    struct memblock_device incprefixes_mem_19797;
    
    incprefixes_mem_19797.references = NULL;
    
    struct memblock_device aggregates_mem_19795;
    
    aggregates_mem_19795.references = NULL;
    
    struct memblock_device incprefixes_mem_19793;
    
    incprefixes_mem_19793.references = NULL;
    
    struct memblock_device aggregates_mem_19791;
    
    aggregates_mem_19791.references = NULL;
    
    struct memblock_device status_flags_mem_19789;
    
    status_flags_mem_19789.references = NULL;
    
    struct memblock_device mem_19410;
    
    mem_19410.references = NULL;
    
    struct memblock_device mem_19406;
    
    mem_19406.references = NULL;
    
    struct memblock_device mem_19402;
    
    mem_19402.references = NULL;
    
    struct memblock_device mem_19398;
    
    mem_19398.references = NULL;
    
    struct memblock_device mem_19394;
    
    mem_19394.references = NULL;
    
    struct memblock_device mem_19389;
    
    mem_19389.references = NULL;
    
    struct memblock_device mem_19385;
    
    mem_19385.references = NULL;
    
    struct memblock_device ext_mem_19412;
    
    ext_mem_19412.references = NULL;
    
    struct memblock_device ext_mem_19413;
    
    ext_mem_19413.references = NULL;
    
    struct memblock_device mem_19357;
    
    mem_19357.references = NULL;
    
    struct memblock_device mem_19353;
    
    mem_19353.references = NULL;
    
    struct memblock_device mem_param_19345;
    
    mem_param_19345.references = NULL;
    
    struct memblock_device mem_param_19337;
    
    mem_param_19337.references = NULL;
    
    struct memblock_device ext_mem_19418;
    
    ext_mem_19418.references = NULL;
    
    struct memblock_device ext_mem_19419;
    
    ext_mem_19419.references = NULL;
    
    struct memblock_device mem_19329;
    
    mem_19329.references = NULL;
    
    struct memblock_device mem_19325;
    
    mem_19325.references = NULL;
    
    struct memblock_device mem_19321;
    
    mem_19321.references = NULL;
    
    struct memblock_device color_19531;
    
    color_19531.references = NULL;
    
    struct memblock_device color_19527;
    
    color_19527.references = NULL;
    
    struct memblock_device mem_19316;
    
    mem_19316.references = NULL;
    
    struct memblock_device mem_19312;
    
    mem_19312.references = NULL;
    
    struct memblock_device mem_19308;
    
    mem_19308.references = NULL;
    
    struct memblock_device ext_mem_19450;
    
    ext_mem_19450.references = NULL;
    
    struct memblock_device ext_mem_19451;
    
    ext_mem_19451.references = NULL;
    
    struct memblock_device ext_mem_19452;
    
    ext_mem_19452.references = NULL;
    
    struct memblock_device mem_19461;
    
    mem_19461.references = NULL;
    
    struct memblock_device mem_19456;
    
    mem_19456.references = NULL;
    
    struct memblock_device color_19525;
    
    color_19525.references = NULL;
    
    struct memblock_device color_19524;
    
    color_19524.references = NULL;
    
    struct memblock_device color_19523;
    
    color_19523.references = NULL;
    
    struct memblock_device color_19522;
    
    color_19522.references = NULL;
    
    struct memblock_device color_19521;
    
    color_19521.references = NULL;
    
    struct memblock_device color_19520;
    
    color_19520.references = NULL;
    
    struct memblock_device color_19519;
    
    color_19519.references = NULL;
    
    struct memblock_device color_19518;
    
    color_19518.references = NULL;
    
    struct memblock_device color_19517;
    
    color_19517.references = NULL;
    
    struct memblock_device color_19516;
    
    color_19516.references = NULL;
    
    struct memblock_device color_19515;
    
    color_19515.references = NULL;
    
    struct memblock_device mem_19238;
    
    mem_19238.references = NULL;
    
    struct memblock_device mem_19235;
    
    mem_19235.references = NULL;
    
    struct memblock_device mem_19232;
    
    mem_19232.references = NULL;
    
    struct memblock_device mem_19056;
    
    mem_19056.references = NULL;
    
    struct memblock_device mem_19053;
    
    mem_19053.references = NULL;
    
    struct memblock_device ext_mem_19463;
    
    ext_mem_19463.references = NULL;
    
    struct memblock_device ext_mem_19464;
    
    ext_mem_19464.references = NULL;
    
    struct memblock_device ext_mem_19465;
    
    ext_mem_19465.references = NULL;
    
    struct memblock_device mem_19050;
    
    mem_19050.references = NULL;
    
    struct memblock_device mem_out_19593;
    
    mem_out_19593.references = NULL;
    
    struct memblock_device mem_out_19592;
    
    mem_out_19592.references = NULL;
    
    struct memblock_device mem_out_19591;
    
    mem_out_19591.references = NULL;
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    
    bool cond_16542 = g_16539 == (int64_t) 0;
    int32_t iters_16543;
    
    if (cond_16542) {
        iters_16543 = 0;
    } else {
        iters_16543 = 16;
    }
    
    int64_t binop_y_19048 = (int64_t) 8 * g_16539;
    int64_t bytes_19049 = smax64((int64_t) 0, binop_y_19048);
    
    if (memblock_alloc_device(ctx, &mem_19050, bytes_19049, "mem_19050")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_19050, g_16539, (int64_t) 0,
                                 (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool loop_nonempty_16545 = slt32(0, iters_16543);
    int64_t i_16546 = sub64(g_16539, (int64_t) 1);
    bool x_16547 = sle64((int64_t) 0, i_16546);
    bool y_16548 = slt64(i_16546, g_16539);
    bool bounds_check_16549 = x_16547 && y_16548;
    bool loop_not_taken_16550 = !loop_nonempty_16545;
    bool protect_assert_disj_16551 = bounds_check_16549 || loop_not_taken_16550;
    bool index_certs_16552;
    
    if (!protect_assert_disj_16551) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_16546,
                               "] out of bounds for array of shape [",
                               (long long) g_16539, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  fut/manifut/util/radix_sort.fut:25:24-35\n   #2  fut/manifut/util/radix_sort.fut:53:31-62\n   #3  fut/manifut/util/radix_sort.fut:115:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  fut/manifut/util/radix_sort.fut:65:3-67:47\n   #6  fut/manifut/util/radix_sort.fut:121:3-57\n   #7  fut/entries.fut:29:16-88\n   #8  fut/entries.fut:24:1-34:52\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    float i64_res_16553 = sitofp_i64_f32(g_16539);
    bool suff_outer_par_17835;
    
    suff_outer_par_17835 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_0 <= b_16538;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_outer_par_0", (long) b_16538,
                suff_outer_par_17835 ? "true" : "false");
    
    int64_t max_group_sizze_18073;
    
    max_group_sizze_18073 = ctx->cuda.max_block_size;
    
    bool fits_18074 = sle64(g_16539, max_group_sizze_18073);
    bool suff_intra_par_18072;
    
    suff_intra_par_18072 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_1 <= g_16539;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_intra_par_1", (long) g_16539,
                suff_intra_par_18072 ? "true" : "false");
    
    bool intra_suff_and_fits_18075 = suff_intra_par_18072 && fits_18074;
    int64_t segmap_group_sizze_17955;
    
    segmap_group_sizze_17955 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_17839;
    
    int64_t num_groups_17956;
    int32_t max_num_groups_19604;
    
    max_num_groups_19604 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_num_groups_17841;
    num_groups_17956 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(b_16538,
                                                            segmap_group_sizze_17955),
                                                  sext_i32_i64(max_num_groups_19604))));
    
    int64_t nest_sizze_18622 = b_16538 * g_16539;
    int64_t segmap_group_sizze_18623;
    
    segmap_group_sizze_18623 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18599;
    
    bool suff_intra_par_18650;
    
    suff_intra_par_18650 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_intra_par_2 <= g_16539;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_intra_par_2", (long) g_16539,
                suff_intra_par_18650 ? "true" : "false");
    
    bool intra_suff_and_fits_18651 = fits_18074 && suff_intra_par_18650;
    int64_t segscan_group_sizze_18750;
    
    segscan_group_sizze_18750 =
        *ctx->tuning_params.sortBagAndDoStuffzisegscan_group_sizze_18420;
    
    int64_t num_groups_18751;
    int32_t max_num_groups_19605;
    
    max_num_groups_19605 =
        *ctx->tuning_params.sortBagAndDoStuffzisegscan_num_groups_18422;
    num_groups_18751 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18622,
                                                            segscan_group_sizze_18750),
                                                  sext_i32_i64(max_num_groups_19605))));
    
    int64_t segmap_group_sizze_18823;
    
    segmap_group_sizze_18823 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18371;
    
    int64_t segred_group_sizze_18860;
    
    segred_group_sizze_18860 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18215;
    
    int64_t num_groups_18861;
    int32_t max_num_groups_19606;
    
    max_num_groups_19606 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18217;
    num_groups_18861 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18622,
                                                            segred_group_sizze_18860),
                                                  sext_i32_i64(max_num_groups_19606))));
    
    int64_t segmap_group_sizze_18883;
    
    segmap_group_sizze_18883 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18203;
    
    int64_t segmap_usable_groups_18824 = sdiv_up_safe64(nest_sizze_18622,
                                                        segmap_group_sizze_18823);
    int64_t bytes_19052 = (int64_t) 4 * nest_sizze_18622;
    int64_t binop_y_19230 = (int64_t) 4 * b_16538;
    int64_t bytes_19231 = smax64((int64_t) 0, binop_y_19230);
    int64_t binop_y_19058 = (int64_t) 4 * g_16539;
    int64_t bytes_19059 = smax64((int64_t) 0, binop_y_19058);
    int64_t bytes_19455 = smax64((int64_t) 0, bytes_19052);
    int64_t binop_y_19323 = (int64_t) 8 * nest_sizze_18622;
    int64_t bytes_19324 = smax64((int64_t) 0, binop_y_19323);
    int64_t num_bytes_19495 = (int64_t) 4 * g_16539;
    int64_t num_bytes_19499 = (int64_t) 8 * g_16539;
    int64_t num_bytes_19505 = (int64_t) 4 * g_16539;
    int64_t num_bytes_19509 = (int64_t) 8 * g_16539;
    int64_t maxSubHelper_19526 = umax64(bytes_19049, bytes_19059);
    int64_t num_threads_19566 = segmap_group_sizze_17955 * num_groups_17956;
    int64_t total_sizze_19567 = num_bytes_19499 * num_threads_19566;
    int64_t total_sizze_19568 = num_bytes_19495 * num_threads_19566;
    int64_t total_sizze_19569 = bytes_19059 * num_threads_19566;
    int64_t total_sizze_19570 = bytes_19059 * num_threads_19566;
    int64_t total_sizze_19571 = bytes_19049 * num_threads_19566;
    int64_t total_sizze_19572 = bytes_19059 * num_threads_19566;
    int64_t total_sizze_19573 = bytes_19049 * num_threads_19566;
    int64_t total_sizze_19574 = bytes_19049 * num_threads_19566;
    int64_t total_sizze_19575 = bytes_19049 * num_threads_19566;
    int64_t total_sizze_19576 = bytes_19049 * num_threads_19566;
    int64_t total_sizze_19577 = bytes_19059 * num_threads_19566;
    int64_t total_sizze_19579 = b_16538 * num_bytes_19509;
    int64_t total_sizze_19580 = b_16538 * bytes_19049;
    int32_t local_memory_capacity_20148;
    
    local_memory_capacity_20148 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20148)) &&
        suff_outer_par_17835) {
        if (memblock_alloc_device(ctx, &mem_19053, bytes_19052, "mem_19053")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19053, (int64_t) 0,
                                                  keys_mem_19046, (int64_t) 0,
                                                  (int64_t) 1, g_16539,
                                                  b_16538) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19056, bytes_19052, "mem_19056")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19056, (int64_t) 0,
                                                  values_mem_19047, (int64_t) 0,
                                                  (int64_t) 1, g_16539,
                                                  b_16538) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19232, bytes_19231, "mem_19232")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19235, bytes_19052, "mem_19235")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19238, bytes_19052, "mem_19238")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19515, total_sizze_19567,
                                  "color_19515")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19516, total_sizze_19568,
                                  "color_19516")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19517, total_sizze_19569,
                                  "color_19517")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19518, total_sizze_19570,
                                  "color_19518")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19519, total_sizze_19571,
                                  "color_19519")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19520, total_sizze_19572,
                                  "color_19520")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19521, total_sizze_19573,
                                  "color_19521")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19522, total_sizze_19574,
                                  "color_19522")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19523, total_sizze_19575,
                                  "color_19523")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19524, total_sizze_19576,
                                  "color_19524")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &color_19525, total_sizze_19577,
                                  "color_19525")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_19607 = sext_i64_i32(sdiv_up64(b_16538,
                                                               segmap_group_sizze_17955));
        CUdeviceptr kernel_arg_20408 = mem_19053.mem;
        CUdeviceptr kernel_arg_20409 = mem_19056.mem;
        CUdeviceptr kernel_arg_20410 = mem_19232.mem;
        CUdeviceptr kernel_arg_20411 = mem_19235.mem;
        CUdeviceptr kernel_arg_20412 = mem_19238.mem;
        CUdeviceptr kernel_arg_20413 = color_19515.mem;
        CUdeviceptr kernel_arg_20414 = color_19516.mem;
        CUdeviceptr kernel_arg_20415 = color_19517.mem;
        CUdeviceptr kernel_arg_20416 = color_19518.mem;
        CUdeviceptr kernel_arg_20417 = color_19519.mem;
        CUdeviceptr kernel_arg_20418 = color_19520.mem;
        CUdeviceptr kernel_arg_20419 = color_19521.mem;
        CUdeviceptr kernel_arg_20420 = color_19522.mem;
        CUdeviceptr kernel_arg_20421 = color_19523.mem;
        CUdeviceptr kernel_arg_20422 = color_19524.mem;
        CUdeviceptr kernel_arg_20423 = color_19525.mem;
        
        if ((((((1 && num_groups_17956 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_17955 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_17956;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20405[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args, &b_16538,
                                         &g_16539, &iters_16543, &i_16546,
                                         &i64_res_16553, &num_groups_17956,
                                         &num_threads_19566,
                                         &virt_num_groups_19607,
                                         &kernel_arg_20408, &kernel_arg_20409,
                                         &kernel_arg_20410, &kernel_arg_20411,
                                         &kernel_arg_20412, &kernel_arg_20413,
                                         &kernel_arg_20414, &kernel_arg_20415,
                                         &kernel_arg_20416, &kernel_arg_20417,
                                         &kernel_arg_20418, &kernel_arg_20419,
                                         &kernel_arg_20420, &kernel_arg_20421,
                                         &kernel_arg_20422, &kernel_arg_20423};
            int64_t time_start_20406 = 0, time_end_20407 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_17962",
                        (long) num_groups_17956, (long) 1, (long) 1,
                        (long) segmap_group_sizze_17955, (long) 1, (long) 1,
                        (int) 0);
                time_start_20406 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_17962_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_17962_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_17962,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_17955, 1,
                                                  1, 0, NULL, kernel_args_20405,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20407 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_17962", time_end_20407 -
                        time_start_20406);
            }
        }
        ctx->failure_is_an_option = 1;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19053, "mem_19053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19056, "mem_19056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19515, "color_19515") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19516, "color_19516") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19517, "color_19517") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19518, "color_19518") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19519, "color_19519") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19520, "color_19520") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19521, "color_19521") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19522, "color_19522") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19523, "color_19523") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19524, "color_19524") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19525, "color_19525") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19456, bytes_19455, "mem_19456")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19456, (int64_t) 0,
                                                  mem_19235, (int64_t) 0,
                                                  (int64_t) 1, b_16538,
                                                  g_16539) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19235, "mem_19235") != 0)
            return 1;
        if (memblock_alloc_device(ctx, &mem_19461, bytes_19455, "mem_19461")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19461, (int64_t) 0,
                                                  mem_19238, (int64_t) 0,
                                                  (int64_t) 1, b_16538,
                                                  g_16539) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_unref_device(ctx, &mem_19238, "mem_19238") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19465, &mem_19232, "mem_19232") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19464, &mem_19456, "mem_19456") !=
            0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19463, &mem_19461, "mem_19461") !=
            0)
            return 1;
    } else {
        int32_t local_memory_capacity_20147;
        
        local_memory_capacity_20147 = ctx->cuda.max_shared_memory;
        if (sle64(num_bytes_19505 + srem64((int64_t) 8 - srem64(num_bytes_19505,
                                                                (int64_t) 8),
                                           (int64_t) 8) + (maxSubHelper_19526 +
                                                           srem64((int64_t) 8 -
                                                                  srem64(maxSubHelper_19526,
                                                                         (int64_t) 8),
                                                                  (int64_t) 8)) +
                  (bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19059 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19059,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19049 + srem64((int64_t) 8 - srem64(bytes_19049,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19049 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19049,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19049 + srem64((int64_t) 8 - srem64(bytes_19049,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + (bytes_19049 +
                                                         srem64((int64_t) 8 -
                                                                srem64(bytes_19049,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)) +
                  (bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                             (int64_t) 8),
                                        (int64_t) 8)) + ((int64_t) 4 * g_16539 +
                                                         srem64((int64_t) 8 -
                                                                srem64((int64_t) 4 *
                                                                       g_16539,
                                                                       (int64_t) 8),
                                                                (int64_t) 8)),
                  sext_i32_i64(local_memory_capacity_20147)) &&
            intra_suff_and_fits_18075) {
            if (memblock_alloc_device(ctx, &mem_19308, bytes_19231,
                                      "mem_19308")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19312, bytes_19455,
                                      "mem_19312")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19316, bytes_19455,
                                      "mem_19316")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19527, total_sizze_19579,
                                      "color_19527")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &color_19531, total_sizze_19580,
                                      "color_19531")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t num_chunks_19661 = sext_i64_i32(sdiv_up64(g_16539,
                                                              g_16539));
            int32_t virt_num_groups_19662 = sext_i64_i32(b_16538);
            unsigned int shared_sizze_20427 = (int64_t) 4 * g_16539;
            unsigned int shared_sizze_20429 = bytes_19059;
            unsigned int shared_sizze_20431 = bytes_19049;
            unsigned int shared_sizze_20433 = bytes_19049;
            unsigned int shared_sizze_20435 = bytes_19049;
            unsigned int shared_sizze_20437 = bytes_19049;
            unsigned int shared_sizze_20439 = bytes_19059;
            unsigned int shared_sizze_20441 = bytes_19059;
            unsigned int shared_sizze_20443 = maxSubHelper_19526;
            unsigned int shared_sizze_20445 = num_bytes_19505;
            CUdeviceptr kernel_arg_20447 = keys_mem_19046.mem;
            CUdeviceptr kernel_arg_20448 = values_mem_19047.mem;
            CUdeviceptr kernel_arg_20449 = mem_19308.mem;
            CUdeviceptr kernel_arg_20450 = mem_19312.mem;
            CUdeviceptr kernel_arg_20451 = mem_19316.mem;
            CUdeviceptr kernel_arg_20452 = color_19527.mem;
            CUdeviceptr kernel_arg_20453 = color_19531.mem;
            unsigned int shared_offset_20428 = 0;
            unsigned int shared_offset_20430 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8);
            unsigned int shared_offset_20432 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8);
            unsigned int shared_offset_20434 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8);
            unsigned int shared_offset_20436 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8);
            unsigned int shared_offset_20438 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8) +
                         (shared_sizze_20435 + (8 - shared_sizze_20435 % 8) %
                          8);
            unsigned int shared_offset_20440 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8) +
                         (shared_sizze_20435 + (8 - shared_sizze_20435 % 8) %
                          8) + (shared_sizze_20437 + (8 - shared_sizze_20437 %
                                                      8) % 8);
            unsigned int shared_offset_20442 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8) +
                         (shared_sizze_20435 + (8 - shared_sizze_20435 % 8) %
                          8) + (shared_sizze_20437 + (8 - shared_sizze_20437 %
                                                      8) % 8) +
                         (shared_sizze_20439 + (8 - shared_sizze_20439 % 8) %
                          8);
            unsigned int shared_offset_20444 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8) +
                         (shared_sizze_20435 + (8 - shared_sizze_20435 % 8) %
                          8) + (shared_sizze_20437 + (8 - shared_sizze_20437 %
                                                      8) % 8) +
                         (shared_sizze_20439 + (8 - shared_sizze_20439 % 8) %
                          8) + (shared_sizze_20441 + (8 - shared_sizze_20441 %
                                                      8) % 8);
            unsigned int shared_offset_20446 = 0 + (shared_sizze_20427 + (8 -
                                                                          shared_sizze_20427 %
                                                                          8) %
                                                    8) + (shared_sizze_20429 +
                                                          (8 -
                                                           shared_sizze_20429 %
                                                           8) % 8) +
                         (shared_sizze_20431 + (8 - shared_sizze_20431 % 8) %
                          8) + (shared_sizze_20433 + (8 - shared_sizze_20433 %
                                                      8) % 8) +
                         (shared_sizze_20435 + (8 - shared_sizze_20435 % 8) %
                          8) + (shared_sizze_20437 + (8 - shared_sizze_20437 %
                                                      8) % 8) +
                         (shared_sizze_20439 + (8 - shared_sizze_20439 % 8) %
                          8) + (shared_sizze_20441 + (8 - shared_sizze_20441 %
                                                      8) % 8) +
                         (shared_sizze_20443 + (8 - shared_sizze_20443 % 8) %
                          8);
            
            if ((((((1 && b_16538 != 0) && 1 != 0) && 1 != 0) && g_16539 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = b_16538;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20424[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &shared_offset_20428,
                                             &shared_offset_20430,
                                             &shared_offset_20432,
                                             &shared_offset_20434,
                                             &shared_offset_20436,
                                             &shared_offset_20438,
                                             &shared_offset_20440,
                                             &shared_offset_20442,
                                             &shared_offset_20444,
                                             &shared_offset_20446, &b_16538,
                                             &g_16539, &iters_16543, &i_16546,
                                             &i64_res_16553, &kernel_arg_20447,
                                             &kernel_arg_20448,
                                             &kernel_arg_20449,
                                             &kernel_arg_20450,
                                             &kernel_arg_20451,
                                             &kernel_arg_20452,
                                             &kernel_arg_20453};
                int64_t time_start_20425 = 0, time_end_20426 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_intragroup_18080",
                            (long) b_16538, (long) 1, (long) 1, (long) g_16539,
                            (long) 1, (long) 1, (int) (0 + (shared_sizze_20427 +
                                                            (8 -
                                                             shared_sizze_20427 %
                                                             8) % 8) +
                                                       (shared_sizze_20429 +
                                                        (8 -
                                                         shared_sizze_20429 %
                                                         8) % 8) +
                                                       (shared_sizze_20431 +
                                                        (8 -
                                                         shared_sizze_20431 %
                                                         8) % 8) +
                                                       (shared_sizze_20433 +
                                                        (8 -
                                                         shared_sizze_20433 %
                                                         8) % 8) +
                                                       (shared_sizze_20435 +
                                                        (8 -
                                                         shared_sizze_20435 %
                                                         8) % 8) +
                                                       (shared_sizze_20437 +
                                                        (8 -
                                                         shared_sizze_20437 %
                                                         8) % 8) +
                                                       (shared_sizze_20439 +
                                                        (8 -
                                                         shared_sizze_20439 %
                                                         8) % 8) +
                                                       (shared_sizze_20441 +
                                                        (8 -
                                                         shared_sizze_20441 %
                                                         8) % 8) +
                                                       (shared_sizze_20443 +
                                                        (8 -
                                                         shared_sizze_20443 %
                                                         8) % 8) +
                                                       (shared_sizze_20445 +
                                                        (8 -
                                                         shared_sizze_20445 %
                                                         8) % 8)));
                    time_start_20425 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_intragroup_18080_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_intragroup_18080_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_intragroup_18080,
                                                      grid[0], grid[1], grid[2],
                                                      g_16539, 1, 1, 0 +
                                                      (shared_sizze_20427 + (8 -
                                                                             shared_sizze_20427 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20429 + (8 -
                                                                             shared_sizze_20429 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20431 + (8 -
                                                                             shared_sizze_20431 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20433 + (8 -
                                                                             shared_sizze_20433 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20435 + (8 -
                                                                             shared_sizze_20435 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20437 + (8 -
                                                                             shared_sizze_20437 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20439 + (8 -
                                                                             shared_sizze_20439 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20441 + (8 -
                                                                             shared_sizze_20441 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20443 + (8 -
                                                                             shared_sizze_20443 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20445 + (8 -
                                                                             shared_sizze_20445 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20424, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20426 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_intragroup_18080",
                            time_end_20426 - time_start_20425);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &color_19527, "color_19527") != 0)
                return 1;
            if (memblock_unref_device(ctx, &color_19531, "color_19531") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19452, &mem_19308,
                                    "mem_19308") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19451, &mem_19312,
                                    "mem_19312") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19450, &mem_19316,
                                    "mem_19316") != 0)
                return 1;
        } else {
            int64_t segmap_usable_groups_18624 = sdiv_up64(nest_sizze_18622,
                                                           segmap_group_sizze_18623);
            
            if (memblock_alloc_device(ctx, &mem_19321, bytes_19455,
                                      "mem_19321")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_19716 = sext_i64_i32(sdiv_up64(b_16538 *
                                                                   g_16539,
                                                                   segmap_group_sizze_18623));
            CUdeviceptr kernel_arg_20457 = keys_mem_19046.mem;
            CUdeviceptr kernel_arg_20458 = mem_19321.mem;
            
            if ((((((1 && segmap_usable_groups_18624 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_18623 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_18624;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20454[] = {&ctx->global_failure, &b_16538,
                                             &g_16539, &kernel_arg_20457,
                                             &kernel_arg_20458};
                int64_t time_start_20455 = 0, time_end_20456 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_18628",
                            (long) segmap_usable_groups_18624, (long) 1,
                            (long) 1, (long) segmap_group_sizze_18623, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20455 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_18628_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_18628_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18628,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_18623,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20454, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20456 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_18628", time_end_20456 -
                            time_start_20455);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_alloc_device(ctx, &mem_19325, bytes_19324,
                                      "mem_19325")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_19730;
            
            group_sizze_19730 =
                *ctx->tuning_params.sortBagAndDoStuffzigroup_sizze_19730;
            
            int64_t num_groups_19731 = sdiv_up64(b_16538 * g_16539,
                                                 group_sizze_19730);
            CUdeviceptr kernel_arg_20462 = mem_19050.mem;
            CUdeviceptr kernel_arg_20463 = mem_19325.mem;
            
            if ((((((1 && num_groups_19731 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_19730 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_19731;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20459[] = {&b_16538, &g_16539,
                                             &kernel_arg_20462,
                                             &kernel_arg_20463};
                int64_t time_start_20460 = 0, time_end_20461 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.replicate_19727",
                            (long) num_groups_19731, (long) 1, (long) 1,
                            (long) group_sizze_19730, (long) 1, (long) 1,
                            (int) 0);
                    time_start_20460 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzireplicate_19727_runs,
                                              &ctx->sortBagAndDoStuffzireplicate_19727_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzireplicate_19727,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_19730, 1, 1,
                                                      0, NULL,
                                                      kernel_args_20459, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20461 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.replicate_19727",
                            time_end_20461 - time_start_20460);
                }
            }
            if (memblock_alloc_device(ctx, &mem_19329, bytes_19455,
                                      "mem_19329")) {
                err = 1;
                goto cleanup;
            }
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19329.mem + (int64_t) 0,
                                                mem_19321.mem + (int64_t) 0,
                                                b_16538 * g_16539 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (memblock_set_device(ctx, &mem_param_19337, &mem_19329,
                                    "mem_19329") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_19345, &mem_19325,
                                    "mem_19325") != 0)
                return 1;
            for (int32_t i_18636 = 0; i_18636 < iters_16543; i_18636++) {
                if (memblock_alloc_device(ctx, &mem_19353, bytes_19455,
                                          "mem_19353")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19353.mem + (int64_t) 0,
                                                    mem_param_19337.mem +
                                                    (int64_t) 0, b_16538 *
                                                    g_16539 * (int64_t) 4));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (memblock_alloc_device(ctx, &mem_19357, bytes_19324,
                                          "mem_19357")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_19357.mem + (int64_t) 0,
                                                    mem_param_19345.mem +
                                                    (int64_t) 0, b_16538 *
                                                    g_16539 * (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                
                int32_t defunc_2_radix_sort_step_arg_18641 = mul32(2, i_18636);
                int32_t defunc_0_get_bit_arg_18642 = add32(1,
                                                           defunc_2_radix_sort_step_arg_18641);
                bool cond_f_res_18643 = defunc_0_get_bit_arg_18642 == 31;
                bool cond_f_res_18644 = defunc_2_radix_sort_step_arg_18641 ==
                     31;
                int32_t local_memory_capacity_20067;
                
                local_memory_capacity_20067 = ctx->cuda.max_shared_memory;
                if (sle64(bytes_19059 + srem64((int64_t) 8 - srem64(bytes_19059,
                                                                    (int64_t) 8),
                                               (int64_t) 8) + (bytes_19049 +
                                                               srem64((int64_t) 8 -
                                                                      srem64(bytes_19049,
                                                                             (int64_t) 8),
                                                                      (int64_t) 8)) +
                          (bytes_19049 + srem64((int64_t) 8 -
                                                srem64(bytes_19049,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19049 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19049,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19049 + srem64((int64_t) 8 -
                                                srem64(bytes_19049,
                                                       (int64_t) 8),
                                                (int64_t) 8)) + (bytes_19049 +
                                                                 srem64((int64_t) 8 -
                                                                        srem64(bytes_19049,
                                                                               (int64_t) 8),
                                                                        (int64_t) 8)) +
                          (bytes_19059 + srem64((int64_t) 8 -
                                                srem64(bytes_19059,
                                                       (int64_t) 8),
                                                (int64_t) 8)),
                          sext_i32_i64(local_memory_capacity_20067)) &&
                    intra_suff_and_fits_18651) {
                    if (memblock_alloc_device(ctx, &mem_19385, bytes_19455,
                                              "mem_19385")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19389, bytes_19324,
                                              "mem_19389")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t num_chunks_19743 = sext_i64_i32(sdiv_up64(g_16539,
                                                                      g_16539));
                    int32_t virt_num_groups_19744 = sext_i64_i32(b_16538);
                    unsigned int shared_sizze_20467 = bytes_19059;
                    unsigned int shared_sizze_20469 = bytes_19049;
                    unsigned int shared_sizze_20471 = bytes_19049;
                    unsigned int shared_sizze_20473 = bytes_19049;
                    unsigned int shared_sizze_20475 = bytes_19049;
                    unsigned int shared_sizze_20477 = bytes_19049;
                    unsigned int shared_sizze_20479 = bytes_19059;
                    CUdeviceptr kernel_arg_20481 = mem_param_19337.mem;
                    CUdeviceptr kernel_arg_20482 = mem_param_19345.mem;
                    CUdeviceptr kernel_arg_20483 = mem_19385.mem;
                    CUdeviceptr kernel_arg_20484 = mem_19389.mem;
                    unsigned int shared_offset_20468 = 0;
                    unsigned int shared_offset_20470 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8);
                    unsigned int shared_offset_20472 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8) +
                                 (shared_sizze_20469 + (8 - shared_sizze_20469 %
                                                        8) % 8);
                    unsigned int shared_offset_20474 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8) +
                                 (shared_sizze_20469 + (8 - shared_sizze_20469 %
                                                        8) % 8) +
                                 (shared_sizze_20471 + (8 - shared_sizze_20471 %
                                                        8) % 8);
                    unsigned int shared_offset_20476 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8) +
                                 (shared_sizze_20469 + (8 - shared_sizze_20469 %
                                                        8) % 8) +
                                 (shared_sizze_20471 + (8 - shared_sizze_20471 %
                                                        8) % 8) +
                                 (shared_sizze_20473 + (8 - shared_sizze_20473 %
                                                        8) % 8);
                    unsigned int shared_offset_20478 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8) +
                                 (shared_sizze_20469 + (8 - shared_sizze_20469 %
                                                        8) % 8) +
                                 (shared_sizze_20471 + (8 - shared_sizze_20471 %
                                                        8) % 8) +
                                 (shared_sizze_20473 + (8 - shared_sizze_20473 %
                                                        8) % 8) +
                                 (shared_sizze_20475 + (8 - shared_sizze_20475 %
                                                        8) % 8);
                    unsigned int shared_offset_20480 = 0 + (shared_sizze_20467 +
                                                            (8 -
                                                             shared_sizze_20467 %
                                                             8) % 8) +
                                 (shared_sizze_20469 + (8 - shared_sizze_20469 %
                                                        8) % 8) +
                                 (shared_sizze_20471 + (8 - shared_sizze_20471 %
                                                        8) % 8) +
                                 (shared_sizze_20473 + (8 - shared_sizze_20473 %
                                                        8) % 8) +
                                 (shared_sizze_20475 + (8 - shared_sizze_20475 %
                                                        8) % 8) +
                                 (shared_sizze_20477 + (8 - shared_sizze_20477 %
                                                        8) % 8);
                    
                    if ((((((1 && b_16538 != 0) && 1 != 0) && 1 != 0) &&
                          g_16539 != 0) && 1 != 0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = b_16538;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20464[] = {&ctx->global_failure,
                                                     &shared_offset_20468,
                                                     &shared_offset_20470,
                                                     &shared_offset_20472,
                                                     &shared_offset_20474,
                                                     &shared_offset_20476,
                                                     &shared_offset_20478,
                                                     &shared_offset_20480,
                                                     &b_16538, &g_16539,
                                                     &i_16546,
                                                     &defunc_2_radix_sort_step_arg_18641,
                                                     &defunc_0_get_bit_arg_18642,
                                                     &cond_f_res_18643,
                                                     &cond_f_res_18644,
                                                     &kernel_arg_20481,
                                                     &kernel_arg_20482,
                                                     &kernel_arg_20483,
                                                     &kernel_arg_20484};
                        int64_t time_start_20465 = 0, time_end_20466 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBagAndDoStuff.segmap_intragroup_18657",
                                    (long) b_16538, (long) 1, (long) 1,
                                    (long) g_16539, (long) 1, (long) 1,
                                    (int) (0 + (shared_sizze_20467 + (8 -
                                                                      shared_sizze_20467 %
                                                                      8) % 8) +
                                           (shared_sizze_20469 + (8 -
                                                                  shared_sizze_20469 %
                                                                  8) % 8) +
                                           (shared_sizze_20471 + (8 -
                                                                  shared_sizze_20471 %
                                                                  8) % 8) +
                                           (shared_sizze_20473 + (8 -
                                                                  shared_sizze_20473 %
                                                                  8) % 8) +
                                           (shared_sizze_20475 + (8 -
                                                                  shared_sizze_20475 %
                                                                  8) % 8) +
                                           (shared_sizze_20477 + (8 -
                                                                  shared_sizze_20477 %
                                                                  8) % 8) +
                                           (shared_sizze_20479 + (8 -
                                                                  shared_sizze_20479 %
                                                                  8) % 8)));
                            time_start_20465 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagAndDoStuffzisegmap_intragroup_18657_runs,
                                                      &ctx->sortBagAndDoStuffzisegmap_intragroup_18657_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_intragroup_18657,
                                                              grid[0], grid[1],
                                                              grid[2], g_16539,
                                                              1, 1, 0 +
                                                              (shared_sizze_20467 +
                                                               (8 -
                                                                shared_sizze_20467 %
                                                                8) % 8) +
                                                              (shared_sizze_20469 +
                                                               (8 -
                                                                shared_sizze_20469 %
                                                                8) % 8) +
                                                              (shared_sizze_20471 +
                                                               (8 -
                                                                shared_sizze_20471 %
                                                                8) % 8) +
                                                              (shared_sizze_20473 +
                                                               (8 -
                                                                shared_sizze_20473 %
                                                                8) % 8) +
                                                              (shared_sizze_20475 +
                                                               (8 -
                                                                shared_sizze_20475 %
                                                                8) % 8) +
                                                              (shared_sizze_20477 +
                                                               (8 -
                                                                shared_sizze_20477 %
                                                                8) % 8) +
                                                              (shared_sizze_20479 +
                                                               (8 -
                                                                shared_sizze_20479 %
                                                                8) % 8), NULL,
                                                              kernel_args_20464,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20466 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBagAndDoStuff.segmap_intragroup_18657",
                                    time_end_20466 - time_start_20465);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_set_device(ctx, &ext_mem_19413, &mem_19385,
                                            "mem_19385") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19412, &mem_19389,
                                            "mem_19389") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx, &mem_19394, bytes_19324,
                                              "mem_19394")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19398, bytes_19324,
                                              "mem_19398")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19402, bytes_19324,
                                              "mem_19402")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19406, bytes_19324,
                                              "mem_19406")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc_device(ctx, &mem_19410, bytes_19455,
                                              "mem_19410")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (slt64((int64_t) 0, b_16538 * g_16539)) {
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegScan");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: number of elements processed sequentially per thread is m:",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: memory constraints is: ",
                                    (long long) 11, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: register constraints is: ",
                                    (long long) 3, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "SegScan: sumT' is: ", (long long) 8, '\n');
                        
                        int64_t numThreads_19785 = sdiv_up64(b_16538 * g_16539,
                                                             segscan_group_sizze_18750 *
                                                             (int64_t) 3) *
                                segscan_group_sizze_18750;
                        int64_t numGroups_19786 = sdiv_up64(b_16538 * g_16539,
                                                            segscan_group_sizze_18750 *
                                                            (int64_t) 3);
                        struct memblock_device
                        sortBagAndDoStuffziid_counter_mem_19787 =
                        ctx->sortBagAndDoStuffziid_counter_mem_19787;
                        
                        if (memblock_alloc_device(ctx, &status_flags_mem_19789,
                                                  numGroups_19786,
                                                  "status_flags_mem_19789")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19791,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "aggregates_mem_19791")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19793,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "incprefixes_mem_19793")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19795,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "aggregates_mem_19795")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19797,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "incprefixes_mem_19797")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19799,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "aggregates_mem_19799")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19801,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "incprefixes_mem_19801")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &aggregates_mem_19803,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "aggregates_mem_19803")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_alloc_device(ctx, &incprefixes_mem_19805,
                                                  (int64_t) 8 * numGroups_19786,
                                                  "incprefixes_mem_19805")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i8(ctx,
                                                         status_flags_mem_19789,
                                                         numGroups_19786,
                                                         (int8_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        unsigned int shared_sizze_20489 =
                                     smax64(smax64((int64_t) 1056,
                                                   sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                 segscan_group_sizze_18750,
                                                                                 (int64_t) 8) *
                                                                       (int64_t) 8 +
                                                                       (int64_t) 8 *
                                                                       segscan_group_sizze_18750,
                                                                       (int64_t) 8) *
                                                             (int64_t) 8 +
                                                             (int64_t) 8 *
                                                             segscan_group_sizze_18750,
                                                             (int64_t) 8) *
                                                   (int64_t) 8 + (int64_t) 8 *
                                                   segscan_group_sizze_18750),
                                            smax64(smax64(smax64((int64_t) 3 *
                                                                 segscan_group_sizze_18750 *
                                                                 (int64_t) 8,
                                                                 (int64_t) 3 *
                                                                 segscan_group_sizze_18750 *
                                                                 (int64_t) 8),
                                                          (int64_t) 3 *
                                                          segscan_group_sizze_18750 *
                                                          (int64_t) 8),
                                                   (int64_t) 3 *
                                                   segscan_group_sizze_18750 *
                                                   (int64_t) 8));
                        CUdeviceptr kernel_arg_20491 = mem_param_19337.mem;
                        CUdeviceptr kernel_arg_20492 = mem_19394.mem;
                        CUdeviceptr kernel_arg_20493 = mem_19398.mem;
                        CUdeviceptr kernel_arg_20494 = mem_19402.mem;
                        CUdeviceptr kernel_arg_20495 = mem_19406.mem;
                        CUdeviceptr kernel_arg_20496 = mem_19410.mem;
                        CUdeviceptr kernel_arg_20497 =
                                    sortBagAndDoStuffziid_counter_mem_19787.mem;
                        CUdeviceptr kernel_arg_20498 =
                                    status_flags_mem_19789.mem;
                        CUdeviceptr kernel_arg_20499 = aggregates_mem_19791.mem;
                        CUdeviceptr kernel_arg_20500 =
                                    incprefixes_mem_19793.mem;
                        CUdeviceptr kernel_arg_20501 = aggregates_mem_19795.mem;
                        CUdeviceptr kernel_arg_20502 =
                                    incprefixes_mem_19797.mem;
                        CUdeviceptr kernel_arg_20503 = aggregates_mem_19799.mem;
                        CUdeviceptr kernel_arg_20504 =
                                    incprefixes_mem_19801.mem;
                        CUdeviceptr kernel_arg_20505 = aggregates_mem_19803.mem;
                        CUdeviceptr kernel_arg_20506 =
                                    incprefixes_mem_19805.mem;
                        unsigned int shared_offset_20490 = 0;
                        
                        if ((((((1 && sdiv_up64(b_16538 * g_16539,
                                                segscan_group_sizze_18750 *
                                                (int64_t) 3) != 0) && 1 != 0) &&
                               1 != 0) && segscan_group_sizze_18750 != 0) &&
                             1 != 0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up64(b_16538 * g_16539,
                                                      segscan_group_sizze_18750 *
                                                      (int64_t) 3);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_20486[] = {&ctx->global_failure,
                                                         &shared_offset_20490,
                                                         &b_16538, &g_16539,
                                                         &defunc_2_radix_sort_step_arg_18641,
                                                         &defunc_0_get_bit_arg_18642,
                                                         &cond_f_res_18643,
                                                         &cond_f_res_18644,
                                                         &kernel_arg_20491,
                                                         &kernel_arg_20492,
                                                         &kernel_arg_20493,
                                                         &kernel_arg_20494,
                                                         &kernel_arg_20495,
                                                         &kernel_arg_20496,
                                                         &kernel_arg_20497,
                                                         &kernel_arg_20498,
                                                         &kernel_arg_20499,
                                                         &kernel_arg_20500,
                                                         &kernel_arg_20501,
                                                         &kernel_arg_20502,
                                                         &kernel_arg_20503,
                                                         &kernel_arg_20504,
                                                         &kernel_arg_20505,
                                                         &kernel_arg_20506};
                            int64_t time_start_20487 = 0, time_end_20488 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                        "sortBagAndDoStuff.segscan_18760",
                                        (long) sdiv_up64(b_16538 * g_16539,
                                                         segscan_group_sizze_18750 *
                                                         (int64_t) 3), (long) 1,
                                        (long) 1,
                                        (long) segscan_group_sizze_18750,
                                        (long) 1, (long) 1, (int) (0 +
                                                                   (shared_sizze_20489 +
                                                                    (8 -
                                                                     shared_sizze_20489 %
                                                                     8) % 8)));
                                time_start_20487 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->sortBagAndDoStuffzisegscan_18760_runs,
                                                          &ctx->sortBagAndDoStuffzisegscan_18760_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegscan_18760,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  segscan_group_sizze_18750,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_20489 +
                                                                   (8 -
                                                                    shared_sizze_20489 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_20486,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_20488 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "sortBagAndDoStuff.segscan_18760",
                                        time_end_20488 - time_start_20487);
                            }
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegMap");
                    
                    int32_t virt_num_groups_20056 =
                            sext_i64_i32(sdiv_up64(b_16538 * g_16539,
                                                   segmap_group_sizze_18823));
                    CUdeviceptr kernel_arg_20510 = mem_param_19337.mem;
                    CUdeviceptr kernel_arg_20511 = mem_param_19345.mem;
                    CUdeviceptr kernel_arg_20512 = mem_19353.mem;
                    CUdeviceptr kernel_arg_20513 = mem_19357.mem;
                    CUdeviceptr kernel_arg_20514 = mem_19394.mem;
                    CUdeviceptr kernel_arg_20515 = mem_19398.mem;
                    CUdeviceptr kernel_arg_20516 = mem_19402.mem;
                    CUdeviceptr kernel_arg_20517 = mem_19406.mem;
                    CUdeviceptr kernel_arg_20518 = mem_19410.mem;
                    
                    if ((((((1 && segmap_usable_groups_18824 != 0) && 1 != 0) &&
                           1 != 0) && segmap_group_sizze_18823 != 0) && 1 !=
                         0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = segmap_usable_groups_18824;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_20507[] = {&ctx->global_failure,
                                                     &b_16538, &g_16539,
                                                     &i_16546,
                                                     &kernel_arg_20510,
                                                     &kernel_arg_20511,
                                                     &kernel_arg_20512,
                                                     &kernel_arg_20513,
                                                     &kernel_arg_20514,
                                                     &kernel_arg_20515,
                                                     &kernel_arg_20516,
                                                     &kernel_arg_20517,
                                                     &kernel_arg_20518};
                        int64_t time_start_20508 = 0, time_end_20509 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log,
                                    "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                    "sortBagAndDoStuff.segmap_18829",
                                    (long) segmap_usable_groups_18824, (long) 1,
                                    (long) 1, (long) segmap_group_sizze_18823,
                                    (long) 1, (long) 1, (int) 0);
                            time_start_20508 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->sortBagAndDoStuffzisegmap_18829_runs,
                                                      &ctx->sortBagAndDoStuffzisegmap_18829_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18829,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              segmap_group_sizze_18823,
                                                              1, 1, 0, NULL,
                                                              kernel_args_20507,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_20509 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "sortBagAndDoStuff.segmap_18829",
                                    time_end_20509 - time_start_20508);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_unref_device(ctx, &mem_19394, "mem_19394") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19398, "mem_19398") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19402, "mem_19402") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19406, "mem_19406") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_19410, "mem_19410") !=
                        0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19413, &mem_19353,
                                            "mem_19353") != 0)
                        return 1;
                    if (memblock_set_device(ctx, &ext_mem_19412, &mem_19357,
                                            "mem_19357") != 0)
                        return 1;
                }
                if (memblock_unref_device(ctx, &mem_19353, "mem_19353") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_19357, "mem_19357") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19739,
                                        &ext_mem_19413, "ext_mem_19413") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_tmp_19740,
                                        &ext_mem_19412, "ext_mem_19412") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19337,
                                        &mem_param_tmp_19739,
                                        "mem_param_tmp_19739") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_19345,
                                        &mem_param_tmp_19740,
                                        "mem_param_tmp_19740") != 0)
                    return 1;
            }
            if (memblock_set_device(ctx, &ext_mem_19419, &mem_param_19337,
                                    "mem_param_19337") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19418, &mem_param_19345,
                                    "mem_param_19345") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19325, "mem_19325") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_19329, "mem_19329") != 0)
                return 1;
            if (memblock_alloc_device(ctx, &mem_19437, bytes_19231,
                                      "mem_19437")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19441, bytes_19455,
                                      "mem_19441")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc_device(ctx, &mem_19445, bytes_19455,
                                      "mem_19445")) {
                err = 1;
                goto cleanup;
            }
            if (slt64(g_16539 * (int64_t) 2, segred_group_sizze_18860)) {
                int64_t segment_sizze_nonzzero_20068 = smax64((int64_t) 1,
                                                              g_16539);
                int64_t num_threads_20069 = num_groups_18861 *
                        segred_group_sizze_18860;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) b_16538, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) g_16539, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                            (long long) squot64(segred_group_sizze_18860,
                                                segment_sizze_nonzzero_20068),
                            '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "required_groups",
                            (long long) sext_i64_i32(sdiv_up64(b_16538,
                                                               squot64(segred_group_sizze_18860,
                                                                       segment_sizze_nonzzero_20068))),
                            '\n');
                
                unsigned int shared_sizze_20522 = (int64_t) 4 *
                             segred_group_sizze_18860;
                CUdeviceptr kernel_arg_20524 = values_mem_19047.mem;
                CUdeviceptr kernel_arg_20525 = mem_19321.mem;
                CUdeviceptr kernel_arg_20526 = ext_mem_19418.mem;
                CUdeviceptr kernel_arg_20527 = mem_19437.mem;
                CUdeviceptr kernel_arg_20528 = mem_19441.mem;
                CUdeviceptr kernel_arg_20529 = mem_19445.mem;
                unsigned int shared_offset_20523 = 0;
                
                if ((((((1 && num_groups_18861 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_18860 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_18861;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_20519[] = {&ctx->global_failure,
                                                 &ctx->failure_is_an_option,
                                                 &ctx->global_failure_args,
                                                 &shared_offset_20523, &b_16538,
                                                 &g_16539, &num_groups_18861,
                                                 &segment_sizze_nonzzero_20068,
                                                 &kernel_arg_20524,
                                                 &kernel_arg_20525,
                                                 &kernel_arg_20526,
                                                 &kernel_arg_20527,
                                                 &kernel_arg_20528,
                                                 &kernel_arg_20529};
                    int64_t time_start_20520 = 0, time_end_20521 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "sortBagAndDoStuff.segred_small_18868",
                                (long) num_groups_18861, (long) 1, (long) 1,
                                (long) segred_group_sizze_18860, (long) 1,
                                (long) 1, (int) (0 + (shared_sizze_20522 + (8 -
                                                                            shared_sizze_20522 %
                                                                            8) %
                                                      8)));
                        time_start_20520 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->sortBagAndDoStuffzisegred_small_18868_runs,
                                                  &ctx->sortBagAndDoStuffzisegred_small_18868_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_small_18868,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_18860,
                                                          1, 1, 0 +
                                                          (shared_sizze_20522 +
                                                           (8 -
                                                            shared_sizze_20522 %
                                                            8) % 8), NULL,
                                                          kernel_args_20519,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20521 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "sortBagAndDoStuff.segred_small_18868",
                                time_end_20521 - time_start_20520);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            } else {
                int64_t groups_per_segment_20096 = sdiv_up64(num_groups_18861,
                                                             smax64((int64_t) 1,
                                                                    b_16538));
                int64_t elements_per_thread_20097 = sdiv_up64(g_16539,
                                                              segred_group_sizze_18860 *
                                                              groups_per_segment_20096);
                int64_t virt_num_groups_20098 = groups_per_segment_20096 *
                        b_16538;
                int64_t num_threads_20099 = num_groups_18861 *
                        segred_group_sizze_18860;
                int64_t threads_per_segment_20100 = groups_per_segment_20096 *
                        segred_group_sizze_18860;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) b_16538, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) g_16539, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                            (long long) virt_num_groups_20098, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_groups",
                            (long long) num_groups_18861, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "group_size",
                            (long long) segred_group_sizze_18860, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                            (long long) elements_per_thread_20097, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                            (long long) groups_per_segment_20096, '\n');
                if (memblock_alloc_device(ctx, &segred_tmp_mem_20101,
                                          (int64_t) 4 * virt_num_groups_20098,
                                          "segred_tmp_mem_20101")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device sortBagAndDoStuffzicounter_mem_20103 =
                                       ctx->sortBagAndDoStuffzicounter_mem_20103;
                unsigned int shared_sizze_20534 = 1;
                unsigned int shared_sizze_20536 = (int64_t) 4 *
                             segred_group_sizze_18860;
                CUdeviceptr kernel_arg_20538 = values_mem_19047.mem;
                CUdeviceptr kernel_arg_20539 = mem_19321.mem;
                CUdeviceptr kernel_arg_20540 = ext_mem_19418.mem;
                CUdeviceptr kernel_arg_20541 = mem_19437.mem;
                CUdeviceptr kernel_arg_20542 = mem_19441.mem;
                CUdeviceptr kernel_arg_20543 = mem_19445.mem;
                CUdeviceptr kernel_arg_20544 = segred_tmp_mem_20101.mem;
                CUdeviceptr kernel_arg_20545 =
                            sortBagAndDoStuffzicounter_mem_20103.mem;
                unsigned int shared_offset_20535 = 0;
                unsigned int shared_offset_20537 = 0 + (shared_sizze_20534 +
                                                        (8 -
                                                         shared_sizze_20534 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_18861 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_18860 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_18861;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_20531[] = {&ctx->global_failure,
                                                 &ctx->failure_is_an_option,
                                                 &ctx->global_failure_args,
                                                 &shared_offset_20535,
                                                 &shared_offset_20537, &b_16538,
                                                 &g_16539, &num_groups_18861,
                                                 &groups_per_segment_20096,
                                                 &elements_per_thread_20097,
                                                 &virt_num_groups_20098,
                                                 &threads_per_segment_20100,
                                                 &kernel_arg_20538,
                                                 &kernel_arg_20539,
                                                 &kernel_arg_20540,
                                                 &kernel_arg_20541,
                                                 &kernel_arg_20542,
                                                 &kernel_arg_20543,
                                                 &kernel_arg_20544,
                                                 &kernel_arg_20545};
                    int64_t time_start_20532 = 0, time_end_20533 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log,
                                "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                                "sortBagAndDoStuff.segred_large_18868",
                                (long) num_groups_18861, (long) 1, (long) 1,
                                (long) segred_group_sizze_18860, (long) 1,
                                (long) 1, (int) (0 + (shared_sizze_20534 + (8 -
                                                                            shared_sizze_20534 %
                                                                            8) %
                                                      8) + (shared_sizze_20536 +
                                                            (8 -
                                                             shared_sizze_20536 %
                                                             8) % 8)));
                        time_start_20532 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->sortBagAndDoStuffzisegred_large_18868_runs,
                                                  &ctx->sortBagAndDoStuffzisegred_large_18868_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_large_18868,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_18860,
                                                          1, 1, 0 +
                                                          (shared_sizze_20534 +
                                                           (8 -
                                                            shared_sizze_20534 %
                                                            8) % 8) +
                                                          (shared_sizze_20536 +
                                                           (8 -
                                                            shared_sizze_20536 %
                                                            8) % 8), NULL,
                                                          kernel_args_20531,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_20533 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "sortBagAndDoStuff.segred_large_18868",
                                time_end_20533 - time_start_20532);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            }
            if (memblock_unref_device(ctx, &mem_19321, "mem_19321") != 0)
                return 1;
            if (memblock_unref_device(ctx, &ext_mem_19418, "ext_mem_19418") !=
                0)
                return 1;
            
            int64_t segmap_usable_groups_18884 = sdiv_up64(b_16538,
                                                           segmap_group_sizze_18883);
            
            if (memblock_alloc_device(ctx, &mem_19449, bytes_19231,
                                      "mem_19449")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            int32_t virt_num_groups_20138 = sext_i64_i32(sdiv_up64(b_16538,
                                                                   segmap_group_sizze_18883));
            CUdeviceptr kernel_arg_20549 = mem_19437.mem;
            CUdeviceptr kernel_arg_20550 = mem_19449.mem;
            
            if ((((((1 && segmap_usable_groups_18884 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_18883 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_18884;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20546[] = {&ctx->global_failure, &b_16538,
                                             &i64_res_16553, &kernel_arg_20549,
                                             &kernel_arg_20550};
                int64_t time_start_20547 = 0, time_end_20548 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segmap_18887",
                            (long) segmap_usable_groups_18884, (long) 1,
                            (long) 1, (long) segmap_group_sizze_18883, (long) 1,
                            (long) 1, (int) 0);
                    time_start_20547 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegmap_18887_runs,
                                              &ctx->sortBagAndDoStuffzisegmap_18887_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18887,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_18883,
                                                      1, 1, 0, NULL,
                                                      kernel_args_20546, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20548 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segmap_18887", time_end_20548 -
                            time_start_20547);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_19437, "mem_19437") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19452, &mem_19449,
                                    "mem_19449") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19451, &mem_19441,
                                    "mem_19441") != 0)
                return 1;
            if (memblock_set_device(ctx, &ext_mem_19450, &mem_19445,
                                    "mem_19445") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &ext_mem_19465, &ext_mem_19452,
                                "ext_mem_19452") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19464, &ext_mem_19451,
                                "ext_mem_19451") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19463, &ext_mem_19450,
                                "ext_mem_19450") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_19050, "mem_19050") != 0)
        return 1;
    
    float i64_res_16692 = sitofp_i64_f32(b_16538);
    bool suff_outer_par_18897;
    
    suff_outer_par_18897 =
        *ctx->tuning_params.sortBagAndDoStuffzisuff_outer_par_3 <= g_16539;
    if (ctx->logging)
        fprintf(ctx->log, "Compared %s <= %ld: %s.\n",
                "sortBagAndDoStuff.suff_outer_par_3", (long) g_16539,
                suff_outer_par_18897 ? "true" : "false");
    
    int64_t segmap_group_sizze_18914;
    
    segmap_group_sizze_18914 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18901;
    
    int64_t segred_group_sizze_18957;
    
    segred_group_sizze_18957 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_group_sizze_18940;
    
    int64_t num_groups_18958;
    int32_t max_num_groups_20149;
    
    max_num_groups_20149 =
        *ctx->tuning_params.sortBagAndDoStuffzisegred_num_groups_18942;
    num_groups_18958 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(nest_sizze_18622,
                                                            segred_group_sizze_18957),
                                                  sext_i32_i64(max_num_groups_20149))));
    
    int64_t segmap_group_sizze_18970;
    
    segmap_group_sizze_18970 =
        *ctx->tuning_params.sortBagAndDoStuffzisegmap_group_sizze_18930;
    
    int32_t local_memory_capacity_20239;
    
    local_memory_capacity_20239 = ctx->cuda.max_shared_memory;
    if (sle64((int64_t) 0, sext_i32_i64(local_memory_capacity_20239)) &&
        suff_outer_par_18897) {
        int64_t segmap_usable_groups_18915 = sdiv_up64(g_16539,
                                                       segmap_group_sizze_18914);
        
        if (memblock_alloc_device(ctx, &mem_19469, bytes_19059, "mem_19469")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_20150 = sext_i64_i32(sdiv_up64(g_16539,
                                                               segmap_group_sizze_18914));
        CUdeviceptr kernel_arg_20554 = ext_mem_19464.mem;
        CUdeviceptr kernel_arg_20555 = mem_19469.mem;
        
        if ((((((1 && segmap_usable_groups_18915 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_18914 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_18915;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20551[] = {&ctx->global_failure, &b_16538,
                                         &g_16539, &i64_res_16692,
                                         &kernel_arg_20554, &kernel_arg_20555};
            int64_t time_start_20552 = 0, time_end_20553 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_18918",
                        (long) segmap_usable_groups_18915, (long) 1, (long) 1,
                        (long) segmap_group_sizze_18914, (long) 1, (long) 1,
                        (int) 0);
                time_start_20552 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_18918_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_18918_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18918,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_18914, 1,
                                                  1, 0, NULL, kernel_args_20551,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20553 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_18918", time_end_20553 -
                        time_start_20552);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_set_device(ctx, &ext_mem_19481, &mem_19469, "mem_19469") !=
            0)
            return 1;
    } else {
        if (memblock_alloc_device(ctx, &mem_19472, bytes_19052, "mem_19472")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhgpu_map_transpose_f32(ctx, mem_19472, (int64_t) 0,
                                                  ext_mem_19464, (int64_t) 0,
                                                  (int64_t) 1, g_16539,
                                                  b_16538) != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc_device(ctx, &mem_19476, bytes_19059, "mem_19476")) {
            err = 1;
            goto cleanup;
        }
        if (slt64(b_16538 * (int64_t) 2, segred_group_sizze_18957)) {
            int64_t segment_sizze_nonzzero_20160 = smax64((int64_t) 1, b_16538);
            int64_t num_threads_20161 = num_groups_18958 *
                    segred_group_sizze_18957;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed-small");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_segments",
                        (long long) g_16539, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segment_size",
                        (long long) b_16538, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                        (long long) squot64(segred_group_sizze_18957,
                                            segment_sizze_nonzzero_20160),
                        '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "required_groups",
                        (long long) sext_i64_i32(sdiv_up64(g_16539,
                                                           squot64(segred_group_sizze_18957,
                                                                   segment_sizze_nonzzero_20160))),
                        '\n');
            
            unsigned int shared_sizze_20559 = (int64_t) 4 *
                         segred_group_sizze_18957;
            CUdeviceptr kernel_arg_20561 = mem_19472.mem;
            CUdeviceptr kernel_arg_20562 = mem_19476.mem;
            unsigned int shared_offset_20560 = 0;
            
            if ((((((1 && num_groups_18958 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_18957 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_18958;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20556[] = {&ctx->global_failure,
                                             &shared_offset_20560, &b_16538,
                                             &g_16539, &num_groups_18958,
                                             &segment_sizze_nonzzero_20160,
                                             &kernel_arg_20561,
                                             &kernel_arg_20562};
                int64_t time_start_20557 = 0, time_end_20558 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segred_small_18963",
                            (long) num_groups_18958, (long) 1, (long) 1,
                            (long) segred_group_sizze_18957, (long) 1, (long) 1,
                            (int) (0 + (shared_sizze_20559 + (8 -
                                                              shared_sizze_20559 %
                                                              8) % 8)));
                    time_start_20557 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegred_small_18963_runs,
                                              &ctx->sortBagAndDoStuffzisegred_small_18963_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_small_18963,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_18957,
                                                      1, 1, 0 +
                                                      (shared_sizze_20559 + (8 -
                                                                             shared_sizze_20559 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20556, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20558 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segred_small_18963",
                            time_end_20558 - time_start_20557);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
        } else {
            int64_t groups_per_segment_20188 = sdiv_up64(num_groups_18958,
                                                         smax64((int64_t) 1,
                                                                g_16539));
            int64_t elements_per_thread_20189 = sdiv_up64(b_16538,
                                                          segred_group_sizze_18957 *
                                                          groups_per_segment_20188);
            int64_t virt_num_groups_20190 = groups_per_segment_20188 * g_16539;
            int64_t num_threads_20191 = num_groups_18958 *
                    segred_group_sizze_18957;
            int64_t threads_per_segment_20192 = groups_per_segment_20188 *
                    segred_group_sizze_18957;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed-large");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_segments",
                        (long long) g_16539, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "segment_size",
                        (long long) b_16538, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                        (long long) virt_num_groups_20190, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "num_groups",
                        (long long) num_groups_18958, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "group_size",
                        (long long) segred_group_sizze_18957, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                        (long long) elements_per_thread_20189, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                        (long long) groups_per_segment_20188, '\n');
            if (memblock_alloc_device(ctx, &segred_tmp_mem_20193, (int64_t) 4 *
                                      virt_num_groups_20190,
                                      "segred_tmp_mem_20193")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device sortBagAndDoStuffzicounter_mem_20195 =
                                   ctx->sortBagAndDoStuffzicounter_mem_20195;
            unsigned int shared_sizze_20567 = 1;
            unsigned int shared_sizze_20569 = (int64_t) 4 *
                         segred_group_sizze_18957;
            CUdeviceptr kernel_arg_20571 = mem_19472.mem;
            CUdeviceptr kernel_arg_20572 = mem_19476.mem;
            CUdeviceptr kernel_arg_20573 = segred_tmp_mem_20193.mem;
            CUdeviceptr kernel_arg_20574 =
                        sortBagAndDoStuffzicounter_mem_20195.mem;
            unsigned int shared_offset_20568 = 0;
            unsigned int shared_offset_20570 = 0 + (shared_sizze_20567 + (8 -
                                                                          shared_sizze_20567 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_18958 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_18957 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_18958;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_20564[] = {&ctx->global_failure,
                                             &shared_offset_20568,
                                             &shared_offset_20570, &b_16538,
                                             &g_16539, &num_groups_18958,
                                             &groups_per_segment_20188,
                                             &elements_per_thread_20189,
                                             &virt_num_groups_20190,
                                             &threads_per_segment_20192,
                                             &kernel_arg_20571,
                                             &kernel_arg_20572,
                                             &kernel_arg_20573,
                                             &kernel_arg_20574};
                int64_t time_start_20565 = 0, time_end_20566 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log,
                            "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                            "sortBagAndDoStuff.segred_large_18963",
                            (long) num_groups_18958, (long) 1, (long) 1,
                            (long) segred_group_sizze_18957, (long) 1, (long) 1,
                            (int) (0 + (shared_sizze_20567 + (8 -
                                                              shared_sizze_20567 %
                                                              8) % 8) +
                                   (shared_sizze_20569 + (8 -
                                                          shared_sizze_20569 %
                                                          8) % 8)));
                    time_start_20565 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->sortBagAndDoStuffzisegred_large_18963_runs,
                                              &ctx->sortBagAndDoStuffzisegred_large_18963_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegred_large_18963,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_18957,
                                                      1, 1, 0 +
                                                      (shared_sizze_20567 + (8 -
                                                                             shared_sizze_20567 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_20569 + (8 -
                                                                             shared_sizze_20569 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_20564, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_20566 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "sortBagAndDoStuff.segred_large_18963",
                            time_end_20566 - time_start_20565);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
        }
        if (memblock_unref_device(ctx, &mem_19472, "mem_19472") != 0)
            return 1;
        
        int64_t segmap_usable_groups_18971 = sdiv_up64(g_16539,
                                                       segmap_group_sizze_18970);
        
        if (memblock_alloc_device(ctx, &mem_19480, bytes_19059, "mem_19480")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        int32_t virt_num_groups_20230 = sext_i64_i32(sdiv_up64(g_16539,
                                                               segmap_group_sizze_18970));
        CUdeviceptr kernel_arg_20578 = mem_19476.mem;
        CUdeviceptr kernel_arg_20579 = mem_19480.mem;
        
        if ((((((1 && segmap_usable_groups_18971 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_18970 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_18971;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_20575[] = {&ctx->global_failure, &g_16539,
                                         &i64_res_16692, &kernel_arg_20578,
                                         &kernel_arg_20579};
            int64_t time_start_20576 = 0, time_end_20577 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log,
                        "Launching %s with grid size [%ld, %ld, %ld] and block size [%ld, %ld, %ld]; shared memory: %d bytes.\n",
                        "sortBagAndDoStuff.segmap_18974",
                        (long) segmap_usable_groups_18971, (long) 1, (long) 1,
                        (long) segmap_group_sizze_18970, (long) 1, (long) 1,
                        (int) 0);
                time_start_20576 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->sortBagAndDoStuffzisegmap_18974_runs,
                                          &ctx->sortBagAndDoStuffzisegmap_18974_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->sortBagAndDoStuffzisegmap_18974,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_18970, 1,
                                                  1, 0, NULL, kernel_args_20575,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_20577 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "sortBagAndDoStuff.segmap_18974", time_end_20577 -
                        time_start_20576);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_19476, "mem_19476") != 0)
            return 1;
        if (memblock_set_device(ctx, &ext_mem_19481, &mem_19480, "mem_19480") !=
            0)
            return 1;
    }
    if (memblock_set_device(ctx, &mem_out_19590, &ext_mem_19463,
                            "ext_mem_19463") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19591, &ext_mem_19464,
                            "ext_mem_19464") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19592, &ext_mem_19465,
                            "ext_mem_19465") != 0)
        return 1;
    if (memblock_set_device(ctx, &mem_out_19593, &ext_mem_19481,
                            "ext_mem_19481") != 0)
        return 1;
    (*mem_out_p_20401).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20401, &mem_out_19590,
                            "mem_out_19590") != 0)
        return 1;
    (*mem_out_p_20402).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20402, &mem_out_19591,
                            "mem_out_19591") != 0)
        return 1;
    (*mem_out_p_20403).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20403, &mem_out_19592,
                            "mem_out_19592") != 0)
        return 1;
    (*mem_out_p_20404).references = NULL;
    if (memblock_set_device(ctx, &*mem_out_p_20404, &mem_out_19593,
                            "mem_out_19593") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref_device(ctx, &mem_19480, "mem_19480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &segred_tmp_mem_20193,
                                  "segred_tmp_mem_20193") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19476, "mem_19476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19472, "mem_19472") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19469, "mem_19469") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19481, "ext_mem_19481") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19449, "mem_19449") != 0)
            return 1;
        if (memblock_unref_device(ctx, &segred_tmp_mem_20101,
                                  "segred_tmp_mem_20101") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19445, "mem_19445") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19441, "mem_19441") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19437, "mem_19437") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19740,
                                  "mem_param_tmp_19740") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_19739,
                                  "mem_param_tmp_19739") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19805,
                                  "incprefixes_mem_19805") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19803,
                                  "aggregates_mem_19803") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19801,
                                  "incprefixes_mem_19801") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19799,
                                  "aggregates_mem_19799") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19797,
                                  "incprefixes_mem_19797") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19795,
                                  "aggregates_mem_19795") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_19793,
                                  "incprefixes_mem_19793") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_19791,
                                  "aggregates_mem_19791") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_19789,
                                  "status_flags_mem_19789") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19410, "mem_19410") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19406, "mem_19406") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19402, "mem_19402") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19398, "mem_19398") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19394, "mem_19394") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19389, "mem_19389") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19385, "mem_19385") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19412, "ext_mem_19412") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19413, "ext_mem_19413") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19357, "mem_19357") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19353, "mem_19353") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19345, "mem_param_19345") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_19337, "mem_param_19337") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19418, "ext_mem_19418") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19419, "ext_mem_19419") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19329, "mem_19329") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19325, "mem_19325") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19321, "mem_19321") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19531, "color_19531") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19527, "color_19527") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19316, "mem_19316") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19312, "mem_19312") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19308, "mem_19308") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19450, "ext_mem_19450") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19451, "ext_mem_19451") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19452, "ext_mem_19452") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19461, "mem_19461") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19456, "mem_19456") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19525, "color_19525") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19524, "color_19524") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19523, "color_19523") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19522, "color_19522") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19521, "color_19521") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19520, "color_19520") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19519, "color_19519") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19518, "color_19518") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19517, "color_19517") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19516, "color_19516") != 0)
            return 1;
        if (memblock_unref_device(ctx, &color_19515, "color_19515") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19238, "mem_19238") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19235, "mem_19235") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19232, "mem_19232") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19056, "mem_19056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19053, "mem_19053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19463, "ext_mem_19463") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19464, "ext_mem_19464") != 0)
            return 1;
        if (memblock_unref_device(ctx, &ext_mem_19465, "ext_mem_19465") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_19050, "mem_19050") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19593, "mem_out_19593") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19592, "mem_out_19592") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19591, "mem_out_19591") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_out_19590, "mem_out_19590") != 0)
            return 1;
    }
    return err;
}

int futhark_entry_randomField(struct futhark_context *ctx,
                              struct futhark_f32_2d **out0, const int64_t in0,
                              const int64_t in1, const int64_t in2)
{
    int64_t seed_16361;
    int64_t b_16362;
    int64_t g_16363;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    seed_16361 = in0;
    b_16362 = in1;
    g_16363 = in2;
    if (ret == 0) {
        ret = futrts_entry_randomField(ctx, &mem_out_19590, seed_16361, b_16362,
                                       g_16363);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19590;
            (*out0)->shape[0] = b_16362;
            (*out0)->shape[1] = g_16363;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_sortBag(struct futhark_context *ctx,
                          struct futhark_f32_2d **out0,
                          struct futhark_f32_2d **out1, const
                          struct futhark_f32_2d *in0, const
                          struct futhark_f32_2d *in1)
{
    int64_t b_16392;
    int64_t g_16393;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19591;
    
    mem_out_19591.references = NULL;
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    
    struct memblock_device values_mem_19047;
    
    values_mem_19047.references = NULL;
    
    struct memblock_device keys_mem_19046;
    
    keys_mem_19046.references = NULL;
    keys_mem_19046 = in0->mem;
    b_16392 = in0->shape[0];
    g_16393 = in0->shape[1];
    values_mem_19047 = in1->mem;
    b_16392 = in1->shape[0];
    g_16393 = in1->shape[1];
    if (!((b_16392 == in0->shape[0] && g_16393 == in0->shape[1]) && (b_16392 ==
                                                                     in1->shape[0] &&
                                                                     g_16393 ==
                                                                     in1->shape[1]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: %s entry point arguments have invalid sizes.\n",
                          "sortBag");
    }
    if (ret == 0) {
        ret = futrts_entry_sortBag(ctx, &mem_out_19590, &mem_out_19591,
                                   keys_mem_19046, values_mem_19047, b_16392,
                                   g_16393);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19590;
            (*out0)->shape[0] = b_16392;
            (*out0)->shape[1] = g_16393;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_19591;
            (*out1)->shape[0] = b_16392;
            (*out1)->shape[1] = g_16393;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_sortBagAndDoStuff(struct futhark_context *ctx,
                                    struct futhark_f32_2d **out0,
                                    struct futhark_f32_2d **out1,
                                    struct futhark_f32_1d **out2,
                                    struct futhark_f32_1d **out3, const
                                    struct futhark_f32_2d *in0, const
                                    struct futhark_f32_2d *in1)
{
    int64_t b_16538;
    int64_t g_16539;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    
    struct memblock_device mem_out_19593;
    
    mem_out_19593.references = NULL;
    
    struct memblock_device mem_out_19592;
    
    mem_out_19592.references = NULL;
    
    struct memblock_device mem_out_19591;
    
    mem_out_19591.references = NULL;
    
    struct memblock_device mem_out_19590;
    
    mem_out_19590.references = NULL;
    
    struct memblock_device values_mem_19047;
    
    values_mem_19047.references = NULL;
    
    struct memblock_device keys_mem_19046;
    
    keys_mem_19046.references = NULL;
    keys_mem_19046 = in0->mem;
    b_16538 = in0->shape[0];
    g_16539 = in0->shape[1];
    values_mem_19047 = in1->mem;
    b_16538 = in1->shape[0];
    g_16539 = in1->shape[1];
    if (!((b_16538 == in0->shape[0] && g_16539 == in0->shape[1]) && (b_16538 ==
                                                                     in1->shape[0] &&
                                                                     g_16539 ==
                                                                     in1->shape[1]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: %s entry point arguments have invalid sizes.\n",
                          "sortBagAndDoStuff");
    }
    if (ret == 0) {
        ret = futrts_entry_sortBagAndDoStuff(ctx, &mem_out_19590,
                                             &mem_out_19591, &mem_out_19592,
                                             &mem_out_19593, keys_mem_19046,
                                             values_mem_19047, b_16538,
                                             g_16539);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_19590;
            (*out0)->shape[0] = b_16538;
            (*out0)->shape[1] = g_16539;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_19591;
            (*out1)->shape[0] = b_16538;
            (*out1)->shape[1] = g_16539;
            assert((*out2 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out2)->mem = mem_out_19592;
            (*out2)->shape[0] = b_16538;
            assert((*out3 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out3)->mem = mem_out_19593;
            (*out3)->shape[0] = g_16539;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
  
